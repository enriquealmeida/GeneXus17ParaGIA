function IsQueryObjectPreview(){return void 0!=window.external&&void 0!=window.external.SendText}function IsDashboardEdit(){return"undefined"!==typeof UCDashboardForEditor}function UpdateQueryObjectPreview(a){for(var c=Object.keys(qv.collection)[0],c=qv.collection[c],a=JSON.parse(a),e=Object.keys(a),b=0;b<e.length;b++){var m=e[b];c[m]=a[m]}c.realShow()}
var HIGHCHARTS_COLOR_PREFIX="highcharts-color-",HIGHCHARTS_MAX_COLORS=36,HIGHCHARTS_CUSTOM_COLOR=[],qv={collection:{},fadeTimeouts:{}},QueryViewerVisible={Always:"Always",Yes:"Yes",No:"No",Never:"Never"},QueryViewerElementType={Axis:"Axis",Datum:"Datum"},QueryViewerAxisType={Rows:"Rows",Columns:"Columns",Pages:"Pages"},QueryViewerFilterType={ShowAllValues:"ShowAllValues",HideAllValues:"HideAllValues",ShowSomeValues:"ShowSomeValues"},QueryViewerAxisOrderType={None:"None",Ascending:"Ascending",Descending:"Descending",
Custom:"Custom"},QueryViewerExpandCollapseType={ExpandAllValues:"ExpandAllValues",CollapseAllValues:"CollapseAllValues",ExpandSomeValues:"ExpandSomeValues"},QueryViewerDataType={Integer:"integer",Real:"real",Character:"character",Boolean:"boolean",Date:"date",DateTime:"datetime",GUID:"guid",GeoPoint:"geopoint"},QueryViewerAggregationType={Sum:"Sum",Average:"Average",Count:"Count",Max:"Max",Min:"Min"},QueryViewerOutputType={Card:"Card",Chart:"Chart",PivotTable:"PivotTable",Table:"Table",Map:"Map",
Default:"Default"},QueryViewerMapType={Choropleth:"Choropleth",Bubble:"Bubble"},QueryViewerRegion={Country:"Country",Continent:"Continent",World:"World"},QueryViewerContinent={SouthAmerica:"SouthAmerica",NorthAmerica:"NorthAmerica",Africa:"Africa",Asia:"Asia",Europe:"Europe",Oceania:"Oceania",Antarctica:"Antarctica"},QueryViewerCountry={AF:"AF",AL:"AL",DZ:"DZ",AD:"AD",AO:"AO",AI:"AI",AG:"AG",AR:"AR",AM:"AM",AU:"AU",AT:"AT",AZ:"AZ",BH:"BH",BD:"BD",BB:"BB",BY:"BY",BE:"BE",BZ:"BZ",BJ:"BJ",BM:"BM",BT:"BT",
BO:"BO",BA:"BA",BW:"BW",BR:"BR",VG:"VG",BN:"BN",BG:"BG",BF:"BF",BI:"BI",KH:"KH",CM:"CM",CA:"CA",CV:"CV",CF:"CF",TD:"TD",CL:"CL",CN:"CN",CO:"CO",KM:"KM",CK:"CK",CR:"CR",HR:"HR",CU:"CU",CY:"CY",CZ:"CZ",CD:"CD",DK:"DK",DJ:"DJ",DM:"DM",DO:"DO",TL:"TL",EC:"EC",EG:"EG",SV:"SV",GQ:"GQ",ER:"ER",EE:"EE",SZ:"SZ",ET:"ET",FO:"FO",FJ:"FJ",FI:"FI",FR:"FR",GA:"GA",GM:"GM",GE:"GE",DE:"DE",GH:"GH",GR:"GR",GL:"GL",GD:"GD",GT:"GT",GN:"GN",GW:"GW",GY:"GY",HT:"HT",HN:"HN",HU:"HU",IS:"IS",IN:"IN",ID:"ID",IR:"IR",IQ:"IQ",
IE:"IE",IL:"IL",IT:"IT",CI:"CI",JM:"JM",JP:"JP",JO:"JO",KZ:"KZ",KE:"KE",KI:"KI",XK:"XK",KW:"KW",KG:"KG",LA:"LA",LV:"LV",LB:"LB",LS:"LS",LR:"LR",LY:"LY",LI:"LI",LT:"LT",LU:"LU",MG:"MG",MW:"MW",MY:"MY",MV:"MV",ML:"ML",MT:"MT",MH:"MH",MR:"MR",MU:"MU",MX:"MX",FM:"FM",MD:"MD",MC:"MC",MN:"MN",ME:"ME",MA:"MA",MZ:"MZ",MM:"MM",NA:"NA",NR:"NR",NP:"NP",NL:"NL",NZ:"NZ",NI:"NI",NE:"NE",NG:"NG",KP:"KP",MK:"MK",NO:"NO",OM:"OM",PK:"PK",PW:"PW",PA:"PA",PS:"PS",PG:"PG",PY:"PY",PE:"PE",PH:"PH",PL:"PL",PT:"PT",PR:"PR",
QA:"QA",CG:"CG",RO:"RO",RU:"RU",RW:"RW",KN:"KN",LC:"LC",VC:"VC",WS:"WS",SM:"SM",ST:"ST",SA:"SA",SN:"SN",RS:"RS",SC:"SC",SL:"SL",SG:"SG",SK:"SK",SI:"SI",SB:"SB",SO:"SO",ZA:"ZA",KR:"KR",SS:"SS",ES:"ES",LK:"LK",SD:"SD",SR:"SR",SE:"SE",CH:"CH",SY:"SY",TW:"TW",TJ:"TJ",TZ:"TZ",TH:"TH",BS:"BS",TG:"TG",TK:"TK",TO:"TO",TT:"TT",TN:"TN",TR:"TR",TM:"TM",TV:"TV",UG:"UG",UA:"UA",AE:"AE",GB:"GB",US:"US",UY:"UY",UZ:"UZ",VU:"VU",VA:"VA",VE:"VE",VN:"VN",EH:"EH",YE:"YE",ZM:"ZM",ZW:"ZW"},QueryViewerMapLibrary={Highcharts:"Highcharts",
ECharts:"ECharts"},QueryViewerChartType={Column:"Column",Column3D:"Column3D",StackedColumn:"StackedColumn",StackedColumn3D:"StackedColumn3D",StackedColumn100:"StackedColumn100",Bar:"Bar",StackedBar:"StackedBar",StackedBar100:"StackedBar100",Area:"Area",StackedArea:"StackedArea",StackedArea100:"StackedArea100",SmoothArea:"SmoothArea",StepArea:"StepArea",Line:"Line",StackedLine:"StackedLine",StackedLine100:"StackedLine100",SmoothLine:"SmoothLine",StepLine:"StepLine",Pie:"Pie",Pie3D:"Pie3D",Doughnut:"Doughnut",
Doughnut3D:"Doughnut3D",LinearGauge:"LinearGauge",CircularGauge:"CircularGauge",Radar:"Radar",FilledRadar:"FilledRadar",PolarArea:"PolarArea",Funnel:"Funnel",Pyramid:"Pyramid",ColumnLine:"ColumnLine",Column3DLine:"Column3DLine",Timeline:"Timeline",SmoothTimeline:"SmoothTimeline",StepTimeline:"StepTimeline",Sparkline:"Sparkline"},QueryViewerConditionOperator={Equal:"EQ",LessThan:"LT",GreaterThan:"GT",LessOrEqual:"LE",GreaterOrEqual:"GE",NotEqual:"NE",Interval:"IN"},QueryViewerConditionOperatorSymbol=
{Equal:"=",LessThan:"<",GreaterThan:">",LessOrEqual:"≤",GreaterOrEqual:"≥",NotEqual:"<>",Interval:"-"},QueryViewerOrientation={Horizontal:"Horizontal",Vertical:"Vertical"},QueryViewerPlotSeries={InTheSameChart:"InTheSameChart",InSeparateCharts:"InSeparateCharts"},QueryViewerShowDataAs={Values:"Values",Percentages:"Percentages",ValuesAndPercentages:"ValuesAndPercentages"},QueryViewerSubtotals={Yes:"Yes",Hidden:"Hidden",No:"No"},QueryViewerTrendPeriod={SinceTheBeginning:"SinceTheBeginning",LastYear:"LastYear",
LastSemester:"LastSemester",LastQuarter:"LastQuarter",LastMonth:"LastMonth",LastWeek:"LastWeek",LastDay:"LastDay",LastHour:"LastHour",LastMinute:"LastMinute",LastSecond:"LastSecond"},QueryViewerXAxisLabels={Horizontally:"Horizontally",Rotated30:"Rotated30",Rotated45:"Rotated45",Rotated60:"Rotated60",Vertically:"Vertically"},QueryViewerAutoresizeType={Both:"Both",Vertical:"Vertical",Horizontal:"Horizontal"},QueryViewerTranslationType={NoTranslation:"None",Static:"Static",RunTime:"RunTime"};
qv.util={color:{getHtmlColor:function(a){return"string"==typeof a||"number"==typeof a?gx.color.toHex?-1==a?"":"#"+gx.color.toHex(a):"#"+gxToHex(a):void 0==a?"#000000":a.Html},parseCSSColor:function(a){return"rgb"==a.substring(0,3)?(a=a.replace("rgb","").replace("(","").replace(")","").split(","),this.getHtmlColor(gx.color.rgb(parseInt(a[0]),parseInt(a[1]),parseInt(a[2])))):a},convertValueToColor:function(a){a=-1==a.indexOf("#")?"#"+a:a;for(a=a.substring(1,a.length);6>a.length;)a="0"+a;return"#"+a},
IsHexaColor:function(a){return 6===a.length&&!isNaN(parseInt(a,16))},lightenDarkenColor:function(a,c){var e=!1;"#"==a[0]&&(a=a.slice(1),e=!0);var b=parseInt(a,16),m=(b>>16)+c;255<m?m=255:0>m&&(m=0);var d=(b>>8&255)+c;255<d?d=255:0>d&&(d=0);b=(b&255)+c;255<b?b=255:0>b&&(b=0);return(e?"#":"")+(b|d<<8|m<<16).toString(16)}},css:function(){var a={};return{replaceCssClasses:function(c){for(;0<=(posIni=c.indexOf("gxpl_cssReplace("));){posFin=c.indexOf(")",posIni);className=c.substring(posIni+16,posFin);
var e=className;if(void 0!=a[e])style=a[e];else{for(var b=e,m=void 0,d=gx.theme+".css",w=!1,k=void 0,s=0;s<document.styleSheets.length;s++)if(null!=document.styleSheets[s].href&&0<=document.styleSheets[s].href.indexOf(d)){w=!0;m=document.styleSheets[s];break}w&&(m.cssRules?crossRules=m.cssRules:m.rules&&(crossRules=m.rules));m=Number.MAX_SAFE_INTEGER;for(s=0;s<crossRules.length;s++)d=crossRules[s],void 0!=d.selectorText&&(0==d.selectorText.toLowerCase().indexOf("."+b.toLowerCase())&&d.selectorText.length<
m)&&(k=d.style,m=d.selectorText.length);styleObj=k;void 0!=styleObj?(b=styleObj,k="",""!=b.color&&(k+=(""==k?"":";")+"color:"+qv.util.color.parseCSSColor(b.color)),""!=b.backgroundColor&&(k+=(""==k?"":";")+"backgroundColor:"+qv.util.color.parseCSSColor(b.backgroundColor)),""!=b.borderStyle&&(k+=(""==k?"":";")+"borderStyle:"+b.borderStyle),""!=b.borderWidth&&(k+=(""==k?"":";")+"borderThickness:"+b.borderWidth.replace("pt","").replace("px","")),""!=b.borderColor&&(k+=(""==k?"":";")+"borderColor:"+qv.util.color.parseCSSColor(b.borderColor)),
""!=b.fontFamily&&(k+=(""==k?"":";")+"fontFamily:"+b.fontFamily.replace(/"/g,"").replace(/'/g,"")),""!=b.fontSize&&(k+=(""==k?"":";")+"fontSize:"+b.fontSize.replace("pt","").replace("px","")),""!=b.fontWeight&&(k+=(""==k?"":";")+"fontWeight:"+b.fontWeight),""!=b.fontStyle&&(k+=(""==k?"":";")+"fontStyle:"+b.fontStyle),""!=b.textDecoration&&(k+=(""==k?"":";")+"textDecoration:"+b.textDecoration),styleTransformed=k,style=a[e]=styleTransformed):style=""}toReplace=c.substring(posIni,posFin+1);c=c.replace(toReplace,
style)}return c},parseStyle:function(a){var e="";if(""!=a&&void 0!=a){if(0>a.indexOf(":"))return a;for(var a=a.split(";"),b=0;b<a.length;b++)var m=a[b].split(":"),d=m[0],e=e+((""==e?"":",")+'"'+("borderThickness"==d?"borderWidth":d)+'":"'+m[1]+("borderThickness"==d||"fontSize"==d?"px":"")+'"');return"{"+e+"}"}return"{}"}}}(),autorefresh:function(){return{UpdateLayoutSameGroup:function(a,c,e){function b(a,b){function c(a,b){for(var f=0;f<a.Metadata.Parameters.length;f++){var g=a.Metadata.Parameters[f];
if(g.IsCollection&&g.Name==b)return[f,g]}return[null,null]}function m(a,b){for(var f=null,g=0;g<a.Parameters.length;g++)if(a.Parameters[g].Name==b){f=a.Parameters[g];break}return f}function o(a,b){for(var f="",g="I"==b.Type||"R"==b.Type||"B"==b.Type?"":'"',d=0;d<a.Filter.Values.length;d++)f+=(""==f?"":",")+g+a.Filter.Values[d]+g;return"["+f+"]"}var e=[];a._parametersCloned||(a._parametersCloned=!0,a.Parameters=qv.util.cloneObject(a.Parameters));for(var g=qv.util.GetOrderedElementsKeys(a,b),x=a.GetMetadata(),
p=0;p<g.length;p++){var r=parseInt(g[p].substr(6,4));sourceElement=b[r];var f=c(a,sourceElement.Name),r=f[0],f=f[1],h=qv.util.GetElementInCollection(x,"Name",sourceElement.Name),z=null!=h,C=!z;z&&(qv.util.MergeFields(sourceElement,h),e.push(h));C&&null!=f&&(f=o(sourceElement,f),a.Object?(h=eval(a.Object),h[r+2]=f,a.Object=JSON.stringify(h)):(r=m(a,sourceElement.Name),null==r&&(r={},r.Name=sourceElement.Name,a.Parameters.push(r)),r.Value=f))}a.Axes=e}function m(a,c,k){b(a,c);a.RememberLayout=!1;a.AllowElementsOrderChange=
k;qv.util.autorefresh.SaveAxesAndParametersState(a);a.realShow()}if(void 0!=a.AutoRefreshGroup&&null!=a.AutoRefreshGroup&&""!=a.AutoRefreshGroup&&""!=qv.util.trim(a.AutoRefreshGroup))for(index in qv.util.autorefresh.DeleteAxesAndParametersState(a),qv.collection)qViewerOther=qv.collection[index],qv.services.IsObjectSet(qViewerOther)&&(qViewerOther.userControlId()!=a.userControlId()&&a.AutoRefreshGroup==qViewerOther.AutoRefreshGroup)&&(qViewerOther._isAutorefresh=!0,void 0!=qViewerOther.Metadata&&void 0!=
qViewerOther.Metadata.Parameters?m(qViewerOther,c,e):qViewerOther.getQueryParameters(function(a,b){var k=qv.util.dom.xmlDocument(a),k=qv.util.dom.getSingleElementByTagName(k,"gxpl_ParameterCollection");void 0==b.Metadata&&(b.Metadata={});b.Metadata.Parameters=[];for(var k=qv.util.dom.getMultipleElementsByTagName(k,"gxpl_Parameter"),s=0;s<k.length;s++){var o={};o.Name=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[s],"Name"));o.Type=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[s],
"Type"));o.IsCollection=gx.lang.gxBoolean(qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(k[s],"IsCollection")));b.Metadata.Parameters.push(o)}m(b,c,e)}))},LoadAxesAndParametersState:function(a){function c(a,b){for(var c=0;c<b.length;c++){var k=b[c],e;a:{e=a;for(var o=k.Name,v=0;v<e.length;v++)if(e[v].Name.toLowerCase()==o.toLowerCase()){e=e[v];break a}e=null}null!=e&&Object.assign(e,k)}return a}var e=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",
b=e+"Axes",e=qv.util.storage.getItem(e+"Parameters"),b=qv.util.storage.getItem(b);null!=e&&""!=e&&(a.Parameters=c(JSON.parse(e),a.Parameters),a.RememberLayout=!1);null!=b&&""!=b&&(a.Axes=c(JSON.parse(b),a.Axes),a.RememberLayout=!1)},SaveAxesAndParametersState:function(a){var c=window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",e=c+"Axes";qv.util.storage.setItem(c+"Parameters",JSON.stringify(a.Parameters));qv.util.storage.setItem(e,JSON.stringify(a.Axes))},DeleteAxesAndParametersState:function(a){var a=
window.location.pathname+"_"+a.userControlId()+"_"+a.ObjectId+"_"+a.ObjectName+"_",c=a+"Axes";qv.util.storage.removeItem(a+"Parameters");qv.util.storage.removeItem(c)}}}(),dom:{getSingleElementByTagName:function(a,c){var e;e=this.getMultipleElementsByTagName(a,c);return 0<e.length?e[0]:null},getMultipleElementsByTagName:function(a,c){return!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?a.getElementsByTagName(c):a.selectNodes(c)},getBooleanAttribute:function(a,c,e){a=a.getAttribute(c);return null==
a?e:"true"==a.toLowerCase()},getCharacterAttribute:function(a,c,e){a=a.getAttribute(c);return null==a?e:a},getValueNode:function(a){return null==a||void 0==a?null:null!=a.firstChild&&void 0!=a.firstChild?a.firstChild.nodeValue:null},selectXPathNode:function(a,c){var e;a.evaluate?(e=a.evaluate(c,a,null,XPathResult.ANY_TYPE,null),e=e.iterateNext()):(e=a.selectNodes(c),e=0<e.length?e[0]:null);return e},xmlDocument:function(a){var c;!gx.util.browser.isIE()||12<=gx.util.browser.ieVersion()?(parser=new DOMParser,
c=parser.parseFromString(a,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a));return c},getEmptyContainer:function(a){for(a=a.getContainerControl();a.firstChild;)a.removeChild(a.firstChild);return a},setStyle:function(a,c){for(key in c)a.style[key]=c[key]},createText:function(a,c){var e=document.createTextNode(c);a.appendChild(e);return e},createElement:function(a,c,e,b,m,d,w){c=document.createElement(c);""!=e&&(c.id=e);""!=b&&(c.className=b);qv.util.dom.setStyle(c,
m);"function"==typeof d&&(c.onclick=d);""!=w&&qv.util.dom.createText(c,w);null!=a&&a.appendChild(c);return c},createTable:function(a,c,e){a=qv.util.dom.createElement(a,"TABLE","",c,e,null,"");c=document.createElement("TBODY");a.appendChild(c);return c},createRow:function(a){return qv.util.dom.createElement(a,"TR","","",{},null,"")},createCell:function(a,c,e,b,m){a=qv.util.dom.createElement(a,"TD","","",b,null,m);1!=c&&(a.colSpan=c);""!=e&&(a.align=e);return a},createSpan:function(a,c,e,b,m,d,w){a=
qv.util.dom.createElement(a,"SPAN",c,e,m,d,w);""!=b&&(a.title=b);return a},createDiv:function(a,c,e,b,m,d){a=qv.util.dom.createElement(a,"DIV",c,e,m,null,d);""!=b&&(a.title=b);return a},createAnchor:function(a,c,e,b){return qv.util.dom.createElement(a,"A",c,"",e,null,b)},createInput:function(a,c,e,b){a=qv.util.dom.createElement(a,"INPUT",c,"",b,null,"");""!=e&&(a.type=e);return a},createSelect:function(a,c){return qv.util.dom.createElement(a,"SELECT",c,"",{},null,"")},createOption:function(a,c,e,
b){a=qv.util.dom.createElement(a,"OPTION","","",{},null,b);""!=c&&(a.value=c);e&&(a.selected=!0);return a},createIcon:function(a,c,e,b){a=qv.util.dom.createElement(a,"I","","material-icons",e,null,b);""!=c&&(a.title=c);return a}},storage:function(){function a(a,e,b){if(b){var m=new Date;m.setTime(m.getTime()+864E5*b);b="; expires="+m.toGMTString()}else b="";document.cookie=a+"="+e+b+"; path=/"}return{setItem:function(c,e){localStorage?localStorage.setItem(c,e):a(c,e,365)},getItem:function(a){if(localStorage)return localStorage.getItem(a);
a:{for(var a=a+"=",e=document.cookie.split(";"),b=0;b<e.length;b++){for(var m=e[b];" "==m.charAt(0);)m=m.substring(1,m.length);if(0==m.indexOf(a)){a=m.substring(a.length,m.length);break a}}a=null}return a},removeItem:function(c){localStorage?localStorage.removeItem(c):a(c,"",-1)}}}(),ExecuteTracker:function(a,c){for(var e=[],b=0;b<gx.fx.ctx.trackers.length;b++)gx.fx.ctx.trackers[b].types[0]==a&&(e[e.length]=gx.fx.ctx.trackers[b]);for(b=0;b<e.length;b++){var m=gx.O;gx.O=e[b].obj;var d=gx.csv.cmpCtx;
gx.csv.cmpCtx=e[b].obj.CmpContext;gx.evt.setProcessing(!1);e[b].hdl.call(e[b].obj,null,null,c);gx.O=m;gx.csv.cmpCtx=d}},satisfyStyle:function(a,c){switch(c.Operator){case QueryViewerConditionOperator.Equal:return a==c.Value1;case QueryViewerConditionOperator.GreaterThan:return a>c.Value1;case QueryViewerConditionOperator.LessThan:return a<c.Value1;case QueryViewerConditionOperator.GreaterOrEqual:return a>=c.Value1;case QueryViewerConditionOperator.LessOrEqual:return a<=c.Value1;case QueryViewerConditionOperator.NotEqual:return a!=
c.Value1;case QueryViewerConditionOperator.Interval:return a>=c.Value1&&a<=c.Value2}},isGeneXusPreview:function(){return IsQueryObjectPreview()},getGenerator:function(){return gx.gen.isDotNet()?"C#":gx.gen.isJava()?"Java":""},getErrorFromText:function(a){return'<Result OK="True"></Result>'==a?"":a.replace('<Result OK="False"><Dsc>',"").replace("</Dsc></Result>","")},trim:function(a){return"string"!=typeof a?null:a.replace(/^[\s]+/,"").replace(/[\s]+$/,"").replace(/[\s]{2,}/," ")},capitalize:function(a){return a.charAt(0).toUpperCase()+
a.slice(1)},decapitalize:function(a){return a.charAt(0).toLowerCase()+a.slice(1)},dateToString:function(a,c){var e=a.getStringWithFmt("Y4MD").replace(/\//g,"-");c&&(a.TimeFmt=24,e+=" "+a.getTimeString(!0,!0));return e},cloneObject:function(a){return JSON.parse(JSON.stringify(a))},endsWith:function(a,c){return a.substr(a.length-c.length,c.length)==c},startsWith:function(a,c){return a.substr(0,c.length)==c},formatNumber:function(a,c,e,b){a=gx.num.formatNumber(a,c,e,0,!0,!1);if(b&&0<=a.indexOf(gx.decimalPoint)){for(;qv.util.endsWith(a,
"0");)a=a.slice(0,-1);qv.util.endsWith(a,gx.decimalPoint)&&(a=a.slice(0,-1))}return a},formatDateTime:function(a,c,e,b,m,d,w){a=new gx.date.gxdate(a,"Y4MD");e=a.getStringWithFmt(e);c==QueryViewerDataType.DateTime&&(a.TimeFmt=24,e+=" "+a.getTimeString(m,d,b,w));return e},seconsdToText:function(a){return 60>a?qv.util.formatNumber(Math.round(a),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerSeconds")):3600>a?qv.util.formatNumber(Math.round(a/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+
qv.util.decapitalize(gx.getMessage("GXPL_QViewerMinutes")):86400>a?qv.util.formatNumber(Math.round(a/60/60),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerHours")):2630016>a?qv.util.formatNumber(Math.round(a/60/60/24),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerDays")):31557600>a?qv.util.formatNumber(Math.round(a/60/60/24/30.44),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerMonths")):qv.util.formatNumber(Math.round(a/
60/60/24/365.25),0,"ZZZZZZZZZZZZZZ9",!1)+" "+qv.util.decapitalize(gx.getMessage("GXPL_QViewerYears"))},ParseNumericPicture:function(a,c){var e,b,m="",d="";if(""==c)e=a==QueryViewerDataType.Integer?0:2,b=!1;else{0>c.indexOf(".")&&0>c.indexOf(",")?(e=0,b=!1):0<=c.indexOf(".")&&0>c.indexOf(",")?(e=a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!1):(e=0>c.indexOf(".")&&0<=c.indexOf(",")?0:a==QueryViewerDataType.Integer?0:c.length-c.indexOf(".")-1,b=!0);for(var w=1,k=0;k<c.length;k++){var s=
c.substr(k,1);if(("."==s||","==s||"9"==s||"Z"==s)&&1==w)w=2;"."!=s&&(","!=s&&"9"!=s&&"Z"!=s)&&2==w&&(w=3);switch(w){case 1:m+=s;break;case 3:d+=s}}}return{DecimalPrecision:e,UseThousandsSeparator:b,Prefix:m,Suffix:d}},ParseDateTimePicture:function(a,c){var e=gx.dateFormat,b=a==QueryViewerDataType.DateTime,m=a==QueryViewerDataType.DateTime,d=a==QueryViewerDataType.DateTime,w=a==QueryViewerDataType.DateTime;""!=c&&(0<=c.indexOf("9999")&&0>e.indexOf("Y4")?e=e.replace("Y","Y4"):0>c.indexOf("9999")&&0<=
e.indexOf("Y4")&&(e=e.replace("Y4","Y")),a==QueryViewerDataType.DateTime&&(b=c.indexOf(" "),0<=b?(w=c.substr(b+1,c.length-b),b=2<=w.length,m=5<=w.length,d=8<=w.length,w=12==w.length):w=d=m=b=!1));return{DateFormat:e,IncludeHours:b,IncludeMinutes:m,IncludeSeconds:d,IncludeMilliseconds:w}},evaluate:function(a,c,e){for(var b=1;b<=e.length;b++)a=a.replace(c+b.toString(),e[b-1]);return eval(a)},aggregate:function(a,c,e){var a=a||QueryViewerAggregationType.Sum,b=null,m=null,d=null,w=null;switch(a){case QueryViewerAggregationType.Sum:for(a=
0;a<c.length;a++)null!=c[a]&&(b+=c[a]);return b;case QueryViewerAggregationType.Average:for(a=0;a<c.length;a++)null!=c[a]&&(b+=c[a],m+=e[a]);return null!=b?b/m:null;case QueryViewerAggregationType.Count:for(a=0;a<e.length;a++)m+=e[a];return m;case QueryViewerAggregationType.Max:for(a=0;a<c.length;a++)w=null==w?c[a]:c[a]>w?c[a]:w;return w;case QueryViewerAggregationType.Min:for(a=0;a<c.length;a++)d=null==d?c[a]:c[a]<d?c[a]:d;return d}},anyError:function(a){return 0==a.indexOf('<Result OK="False"><Dsc>')},
showActivityIndicator:function(a){var c='qv.util.showActivityIndicatorMain("'+a.getContainerControl().id+'");',a=a.userControlId();qv.fadeTimeouts[a]&&clearTimeout(qv.fadeTimeouts[a]);qv.fadeTimeouts[a]=setTimeout(c,500)},showActivityIndicatorMain:function(a){a=document.getElementById(a);gx.dom.addClass(a,"gx-qv-loading");for(var c=0;c<a.childNodes.length;c++)gx.dom.addClass(a.childNodes[c],"gx-qv-loading-children")},hideActivityIndicator:function(a){var c=a.userControlId();qv.fadeTimeouts[c]&&(clearTimeout(qv.fadeTimeouts[c]),
qv.fadeTimeouts[c]=void 0);a=a.getContainerControl();gx.dom.removeClass(a,"gx-qv-loading");for(c=0;c<a.childNodes.length;c++)gx.dom.removeClass(a.childNodes[c],"gx-qv-loading-children")},renderError:function(a,c){if(IsQueryObjectPreview()&&!IsDashboardEdit())window.external.SendText(a.ControlName,c);else{var e=qv.util.dom.getEmptyContainer(a);qv.util.dom.createDiv(e,"","gx-qv-centered-text","",{width:gx.dom.addUnits(a.Width),height:gx.dom.addUnits(a.Height),borderColor:"silver",borderWidth:"thin",
borderStyle:"solid"},gx.getMessage("GXPL_QViewerError")+": "+c);a._ControlRenderedTo=void 0;qv.util.hideActivityIndicator(a)}},GetDesigntimeMetadata:function(a){for(var c=[],e=0;e<a.Metadata.Axes.length;e++){var b=a.Metadata.Axes[e];if(!b.IsComponent){var m={};m.Name=b.Name;m.Title=b.Title;m.DataField=b.DataField;m.Visible=b.Visible;m.Type=QueryViewerElementType.Axis;m.Axis=b.Axis;m.Filter=b.Filter;m.ExpandCollapse=b.ExpandCollapse;m.AxisOrder=b.Order;m.Format={};m.Format.Subtotals=b.Subtotals;m.Format.Picture=
b.Picture;m.Format.CanDragToPages=b.CanDragToPages;m.Format.Style=b.Style;0<b.ValuesStyles.length&&(m.Format.ValuesStyles=b.ValuesStyles);m.Actions={};m.Actions.RaiseItemClick=b.RaiseItemClick;c.push(m)}}for(e=0;e<a.Metadata.Data.length;e++)b=a.Metadata.Data[e],b.IsComponent||(m={},m.Name=b.Name,m.Title=b.Title,m.DataField=b.DataField,m.Visible=b.Visible,m.Type=QueryViewerElementType.Datum,m.Axis="",m.Aggregation=b.Aggregation,m.Format={},m.Format.Picture=b.Picture,m.Format.Style=b.Style,m.Format.TargetValue=
b.TargetValue,m.Format.MaximumValue=m.Format.TargetValue,0<b.ConditionalStyles.length&&(m.Format.ConditionalStyles=b.ConditionalStyles),m.Actions={},m.Actions.RaiseItemClick=b.RaiseItemClick,c.push(m));return c},MergeFields:function(a,c){if(c.Visible!=QueryViewerVisible.Never&&(c.Visible=a.Hidden?QueryViewerVisible.No:QueryViewerVisible.Yes,c.Type==QueryViewerElementType.Axis)){c.Axis=a.Axis;if(a.Order)switch(c.AxisOrder.Type){case QueryViewerAxisOrderType.None:case QueryViewerAxisOrderType.Ascending:case QueryViewerAxisOrderType.Descending:c.AxisOrder.Type=
a.Order;break;case QueryViewerAxisOrderType.Custom:a.Order==QueryViewerAxisOrderType.Descending&&c.AxisOrder.Values.reverse()}c.Format.Subtotals!=QueryViewerSubtotals.No&&void 0!=a.Subtotals&&(c.Format.Subtotals=a.Subtotals==QueryViewerSubtotals.Yes?QueryViewerSubtotals.Yes:QueryViewerSubtotals.Hidden);a.Filter&&(c.Filter=a.Filter);a.ExpandCollapse&&(c.ExpandCollapse=a.ExpandCollapse)}},GetOrderedElementsKeys:function(a,c){function e(a,b,d){return Array(b-(""+a).length+1).join(d||"0")+a}for(var b=
[],m=0;m<c.length;m++){var d=c[m],w=a.RealType==QueryViewerOutputType.Table?"0":d.Type==QueryViewerElementType.Axis?"1":"2";if(null!=d.Position){var k;if(a.RealType==QueryViewerOutputType.PivotTable)if(d.Type==QueryViewerElementType.Axis)switch(d.Axis){case QueryViewerAxisType.Columns:k="B";break;case QueryViewerAxisType.Pages:k="C";break;default:k="A"}else k="D";else k="A";w+=k+e(d.Position,4,"0")+e(m,4,"0")}else w+="Z"+e(m,4,"0")+e(m,4,"0");b.push(w)}b.sort();return b},GetContainerControlClass:function(a){return""!=
a.Class?a.Class+"-"+a.RealType.toLowerCase():""},GetContainerControlClasses:function(a){var c=qv.util.GetContainerControlClass(a),e;switch(a.RealType){case QueryViewerOutputType.Card:e="qv-card";break;case QueryViewerOutputType.Chart:e="qv-chart";break;case QueryViewerOutputType.PivotTable:e="qv-pivottable";break;case QueryViewerOutputType.Table:e="qv-table";break;case QueryViewerOutputType.Map:e="qv-map"}""!=c&&(e+=" "+c);return e},SetUserControlClass:function(a,c){a.getContainerControl().className=
"gx_usercontrol "+c},GetElementInCollection:function(a,c,e){for(var b=0;b<a.length;b++){var m=a[b];if(m[c]==e)return m}return null},IsInteger:function(a){return Number.isInteger?Number.isInteger(a):"number"===typeof a&&isFinite(a)&&Math.floor(a)===a},ApplyPicture:function(a,c,e,b){switch(e){case QueryViewerDataType.Integer:case QueryViewerDataType.Real:return qv.util.formatNumber(a,b.DecimalPrecision,c,!1);case QueryViewerDataType.Boolean:case QueryViewerDataType.Character:case QueryViewerDataType.GUID:case QueryViewerDataType.GeoPoint:return qv.util.trim(a);
case QueryViewerDataType.Date:case QueryViewerDataType.DateTime:return qv.util.formatDateTime(a,e,b.DateFormat,b.IncludeHours,b.IncludeMinutes,b.IncludeSeconds,b.IncludeMilliseconds)}},GetPictureProperties:function(a,c){return a==QueryViewerDataType.Integer||a==QueryViewerDataType.Real?qv.util.ParseNumericPicture(a,c):a==QueryViewerDataType.Date||a==QueryViewerDataType.DateTime?qv.util.ParseDateTimePicture(a,c):null},GetAxisByDataField:function(a,c){for(var e=0;e<a.Metadata.Axes.length;e++)if(a.Metadata.Axes[e].DataField==
c)return a.Metadata.Axes[e]},GetThemeStyleSheet:function(a){a._themeStyleSheet||(a._themeStyleSheet=qv.util.GetStyleSheet(gx.theme+".css"));return a._themeStyleSheet},GetNullColor:function(){return qv.util.GetColorObject("")},GetColorObject:function(a){return{IsDefault:!1,Color:a,ColorIndex:"-1"}},IsNullColor:function(a){return a.IsDefault?0>a.ColorIndex:""==a.Color},GetQueryViewerStyleSheet:function(a){a._queryViewerStyleSheet||(a._queryViewerStyleSheet=qv.util.GetStyleSheet("QueryViewer.css"));
return a._queryViewerStyleSheet},GetStyleSheet:function(a){for(var c,e=0;e<document.styleSheets.length;e++)if(null!=document.styleSheets[e].href&&0<=document.styleSheets[e].href.indexOf(a)){c=document.styleSheets[e];break}return c},XAxisDataType:function(a){for(var c=0,e="",b=0;b<a.Metadata.Axes.length;b++){var m=a.Metadata.Axes[b];if(m.Visible==QueryViewerVisible.Yes||m.Visible==QueryViewerVisible.Always)c++,e=m.DataType}return 1==c?e:QueryViewerDataType.Character},ProcessDataAndMetadata:function(a){function c(a){for(var b=
0,f=0;f<a.length;f++)"F0"!=a[f].DataField&&b++;return b}function e(a){a.Chart.Categories={};a.Chart.Categories.DataFields=[];for(var b=0;b<a.Metadata.Axes.length;b++){var f=a.Metadata.Axes[b];if(f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always)(a.RealType!=QueryViewerOutputType.Map||f.DataType==QueryViewerDataType.Character)&&a.Chart.Categories.DataFields.push(f.DataField)}a.Chart.Series={};a.Chart.Series.DataFields=[];f=c(a.Metadata.Data);for(b=0;b<a.Metadata.Data.length;b++){var g=
a.Metadata.Data[b];(1==f?g.Visible==QueryViewerVisible.Yes||g.Visible==QueryViewerVisible.Always:g.Visible!=QueryViewerVisible.Never)&&a.Chart.Series.DataFields.push(g.DataField)}}function b(a){for(var b={},f=0;f<a.Metadata.Axes.length;f++){var g=a.Metadata.Axes[f],d=qv.util.GetPictureProperties(g.DataType,g.Picture);b[g.DataField]={Picture:g.Picture,DataType:g.DataType,PictureProperties:d,Filter:g.Filter}}return b}function m(a,b){function f(a,b,g){function h(a){for(var b=!1,f=0;f<a.length;f++)if(d(a[f].StyleOrClass,
!1)[0]){b=!0;break}return b}var c;if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&""!=a.Chart.colorAxis||a.MapType==QueryViewerMapType.Bubble&&""!=a.Chart.colorAxis))c=!1;else if(a.RealType==QueryViewerOutputType.Map&&(a.MapType==QueryViewerMapType.Choropleth&&0==a.Chart.colorAxis.dataClasses.length||a.MapType==QueryViewerMapType.Bubble&&0==a.Chart.colorAxis.dataClasses.length))c=!0;a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsSingleSerieChart(a)||a.RealChartType==
QueryViewerChartType.PolarArea&&1==a.Chart.Series.DataFields.length)?c=!0:a.RealType==QueryViewerOutputType.Chart&&(qv.chart.IsAreaChart(a)||qv.chart.IsLineChart(a)||a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar)?c=!1:a.RealType==QueryViewerOutputType.Chart&&1<a.Chart.Series.DataFields.length&&!qv.chart.IsSplittedChart(a)?c=!1:(a=h(b.ConditionalStyles),b=!1,null!=g&&(b=h(g.ValuesStyles)),c=a||b);return c}for(var g={},h=c(a.Metadata.Data),p=0;p<a.Metadata.Data.length;p++){var n=
a.Metadata.Data[p];if(1==h?n.Visible==QueryViewerVisible.Yes||n.Visible==QueryViewerVisible.Always:n.Visible!=QueryViewerVisible.Never){var l=f(a,n,b);g[n.DataField]={Datum:n,Multicolored:l}}}return g}function d(a,b){var f="",g=!1,d=b?"backgroundcolor":"color";if(""!=a){for(var h=a.split(";"),c=0;c<h.length;c++){var n=h[c].split(":");if(2==n.length){var p=n[1];if(n[0].toLowerCase()==d){f=p;g=""!=p;break}}}g&&"#"==f.substr(0,1)&&(f=f.replace("#",""))}return[g,f]}function w(a,b,f,g,h,c,n){function p(a,
b){for(var f=[!1,""],g=0;g<a.ValuesStyles.length;g++){var h=a.ValuesStyles[g];if(h.Value==b){f=d(h.StyleOrClass,!1);break}}return f}function l(a,b){for(var f=[!1,""],g=!1,h=0;h<a.ConditionalStyles.length;h++){var c=a.ConditionalStyles[h];if(g=qv.util.satisfyStyle(b,c)){f=d(c.StyleOrClass,!1);break}}return f}var x,k=-1,o=!1;if(a){if(a=!1,null!=f&&(f=p(f,c),a=f[0],x=f[1]),!a)f=l(b,n),a=f[0],x=f[1],a||(k=h%HIGHCHARTS_MAX_COLORS,o=!0)}else f=d(b.Style,!1),a=f[0],x=f[1],a||(k=g%HIGHCHARTS_MAX_COLORS,o=
!0);return{IsDefault:o,Color:x,ColorIndex:k}}function k(a,b,f,g){for(var h="",d="",c=0;c<a.Chart.Categories.DataFields.length;c++){var n=a.Chart.Categories.DataFields[c],p;void 0!=b[n]?(p=qv.util.trim(b[n]),n=qv.util.ApplyPicture(p,g[n].Picture,g[n].DataType,g[n].PictureProperties)):n=p=a.Metadata.TextForNullValues;h+=(""==h?"":", ")+p;d+=(""==d?"":", ")+n}b=[h,d];g={};g.Value=b[0];g.ValueWithPicture=b[1];a.Chart.Categories.Values.push(g);if(0==f)a.Chart.Categories.MinValue=g.Value,a.Chart.Categories.MaxValue=
g.Value;else if(g.Value>a.Chart.Categories.MaxValue&&(a.Chart.Categories.MaxValue=g.Value),g.Value<a.Chart.Categories.MinValue)a.Chart.Categories.MinValue=g.Value}function s(a,b,f,g,h){for(var d=0;d<a.Chart.Series.DataFields.length;d++){var c=a.Chart.Series.ByIndex[d],n=a.Chart.Series.DataFields[d],p=void 0!=b[n]?b[n]:null,l={};l.Value=p;var x=g[n].Datum,k=g[n].Multicolored;if(x.Aggregation==QueryViewerAggregationType.Average){var o=b[n+"_N"],n=b[n+"_D"];void 0==o&&void 0==n&&(o=p,n="1");l.Value_N=
o;l.Value_D=n}l.Color=k?w(k,x,h,0,f,a.Chart.Categories.Values[f].Value,p):qv.util.GetNullColor();c.Points.push(l);0<l.Value&&(c.PositiveValues=!0);0>l.Value&&(c.NegativeValues=!0);if(0===f)c.MinValue=parseFloat(l.Value),c.MaxValue=parseFloat(l.Value);else if(parseFloat(l.Value)>c.MaxValue&&(c.MaxValue=parseFloat(l.Value)),parseFloat(l.Value)<c.MinValue)c.MinValue=parseFloat(l.Value)}}function o(a,b){for(var f=0;f<b.ConditionalStyles.length;f++){var g=b.ConditionalStyles[f],h=d(g.StyleOrClass,!0),
c=h[1];if(h[0]){plotBand={};plotBand.Color=qv.util.GetColorObject(c);if(g.Operator==QueryViewerConditionOperator.Interval)plotBand.From=parseFloat(g.Value1),plotBand.To=parseFloat(g.Value2);else if(g.Operator==QueryViewerConditionOperator.Equal)plotBand.From=parseFloat(g.Value1),plotBand.To=parseFloat(g.Value1);else if(g.Operator==QueryViewerConditionOperator.GreaterOrEqual||g.Operator==QueryViewerConditionOperator.GreaterThan)plotBand.From=parseFloat(g.Value1);else if(g.Operator==QueryViewerConditionOperator.LessOrEqual||
g.Operator==QueryViewerConditionOperator.LessThan)plotBand.To=parseFloat(g.Value1);plotBand.SeriesName=""!=b.Title?b.Title:b.Name;a.Chart.PlotBands.push(plotBand)}}}function v(a,b){for(var f=!1,g=0;g<a.Metadata.Axes.length;g++){var h=a.Metadata.Axes[g];if(h.Visible==QueryViewerVisible.Yes||h.Visible==QueryViewerVisible.Always){var d=qv.util.trim(b[h.DataField]);if(h.Filter.Type==QueryViewerFilterType.HideAllValues){f=!0;break}else if(h.Filter.Type==QueryViewerFilterType.ShowSomeValues&&0>h.Filter.Values.indexOf(d)){f=
!0;break}if(a.RealType===QueryViewerOutputType.Map&&h.DataType===QueryViewerDataType.Character)if(a.Region===QueryViewerRegion.Country){if(!qv.util.startsWith(d.toUpperCase(),a.Country+"-")){f=!0;break}}else if(a.Region===QueryViewerRegion.Continent)switch(a.Continent){case QueryViewerContinent.Africa:f=!qv.map.IsAfricanCountry(d.toUpperCase());break;case QueryViewerContinent.Asia:f=!qv.map.IsAsianCountry(d.toUpperCase());break;case QueryViewerContinent.Europe:f=!qv.map.IsEuropeanCountry(d.toUpperCase());
break;case QueryViewerContinent.NorthAmerica:f=!qv.map.IsNorthAmericanCountry(d.toUpperCase());break;case QueryViewerContinent.Oceania:f=!qv.map.IsOceanianCountry(d.toUpperCase());break;case QueryViewerContinent.SouthAmerica:f=!qv.map.IsSouthAmericanCountry(d.toUpperCase());break;default:f=!0}}}return f}function g(a){0>=a.TargetValue&&(a.TargetValue=100);0>=a.MaximumValue&&(a.MaximumValue=100);a.MaximumValue<a.TargetValue&&(a.MaximumValue=a.TargetValue)}function x(a){var f=[],b=[],g="";for(z=0;z<
a.Points.length;z++){var d,h;a.Aggregation==QueryViewerAggregationType.Count?(d=0,h=parseFloat(qv.util.trim(a.Points[z].Value))):a.Aggregation==QueryViewerAggregationType.Average?(d=parseFloat(qv.util.trim(a.Points[z].Value_N)),h=parseFloat(qv.util.trim(a.Points[z].Value_D))):(d=parseFloat(qv.util.trim(a.Points[z].Value)),h=1);f.push(d);b.push(h);""==g&&(g=a.Points[z].Color)}f=qv.util.aggregate(a.Aggregation,f,b).toString();a.Points=[{Value:f,Value_N:f,Value_D:"1",Color:g}];a.NegativeValues=0>f;a.PositiveValues=
0<f}function p(a,f){a.Chart.colorAxis=a.Chart.colorAxis||{};a.Chart.colorAxis.dataClasses=a.Chart.colorAxis.dataClasses||[];for(var b=0;b<f.ConditionalStyles.length;b++){var g=f.ConditionalStyles[b];colorAxis={dataClasses:[]};var d={};d.color=g.StyleOrClass.replace("color:","");g.Operator==QueryViewerConditionOperator.Interval?(d.from=parseFloat(g.Value1),d.to=parseFloat(g.Value2),d.Operator=QueryViewerConditionOperatorSymbol.Interval):g.Operator==QueryViewerConditionOperator.Equal?(d.from=parseFloat(g.Value1),
d.Operator=QueryViewerConditionOperatorSymbol.Equal):g.Operator==QueryViewerConditionOperator.GreaterOrEqual?(d.from=parseFloat(g.Value1),d.Operator=QueryViewerConditionOperatorSymbol.GreaterOrEqual):g.Operator==QueryViewerConditionOperator.GreaterThan?(d.from=parseFloat(g.Value1),d.Operator=QueryViewerConditionOperatorSymbol.GreaterThan):g.Operator==QueryViewerConditionOperator.LessThan?(d.to=parseFloat(g.Value1),d.Operator=QueryViewerConditionOperatorSymbol.LessThan):g.Operator==QueryViewerConditionOperator.LessOrEqual?
(d.to=parseFloat(g.Value1),d.Operator=QueryViewerConditionOperatorSymbol.LessOrEqual):g.Operator==QueryViewerConditionOperator.NotEqual&&(d.from=parseFloat(g.Value1),d.Operator=QueryViewerConditionOperatorSymbol.NotEqual);a.Chart.colorAxis.dataClasses.push(d)}}var r=function(a){var f=qv.util.XAxisDataType(a),b;switch(a.RealType){case QueryViewerOutputType.Chart:a=qv.chart.IsDatetimeXAxis(a)?f==QueryViewerDataType.Date||f==QueryViewerDataType.DateTime:!0;b="GXPL_QViewerNoDatetimeAxis";break;case QueryViewerOutputType.Map:a=
f==QueryViewerDataType.GeoPoint||f==QueryViewerDataType.Character;b="GXPL_QViewerNoMapAxis";break;default:a=!0}return{IsOK:a,Error:a?"":gx.getMessage(b)}}(a);if(r.IsOK){a.Chart={};e(a);a.Chart.Categories.MinValue=null;a.Chart.Categories.MaxValue=null;a.Chart.Categories.Values=[];r=b(a);a.Chart.Series.ByName={};a.Chart.Series.ByIndex=[];var f=1==a.Chart.Categories.DataFields.length?qv.util.GetAxisByDataField(a,a.Chart.Categories.DataFields[0]):null,h=m(a,f);a.Chart.PlotBands=[];for(var z=0;z<a.Chart.Series.DataFields.length;z++){var C=
a.Chart.Series.DataFields[z],n=h[C].Datum,l={MinValue:null,MaxValue:null},C=h[C].Multicolored;l.FieldName=n.Name;l.Name=""!=n.Title?n.Title:n.Name;l.Visible=n.Visible;l.DataType=n.DataType;l.Aggregation=n.Aggregation;var D=n.Picture;l.Picture=""==D?l.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99":D;l.NumberFormat=qv.util.ParseNumericPicture(l.DataType,l.Picture);l.Color=C?qv.util.GetNullColor():w(C,n,f,z,0,"",0);l.TargetValue=n.TargetValue;l.MaximumValue=n.MaximumValue;
g(l);l.PositiveValues=!1;l.NegativeValues=!1;l.Points=[];a.Chart.Series.ByName[l.Name]=l;a.Chart.Series.ByIndex.push(l);a.RealType==QueryViewerOutputType.Chart&&o(a,n);a.RealType==QueryViewerOutputType.Map&&p(a,n)}for(z=n=0;z<a.Data.Rows.length;z++)l=a.Data.Rows[z],v(a,l)||(k(a,l,n,r),s(a,l,n,h,f),n++);if(a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsGaugeChart(a))for(z=0;z<a.Chart.Series.DataFields.length;z++)l=a.Chart.Series.ByIndex[z],x(l);return""}return r.Error},getTranslation:function(a){return qv.TranslationType==
QueryViewerTranslationType.RunTime?gx.getMessage(a):a},getTranslationAlsoIfStatic:function(a){return qv.TranslationType==QueryViewerTranslationType.RunTime||qv.TranslationType==QueryViewerTranslationType.Static?gx.getMessage(a):a},aggregateData:function(a,c){for(var e={},b=0;b<a.length;b++){var m=a[b],d;d=m;for(var w=c,k=[],s=[],o=[],v=0;v<w.length;v++){var g=w[v];if(d.IsFormula){var x=0;do{x++;var p=g[d.DataField+"_"+x.toString()];void 0!=p&&(p=parseFloat(p),0==v?o.push(p):o[x-1]+=p)}while(void 0!=
p)}else d.Aggregation==QueryViewerAggregationType.Count?(x=0,g=parseFloat(g[d.DataField])):d.Aggregation==QueryViewerAggregationType.Average?(x=parseFloat(g[d.DataField+"_N"]),g=parseFloat(g[d.DataField+"_D"])):(x=parseFloat(g[d.DataField]),g=1),k.push(x),s.push(g)}d=d.IsFormula?qv.util.evaluate(d.Formula,d.DataField+"_",o):qv.util.aggregate(d.Aggregation,k,s).toString();e[m.DataField]=d}return e}};var STATE_DONE=4,STATUS_OK=200,METADATA_VERSION=2;
qv.services=function(){function a(a){return eval(a)[1].replace(/\\/g,".")}function c(a,b){var c=qv.services.RuntimeFieldsJSON(a),e=qv.services.RuntimeParametersJSON(a),o="",m="",g;a:switch(a.RealType){case QueryViewerOutputType.Table:g="IgnoreType";break a;case QueryViewerOutputType.Chart:case QueryViewerOutputType.Card:g="IgnoreTypeAndAxis";break a;default:g="IgnoreNot"}""!=a.QueryInfo&&(m=eval("("+a.QueryInfo+")"),o=m.TextForNullValues,m=gx.json.serializeJson(m.Fields));return a.ObjectName!=b.ObjectName||
a.ObjectType!=b.ObjectType||a.ObjectId!=b.ObjectId||a.Object!=b.Object||c!=b.RuntimeFieldsJSON||e!=b.RuntimeParametersJSON||o!=b.QueryInfoTextForNullValues||m!=b.QueryInfoFieldsJSON||g!=b.MetadataType?(b.ObjectName=a.ObjectName,b.ObjectType=a.ObjectType,b.ObjectId=a.ObjectId,b.Object=a.Object,b.RuntimeFieldsJSON=c,b.RuntimeParametersJSON=e,b.QueryInfoTextForNullValues=o,b.QueryInfoFieldsJSON=m,b.MetadataType=g,!0):!1}function e(a,c){function k(a,f,g){for(var a=b(a),c=0;c<f.length;c++){var d=f[c],
n="";void 0!=d[g]&&(n=d[g].Type);""!=n&&(n=qv.services.postInfo._priv.SdtWithValuesJSON("Order",n,QueryViewerAxisOrderType.Custom,d[g].Values,!1),a+=","+n);void 0!=d.Analytics&&(a+=","+d.Analytics.ShowValuesAs,a+=","+d.Analytics.RollingAverageType,a+=","+d.Analytics.RollingAverageTerms,a+=","+d.Analytics.DifferenceFrom,a+=","+d.Analytics.ShowAsPercentage)}return a}var e=qv.services.RuntimeParametersJSON(a),o=k(a,a.Axes,"AxisOrder"),m="",g="",x="",p=a.RealType==QueryViewerOutputType.Table?"PagedRecordSet":
a.RealType==QueryViewerOutputType.PivotTable?"PagedLineSet":"NotPaged";""!=a.QueryInfo&&(x=eval("("+a.QueryInfo+")"),m=x.SQLSentence,g=gx.json.serializeJson(x.Parameters),x=k(a,x.Fields,"Order"));return a.ObjectName!=c.ObjectName||a.ObjectType!=c.ObjectType||a.ObjectId!=c.ObjectId||a.Object!=c.Object||e!=c.RuntimeParametersJSON||o!=c.FieldsJSON||m!=c.QueryInfoSQLSentence||g!=c.QueryInfoParametersJSON||x!=c.QueryInfoFieldsJSON||p!=c.DataType?(c.ObjectName=a.ObjectName,c.ObjectType=a.ObjectType,c.ObjectId=
a.ObjectId,c.Object=a.Object,c.RuntimeParametersJSON=e,c.FieldsJSON=o,c.QueryInfoSQLSentence=m,c.QueryInfoParametersJSON=g,c.QueryInfoFieldsJSON=x,c.DataType=p,!0):!1}function b(a){return a.RealType==QueryViewerOutputType.Chart&&qv.chart.IsDatetimeXAxis(a)||a.RealType==QueryViewerOutputType.Card&&(a.IncludeSparkline||a.IncludeTrend)}function m(a,b){return{Success:a,Message:b}}return{url:function(){function a(b,d){var e=qv.util.getGenerator(),g;g=(new Date).getTime();var x=b.enableServerDebug?"_debug":
"";switch(e){case "C#":var e=new gx.util.Url(location.href),p=e.path,p=p.substr(0,p.lastIndexOf("/")+1);urlresult=""==e.port?e.protocol+"://"+e.host+p:e.protocol+"://"+e.host+":"+e.port+p;return urlresult+"agxpl_get"+x+".aspx?"+d+","+g;case "Java":return c(!1)+"qviewer.services.agxpl_get"+x+"?"+d+","+g;default:return""}}function b(){var a;a=""!=gx.staticDirectory?gx.staticDirectory:this.getCookie("StaticContent");return qv.util.startsWith(a,"/")?a.substr(1,a.length-1):a}function c(a){var d=gx.util.resourceUrl(gx.basePath,
!0);a&&(d+=b());return d}return{getDefaultOutputURL:function(b){return a(b,"defaultoutput")},getRecordsetCacheKeyURL:function(b){return a(b,"recordsetcachekey")},getMetadataURL:function(b){return a(b,"metadata")},getDataURL:function(b){return a(b,"data")},getAttributeValuesURL:function(b){return a(b,"attributevalues")},getPageDataForTableURL:function(b){return a(b,"pagedatafortable")},getPageDataForPivotTableURL:function(b){return a(b,"pagedataforpivottable")},getQueryParametersURL:function(b){return a(b,
"queryparameters")},getDashboardSpecURL:function(b){return a(b,"dashboardspec")},getStaticDirectory:function(){return"Java"===qv.util.getGenerator()?c(!0):b()}}}(),postInfo:function(){function c(a,b){var d="",k,f,h,m,o,n,l,D,v,q,B,y,s,L,H,u;k=!1;for(i=0;void 0!=a.Axes[i];i++){k=!0;d+=""!=d?",":"";d+="{";f="";m=h=0;n=o="";D=l=!0;q=v="";B=0;u=H=L=s=y="";var G;G=a.Axes[i];var t="",E=!1;if(void 0!=G.Format&&void 0!=G.Format.ValuesStyles)for(var A=0;void 0!=G.Format.ValuesStyles[A];A++)E=!0,t+=""!=t?",":
"",t+="{",t+='"Value":"'+encodeURIComponent(G.Format.ValuesStyles[A].Value)+'"',t+=",",t+='"Style":"'+encodeURIComponent(G.Format.ValuesStyles[A].StyleOrClass)+'"',t+=",",t+='"Propagate":'+(G.Format.ValuesStyles[A].ApplyToRowOrColumn?"true":"false"),t+="}";E&&(t='"ValuesStyles":['+t+"]");G=t;t=a.Axes[i];E="";A=!1;if(void 0!=t.Format&&void 0!=t.Format.ConditionalStyles)for(var M=0;void 0!=t.Format.ConditionalStyles[M];M++)A=!0,E+=""!=E?",":"",E+="{",E+='"Operator":"'+t.Format.ConditionalStyles[M].Operator+
'"',E+=",",E+='"Value1":"'+encodeURIComponent(t.Format.ConditionalStyles[M].Value1)+'"',t.Format.ConditionalStyles[M].Operator==QueryViewerConditionOperator.Interval&&(E+=",",E+='"Value2":"'+encodeURIComponent(t.Format.ConditionalStyles[M].Value2)+'"'),E+=",",E+='"Style":"'+encodeURIComponent(t.Format.ConditionalStyles[M].StyleOrClass)+'"',E+="}";A&&(E='"ConditionalStyles":['+E+"]");t=E;E=a.Axes[i];A="";void 0!=E.Grouping&&(A+="{",A+='"GroupByYear":'+(E.Grouping.GroupByYear?"true":"false"),A+=",",
A+='"YearTitle":"'+E.Grouping.YearTitle+'"',A+=",",A+='"GroupBySemester":'+(E.Grouping.GroupBySemester?"true":"false"),A+=",",A+='"SemesterTitle":"'+E.Grouping.SemesterTitle+'"',A+=",",A+='"GroupByQuarter":'+(E.Grouping.GroupByQuarter?"true":"false"),A+=",",A+='"QuarterTitle":"'+E.Grouping.QuarterTitle+'"',A+=",",A+='"GroupByMonth":'+(E.Grouping.GroupByMonth?"true":"false"),A+=",",A+='"MonthTitle":"'+E.Grouping.MonthTitle+'"',A+=",",A+='"GroupByDayOfWeek":'+(E.Grouping.GroupByDayOfWeek?"true":"false"),
A+=",",A+='"DayOfWeekTitle":"'+E.Grouping.DayOfWeekTitle+'"',A+=",",A+='"HideValue":'+(E.Grouping.HideValue?"true":"false"),A+="}",A='"Grouping":'+A);E=A;void 0!=a.Axes[i].Format&&(f=a.Axes[i].Format.Picture?a.Axes[i].Format.Picture:"",h=a.Axes[i].Format.TargetValue?a.Axes[i].Format.TargetValue:0,m=a.Axes[i].Format.MaximumValue?a.Axes[i].Format.MaximumValue:0,o=a.Axes[i].Format.Style?a.Axes[i].Format.Style:"",n=a.Axes[i].Format.Subtotals?a.Axes[i].Format.Subtotals:"",l=void 0!=a.Axes[i].Format.CanDragToPages?
a.Axes[i].Format.CanDragToPages:!0);void 0!=a.Axes[i].Actions&&(D=a.Axes[i].Actions.RaiseItemClick);void 0!=a.Axes[i].Analytics&&(v=a.Axes[i].Analytics.ShowValuesAs,q=a.Axes[i].Analytics.RollingAverageType,B=a.Axes[i].Analytics.RollingAverageTerms,y=a.Axes[i].Analytics.DifferenceFrom,s=a.Axes[i].Analytics.ShowAsPercentage);void 0!=a.Axes[i].AxisOrder&&(L=a.Axes[i].AxisOrder.Type);void 0!=a.Axes[i].ExpandCollapse&&(H=a.Axes[i].ExpandCollapse.Type);void 0!=a.Axes[i].Filter&&(u=a.Axes[i].Filter.Type);
void 0==u&&(u=QueryViewerFilterType.ShowSomeValues);d+='"Name":"'+encodeURIComponent(a.Axes[i].Name)+'"';d+=",";d+='"Caption":"'+encodeURIComponent(a.Axes[i].Title)+'"';d+=",";d+='"Aggregation":"'+a.Axes[i].Aggregation+'"';d+=",";d+='"Visible":"'+a.Axes[i].Visible+'"';d+=",";d+='"Type":"'+a.Axes[i].Type+'"';d+=",";d+='"Axis":"'+a.Axes[i].Axis+'"';d+=",";d+='"Picture":"'+encodeURIComponent(f)+'"';d+=",";d+='"TargetValue":'+h;d+=",";d+='"MaximumValue":'+m;d+=",";d+='"Style":"'+o+'"';d+=",";d+='"Subtotals":"'+
n+'"';d+=",";d+='"CanDragToPages":'+l;d+=",";d+='"RaiseItemClick":'+D;""!=v&&(d+=",",d+='"Analytics":{',d+='"ShowValuesAs":"'+v+'"',d+=",",d+='"RollingAverageType":"'+q+'"',d+=",",d+='"RollingAverageTerms":'+B,d+=",",d+='"DifferenceFrom":"'+y+'"',d+=",",d+='"ShowAsPercentage":"'+s+'"',d+="}");""!=L&&(f=e("Order",L,QueryViewerAxisOrderType.Custom,a.Axes[i].AxisOrder.Values,b),d+=""!=f?","+f:"");""!=H&&(H=e("ExpandCollapse",H,QueryViewerExpandCollapseType.ExpandSomeValues,a.Axes[i].ExpandCollapse.Values,
b),d+=""!=H?","+H:"");""!=u&&a.Axes[i].Filter.Values&&(u=e("Filter",u,QueryViewerFilterType.ShowSomeValues,a.Axes[i].Filter.Values,b),d+=""!=u?","+u:"");d+=""!=G?","+G:"";d+=""!=t?","+t:"";d+=""!=E?","+E:"";d+="}"}k&&(d='"RuntimeFields":['+d+"]");return d}function e(a,b,d,c,f){var h="";if(""!=b){h=h+('"'+a+'":')+"{"+('"Type":"'+b+'"');strValues="";if(b==d){existValues=!1;for(j=0;void 0!=c[j];j++)existValues=!0,strValues+=""!=strValues?",":"",strValues=f?strValues+('"'+encodeURIComponent(c[j])+'"'):
strValues+('"'+c[j]+'"');existValues&&(strValues=',"Values":['+strValues+"]")}h+=strValues;h+="}"}return h}function k(a){var b="",d=!1;if(a.Object){a=eval(a.Object);for(i=2;i<a.length;i++)d=!0,b+=""!=b?",":"",b+="{",b+='"Value":"'+encodeURIComponent(a[i])+'"',b+="}"}else for(i=0;void 0!=a.Parameters[i];i++)d=!0,b+=""!=b?",":"",b+="{",b+='"Name":"'+a.Parameters[i].Name+'"',b+=",",b+='"Value":"'+encodeURIComponent(a.Parameters[i].Value)+'"',b+="}";d&&(b='"RuntimeParameters":['+b+"]");return b}function m(a){var b=
"",d=!1;for(i=0;void 0!=a[i];i++){d=!0;b+=""!=b?",":"";b+="{";b+='"DataField":"'+a[i].DataField+'"';b+=",";b+='"NullIncluded":'+a[i].NullIncluded;strIncludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Included[j];j++)existValues=!0,strIncludedValues+=""!=strIncludedValues?",":"",strIncludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Included[j])+'"';existValues&&(strIncludedValues=',"Included":['+strIncludedValues+"]");strExcludedValues="";existValues=!1;for(j=0;void 0!=a[i].NotNullValues.Excluded[j];j++)existValues=
!0,strExcludedValues+=""!=strExcludedValues?",":"",strExcludedValues+='"'+encodeURIComponent(a[i].NotNullValues.Excluded[j])+'"';existValues&&(strExcludedValues=',"Excluded":['+strExcludedValues+"]");b+=",";b+='"NotNullValues":{"DefaultAction":"'+a[i].NotNullValues.DefaultAction+'"'+strIncludedValues+strExcludedValues+"}";b+="}"}d&&(b='"Filters":['+b+"]");return b}function o(a){return a.UseRecordsetCache?'{"ActualKey":"'+a.RecordsetCache.ActualKey+'","OldKey":"'+a.RecordsetCache.OldKey+'","MinutesToKeep":'+
a.MinutesToKeepInRecordsetCache+',"MaximumSize":'+a.MaximumCacheSize+"}":'{"ActualKey":"","OldKey":"","MinutesToKeep":0,"MaximumSize":0}'}function v(b){var d;d=""+(""!=b.ParentObject.PackageName?'"ApplicationNamespace":"'+b.ParentObject.PackageName+'",':"");b.Object?d+='"ObjectName":"'+a(b.Object)+'"':(d+='"ObjectName":"'+b.ObjectName+'"',d=d+","+('"Alt_ObjectType":"'+b.ObjectType+'"'),d=d+","+('"Alt_ObjectId":'+b.ObjectId));return d}return{DefaultOutput:function(a){var b;b="{"+v(a);b+=""!=a.ObjectInfo?
',"ObjectInfo":'+a.ObjectInfo:"";return"Data="+encodeURIComponent(b+"}")},RecordsetCacheKey:function(a){a="{"+v(a);return"Data="+encodeURIComponent(a+"}")},Metadata:function(a){var b="",e=k(a),m=c(a,!0),b=b+"{"+v(a),b=b+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),b=b+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),b=b+(""!=e?","+e:"")+(""!=m?","+m:"")+","+('"OutputType":"'+a.RealType+'"'),b=b+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),b=b+","+('"RememberLayout":'+a.RememberLayout),
b=b+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"'),b=b+","+('"RecordsetCacheInfo":'+o(a)),b=b+","+('"ReturnSampleData":'+a.ReturnSampleData),b=b+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(b+"}")},Data:function(a){var e="",m=k(a),w=c(a,!0),e=e+"{"+v(a),e=e+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),e=e+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),e=e+(""!=m?","+m:"")+(""!=w?","+w:"")+","+('"OutputType":"'+a.RealType+'"'),e=e+","+('"SortAscendingForced":'+
b(a)),e=e+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),e=e+","+('"RecordsetCacheInfo":'+o(a)),e=e+","+('"ReturnSampleData":'+a.ReturnSampleData),e=e+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(e+"}")},AttributeValues:function(a,b,e,m,f){var h="",z=k(a),w=c(a,!0),h=h+"{"+v(a),h=h+","+('"DataField":"'+b+'"')+","+('"PageNumber":'+e)+","+('"PageSize":'+m)+","+('"Filter":"'+f+'"')+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),h=h+(""!=a.AppSettings?
',"AppSettings":'+a.AppSettings:""),h=h+(""!=z?","+z:"")+(""!=w?","+w:"")+","+('"OutputType":"'+a.RealType+'"'),h=h+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),h=h+","+('"RecordsetCacheInfo":'+o(a)),h=h+","+('"ReturnSampleData":'+a.ReturnSampleData),h=h+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(h+"}")},TablePageData:function(a,b,e,w,f,h,z,C){var n="",l=k(a),D=c(a,!0),z=m(z),n=n+"{"+v(a),n=n+","+('"PageNumber":'+b)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?
e:0)),n=n+","+('"ReturnTotPages":'+w)+","+('"Order":'+('{"DataField":"'+f+'","Type":"'+h+'"}'))+(""!=z?","+z:"")+(""!=a.QueryInfo?',"QueryInfo":'+a.QueryInfo:""),n=n+(""!=a.AppSettings?',"AppSettings":'+a.AppSettings:""),n=n+(""!=l?","+l:"")+(""!=D?","+D:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange),n=n+","+('"RecordsetCacheInfo":'+o(a)),n=n+","+('"LayoutChanged":'+C)+","+('"ReturnSampleData":'+a.ReturnSampleData),n=n+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+
encodeURIComponent(n+"}")},PivotTablePageData:function(a,b,e,w,f,h,z,C,n){for(var l="",D=k(a),U=c(a,!0),q="",B=!1,y=0;void 0!=f[y];y++)B=!0,q+=""!=q?",":"",q+="{",q+='"DataField":"'+f[y].DataField+'"',q+=",",q+='"Visible":'+!f[y].Hidden,q+=",",q+='"Axis":"'+f[y].Axis.Type+'"',q+=",",q+='"Position":'+(qv.util.IsInteger(f[y].Axis.Position)?f[y].Axis.Position:0),q+=",",q+='"Order":"'+f[y].Order+'"',q+=",",q+='"Subtotals":'+f[y].Subtotals,q+="}";B&&(q='"AxesInfo":['+q+"]");f=q;q="";B=!1;for(y=0;void 0!=
h[y];y++)B=!0,q+=""!=q?",":"",q+="{",q+='"DataField":"'+h[y].DataField+'"',q+=",",q+='"Visible":'+!h[y].Hidden,q+=",",q+='"Position":'+(qv.util.IsInteger(h[y].Position)?h[y].Position:0),q+="}";B&&(q='"DataInfo":['+q+"]");h=q;z=m(z);q="";B=!1;for(y=0;void 0!=C[y];y++){B=!0;q+=""!=q?",":"";q+="{";q+='"DataField":"'+C[y].DataField+'"';q+=",";q+='"NullExpanded":'+C[y].NullExpanded;strExpandedValues="";existValues=!1;for(var I=0;void 0!=C[y].NotNullValues.Expanded[I];I++)existValues=!0,strExpandedValues+=
""!=strExpandedValues?",":"",strExpandedValues+='"'+encodeURIComponent(C[y].NotNullValues.Expanded[I])+'"';existValues&&(strExpandedValues=',"Expanded":['+strExpandedValues+"]");strCollapsedValues="";existValues=!1;for(I=0;void 0!=C[y].NotNullValues.Collapsed[I];I++)existValues=!0,strCollapsedValues+=""!=strCollapsedValues?",":"",strCollapsedValues+='"'+encodeURIComponent(C[y].NotNullValues.Collapsed[I])+'"';existValues&&(strCollapsedValues=',"Collapsed":['+strCollapsedValues+"]");q+=",";q+='"NotNullValues":{"DefaultAction":"'+
C[y].NotNullValues.DefaultAction+'"'+strExpandedValues+strCollapsedValues+"}";q+="}"}B&&(q='"ExpandCollapse":['+q+"]");C=q;l=l+"{"+v(a);l=l+","+('"PageNumber":'+b)+","+('"PageSize":'+(gx.lang.gxBoolean(a.Paging)?e:0));l=l+","+('"ReturnTotPages":'+w)+","+('"ShowDataLabelsIn":"'+a.ShowDataLabelsIn+'"');l=l+","+('"TotalForRows":"'+a.TotalForRows+'"');l=l+","+('"TotalForColumns":"'+a.TotalForColumns+'"');l=l+(""!=f?","+f:"")+(""!=h?","+h:"")+(""!=z?","+z:"")+(""!=C?","+C:"")+(""!=a.QueryInfo?',"QueryInfo":'+
a.QueryInfo:"");l+=""!=a.AppSettings?',"AppSettings":'+a.AppSettings:"";l=l+(""!=D?","+D:"")+(""!=U?","+U:"")+","+('"AllowElementsOrderChange":'+a.AllowElementsOrderChange);l=l+","+('"RecordsetCacheInfo":'+o(a));l=l+","+('"LayoutChanged":'+n)+","+('"ReturnSampleData":'+a.ReturnSampleData);l=l+","+('"TranslationType":"'+a.TranslationType+'"');return"Data="+encodeURIComponent(l+"}")},getQueryParameters:function(a){var b;b="{"+v(a);b+=""!=a.ObjectInfo?',"ObjectInfo":'+a.ObjectInfo:"";return"Data="+encodeURIComponent(b+
"}")},DashboardSpec:function(b){var d="";b.Object&&(d=a(b.Object));b=JSON.stringify({ApplicationNamespace:b.ParentObject.PackageName,ObjectName:d,Alt_ObjectId:0});return"Data="+encodeURIComponent(b)},_priv:{RuntimeParametersJSON:function(a){return k(a)},RuntimeFieldsJSON:function(a){return c(a)},SdtWithValuesJSON:function(a,b,d,c,f){return e(a,b,d,c,f)}}}}(),RuntimeParametersJSON:function(a){return this.postInfo._priv.RuntimeParametersJSON(a)},RuntimeFieldsJSON:function(a,b){return this.postInfo._priv.RuntimeFieldsJSON(a,
b)},getXMLHttpRequest:function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(a){return null}},CallServerSync:function(a,b,c,e){e=e||[];e.unshift(a);a=b.call(qv.services.url,a);c=c.apply(qv.services.postInfo,e);e=qv.services.getXMLHttpRequest();e.open("POST",a,!1);e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.send(c);return e.responseText},createAsyncServerCallFn:function(a,b,c,e,m){return function(v,
g){g=g||[];g.unshift(a);var x=function(b){m&&a.RealType!=QueryViewerOutputType.Card&&(b=m.call(qv.util.css,b));v(b,a)};if(gx.lang.gxBoolean(a.IsExternalQuery))x(a.ExternalQueryResultObj()[e]);else{var p=b.call(qv.services.url,a),r=c.apply(qv.services.postInfo,g),f=qv.services.getXMLHttpRequest(),h=function(){f.readyState==STATE_DONE&&f.status==STATUS_OK&&x(f.responseText)};gx.util.browser.isIE()?f.onreadystatechange=h:f.onload=h;f.open("POST",p);f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
f.send(r)}}},parseRecordsetCacheKeyXML:function(a){""!=a.xml.recordsetCacheKey&&(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.OldKey=a.RecordsetCache.ActualKey?a.RecordsetCache.ActualKey:"",a.RecordsetCache.ActualKey=a.xml.recordsetCacheKey)},parseDataXML:function(a){if(""!=a.xml.data){var b=qv.util.dom.xmlDocument(a.xml.data),b=qv.util.dom.getSingleElementByTagName(b,"Recordset");a.Data=a.Data||{};b=gx.util.browser.isIE()?qv.util.dom.getMultipleElementsByTagName(qv.util.dom.getSingleElementByTagName(b,
"Page"),"Record"):qv.util.dom.getMultipleElementsByTagName(b,"Record");a.Data.Rows=[];for(var c=0;c<b.length;c++){for(var e={},m=0;m<b[c].childNodes.length;m++){var v=b[c].childNodes[m];1==v.nodeType&&(e[v.nodeName]=1==v.childNodes.length?v.childNodes[0].nodeValue:"")}a.Data.Rows.push(e)}}},parseMetadataXML:function(a){function b(a,f){if("greaterequal"==a&&"lessequal"==f)return QueryViewerConditionOperator.Interval;switch(a){case "equal":return QueryViewerConditionOperator.Equal;case "less":return QueryViewerConditionOperator.LessThan;
case "greater":return QueryViewerConditionOperator.GreaterThan;case "lessequal":return QueryViewerConditionOperator.LessOrEqual;case "greaterequal":return QueryViewerConditionOperator.GreaterOrEqual;case "notequal":return QueryViewerConditionOperator.NotEqual}}function c(a,b,f,d){var h={},a=qv.util.dom.getSingleElementByTagName(a,b);if(null!=a){h.GroupFound=!0;h.TotalValueFound=!1;f=qv.util.dom.getMultipleElementsByTagName(a,f);h.Values=[];for(a=0;a<f.length;a++)b=null!=f[a].firstChild?f[a].firstChild.nodeValue:
"","TOTAL"==b&&d?h.TotalValueFound=!0:h.Values.push(b)}else h.GroupFound=!1;return h}function e(a){if(0==a.indexOf("gxpl_cssReplace("))var b=a.indexOf("gxpl_cssReplace("),f=a.indexOf(")",b),a=a.substring(b+16,f);return a}function o(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"formatValues"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"value"):[],b=[],f=0;f<a.length;f++){var d={};d.Value=qv.util.trim(null!=a[f].firstChild?a[f].firstChild.nodeValue:"");d.StyleOrClass=e(a[f].getAttribute("format"));
d.ApplyToRowOrColumn="yes"==a[f].getAttribute("recursive");b.push(d)}return b}function v(a){for(var a=qv.util.dom.getSingleElementByTagName(a,"conditionalFormats"),a=null!=a?qv.util.dom.getMultipleElementsByTagName(a,"rule"):[],f=[],d=0;d<a.length;d++){var c={};c.Operator=b(a[d].getAttribute("op1"),a[d].getAttribute("op2"));c.Value1=parseFloat(a[d].getAttribute("value1"));c.Operator==QueryViewerConditionOperator.Interval&&(c.Value2=parseFloat(a[d].getAttribute("value2")));c.StyleOrClass=e(a[d].getAttribute("format"));
f.push(c)}return f}if(""!=a.xml.metadata){var g=qv.util.dom.xmlDocument(a.xml.metadata),x=qv.util.dom.getSingleElementByTagName(g,"OLAPCube"),g=x.getAttribute("Version");if(null==g||parseInt(g)==METADATA_VERSION){a.Metadata=a.Metadata||{};a.Metadata.TextForNullValues=x.getAttribute("textForNullValues");var p=qv.util.dom.getMultipleElementsByTagName(x,"OLAPDimension");a.Metadata.Axes=[];for(g=0;g<p.length;g++){var r={};r.Name=p[g].getAttribute("name");r.Title=p[g].getAttribute("displayName");r.DataField=
p[g].getAttribute("dataField");r.DataType=p[g].getAttribute("dataType");r.Visible=p[g].getAttribute("visible");r.Axis=p[g].getAttribute("axis");r.Picture=p[g].getAttribute("picture");if(""==r.Picture)switch(r.DataType){case QueryViewerDataType.Integer:r.Picture="ZZZZZZZZZZZZZZ9";break;case QueryViewerDataType.Real:r.Picture="ZZZZZZZZZZZZZZ9.99";break;case QueryViewerDataType.Date:r.Picture="99/99/9999";break;case QueryViewerDataType.DateTime:r.Picture="99/99/9999 99:99:99";break;case QueryViewerDataType.GUID:r.Picture=
"XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"}r.CanDragToPages=qv.util.dom.getBooleanAttribute(p[g],"canDragToPages",!0);r.RaiseItemClick=qv.util.dom.getBooleanAttribute(p[g],"raiseItemClick",!0);r.IsComponent=qv.util.dom.getBooleanAttribute(p[g],"isComponent",!1);r.Style=p[g].getAttribute("format");var f=c(p[g],"include","value",!0),h=c(p[g],"exclude","value",!0),z=c(p[g],"expand","value",!1),C=c(p[g],"customOrder","Value",!1);r.Subtotals="no"==p[g].getAttribute("summarize")?QueryViewerSubtotals.No:h.GroupFound&&
h.TotalValueFound?QueryViewerSubtotals.Hidden:QueryViewerSubtotals.Yes;r.Filter={};!f.GroupFound&&!h.GroupFound?(r.Filter.Type=QueryViewerFilterType.ShowAllValues,r.Filter.Values=[]):!f.GroupFound&&h.GroupFound&&0==h.Values.length&h.TotalValueFound?(r.Filter.Type=QueryViewerFilterType.ShowAllValues,r.Filter.Values=[]):f.GroupFound&&!h.GroupFound&&0==f.Values.length?(r.Filter.Type=QueryViewerFilterType.HideAllValues,r.Filter.Values=[]):(r.Filter.Type=QueryViewerFilterType.ShowSomeValues,r.Filter.Values=
f.Values);r.ExpandCollapse={};z.GroupFound?z.GroupFound&&0==z.Values.length?(r.ExpandCollapse.Type=QueryViewerExpandCollapseType.CollapseAllValues,r.ExpandCollapse.Values=[]):(r.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandSomeValues,r.ExpandCollapse.Values=z.Values):(r.ExpandCollapse.Type=QueryViewerExpandCollapseType.ExpandAllValues,r.ExpandCollapse.Values=[]);r.Order={};f=p[g].getAttribute("order");null==f?(r.Order.Type=QueryViewerAxisOrderType.None,r.Order.Values=[]):(r.Order.Type=
qv.util.capitalize(f),r.Order.Values=r.Order.Type==QueryViewerAxisOrderType.Custom?C.Values:[]);r.ValuesStyles=o(p[g]);a.Metadata.Axes.push(r)}x=qv.util.dom.getMultipleElementsByTagName(x,"OLAPMeasure");a.Metadata.Data=[];for(g=0;g<x.length;g++)p={},p.Name=x[g].getAttribute("name"),p.Title=x[g].getAttribute("displayName"),p.DataField=x[g].getAttribute("dataField"),p.Aggregation=x[g].getAttribute("aggregation"),p.DataType=x[g].getAttribute("dataType"),p.Visible=x[g].getAttribute("visible"),p.Picture=
x[g].getAttribute("picture"),p.RaiseItemClick=qv.util.dom.getBooleanAttribute(x[g],"raiseItemClick",!0),p.IsComponent=qv.util.dom.getBooleanAttribute(x[g],"isComponent",!1),""==p.Picture&&(p.Picture=p.DataType==QueryViewerDataType.Integer?"ZZZZZZZZZZZZZZ9":"ZZZZZZZZZZZZZZ9.99"),p.Aggregation=qv.util.capitalize(p.Aggregation),p.TargetValue=parseFloat(x[g].getAttribute("targetValue")),p.MaximumValue=parseFloat(x[g].getAttribute("maximumValue")),p.Style=x[g].getAttribute("format"),0>=p.TargetValue&&
(p.TargetValue=100),0>=p.MaximumValue&&(p.MaximumValue=100),p.ConditionalStyles=v(x[g]),r=qv.util.dom.getCharacterAttribute(x[g],"formula",""),p.IsFormula=""!=r,p.Formula=r,a.Metadata.Data.push(p);a.Metadata.ParserResult=m(!0,"")}else a.Metadata.ParserResult=m(!1,gx.getMessage("GXPL_QViewerWrongMetadataVersion").replace("{0}",METADATA_VERSION))}},GetDataIfNeeded:function(a,b){a.Data=a.Data||{};a.Data.LastServiceCallKey=a.Data.LastServiceCallKey||{};void 0==a.xml.data||e(a,a.Data.LastServiceCallKey)||
gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableData(b):b(a.xml.data,a)},GetMetadataIfNeeded:function(a,b){a.Metadata=a.Metadata||{};a.Metadata.LastServiceCallKey=a.Metadata.LastServiceCallKey||{};void 0==a.xml.metadata||c(a,a.Metadata.LastServiceCallKey)||gx.lang.gxBoolean(a.IsExternalQuery)?a.calculatePivottableMetadata(b):b(a.xml.metadata,a)},GetDashboardSpecIfNeeded:function(b,c){b.DashboardSpec=b.DashboardSpec||"";b.LastServiceCallKey=b.LastServiceCallKey||{};var e;if(!(e=void 0==b.DashboardSpec))if(e=
b.LastServiceCallKey,b.Object){var m=a(b.Object);m!=e.ObjectName?(e.ObjectName=m,e=!0):e=!1}else e=""==b.DashboardSpec;e?(b.LoadingSpec=!0,b.GetDashboardSpec(c)):c(b.DashboardSpec,b)},GetRecordsetCacheKeyIfNeeded:function(a,b){a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery)?(a.RecordsetCache=a.RecordsetCache||{},a.RecordsetCache.LastServiceCallKey=a.RecordsetCache.LastServiceCallKey||{},void 0==a.xml.recordsetCacheKey||e(a,a.RecordsetCache.LastServiceCallKey)?a.getRecordsetCacheKey(b):
b(a.xml.recordsetCacheKey,a)):b("",a)},IsObjectSet:function(a){return a.Object||""!=a.ObjectName||""!=a.ObjectType&&0!=a.ObjectId}}}();
qv.pivot=function(){function a(a){var c=qv.util.GetContainerControlClasses(a);""!=c&&qv.util.SetUserControlClass(a,c);c=a.userControlId()+"_"+a.RealObjectName().replace(/,/g,"").replace(/\./g,"")+"_pivot_page";a.pivotParams={};a.pivotParams.page=c;var d=a.userControlId()+"_"+a.RealObjectName().replace(/,/g,"").replace(/\./g,"")+"_pivot_content";a.pivotParams.content=d;if(a._ControlRenderedTo!=a.RealType||0==jQuery("#"+d).length)if(a._ControlRenderedTo!=a.RealType&&a.RealType==QueryViewerOutputType.PivotTable){var e=
qv.util.dom.getEmptyContainer(a);a.Title&&qv.util.dom.createDiv(e,c.replace("_pivot_page","_title_div"),"","",{},"");qv.util.dom.createDiv(e,c,"","",{},"");qv.util.dom.createDiv(e,d,"","",{},"")}else a.Title&&jQuery("#"+a.ContainerName).find(".pivot_title_div").attr("id",c.replace("_pivot_page","_title_div")),jQuery("#"+a.ContainerName).find(".pivot_filter_div").attr("id",c),jQuery("#"+a.ContainerName).find(".conteiner_table_div").attr("id",d);a.pivotParams.container=a.getContainerControl();a.pivotParams.RealType=
a.RealType;a.pivotParams.ObjectName=a.RealObjectName();a.pivotParams.ControlName=a.ControlName;a.pivotParams.PageSize=a.Paging&&"false"!=a.Paging?a.PageSize:void 0;a.pivotParams.metadata=a.xml.metadata;c=gx.lang.gxBoolean(a.IsExternalQuery)?a.xml.data:a.RealType==QueryViewerOutputType.Table?a.ServerPagingForTable?a.xml.pageData:a.xml.data:a.ServerPagingForPivotTable?a.xml.pageData:a.xml.data;a.pivotParams.data=c;a.pivotParams.UcId=a.userControlId();a.pivotParams.AutoResize=gx.lang.gxBoolean(a.AutoResize)||
gx.lang.gxBoolean(a.ShrinkToFit);a.pivotParams.DisableColumnSort=a.DisableColumnSort;a.pivotParams.RememberLayout=a.RememberLayout;a.pivotParams.ShowDataLabelsIn=a.ShowDataLabelsIn;a.pivotParams.ServerPaging=a.ServerPagingForTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingPivot=a.ServerPagingForPivotTable&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.ServerPagingCacheSize=0;a.pivotParams.UseRecordsetCache=a.UseRecordsetCache&&!gx.lang.gxBoolean(a.IsExternalQuery);a.pivotParams.AllowSelection=
a.AllowSelection;a.pivotParams.SelectLine=!0;a.pivotParams.TotalForColumns=a.TotalForColumns;a.pivotParams.TotalForRows=a.TotalForRows;a.pivotParams.Title=qv.util.getTranslation(a.Title);void 0!=OAT.Loader?renderJSPivot(a.pivotParams,qv.collection,a):OAT.Loader.addListener(function(){renderJSPivot(a.pivotParams,qv.collection,a)});a._ControlRenderedTo=a.RealType;a.RealType==QueryViewerOutputType.Table&&qv.util.hideActivityIndicator(a)}function c(b){b.getPageDataForTable(function(b,c){(new Date).getTime();
qv.util.anyError(b)?(errMsg=qv.util.getErrorFromText(b),qv.util.renderError(c,errMsg)):(""!=b&&(c.xml.pageData=b),a(c))},[1,b.PageSize,!0,"","",[],!1])}function e(a,c){var d=[];if(null!=a)for(var e=-1,k=0;k<a.childNodes.length;k++)if("ITEM"==a.childNodes[k].nodeName){var s=a.childNodes[k].getAttribute("name");if(0>c.indexOf(s)){e++;d[e]={};d[e].Name=s;d[e].Values=[];for(var s=-1,o=a.childNodes[k],v=0;v<a.childNodes[k].childNodes.length;v++)if("VALUES"==a.childNodes[k].childNodes[v].nodeName){o=a.childNodes[k].childNodes[v];
break}for(v=0;v<o.childNodes.length;v++)"VALUE"==o.childNodes[v].nodeName&&(s++,d[e].Values[s]=null!=o.childNodes[v].firstChild?o.childNodes[v].firstChild.nodeValue:"")}}return d}return{tryToRenderPivotTable:function(b){var e="",d=(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,function(b,k){var s=!1;b!=k.xml.recordsetCacheKey&&(k.xml.recordsetCacheKey=b,s=!0);qv.util.anyError(b)?(e=qv.util.getErrorFromText(b),qv.util.renderError(k,e)):(s&&qv.services.parseRecordsetCacheKeyXML(k),
qv.services.GetMetadataIfNeeded(k,function(b,k){var g=false;if(b!=k.xml.metadata){k.xml.metadata=b;g=true}var x=(new Date).getTime();if(qv.util.anyError(b)){e=qv.util.getErrorFromText(b);qv.util.renderError(k,e)}else{g&&qv.services.parseMetadataXML(k);if(k.Metadata.ParserResult.Success)if(k.ServerPagingForTable&&k.RealType==QueryViewerOutputType.Table&&!gx.lang.gxBoolean(k.IsExternalQuery)){g=false;OAT.getStateWhenServingPaging&&(g=OAT.getStateWhenServingPaging(k.userControlId()+"_"+k.ObjectName,
k.ObjectName));!g||!k.RememberLayout?c(k,d,x):a(k)}else if(k.ServerPagingForPivotTable&&k.RealType==QueryViewerOutputType.PivotTable&&!gx.lang.gxBoolean(k.IsExternalQuery)){g=false;OAT.getStateWhenServingPaging&&(g=OAT.getStateWhenServingPaging(k.userControlId()+"_"+k.ObjectName,k.ObjectName));a(k)}else qv.services.GetDataIfNeeded(k,function(b,c){if(b!=c.xml.data)c.xml.data=b;(new Date).getTime();if(qv.util.anyError(b)){e=qv.util.getErrorFromText(b);qv.util.renderError(c,e)}else a(c)});else qv.util.renderError(k,
k.Metadata.ParserResult.Message)}}))})},GetMetadataPivot:function(a){var c=qv.util.GetDesigntimeMetadata(a);if(0<c.length){for(var d=a.oat_element.getMetadataXML(),d=qv.pivot.GetRuntimeMetadata(d,a.RealType),e=[],a=qv.util.GetOrderedElementsKeys(a,d),k=0;k<a.length;k++)for(var s=parseInt(a[k].substr(6,4)),s=d[s],o,v=0;v<c.length;v++)if(o=c[v],o.Name==s.Name){o=qv.util.cloneObject(o);qv.util.MergeFields(s,o);e.push(o);break}return e}return[]},GetRuntimeMetadata:function(a,c){function d(a,b,f,c,d){var b=
qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(a,b)),h=[];if(b==c&&(a=qv.util.dom.getSingleElementByTagName(a,f),null!=a)){a=qv.util.dom.getMultipleElementsByTagName(a,"value");for(f=0;f<a.length;f++)c=qv.util.trim(qv.util.dom.getValueNode(a[f])),null!=c&&("TOTAL"!=c.toUpperCase()||!d)&&h.push(c)}return{Type:b,Values:h}}var e=qv.util.dom.xmlDocument(a),e=qv.util.dom.getSingleElementByTagName(e,"OLAPCube"),k=[],s;s=qv.util.dom.getMultipleElementsByTagName(e,"OLAPDimension");for(var o=
0;o<s.length;o++){var v={},g=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"name")),x="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"hidden")),p=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"axis")),r=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"position")),f=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"summarize")),h=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],
"order"));v.Name=g;v.Type=QueryViewerElementType.Axis;v.Hidden=x;v.Axis=null!=p&&""!=p&&"null"!=p?qv.util.capitalize(p):null;v.Position=r;v.Order=null!=h&&""!=h&&"null"!=h?qv.util.capitalize(h):null;c==QueryViewerOutputType.Table?(v.Filter=d(s[o],"","include",null,!0),v.Filter.Type=QueryViewerFilterType.ShowSomeValues):(v.Subtotals="no"==f?QueryViewerSubtotals.No:QueryViewerSubtotals.Yes,v.Filter=d(s[o],"filterType","include",QueryViewerFilterType.ShowSomeValues,!0),v.ExpandCollapse=d(s[o],"collapseType",
"includeExpand",QueryViewerExpandCollapseType.ExpandSomeValues,!1));k.push(v)}s=qv.util.dom.getMultipleElementsByTagName(e,"OLAPMeasure");for(o=0;o<s.length;o++)v={},g=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"name")),x="true"==qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"hidden")),r=qv.util.dom.getValueNode(qv.util.dom.getSingleElementByTagName(s[o],"position")),v.Name=g,v.Type=QueryViewerElementType.Datum,v.Hidden=x,v.Position=r,k.push(v);return k},
GetDataPivot:function(a){return a.oat_element.getDataXML()},GetFilteredDataPivot:function(a){return a.oat_element.getFilteredDataXML()},onOAT_PIVOTDragAndDropEvent:function(a,c){if(a.RealType==QueryViewerOutputType.PivotTable&&(IsQueryObjectPreview()&&window.external.SendText(a.ControlName,c),a.DragAndDrop)){var d=qv.util.dom.xmlDocument(c),d=qv.util.dom.selectXPathNode(d,"/DATA");a.DragAndDropData.Name=d.getAttribute("name");a.DragAndDropData.Type=QueryViewerElementType.Axis;axis=d.getAttribute("axis");
a.DragAndDropData.Axis="rows"==axis?QueryViewerAxisType.Rows:"columns"==axis?QueryViewerAxisType.Columns:QueryViewerAxisType.Pages;a.DragAndDropData.Position=d.getAttribute("position");a.DragAndDrop()}},onItemClickEvent:function(a,c,d){var w,k;if(a.ItemClick&&!d||a.ItemDoubleClick&&d){k=d?k=a.ItemDoubleClickData:a.ItemClickData;var s=qv.util.dom.xmlDocument(c),o=qv.util.dom.selectXPathNode(s,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(s,"/DATA/CONTEXT/RELATED"),s=qv.util.dom.selectXPathNode(s,"/DATA/CONTEXT/FILTERS");
k.Name=o.getAttribute("name");w=o.getAttribute("location");switch(w){case "rows":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Rows;break;case "columns":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Columns;break;case "pages":k.Type=QueryViewerElementType.Axis;k.Axis=QueryViewerAxisType.Pages;break;default:k.Type=QueryViewerElementType.Datum,k.Axis=""}k.Value=null!=o.firstChild?o.firstChild.nodeValue:"";k.Selected="true"==o.getAttribute("selected");o=[];for(w=0;w<a.Metadata.Axes.length;w++)a.Metadata.Axes[w].IsComponent&&
o.push(a.Metadata.Axes[w].Name);for(w=0;w<a.Metadata.Data.length;w++)a.Metadata.Data[w].IsComponent&&o.push(a.Metadata.Data[w].Name);k.Context=e(c,o);k.Filters=e(s,o);d?a.ItemDoubleClick():a.ItemClick()}},onItemExpandCollapseEvent:function(a,c,d){var e;IsQueryObjectPreview()&&window.external.SendText(a.ControlName,c);if(a.ItemExpand&&!d||a.ItemCollapse&&d){e=d?e=a.ItemCollapseData:a.ItemExpandData;var c=qv.util.dom.xmlDocument(c),k=qv.util.dom.selectXPathNode(c,"/DATA/ITEM"),c=qv.util.dom.selectXPathNode(c,
"/DATA/CONTEXT/EXPANDEDVALUES");e.Name=k.getAttribute("name");e.Value=k.firstChild.nodeValue;e.ExpandedValues=[];for(var k=-1,s=0;s<c.childNodes.length;s++)"VALUE"==c.childNodes[s].nodeName&&(k++,e.ExpandedValues[k]=c.childNodes[s].firstChild.nodeValue);d?a.ItemCollapse():a.ItemExpand()}},Select:function(a,c){a.oat_element.selectValue(c)},Deselect:function(a){a.oat_element.deselectValue()}}}();var HCChart,_highChartsDrawPointsWrapped,DEFAULTCHARTSPACING=10;
qv.chart=function(){function a(a){return a.RealChartType==QueryViewerChartType.Timeline||a.RealChartType==QueryViewerChartType.SmoothTimeline||a.RealChartType==QueryViewerChartType.StepTimeline}function c(b){return a(b)||b.RealChartType==QueryViewerChartType.Sparkline}function e(a){return a.RealChartType==QueryViewerChartType.Pie||a.RealChartType==QueryViewerChartType.Pie3D||a.RealChartType==QueryViewerChartType.Doughnut||a.RealChartType==QueryViewerChartType.Doughnut3D}function b(a){return a.RealChartType==
QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea}function m(a){return e(a)||a.RealChartType==QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid}function d(a){return(a.RealChartType==QueryViewerChartType.ColumnLine||a.RealChartType==QueryViewerChartType.Column3DLine)&&1<a.Chart.Series.DataFields.length}function w(a){return a.RealChartType==QueryViewerChartType.CircularGauge||a.RealChartType==QueryViewerChartType.LinearGauge}
function k(a){return a.RealChartType==QueryViewerChartType.StackedColumn||a.RealChartType==QueryViewerChartType.StackedColumn3D||a.RealChartType==QueryViewerChartType.StackedColumn100||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100||a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.StackedLine||a.RealChartType==QueryViewerChartType.StackedLine100?!1:(a.PlotSeries==
QueryViewerPlotSeries.InSeparateCharts||m(a))&&1<a.Chart.Series.DataFields.length}function s(a,b){for(var f=[],c=0;c<a.Charts.length;c++)for(var d=0;d<a.Charts[c].series.length;d++)f.push(a.Charts[c].series[d].data[b]);return f}function o(a,b,f,c,d){for(var h=0;h<a.Charts.length;h++)if(b.id!=a.Charts[h].container.id)for(var e=0;e<a.Charts[h].series.length;e++){var g=a.Charts[h].series[e].data[f];c?(d&&g.setState("hover"),a.Charts[h].tooltip.hide(0)):g.setState()}}function v(a){switch(a){case QueryViewerChartType.Column:case QueryViewerChartType.Column3D:case QueryViewerChartType.StackedColumn:case QueryViewerChartType.StackedColumn3D:case QueryViewerChartType.StackedColumn100:case QueryViewerChartType.PolarArea:return"column";
case QueryViewerChartType.Bar:case QueryViewerChartType.StackedBar:case QueryViewerChartType.StackedBar100:case QueryViewerChartType.LinearGauge:return"bar";case QueryViewerChartType.Area:case QueryViewerChartType.StackedArea:case QueryViewerChartType.StackedArea100:case QueryViewerChartType.FilledRadar:case QueryViewerChartType.StepArea:return"area";case QueryViewerChartType.SmoothArea:return"areaspline";case QueryViewerChartType.Line:case QueryViewerChartType.StackedLine:case QueryViewerChartType.StackedLine100:case QueryViewerChartType.Radar:case QueryViewerChartType.Timeline:case QueryViewerChartType.StepTimeline:case QueryViewerChartType.Sparkline:case QueryViewerChartType.StepLine:return"line";
case QueryViewerChartType.SmoothLine:case QueryViewerChartType.SmoothTimeline:return"spline";case QueryViewerChartType.ColumnLine:case QueryViewerChartType.Column3DLine:return"column";case QueryViewerChartType.Pie:case QueryViewerChartType.Pie3D:case QueryViewerChartType.Doughnut:case QueryViewerChartType.Doughnut3D:return"pie";case QueryViewerChartType.Funnel:return"funnel";case QueryViewerChartType.Pyramid:return"pyramid";case QueryViewerChartType.CircularGauge:return"solidgauge";default:return"line"}}
function g(a,b,f,c,d,h,e){function g(a,b){var f={};f.Name=a.Name;var c=qv.util.GetPictureProperties(a.DataType,a.Picture),c=qv.util.ApplyPicture(b,a.Picture,a.DataType,c);f.Values=[c];return f}a.Name=f;a.Type=c;a.Axis="";a.Value=d;a.Selected=h;a.Context=[];for(f=0;f<b.Metadata.Axes.length;f++)c=b.Metadata.Axes[f],c.IsComponent||(c=g(c,e[c.DataField]),a.Context.push(c));for(f=0;f<b.Metadata.Data.length;f++)c=b.Metadata.Data[f],c.IsComponent||(c=g(c,e[c.DataField]),a.Context.push(c));a.Filters=[]}function x(a,
b){for(var f=!1,c=0;c<a.length;c++)for(var d=a[c],h=0;h<d.series.length;h++){var e=d.series[h].points[b];if(e.selected){e.select();break}else e.select(!0,0<h),f=!0}return f}function p(a){for(var b=0;b<a.length;b++){var f=a[b].getSelectedPoints();0<f.length&&f[0].select(!1,!1)}}function r(a){var b=qv.collection[this.chart.options.qv.viewerId],f=!1;if(b.SelectionAllowed())if("Point"==b.SelectionType){if(a.point.select(),f=a.point.selected,b.PlotSeries==QueryViewerPlotSeries.InSeparateCharts&&f)for(var c=
0;c<b.Charts.length;c++){var d=b.Charts[c].series[0].points[a.point.index];d!=a.point&&d.select(!1)}}else f=x(b.Charts,a.point.index);b.ItemClick&&b.Metadata.Data[a.point.series.index].RaiseItemClick&&(c=b.Chart.Series.ByName[this.name],d=qv.util.formatNumber(a.point.y,c.NumberFormat.DecimalPrecision,c.Picture,!1),g(b.ItemClickData,b,c.FieldName,QueryViewerElementType.Datum,d,f,b.Data.Rows[a.point.index]),b.ItemClick())}function f(a,b){return""==b?qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},
null,a).outerHTML:qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",color:b},null,a).outerHTML}function h(a,b){var f=Math.min(b.getContainerControl().offsetHeight,b.getContainerControl().offsetWidth)/(k(b)?b.Chart.Series.DataFields.length:1)/13;return qv.util.dom.createSpan(null,"","","",{color:q(b,a),fontSize:f+"px"},null,qv.util.formatNumber(a.point.y,2,"ZZZZZZZZZZZZZZ9.99",!0)+"%").outerHTML}function z(a,b){function f(a){for(var b=a.y,c=a.series.data,a=a.index,d="",d=a,h=a+1;h<c.length&&
c[h].y==b;h++)d=h;d<c.length-1&&d++;for(var e=a,h=a-1;0<=h&&c[h].y==b;h--)e=h;b=(c[d].x-c[e].x)/1E3;return d=" ("+gx.getMessage("GXPL_QViewerDuration")+": "+qv.util.seconsdToText(b)+")"}var c,d=qv.collection[a.points[0].series.chart.options.qv.viewerId];k(d)?c=s(d,a.points[0].point.index):(c=[],jQuery.each(a.points,function(a,b){c.push(b.point)}));for(var h={},e=!1,g=0;g<c.length;g++){var l=c[g].series.name;void 0==h[l]&&(h[l]=[]);h[l].push(c[g]);1<h[l].length&&(e=!0)}var g="",n,B;for(B in h){var l=
b[B],o=h[B],m=q(d,o[0]);e&&(g+=qv.util.dom.createSpan(null,"","","",{fontWeight:"bold",color:m},null,B).outerHTML+"<br/>");for(var z=0;void 0!=o[z];z++){var y=o[z],D=parseInt(y.real_x?y.real_x:y.x);if(0<c.length&&c[0].series.chart.options.qv.comparing)g+=y.name+": "+qv.util.formatNumber(y.y,l.NumberFormat.DecimalPrecision,l.Picture,!1)+"<br/>";else{n!=D&&(g+=y.name+"<br/>",n=D);var D=d.RealChartType==QueryViewerChartType.StepTimeline?f(y):"",u=qv.util.dom.createSpan(null,"","","",{color:m},null,B+
": ").outerHTML,y=qv.util.dom.createSpan(null,"","","",{fontWeight:"bold"},null,qv.util.formatNumber(y.y,l.NumberFormat.DecimalPrecision,l.Picture,!1)).outerHTML,g=g+(u+y+D+"<br/>")}}}return g}function C(a){"undefined"===typeof _avoidSelectionEventHandler&&(_avoidSelectionEventHandler=!1);if(!_avoidSelectionEventHandler){H(W,"none");W=null;if(a.xAxis){var b=a.target.options.qv,f=a.xAxis[0];J(a.target.options.qv.viewerId,100*((f.min-b.dataMin)/(b.dataMax-b.dataMin)),100*((f.max-b.dataMin)/(b.dataMax-
b.dataMin)))}else J(a.target.options.qv.viewerId,0,100);b=qv.collection[a.target.options.qv.viewerId];if(k(b)){var b=b.getContainerControl().id,b=jQuery("[id^="+b+"_chart]"),c=[];jQuery.each(b,function(b,f){if(f.id!=a.target.renderTo.id){var d=jQuery("#"+f.id).highcharts();c.push(d)}});jQuery.each(c,function(b,c){a.xAxis?c.get("xaxis").setExtremes(f.min,f.max):(_avoidSelectionEventHandler=!0,c.zoomOut(),_avoidSelectionEventHandler=!1)})}}}function n(a,b,f,c,d){function h(a,b,f,c,d){function e(a,b){return a==
QueryViewerDataType.Date?10==b.length:" "==b.charAt(10)}function g(a,b,f,c,d){var h=a.substr(0,4),e=a.substr(5,2),a=a.substr(8,2);c||(b=b.replace("M",""));d||(b=b.replace("D",""));for(var l="",F=0;F<b.length;F++)l+=0==F?"":"/",l+=b.charAt(F);b=l.replace("Y",f?h:h.substr(2,2));c&&(b=b.replace("M",e));d&&(b=b.replace("D",a));return b}var l,F;if(""!=a)switch(d=d||(f==QueryViewerDataType.Date?"Days":"Seconds"),d){case "Years":l=a.substr(0,4)+"-01-01";F=g(l,c,e(f,b),!1,!1);break;case "Months":l=a.substr(0,
7)+"-01";F=g(l,c,e(f,b),!0,!1);break;case "Semesters":l="06">=a.substr(5,2)?"01":"07";l=a.substr(0,5)+l+"-01";d="06">=a.substr(5,2)?"01":"02";dateStrSemester=a.substr(0,5)+d+"-01";F=g(dateStrSemester,c,e(f,b),!0,!1);break;case "Quarters":l="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"04":"09">=a.substr(5,2)?"07":"10";l=a.substr(0,5)+l+"-01";d="03">=a.substr(5,2)?"01":"06">=a.substr(5,2)?"02":"09">=a.substr(5,2)?"03":"04";dateStrQuarter=a.substr(0,5)+d+"-01";F=g(dateStrQuarter,c,e(f,b),!0,!1);break;
case "Weeks":a=new gx.date.gxdate(a,"Y4MD");l=gx.date.dow(a);a=gx.date.dtadd(a,-86400*(l-1));l=qv.util.dateToString(a,!1);F=g(l,c,e(f,b),!0,!0);break;case "Days":l=f==QueryViewerDataType.Date?a:a.substr(0,10);F=f==QueryViewerDataType.Date?b:b.substr(0,10);break;case "Hours":l=a.substr(0,13)+":00:00";F=b.substr(0,13)+":00";break;case "Minutes":l=a.substr(0,16)+":00";F=b.substr(0,16);break;case "Seconds":l=a,F=b}else F=l="";return{dateStr:l,name:F}}var e;e={dateStr:null,name:null};var g=[],l=[],n=[];
for(i=0;i<b.length;i++){var k=a.Values[i].ValueWithPicture,B=a.Values[i].Value,o,m;null!=b[i].Value?c==QueryViewerAggregationType.Count?(o=0,m=parseFloat(qv.util.trim(b[i].Value))):c==QueryViewerAggregationType.Average?(o=parseFloat(qv.util.trim(b[i].Value_N)),m=parseFloat(qv.util.trim(b[i].Value_D))):(o=parseFloat(qv.util.trim(b[i].Value)),m=1):(o=null,m=0);k=h(B,k,f,gx.dateFormat,d);k.dateStr==e.dateStr||0==i?(null!=o&&(g.push(o),l.push(m)),0==i&&(e=k)):(e={x:e.dateStr,y:qv.util.aggregate(c,g,l),
name:e.name},n.push(e),e=k,g=[o],l=[m])}0<g.length&&0<l.length&&(e={x:e.dateStr,y:qv.util.aggregate(c,g,l),name:e.name},n.push(e));return n}function l(b){var f,c,d;a(b)?(b=DEFAULTCHARTSPACING,f=0,c=DEFAULTCHARTSPACING,d=0):d=c=f=b=DEFAULTCHARTSPACING;return[b,f,c,d]}function D(a,b){var f,c;f=3>=a?24:50/(a-1)-1;c=100-(f+1)*(b-1);return{Width:f,Center:c,LowerExtreme:c-f/2,UpperExtreme:c+f/2}}function U(a,b){var f=1/a/2,c=-0.5+(b-0.5)/a;return{Width:f,Center:c,LowerExtreme:c-f/2,UpperExtreme:c+f/2}}
function q(a,b){function f(a){function b(a,f,c){for(var d=0,h=0;h<f.cssRules.length;h++){var e=f.cssRules[h];if(e.selectorText&&0==e.selectorText.indexOf(c)){var g=e.selectorText.replace(c,"");a[g]=e.style.fill;d++}if(d==HIGHCHARTS_MAX_COLORS)break}}if(!a._HighchartsDefaultColors){a._HighchartsDefaultColors=[];var c={},d,h;d=qv.util.GetQueryViewerStyleSheet(a);b(c,d,".highcharts-color-");""!=a.Class&&(d=qv.util.GetThemeStyleSheet(a),h="."+qv.util.GetContainerControlClass(a)+" .highcharts-color-",
b(c,d,h));for(d=0;d<HIGHCHARTS_MAX_COLORS;d++)a._HighchartsDefaultColors.push(c[d.toString()])}return a._HighchartsDefaultColors}var c;c=b.className&&0==b.className.indexOf("highcharts-color-")?parseInt(b.className.replace("highcharts-color-","")):b.colorIndex;c<HIGHCHARTS_MAX_COLORS?c=f(a)[c]:(c=HIGHCHARTS_CUSTOM_COLOR[c-HIGHCHARTS_MAX_COLORS],qv.util.color.IsHexaColor(c)&&(c="#"+c));return c}function B(a,b,f,c){if(!qv.util.IsNullColor(f)){if(f.IsDefault)a=f.ColorIndex;else{var d=f.Color,f=HIGHCHARTS_CUSTOM_COLOR.indexOf(d);
if(0>f){HIGHCHARTS_CUSTOM_COLOR.push(d);var f=HIGHCHARTS_CUSTOM_COLOR.length-1,f=HIGHCHARTS_MAX_COLORS+f,h=qv.util.color.IsHexaColor(d)?"#":"",d="."+HIGHCHARTS_COLOR_PREFIX+f+" {fill: "+h+d+"; stroke: "+h+d+";}",a=qv.util.GetThemeStyleSheet(a);a.insertRule(d,a.cssRules.length)}else f=HIGHCHARTS_MAX_COLORS+f;a=f}c?b.colorIndex=a:b.className=HIGHCHARTS_COLOR_PREFIX+a}}function y(g,y,u){var p=qv.util.XAxisDataType(g)==QueryViewerDataType.Date?"Days":"Seconds",t={qv:{}};t.qv.viewerId=g.userControlId();
t.chart=function(b,f){var c={styledMode:!0};c.spacing=l(b);if(k(b)){var h=b.userControlId(),h=a(b)?E(h):h;c.renderTo=document.getElementById(h+"_chart"+f.toString())}else c.renderTo=a(b)?document.getElementById(E(b.userControlId())):b.getContainerControl();d(b)||(c.type=v(b.RealChartType));b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea?c.polar=!0:b.RealChartType==QueryViewerChartType.Column3D||b.RealChartType==
QueryViewerChartType.StackedColumn3D||b.RealChartType==QueryViewerChartType.Column3DLine?c.options3d={enabled:!0,alpha:15,beta:15,depth:50,viewDistance:25}:b.RealChartType==QueryViewerChartType.Pie3D||b.RealChartType==QueryViewerChartType.Doughnut3D?c.options3d={enabled:!0,alpha:45,beta:0}:a(b)&&(c.zoomType="x",c.resetZoomButton={theme:{display:"none"}},c.events={},c.events.selection=function(a){C(a)});return c}(g,u);t.credits={enabled:!1};t.legend={enabled:1<g.Chart.Series.DataFields.length&&!k(g)||
m(g),margin:0};t.title=""==g.Title?{text:null}:{text:null==u||0==u?qv.util.getTranslation(g.Title):null};t.subtitle=function(a,b){var f={};if(k(a)&&(m(a)||a.RealChartType==QueryViewerChartType.CircularGauge))f.text=b.Name,f.floating=!0,f.align="left",f.verticalAlign="middle";return f}(g,y);t.pane=function(a,b){var f={};if(a.RealChartType==QueryViewerChartType.CircularGauge){f.background=[];var c;k(a)&&(c=D(1,1));var d=0,h;for(h in a.Chart.Series.ByName){if(!k(a)||d==b){var e=a.Chart.Series.ByName[h],
g={};k(a)||(c=D(a.Chart.Series.DataFields.length,d+1));g.outerRadius=c.UpperExtreme.toString()+"%";g.innerRadius=c.LowerExtreme.toString()+"%";e=qv.util.IsNullColor(e.Color)?e.Points[0].Color:e.Color;B(a,g,e,!1);g.borderWidth=0;f.background.push(g)}d++}}return f}(g,u);t.xAxis=function(a,f){xAxis={};if(a.RealChartType!=QueryViewerChartType.CircularGauge){var d=c(a);if(a.RealChartType!=QueryViewerChartType.Radar&&a.RealChartType!=QueryViewerChartType.FilledRadar&&a.RealChartType!=QueryViewerChartType.PolarArea&&
a.RealChartType!=QueryViewerChartType.LinearGauge&&a.RealChartType!=QueryViewerChartType.Sparkline){var h=xAxis,e="";if(""==a.XAxisTitle)for(var g=0;g<a.Metadata.Axes.length;g++){var l=a.Metadata.Axes[g];if(l.Visible==QueryViewerVisible.Yes||l.Visible==QueryViewerVisible.Always)e+=(""==e?"":", ")+qv.util.getTranslation(l.Title)}else e=qv.util.getTranslationAlsoIfStatic(a.XAxisTitle);h.title={text:e}}else{a.RealChartType==QueryViewerChartType.Sparkline&&k(a)&&(xAxis.title={text:a.Chart.Series.ByIndex[f].Name});
xAxis.lineWidth=0;if(a.RealChartType==QueryViewerChartType.LinearGauge||a.RealChartType==QueryViewerChartType.Sparkline)xAxis.tickPositions=[];xAxis.tickmarkPlacement=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"on":"between"}if(a.RealChartType==QueryViewerChartType.LinearGauge){var h=0,n;k(a)&&(n=U(1,1));xAxis.plotBands=[];for(var F in a.Chart.Series.ByName){if(!k(a)||h==f)e=a.Chart.Series.ByName[F],k(a)||(n=U(a.Chart.Series.DataFields.length,h+
1)),plotBand={},e=qv.util.IsNullColor(e.Color)?e.Points[0].Color:e.Color,B(a,plotBand,e,!1),plotBand.from=n.LowerExtreme,plotBand.to=n.UpperExtreme,xAxis.plotBands.push(plotBand);h++}}d||(xAxis.categories=[]);n=!1;for(h=0;h<a.Chart.Categories.Values.length;h++)""!=a.Chart.Categories.Values[h].ValueWithPicture&&(n=!0),d||(xAxis.categories[h]=a.Chart.Categories.Values[h].ValueWithPicture);if(d)xAxis.type="datetime",xAxis.id="xaxis",xAxis.minRange=1,qv.util.XAxisDataType(a)==QueryViewerDataType.Date&&
(null!=a.Chart.Categories.MaxValue&&null!=a.Chart.Categories.MinValue)&&(d=new gx.date.gxdate(a.Chart.Categories.MinValue,"Y4MD"),864E6>(new gx.date.gxdate(a.Chart.Categories.MaxValue,"Y4MD")).Value.getTime()-d.Value.getTime()&&(xAxis.tickInterval=864E5));else if(xAxis.labels={},xAxis.labels.enabled=n,a.XAxisLabels!=QueryViewerXAxisLabels.Horizontally&&!(a.RealChartType==QueryViewerChartType.Bar||a.RealChartType==QueryViewerChartType.StackedBar||a.RealChartType==QueryViewerChartType.StackedBar100)&&
!b(a))a.XAxisLabels==QueryViewerXAxisLabels.Vertically?(d=90,n=5):(d=parseInt(a.XAxisLabels.replace("Rotated","")),n=10),xAxis.labels.rotation=360-d,xAxis.labels.y=n,xAxis.labels.align="right";b(a)?xAxis.className="highcharts-no-axis-line highcharts-yes-grid-line":a.RealChartType==QueryViewerChartType.Sparkline&&(xAxis.className="highcharts-no-axis-line highcharts-no-grid-line")}return xAxis}(g,u);t.yAxis=function(a,b){function f(a){if(0==a.length)return!1;for(var b,c=0;c<a.length;c++)if(0==c)b=a[c].Picture;
else if(a[c].Picture!=b)return!1;return!0}if(a.RealChartType==QueryViewerChartType.Sparkline)yAxis={visible:!1};else{var c;c=a.RealChartType==QueryViewerChartType.CircularGauge?null:k(a)?b.Name:I(a);d(a)&&!k(a)?(yAxis=[],yAxis[0]={title:{text:c}},yAxis[1]={title:{text:""},opposite:!0}):yAxis={title:{text:c}};yAxis.plotLines=[];yAxis.plotBands=[];if(!e(a)&&!(a.RealChartType==QueryViewerChartType.Funnel||a.RealChartType==QueryViewerChartType.Pyramid)&&!w(a)){for(var h=0;h<a.Chart.PlotBands.length;h++){var g=
a.Chart.PlotBands[h];if(null==b||b.Name==g.SeriesName)g.From==g.To&&null!=g.From?(c={value:g.From,width:1,zIndex:3},B(a,c,g.Color,!1),yAxis.plotLines.push(c)):(c={},B(a,c,g.Color,!1),c.from=!g.From?Number.MIN_VALUE:g.From,c.to=!g.To?Number.MAX_VALUE:g.To,yAxis.plotBands.push(c))}if(k(a)||1==a.Chart.Series.ByIndex.length||f(a.Chart.Series.ByIndex)){var l=k(a)?b:a.Chart.Series.ByIndex[0];yAxis.labels={};yAxis.labels.formatter=function(){return qv.util.formatNumber(this.value,l.NumberFormat.DecimalPrecision,
l.Picture,true)}}}if(a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar||a.RealChartType==QueryViewerChartType.PolarArea)yAxis.min=0,yAxis.gridLineInterpolation=a.RealChartType==QueryViewerChartType.Radar||a.RealChartType==QueryViewerChartType.FilledRadar?"polygon":"circle";if(w(a)){yAxis.min=0;yAxis.max=0;for(var n in a.Chart.Series.ByName)if(!k(a)||n==b.Name)c=a.Chart.Series.ByName[n],yAxis.max=Math.max(yAxis.max,100*c.MaximumValue/c.TargetValue);if(a.RealChartType==
QueryViewerChartType.LinearGauge||100!=yAxis.max){c={className:"highcharts-dashed-plot-line",value:100};if(k(a)||1==a.Chart.Series.DataFields.length){var h=k(a)?b:a.Chart.Series.ByIndex[0],F,o;a.RealChartType==QueryViewerChartType.LinearGauge?(g=-10,F=-5,o="right"):(g=15,F=0,o="center");c.label={text:h.TargetValue,verticalAlign:"bottom",rotation:0,y:g,x:F,align:o}}yAxis.plotLines.push(c)}}a.RealChartType==QueryViewerChartType.LinearGauge?(yAxis.className="highcharts-no-axis-line highcharts-no-grid-line",
yAxis.labels={enabled:!1}):a.RealChartType==QueryViewerChartType.CircularGauge&&(yAxis.lineWidth=0,yAxis.tickPositions=[]);g=h=!1;for(n in a.Chart.Series.ByName)c=a.Chart.Series.ByName[n],c.PositiveValues&&(h=!0),c.NegativeValues&&(g=!0);if(!g&&!h)d(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0,yAxis[0].max=1,yAxis[1].max=1):(yAxis.min=0,yAxis.max=1);else if(gx.lang.gxBoolean(a.XAxisIntersectionAtZero)&&(g||(d(a)&&!k(a)?(yAxis[0].min=0,yAxis[1].min=0):yAxis.min=0),!h))d(a)&&!k(a)?(yAxis[0].max=0,yAxis[1].max=
0):yAxis.max=0}return yAxis}(g,y);t.plotOptions=function(b,f){function c(a){var b;b=k(a)||1==a.Chart.Series.DataFields.length?23*(k(a)?a.Chart.Series.DataFields.length:1):29;return a.getContainerControl().offsetHeight-b}function d(a){var b={radius:1,symbol:"circle",states:{hover:{radius:4}}};a.SelectionAllowed()&&(b.states.select={radius:5,lineWidth:1});return b}var e=gx.lang.gxBoolean(f.ShowValues),g={series:{}};g.series.events={};f.RealChartType==QueryViewerChartType.CircularGauge?(g.series.dataLabels=
{},g.series.dataLabels.enabled=1==f.Chart.Series.DataFields.length&&gx.lang.gxBoolean(f.ShowValues)||k(f),g.series.dataLabels.y=0,g.series.dataLabels.borderWidth=0,g.series.dataLabels.formatter=function(){return h(this,f)},g.series.marker={enabled:!1}):e&&(g.series.dataLabels={},g.series.dataLabels.enabled=!0,g.series.dataLabels.connectorColor="#000000",g.series.dataLabels.formatter=function(){var a=f.Chart.Series.ByName[this.series.name];return qv.util.formatNumber(this.point.y*(f.RealChartType==
QueryViewerChartType.LinearGauge?a.TargetValue/100:1),a.NumberFormat.DecimalPrecision,a.Picture,!1)},f.RealChartType==QueryViewerChartType.LinearGauge&&(g.series.dataLabels.inside=!0));if(k(f)&&f.RealChartType!=QueryViewerChartType.CircularGauge){g.series.point={};g.series.point.events={};var l=f.RealChartType!=QueryViewerChartType.LinearGauge;g.series.point.events.mouseOver=function(){o(f,this.series.chart.container,this.index,true,l)};g.series.point.events.mouseOut=function(){o(f,this.series.chart.container,
this.index,false,l)}}if(f.ItemClick||f.SelectionAllowed())g.series.events.click=r;switch(b){case "bar":g.bar={};f.RealChartType==QueryViewerChartType.StackedBar?(g.series.stacking="normal",g.bar.stacking="normal"):f.RealChartType==QueryViewerChartType.StackedBar100&&(g.series.stacking="percent",g.bar.stacking="percent");if(f.RealChartType==QueryViewerChartType.LinearGauge){e=U(f.Chart.Series.DataFields.length,1).Width*c(f);g.bar.pointWidth=e;g.bar.pointPadding=0;g.bar.groupPadding=0;for(var n=Number.MAX_VALUE,
F=0;F<f.Chart.Series.DataFields.length;F++){var B=f.Chart.Series.ByIndex[F],B=B.Points[0].Value/B.TargetValue;B<n&&(n=B)}n*=f.getContainerControl().offsetWidth;g.bar.borderRadius=Math.min(e/2,n/2)}break;case "column":g.column={};f.RealChartType==QueryViewerChartType.StackedColumn||f.RealChartType==QueryViewerChartType.StackedColumn3D||f.RealChartType==QueryViewerChartType.PolarArea?(g.series.stacking="normal",g.column.stacking="normal"):f.RealChartType==QueryViewerChartType.StackedColumn100&&(g.series.stacking=
"percent",g.column.stacking="percent");f.RealChartType==QueryViewerChartType.PolarArea&&(g.column.pointPadding=0,g.column.groupPadding=0);break;case "area":g.area={};f.RealChartType==QueryViewerChartType.StepArea&&(g.area.step="center");g.area.marker=d(f);f.RealChartType==QueryViewerChartType.StackedArea?g.area.stacking="normal":f.RealChartType==QueryViewerChartType.StackedArea100&&(g.area.stacking="percent");break;case "areaspline":g.areaspline={};g.areaspline.marker=d(f);break;case "line":g.line=
{};g.line.marker=d(f);f.RealChartType==QueryViewerChartType.StepLine?g.line.step="center":f.RealChartType==QueryViewerChartType.StepTimeline&&(g.line.step="left");a(f)?g.series.connectNulls=!0:f.RealChartType==QueryViewerChartType.StackedLine?g.line.stacking="normal":f.RealChartType==QueryViewerChartType.StackedLine100&&(g.line.stacking="percent");break;case "spline":g.spline={};g.spline.marker=d(f);break;case "pie":g.pie={};if(f.RealChartType==QueryViewerChartType.Doughnut||f.RealChartType==QueryViewerChartType.Doughnut3D)g.pie.innerSize=
"35%";if(f.RealChartType==QueryViewerChartType.Pie3D||f.RealChartType==QueryViewerChartType.Doughnut3D)g.pie.depth=35;g.pie.dataLabels={enabled:e};g.pie.showInLegend=!0;break;case "solidgauge":g.solidgauge={};g.solidgauge.showInLegend=!0;g.solidgauge.rounded=!0;break;case "funnel":g.funnel={};g.funnel.showInLegend=!0;g.funnel.dataLabels={enabled:e};break;case "pyramid":g.pyramid={},g.pyramid.showInLegend=!0,g.pyramid.dataLabels={enabled:e}}return g}(t.chart.type,g);t.tooltip=function(b){var c={};
a(b)?(c.borderRadius=1,c.shadow=!0,c.shared=!0,c.useHTML=!1,c.formatter=function(){return z(this,b.Chart.Series.ByName)}):b.RealChartType==QueryViewerChartType.StackedColumn100||b.RealChartType==QueryViewerChartType.StackedBar100||b.RealChartType==QueryViewerChartType.StackedArea100||b.RealChartType==QueryViewerChartType.StackedLine100?c.formatter=function(){return"<b>"+(""!=this.point.id?this.point.id:this.series.name)+"</b>: "+Math.round(100*this.point.percentage)/100+"%"}:e(b)?c.formatter=function(){var a;
if(k(b)){a=qv.collection[this.point.series.chart.options.qv.viewerId];var c=m(a),d=s(a,this.point.index),h=0<d.length?d[0].id:"",g=""!=h,e="";g&&(e+=f(h,c?q(a,this):""));for(h=0;h<d.length;h++)var l=d[h],e=e+((g||0<h?"<br/>":"")+f(l.series.name+": ",c?"":q(a,l.series))),l=Math.round(100*l.percentage)/100,e=e+(l+"%");a=e}else l=Math.round(100*this.point.percentage)/100,a="<b>"+(""!=this.point.name?this.point.name:this.point.series.name)+"</b>: "+l+"%";return a}:b.RealChartType==QueryViewerChartType.CircularGauge?
(c.enabled=(1<b.Chart.Series.DataFields.length||!gx.lang.gxBoolean(b.ShowValues))&&!k(b),c.formatter=function(){return h(this,b)},c.positioner=function(a){return{x:(this.chart.plotWidth-a)/2,y:this.chart.plotHeight/2}}):c.formatter=function(){var a;var c=b.Chart.Series.ByName;if(!k(b)||w(b)){a=qv.collection[this.series.chart.options.qv.viewerId];var d=c[this.series.name],c=w(a)?"ZZZZZZZZZZZZZZ9.99":d.Picture,h=w(a)?2:d.NumberFormat.DecimalPrecision,d=w(a);a="<b>"+(""!=this.point.id?this.point.id:
this.series.name)+"</b>: "+qv.util.formatNumber(this.point.y,h,c,d)+(w(a)?"%":"")}else{this.points?(a=this.points[0],d=a.point.index):(a=this.point,d=a.index);a=qv.collection[a.series.chart.options.qv.viewerId];var h=m(a),g=s(a,d),d=!this.key?!this.x?"":this.x:this.key,e=""!=d&&a.RealChartType!=QueryViewerChartType.Sparkline,l="";e&&(l+=f(d,h?q(a,this):""));for(var n=0;n<g.length;n++)var F=g[n],d=c[F.series.name],l=l+((e||0<n?"<br/>":"")+f(F.series.name+": ",h?"":q(a,F))),l=l+qv.util.formatNumber(F.y,
d.NumberFormat.DecimalPrecision,d.Picture,!1);a=l}return a};return c}(g);t.series=function(b,f,h){function g(b,f,d,h,e){h={};b.ItemClick&&b.Metadata.Data[d].RaiseItemClick&&(h.className="highcharts-drilldown-point");h.visible=f.Visible==QueryViewerVisible.Yes||f.Visible==QueryViewerVisible.Always;h.events={legendItemClick:function(a){if(f.Visible==QueryViewerVisible.Always)a.preventDefault();else{var c=qv.chart.GetRuntimeMetadata(b),a=qv.util.GetElementInCollection(c,"Name",b.Chart.Series.ByIndex[a.target.index].FieldName);
a.Hidden=!a.Hidden;qv.util.autorefresh.UpdateLayoutSameGroup(b,c,false)}}};if(a(b)){h.name=f.Name;h.data=[];h.turboThreshold=0;qv.util.IsNullColor(f.Color)||B(b,h,f.Color,!0);var l=n(b.Chart.Categories,f.Points,qv.util.XAxisDataType(b),f.Aggregation,e);for(j=0;j<l.length;j++){var d=l[j].name,F=l[j].x,e=l[j].y,F=new gx.date.gxdate(F,"Y4MD");h.data[j]={x:F.Value.getTime()-6E4*F.Value.getTimezoneOffset(),y:e,name:d};qv.util.IsNullColor(f.Color)&&B(b,h.data[j],f.Points[j].Color,!0)}}else{b.RealChartType==
QueryViewerChartType.CircularGauge&&(l=k(b)?D(1,1):D(b.Chart.Series.DataFields.length,d+1));h.name=f.Name;h.data=[];h.turboThreshold=0;qv.util.IsNullColor(f.Color)||B(b,h,f.Color,!0);if(b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar||b.RealChartType==QueryViewerChartType.PolarArea)h.pointPlacement=b.RealChartType==QueryViewerChartType.Radar||b.RealChartType==QueryViewerChartType.FilledRadar?"on":null;for(j=0;j<f.Points.length;j++)(e=null!=f.Points[j].Value?
parseFloat(qv.util.trim(f.Points[j].Value).replace(",",".")):null,w(b)&&(e=100*(e/f.TargetValue)),d=b.Chart.Categories.Values[j].ValueWithPicture,h.data[j]={},h.data[j].y=e,h.data[j].name=w(b)?"":d,h.data[j].id=h.data[j].name,c(b)&&(F=b.Chart.Categories.Values[j].Value,F=new gx.date.gxdate(F,"Y4MD"),h.data[j].x=F.Value.getTime()-6E4*F.Value.getTimezoneOffset(),h.data[j].id=F),b.RealChartType==QueryViewerChartType.CircularGauge&&(h.data[j].radius=l.UpperExtreme.toString()+"%",h.data[j].innerRadius=
l.LowerExtreme.toString()+"%"),b.RealChartType==QueryViewerChartType.CircularGauge)?(d=qv.util.IsNullColor(f.Color)?f.Points[0].Color:f.Color,B(b,h.data[j],d,!0)):qv.util.IsNullColor(f.Color)&&B(b,h.data[j],f.Points[j].Color,!0)}return h}var e=[],l=0,F;for(F in b.Chart.Series.ByName){if(!k(b)||l==f){var o=g(b,b.Chart.Series.ByName[F],l,e,h),m=null!=f?f:l;d(b)&&(0==m%2?(o.type="column",o.yAxis=0):(o.type="line",o.yAxis=k(b)?0:1));e.push(o)}l++}return e}(g,u,p);return t}function I(a){var b="";if(""==
a.YAxisTitle){if(1==a.Chart.Series.DataFields.length){var f;a:for(b=0;b<a.Metadata.Data.length;b++)if(a.Metadata.Data[b].DataField==a.Chart.Series.DataFields[0]){f=a.Metadata.Data[b];break a}b=qv.util.getTranslation(f.Title)}}else b=qv.util.getTranslationAlsoIfStatic(a.YAxisTitle);return b}function L(a){return!isNaN(parseFloat(a))&&isFinite(a)?gx.dom.el(T+"_Zoom_"+a+"m"):gx.dom.el(a)}function H(a,b){if(zoom=L(a))zoom.style.textDecoration=b}function u(a){if(zoom=L(a))zoom.onclick();else if(0!=a){var b;
switch(a){case 12:b=6;break;case 6:b=3;break;case 3:b=2;break;case 2:b=1;break;case 1:b=0}u(b)}}function G(a,b){gx.dom.el(a+"_options_compare_enable").disabled=!b;gx.dom.el(a+"_options_compare_text").disabled=!b;gx.dom.el(a+"_options_compare_text").style.opacity=!b?0.5:1;gx.dom.el(a+"_options_compare_options").disabled=!b;gx.dom.el(a+"_options_compare_options").style.opacity=!b?0.5:1}function t(a){return a+"_options"}function E(a){return a+"_center"}function A(a){return a+"_footer_slider"}function M(a){return a+
"_footer_chart"}function V(a){return a+"_footer_range"}function Z(a){return a+"_footer_left_cursor"}function S(a){return a+"_footer_right_cursor"}function K(a){return a+"_footer_center"}function J(a,b,f){var c=Math.max(b,0),b=Math.min(c,100),c=Math.max(f,0),f=Math.min(c,100);jQuery("#"+(a+"_footer")).css("width","100%").css("height",Q.toString()+"px");jQuery("#"+M(a)).css("width","100%").css("height",(Q-2).toString()+"px");c=qv.collection[a].getContainerControl().offsetWidth;b=b*c/100;f=(100-f)*c/
100;if(c-b-f<2*R){var h=2*R-(c-b-f),d;d=0==h%2?h/2:(h+1)/2;b-=d;f-=h-d;0>b&&(f+=b,b=0);0>f&&(b+=f,f=0)}jQuery("#"+A(a)).css("width","100%").css("height",Q.toString()+"px").css("padding-left",(100*b/c).toString()+"%").css("padding-right",(100*f/c).toString()+"%");jQuery("#"+V(a)).css("width","100%").css("height",Q.toString()+"px");jQuery("#"+Z(a)).css("width",R.toString()+"px").css("height",Q.toString()+"px");jQuery("#"+S(a)).css("width",R.toString()+"px").css("height",Q.toString()+"px");jQuery("#"+
K(a)).css("width","calc(100% - "+2*R+"px)").css("height",Q.toString()+"px").css("left",R.toString()+"px")}function ea(a,b){var f=parseInt(jQuery("#"+A(a)).css("padding-left")),c=parseInt(jQuery("#"+V(a)).css("width")),h;h=b.originalEvent.touches?b.originalEvent.touches[0].pageX-b.originalEvent.touches[0].target.offsetLeft:b.offsetX;switch(b.target.id){case A(a):return h;case Z(a):return h+f;case K(a):return h+f;case S(a):return h+f+c-R}}function ga(b){function f(a){a.preventDefault();N=b;var c=jQuery("#"+
A(N)),h=jQuery("#"+V(N));parseInt(c.css("padding-left"));fa=ea(N,a);$=parseInt(c.css("padding-left"));ba=parseInt(c.css("padding-right"));aa=parseInt(c.css("width"));ca=parseInt(h.css("width"))}function c(){if(X||O||P){var b=jQuery("#"+A(N)),f=qv.collection[N],h=gx.dom.el(N+"_options_compare_enable").checked,d=f.getContainerControl().offsetWidth,e;e=a(f)?E(f.userControlId()):f.getContainerControl().id;var f=k(f)?jQuery("[id^="+e+"_chart]"):jQuery("#"+e),g=[];jQuery.each(f,function(a,b){var f=jQuery("#"+
b.id).highcharts();g.push(f)});f=g[0];e=parseInt(b.css("padding-left"));var l=parseInt(b.css("padding-right")),b=100*e/d,d=100*(1-l/d);if(0==b&&100==d)jQuery.each(g,function(a,b){b.zoomOut()});else{f.get("xaxis").getExtremes();var f=f.options.qv,n=f.dataMin+b/100*(f.dataMax-f.dataMin),o=f.dataMin+d/100*(f.dataMax-f.dataMin),B=h?!1:!0;jQuery.each(g,function(a,b){b.get("xaxis").setExtremes(n,o,B)})}h&&Y(g);if(O||P)H(W,"none"),W=null}O=P=X=!1}function h(a){if(X||O||P)if(a=ea(N,a)-fa,a=P?Math.min(a,ca-
2*R):Math.min(a,ba),a=O?Math.max(a,-ca+2*R):Math.max(a,-$),0!=a){jQuery("#"+K(N));var b=jQuery("#"+A(N));jQuery("#"+V(N));P?b.css("padding-left",(100*($+a)/aa).toString()+"%"):(O||b.css("padding-left",(100*($+a)/aa).toString()+"%"),b.css("padding-right",(100*(ba-a)/aa).toString()+"%"))}}var d=jQuery("#"+Z(b)),e=jQuery("#"+S(b)),g=jQuery("#"+K(b)),l=jQuery("#"+A(b));jQuery("#"+V(b));d.mousedown(function(a){a.preventDefault();P=!0});e.mousedown(function(a){a.preventDefault();O=!0});g.mousedown(function(a){a.preventDefault();
!P&&!O&&(X=!0)});l.mousedown(function(a){f(a)});jQuery(document).mouseup(function(a){c(a)});l.mousemove(function(a){h(a)});d.on("touchstart",function(a){a.preventDefault();P=!0});e.on("touchstart",function(a){a.preventDefault();O=!0});g.on("touchstart",function(a){a.preventDefault();!P&&!O&&(X=!0)});l.on("touchstart",function(a){f(a)});jQuery(document).on("touchend",function(a){c(a)});jQuery(document).on("touchcancel",function(a){c(a)});l.on("touchmove",function(a){h(a)})}function ha(a,b){var f=qv.util.dom.createDiv(a,
A(b),"gx-qv-footer-slider","",{},""),f=qv.util.dom.createDiv(f,V(b),"gx-qv-footer-range","",{},"");qv.util.dom.createDiv(f,Z(b),"gx-qv-footer-left-cursor","",{},"");qv.util.dom.createDiv(f,S(b),"gx-qv-footer-right-cursor","",{},"");qv.util.dom.createDiv(f,K(b),"gx-qv-footer-center","",{},"");qv.util.dom.createDiv(a,M(b),"gx-qv-footer-chart","",{},"")}function ia(a,b){var f=M(a.userControlId()),c=a.RealChartType==QueryViewerChartType.SmoothTimeline?"spline":"line",h=a.RealChartType==QueryViewerChartType.StepTimeline?
"left":"",d=[];if(k(a))for(e=0;e<b.length;e++)d.push(b[e].series[0]);else for(var e=0;e<b[0].series.length;e++)d.push(b[0].series[e]);return qv.chart.getSparklineChartOptions(a,f,c,!1,h,d)}function Y(a){var b=a[0],f=b.options.qv.viewerId,c=qv.collection[f],h=gx.dom.el(f+"_options_compare_enable").checked;jQuery.each(a,function(a,b){b.options.qv.comparing=h});var d=b.get("xaxis").getExtremes();void 0!=d.userMin&&(d.min=d.userMin);void 0!=d.userMax&&(d.max=d.userMax);if(h){var e=gx.dom.el(f+"_options_compare_options").children,
g;for(ind=0;void 0!=e[ind]&&void 0==g;ind++)e[ind].selected&&(g=e[ind].value);var l,o;"PrevPeriod"==g?(o=new Date(d.min),l=new Date(d.min-(d.max-d.min))):"PrevYear"==g&&(l=new Date(d.min),l=new Date(l.setFullYear(l.getFullYear()-1)),o=new Date(d.max),o=new Date(o.setFullYear(o.getFullYear()-1)));l=l.getTime();o=o.getTime();if(zoom=L(f+"_Zoom_0m"))zoom.style.display="none"}else if(zoom=L(f+"_Zoom_0m"))zoom.style.display="";jQuery.each(a,function(a,b){for(var f=[];b.series.length>0;){b.options.qv.colorIndexesUsed||
f.push(b.series[0].colorIndex);b.series[0].remove(true)}if(!b.options.qv.colorIndexesUsed)b.options.qv.colorIndexesUsed=f});var e=0,B;for(B in c.Chart.Series.ByName){var m=c.Chart.Series.ByName[B],z,y;k(c)?(z=a[e],y=z.options.qv.colorIndexesUsed[0]):(z=b,y=z.options.qv.colorIndexesUsed[e]);var q={turboThreshold:0};q.colorIndex=y;q.id=B+"1";q.name=B;q.data=[];if(h){var D={className:"highcharts-dashed-series-line",turboThreshold:0};D.colorIndex=y;D.id=B+"2";D.name=B;D.data=[]}y=document.getElementById(f+
"_options_group_options").value;m=n(c.Chart.Categories,m.Points,qv.util.XAxisDataType(c),m.Aggregation,y);for(i=0;i<m.length;i++){y=m[i].y;var u=new gx.date.gxdate(m[i].x,"Y4MD"),p=m[i].name,t=u.Value.getTime()-6E4*u.Value.getTimezoneOffset(),u=u.Value.getTime()-6E4*u.Value.getTimezoneOffset();if(h){var C=!1,v=!1;t<=d.max&&t>=d.min&&(C=!0);if(t<=o&&t>=l){var v=!0,r=new Date(t),A;"PrevPeriod"==g?A="1m"==z.options.qv.predef_zoom?r.setMonth(r.getMonth()+1):"2m"==z.options.qv.predef_zoom?r.setMonth(r.getMonth()+
2):"3m"==z.options.qv.predef_zoom?r.setMonth(r.getMonth()+3):"6m"==z.options.qv.predef_zoom?r.setMonth(r.getMonth()+6):"12m"==z.options.qv.predef_zoom?r.setFullYear(r.getFullYear()+1):A+(d.max-d.min):"PrevYear"==g&&(A=r.setFullYear(r.getFullYear()+1))}C&&(C={},C.x=t,C.y=y,C.name=p,q.data.push(C));v&&(C={},C.x=A,C.y=y,C.name=p,C.real_x=u,D.data.push(C))}else q.data.push({x:t,y:y,name:p})}z.addSeries(q);h&&z.addSeries(D);e++}}function ja(a,b){if(a.length<b)return 0;var f=(a[a.length-1].x-a[a.length-
b].x)/1E3/3600/24/(365/12);return 1>=f?1:2>=f?2:3>=f?3:6>=f?6:12}function ka(a,b){function f(a,b,c,d,h,e,g,l,n){var o=b.userControlId(),a=qv.util.dom.createSelect(a,t(o)+"_group_options");qv.util.XAxisDataType(b)==QueryViewerDataType.DateTime&&(qv.util.dom.createOption(a,"Seconds","Seconds"==b._groupOption,gx.getMessage("GXPL_QViewerSeconds")),n&&(qv.util.dom.createOption(a,"Minutes","Minutes"==b._groupOption,gx.getMessage("GXPL_QViewerMinutes")),l&&qv.util.dom.createOption(a,"Hours","Hours"==b._groupOption,
gx.getMessage("GXPL_QViewerHours"))));if(v||qv.util.XAxisDataType(b)==QueryViewerDataType.Date)qv.util.dom.createOption(a,"Days","Days"==b._groupOption,gx.getMessage("GXPL_QViewerDays")),g&&(qv.util.dom.createOption(a,"Weeks","Weeks"==b._groupOption,gx.getMessage("GXPL_QViewerWeeks")),e&&(qv.util.dom.createOption(a,"Months","Months"==b._groupOption,gx.getMessage("GXPL_QViewerMonths")),h&&(qv.util.dom.createOption(a,"Quarters","Quarters"==b._groupOption,gx.getMessage("GXPL_QViewerQuarters")),d&&(qv.util.dom.createOption(a,
"Semesters","Semesters"==b._groupOption,gx.getMessage("GXPL_QViewerSemesters")),c&&qv.util.dom.createOption(a,"Years","Years"==b._groupOption,gx.getMessage("GXPL_QViewerYears"))))));return a}var c=a[0];T=c.options.qv.viewerId;var d=qv.collection[T],h=document.getElementById(t(T)),e=document.getElementById(T+"_footer"),g=c.get("xaxis").getExtremes(),l=g.dataMax-g.dataMin;jQuery.each(a,function(a,b){b.options.qv.dataMax=g.dataMax;b.options.qv.dataMin=g.dataMin});var n=2628288E3<l,o=5255712E3<l,B=7884E6<
l,k=15768E6<l,l=31536E6<l;d._groupOption=d._groupOption||(qv.util.XAxisDataType(d)==QueryViewerDataType.Date?"Days":"Seconds");var m=new gx.date.gxdate(""),z=new gx.date.gxdate("");m.Value.setTime(g.dataMin+6E4*m.Value.getTimezoneOffset());z.Value.setTime(g.dataMax+6E4*z.Value.getTimezoneOffset());var y=!0,q=!0,D=!0,C=!0,p=!0,v=!0,r=!0,A=!0;gx.date.year(m)==gx.date.year(z)&&(y=!1,6>=gx.date.month(m)&&7<=gx.date.month(z)||(q=!1,3>=gx.date.month(m)&&4<=gx.date.month(z)||(6>=gx.date.month(m)&&7<=gx.date.month(z)||
9>=gx.date.month(m)&&10<=gx.date.month(z))||(D=!1,gx.date.month(m)==gx.date.month(z)&&(C=!1,gx.date.day(m)-gx.date.dow(m)==gx.date.day(z)-gx.date.dow(z)&&(p=!1,gx.date.day(m)==gx.date.day(z)&&(v=!1,gx.date.hour(m)==gx.date.hour(z)&&(r=!1,gx.date.minute(m)==gx.date.minute(z)&&(A=!1))))))));(function(a,b,c,d,h,e,g,l,n,o,B,k,m,z){function y(a){return qv.util.dom.createDiv(a,"","QVTimelineHeaderGroup","",{height:da+"px",flexGrow:1},"")}function q(a,b,f){return qv.util.dom.createAnchor(a,f,{cursor:"pointer",
paddingLeft:"6px"},b)}var D=b.userControlId(),a=qv.util.dom.createDiv(a,"","QVTimelineHeader","",{display:"flex",flexDirection:"row",flexWrap:"wrap"},""),u=y(a),F=y(a),C=y(a),u=qv.util.dom.createDiv(u,"","","",{"float":"left"},"");qv.util.dom.createText(u,gx.getMessage("GXPL_QViewerJSChartZoom"));if(c){q(u,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneMonth"),D+"_Zoom_1m");if(d){q(u,gx.getMessage("GXPL_QViewerJSChartZoomLevelToTwoMonth"),D+"_Zoom_2m");if(h){q(u,gx.getMessage("GXPL_QViewerJSChartZoomLevelToThreeMonth"),
D+"_Zoom_3m");if(e){q(u,gx.getMessage("GXPL_QViewerJSChartZoomLevelToSixMonth"),D+"_Zoom_6m");g&&q(u,gx.getMessage("GXPL_QViewerJSChartZoomLevelToOneYear"),D+"_Zoom_12m")}}}}q(u,gx.getMessage("GXPL_QViewerJSChartZoomLevelToAll"),D+"_Zoom_0m");c=qv.util.dom.createDiv(F,"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createSpan(c,t(D)+"_groupby_text","","",{whiteSpace:"nowrap",paddingRight:"6px"},null,gx.getMessage("GXPL_QViewerGroupBy"));f(c,b,l,n,o,B,k,m,z);b=qv.util.dom.createDiv(C,
"","","",{"float":"right",paddingLeft:"12px"},"");qv.util.dom.createInput(b,t(D)+"_compare_enable","checkbox",{verticalAlign:"sub"});qv.util.dom.createSpan(b,t(D)+"_compare_text","","",{whiteSpace:"nowrap",paddingRight:"6px",paddingLeft:"6px"},null,gx.getMessage("GXPL_QViewerCompareWith"));D=qv.util.dom.createSelect(b,t(D)+"_compare_options");qv.util.dom.createOption(D,"PrevPeriod",false,gx.getMessage("GXPL_QViewerPreviousPeriod"));qv.util.dom.createOption(D,"PrevYear",false,gx.getMessage("GXPL_QViewerPreviousYear"));
return a})(h,d,n,o,B,k,l,y,q,D,C,p,r,A);ha(e,T);ga(T);gx.dom.el(h.id+"_compare_enable").onclick=function(){Y(a)};gx.dom.el(h.id+"_compare_options").onchange=function(){gx.dom.el(h.id+"_compare_enable").checked&&Y(a)};gx.dom.el(h.id+"_group_options").onchange=function(){Y(a)};var e=function(b){var f=gx.dom.el(h.id+"_compare_enable").checked;if(b>0){var d,e;e=c.get("xaxis").getExtremes().dataMax;d=e-b*2628028800;var g=f?false:true;jQuery.each(a,function(a,b){b.get("xaxis").setExtremes(d,e,g)});var l=
c.options.qv;J(c.options.qv.viewerId,(d-l.dataMin)/(l.dataMax-l.dataMin)*100,(e-l.dataMin)/(l.dataMax-l.dataMin)*100);G(c.options.qv.viewerId,true)}else{jQuery.each(a,function(a,b){b.zoomOut()});G(c.options.qv.viewerId,false)}H(W,"none");H(this.id,"underline");jQuery.each(a,function(a,f){f.options.qv.predef_zoom=b+"m"});W=this.id;f&&Y(a)},n=[0,1,2,3,6,12],x;for(x in n)if(o=n[x],B=gx.dom.el(T+"_Zoom_"+o+"m"))B.onclick=e.closure(B,[o]);x=ja(c.series[0].points,20);u(x);d=ia(d,b);new Highcharts.Chart(d)}
function la(b){var f=qv.collection[b.options.qv.viewerId];if(!c(f)){var d=f.SelectionAllowed(),h=!1;if(f.ItemClick)for(var e=0;e<f.Metadata.Axes.length;e++)if(f.Metadata.Axes[e].RaiseItemClick){h=!0;break}(h||d)&&jQuery.each(b.xAxis[0].ticks,function(f,c){c&&c.label&&(h&&c.label.addClass("gx-qv-clickable-element"),c.label.on("click",function(){var e=h,l=qv.collection[b.options.qv.viewerId],n=!1;d&&!a(l)&&(n=x(l.Charts,c.pos));e&&(e=1==l.Chart.Categories.DataFields.length?qv.util.GetAxisByDataField(l,
l.Chart.Categories.DataFields[0]).Name:"",g(l.ItemClickData,l,e,QueryViewerElementType.Axis,c.label.textStr,n,l.Data.Rows[f]),l.ItemClick())}))})}}var W=null,T=null,da=35,Q=50,R=10,fa=0,N="",$=0,ba=0,ca=0,aa=0,P=!1,O=!1,X=!1;return{tryToRenderChart:function(b){var f="";(new Date).getTime();b.xml=b.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(b,function(b,c){var d=!1;b!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=b,d=!0);qv.util.anyError(b)?(f=qv.util.getErrorFromText(b),qv.util.renderError(c,
f)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(b,c){var d=false;if(b!=c.xml.metadata){c.xml.metadata=b;d=true}(new Date).getTime();if(qv.util.anyError(b)){f=qv.util.getErrorFromText(b);qv.util.renderError(c,f)}else{d&&qv.services.parseMetadataXML(c);c.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(c,function(b,c){var d=false;if(b!=c.xml.data){c.xml.data=b;d=true}(new Date).getTime();if(qv.util.anyError(b)){f=qv.util.getErrorFromText(b);qv.util.renderError(c,
f)}else{d&&qv.services.parseDataXML(c);d=qv.util.GetContainerControlClasses(c);d!=""&&qv.util.SetUserControlClass(c,d);d=qv.util.ProcessDataAndMetadata(c);if(d==""){var h=c.userControlId(),d=qv.util.dom.getEmptyContainer(c);if((a(c)||k(c))&&d.offsetHeight==0)d.style.height="400px";if(a(c)){qv.util.dom.createDiv(d,t(h),"QVTimelineHeaderContainer","",{width:"100%",height:da+"px"},"");var e=qv.util.dom.createDiv(d,E(h),"","",{width:"100%",height:"calc(100% - "+da+"px - "+Q+"px)"},"");qv.util.dom.createDiv(d,
h+"_footer","gx-qv-footer","",{width:"100%",height:Q+"px"},"");d.style.padding=DEFAULTCHARTSPACING+"px";d=e}if(k(c))for(var e=c.Chart.Series.DataFields.length,g=parseInt(100/e),l=100%e,h=a(c)?E(h):h,n=0;n<e;n++)qv.util.dom.createDiv(d,h+"_chart"+n.toString(),"","",{width:"100%",height:(g+(n<l?1:0)).toString()+"%"},"");d=[];if(k(c)){var e=0,o;for(o in c.Chart.Series.ByName){g=y(c,c.Chart.Series.ByName[o],e);d.push(g);e++}}else{g=y(c,null,null);d.push(g)}if(c.RealChartType==QueryViewerChartType.CircularGauge){o=
qv.util.GetThemeStyleSheet(c);o.insertRule("#"+c.ContainerName+" .highcharts-tooltip-box {fill: none !important; stroke-width: 0 !important; }",o.cssRules.length)}Highcharts.setOptions({lang:{months:[gx.getMessage("GXPL_QViewerJanuary"),gx.getMessage("GXPL_QViewerFebruary"),gx.getMessage("GXPL_QViewerMarch"),gx.getMessage("GXPL_QViewerApril"),gx.getMessage("GXPL_QViewerMay"),gx.getMessage("GXPL_QViewerJune"),gx.getMessage("GXPL_QViewerJuly"),gx.getMessage("GXPL_QViewerAugust"),gx.getMessage("GXPL_QViewerSeptember"),
gx.getMessage("GXPL_QViewerOctober"),gx.getMessage("GXPL_QViewerNovember"),gx.getMessage("GXPL_QViewerDecember")],weekdays:[gx.getMessage("GXPL_QViewerSunday"),gx.getMessage("GXPL_QViewerMonday"),gx.getMessage("GXPL_QViewerTuesday"),gx.getMessage("GXPL_QViewerWednesday"),gx.getMessage("GXPL_QViewerThursday"),gx.getMessage("GXPL_QViewerFriday"),gx.getMessage("GXPL_QViewerSaturday")],shortMonths:[gx.getMessage("GXPL_QViewerJanuary").substring(0,3),gx.getMessage("GXPL_QViewerFebruary").substring(0,3),
gx.getMessage("GXPL_QViewerMarch").substring(0,3),gx.getMessage("GXPL_QViewerApril").substring(0,3),gx.getMessage("GXPL_QViewerMay").substring(0,3),gx.getMessage("GXPL_QViewerJune").substring(0,3),gx.getMessage("GXPL_QViewerJuly").substring(0,3),gx.getMessage("GXPL_QViewerAugust").substring(0,3),gx.getMessage("GXPL_QViewerSeptember").substring(0,3),gx.getMessage("GXPL_QViewerOctober").substring(0,3),gx.getMessage("GXPL_QViewerNovember").substring(0,3),gx.getMessage("GXPL_QViewerDecember").substring(0,
3)],numericSymbols:null}});o=[];for(e=0;e<d.length;e++){HCChart=new Highcharts.Chart(d[e],la);o.push(HCChart)}c.Charts=o;a(c)&&ka(o,d);c._ControlRenderedTo=c.RealType;qv.util.hideActivityIndicator(c)}else qv.util.renderError(c,d)}}):qv.util.renderError(c,c.Metadata.ParserResult.Message)}}))})},GetMetadataChart:function(a){var b=qv.util.GetDesigntimeMetadata(a);(function(a,b){function f(a,b,c){for(var d=0;d<a.length;d++){var h=a[d];if(h.Name==b){h.Visible=c?QueryViewerVisible.Yes:QueryViewerVisible.No;
break}}}if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(var c=0;c<a.Charts[0].series.length;c++){var d=a.Charts[0].series[c],h=a.Chart.Series.ByIndex[c].FieldName;f(b,h,d.visible)}else for(c=0;c<a.Charts.length;c++)d=a.Charts[c].series[0],h=a.Chart.Series.ByIndex[c].FieldName,f(b,h,d.visible)})(a,b);return b},GetRuntimeMetadata:function(a){for(var b=[],f,c=f=0;c<a.Metadata.Axes.length;c++){var d=a.Metadata.Axes[c];d.Visible!=QueryViewerVisible.Never&&(f+=1);b.push({Name:d.Name,Type:QueryViewerElementType.Axis,
Axis:d.Axis,Position:d.Visible!=QueryViewerVisible.Never?f:null,Hidden:d.Visible==QueryViewerVisible.Never||d.Visible==QueryViewerVisible.No})}for(c=f=0;c<a.Metadata.Data.length;c++)d=a.Metadata.Data[c],d.Visible!=QueryViewerVisible.Never&&(f+=1),b.push({Name:d.Name,Type:QueryViewerElementType.Datum,Axis:"",Position:d.Visible!=QueryViewerVisible.Never?f:null,Hidden:d.Visible==QueryViewerVisible.Never||d.Visible==QueryViewerVisible.No});if(a.PlotSeries==QueryViewerPlotSeries.InTheSameChart)for(f=0;f<
a.Charts[0].series.length;f++)c=a.Charts[0].series[f],d=a.Chart.Series.ByIndex[f].FieldName,d=qv.util.GetElementInCollection(b,"Name",d),d.Hidden=!c.visible;else for(f=0;f<a.Charts.length;f++)c=a.Charts[f].series[0],d=a.Chart.Series.ByIndex[f].FieldName,d=qv.util.GetElementInCollection(b,"Name",d),d.Hidden=!c.visible;return b},GetDataChart:function(a){return a.xml.data},getSparklineChartOptions:function(a,b,f,c,d,h){a={chart:{}};a.chart.renderTo=b;a.chart.margin=0;a.chart.type=f;a.chart.styledMode=
!0;c&&(a.chart.className="highcharts-no-background");a.title={};a.title.text="";a.credits={};a.credits.enabled=!1;a.xAxis={};a.xAxis.visible=!1;a.yAxis={};a.yAxis.visible=!1;a.legend={};a.legend.enabled=!1;a.tooltip={};a.tooltip.enabled=!1;a.plotOptions={};a.plotOptions.series={};a.plotOptions.series.animation=!1;a.plotOptions.series.connectNulls=!0;a.plotOptions.series.enableMouseTracking=!1;a.plotOptions.series.lineWidth=1;a.plotOptions.series.shadow=!1;a.plotOptions.series.states={};a.plotOptions.series.states.hover=
{};a.plotOptions.series.states.hover.lineWidth=1;a.plotOptions.series.marker={};a.plotOptions.series.marker.radius=0;a.plotOptions.series.marker.states={};a.plotOptions.series.marker.states.hover={};a.plotOptions.series.marker.states.hover.radius=2;""!=d&&(a.plotOptions.series.step=d);a.series=[];for(b=0;b<h.length;b++)a.series.push(h[b]);return a},IsDatetimeXAxis:function(a){return c(a)},IsSingleSerieChart:function(a){return m(a)},IsAreaChart:function(a){return a.RealChartType==QueryViewerChartType.Area||
a.RealChartType==QueryViewerChartType.StackedArea||a.RealChartType==QueryViewerChartType.StackedArea100||a.RealChartType==QueryViewerChartType.SmoothArea||a.RealChartType==QueryViewerChartType.StepArea},IsLineChart:function(b){return b.RealChartType==QueryViewerChartType.Line||b.RealChartType==QueryViewerChartType.StackedLine||b.RealChartType==QueryViewerChartType.StackedLine100||b.RealChartType==QueryViewerChartType.SmoothLine||b.RealChartType==QueryViewerChartType.StepLine||b.RealChartType==QueryViewerChartType.Sparkline||
a(b)},IsSplittedChart:function(a){return k(a)},IsGaugeChart:function(a){return w(a)},Select:function(a,b){for(var f=[],c=0;c<a.Data.Rows.length;c++){var d=a.Data.Rows[c],h=!0;for(j=0;j<b.length;j++){var e=b[j];if(d[e.DataField]&&qv.util.trim(d[e.DataField])!=qv.util.trim(e.Value)){h=!1;break}}h&&f.push(c)}if(0<f.length){c=a.Charts;for(d=0;d<c.length;d++)for(var h=c[d],e=!1,g=0;g<f.length;g++)for(var l=f[g],n=0;n<h.series.length;n++)h.series[n].points[l].select(!0,e),e||(e=!0)}else p(a.Charts)},Deselect:function(a){p(a.Charts)}}}();
qv.card=function(){function a(a,b){if(0!=a.ConditionalStyles.length)for(var c=0;c<a.ConditionalStyles.length;c++){var d=a.ConditionalStyles[c];if(qv.util.satisfyStyle(b,d))return qv.util.css.parseStyle(d.StyleOrClass)}return qv.util.css.parseStyle(a.Style)}function c(a,b,c,d){function e(a,b){var f=gx.date.now(),c;switch(a){case QueryViewerTrendPeriod.LastYear:c=gx.date.addyr(f,-1);break;case QueryViewerTrendPeriod.LastSemester:c=gx.date.addmth(f,-6);break;case QueryViewerTrendPeriod.LastQuarter:c=
gx.date.addmth(f,-3);break;case QueryViewerTrendPeriod.LastMonth:c=gx.date.addmth(f,-1);break;case QueryViewerTrendPeriod.LastWeek:c=gx.date.dtadd(f,-604800);break;case QueryViewerTrendPeriod.LastDay:c=gx.date.dtadd(f,-86400);break;case QueryViewerTrendPeriod.LastHour:c=gx.date.dtadd(f,-3600);break;case QueryViewerTrendPeriod.LastMinute:c=gx.date.dtadd(f,-60);break;case QueryViewerTrendPeriod.LastSecond:c=gx.date.dtadd(f,-1)}return qv.util.dateToString(c,b==QueryViewerDataType.DateTime)}var k={};
if(a.IncludeTrend)if(a.TrendPeriod==QueryViewerTrendPeriod.SinceTheBeginning||""==a.TrendPeriod)k=0;else for(var f=e(a.TrendPeriod,d),k=a.Data.Rows.length-1,h=a.Data.Rows.length-2;0<=h&&!(a.Data.Rows[h][c]<f);h--)k=h;else k=a.Data.Rows.length-1;return k=function(a,b,f,c,d,h){var e=null,g=null,o=null,k=null,m=[],p={AnyTrend:!1};if(""!=f){for(var u=d.length-1,v=0,t=0,r=0,A=0,x=0,s=0,w=null,S=null;a<=u;a++)if(void 0!=d[a][f]&&void 0!=d[a][c]){var v=v+1,K=new gx.date.gxdate(d[a][f],"Y4MD"),J=parseFloat(d[a][c]);
m.push({x:K.Value.getTime()-6E4*K.Value.getTimezoneOffset(),y:J});if(null==e&&null==g)g=e=J,o=d[a][f],k=d[a][f];else if(J>g&&(k=d[a][f],g=J),J<e)o=d[a][f],e=J;a>=b&&(null==w&&null==S&&(w=K,S=J),K=h==QueryViewerDataType.Date?gx.date.daysDiff(K,w):gx.date.secDiff(K,w),J-=S,t+=K,r+=J,A+=K*J,x+=K*K,s+=J*J)}p.AnyTrend=1<v;p.Slope=(v*A-t*r)/(v*x-t*t);p.Intercept=(r-p.Slope*t)/v;p.R2=Math.pow((v*A-t*r)/Math.sqrt((v*x-t*t)*(v*s-r*r)),2)}b={};b.LinearRegression=p;b.MinValue=e;b.MinWhen=o;b.MaxValue=g;b.MaxWhen=
k;b.ChartSeriesData=m;return b}(a.IncludeSparkline||a.IncludeMaxAndMin?0:k,k,c,b.DataField,a.Data.Rows,d)}function e(a,b,c,d){function e(a,b){function f(a,b,c){var d=[];if(c)for(c=0;c<b.length;c++)d.push(b[c][a]);else d.push(b[b.length-1][a]);return d}for(var c=[],d=0;d<a.Metadata.Axes.length;d++){var g=a.Metadata.Axes[d];if(!g.IsComponent){var k={};k.Name=g.Name;k.Values=f(g.DataField,a.Data.Rows,b);c.push(k)}}for(d=0;d<a.Metadata.Data.length;d++)g=a.Metadata.Data[d],g.IsComponent||(k={},k.Name=
g.Name,k.Values=f(g.DataField,a.Data.Rows,b),c.push(k));return c}for(var k=null,f=0;f<b.Metadata.Data.length;f++)if(b.Metadata.Data[f].Name==c){k=b.Metadata.Data[f];break}null!=k&&(a.Name=k.Name,a.Type=QueryViewerElementType.Datum,a.Axis="",c=d?qv.util.aggregateData(b.Metadata.Data,b.Data.Rows):b.Data.Rows[b.Data.Rows.length-1],a.Value=c[k.DataField],a.Context=e(b,d))}function b(a,b){return a+"_card_sparkline_"+b}function m(a,c,d){d=b(a.userControlId(),d);return qv.chart.getSparklineChartOptions(a,
d,"line",!0,"",[{data:c}])}function d(a,b,c,d){var e={textAlign:"center",paddingTop:"0px",paddingRight:"5px",paddingBottom:"0px",paddingLeft:"5px"},a=qv.util.dom.createTable(a,"",{}),k;k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",e,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-value",c,{},null,b);k=qv.util.dom.createRow(a);k=qv.util.dom.createCell(k,1,"",e,"");qv.util.dom.createSpan(k,"","qv-card-max-and-min-title",c,{},null,d);return a}function w(a){var a=new gx.date.gxdate(a,
"Y4MD"),b=gx.date.now(),a=gx.date.secDiff(b,a);return gx.getMessage("GXPL_QViewerTimeAgo").replace("{0}",qv.util.seconsdToText(a))}function k(a,b,c,d){""!=b?(d=qv.util.formatNumber(parseFloat(b),d,c.Picture,!1),b=qv.util.formatNumber(parseFloat(100*b/c.TargetValue),2,"ZZZZZZZZZZZZZZ9.99",!1)+"%"):b=d="";switch(a.ShowDataAs){case QueryViewerShowDataAs.Values:return d;case QueryViewerShowDataAs.Percentages:return b;case QueryViewerShowDataAs.ValuesAndPercentages:return d+" ("+b+")";default:return d}}
function s(e){function v(a,b,f){var f=0<f.LinearRegression.Slope?"keyboard_arrow_up":0>f.LinearRegression.Slope?"keyboard_arrow_down":"drag_handle",c;c=""==b.TrendPeriod?gx.getMessage("GXPL_QViewerSinceTheBeginningTrend"):gx.getMessage("GXPL_QViewer"+b.TrendPeriod+"Trend");var d={width:"0px",marginLeft:"5px"};b.IncludeSparkline||(d.position="relative",d.top="2px");d.fontSize="36px";return f=qv.util.dom.createIcon(a,c,d,f)}for(var g=0<e.Data.Rows.length,x=!0,p="",r,f=0;f<e.Metadata.Axes.length;f++){var h=
e.Metadata.Axes[f];if(h.DataType==QueryViewerDataType.Date||h.DataType==QueryViewerDataType.DateTime){x=!1;p=h.DataField;r=h.DataType;break}}var z;g&&(z=x?qv.util.aggregateData(e.Metadata.Data,e.Data.Rows):e.Data.Rows[e.Data.Rows.length-1]);var C=qv.util.dom.getEmptyContainer(e);h=e.IsAutoResize()?f="":f="100%";var f=qv.util.dom.createTable(C,qv.util.GetContainerControlClasses(e),{width:f,height:h}),f=qv.util.dom.createRow(f),C=qv.util.dom.createCell(f,1,"center",{},""),f=e.Orientation==QueryViewerOrientation.Horizontal?
"100%":"",h=e.Orientation==QueryViewerOrientation.Vertical?"100%":"",C=qv.util.dom.createTable(C,"",{width:f,height:h,whiteSpace:"nowrap"}),n;e.Orientation==QueryViewerOrientation.Horizontal&&(n=qv.util.dom.createRow(C));h=[];for(f=0;f<e.Metadata.Data.length;f++){var l=e.Metadata.Data[f];if(l.Visible==QueryViewerVisible.Yes||l.Visible==QueryViewerVisible.Always){var D=qv.util.ParseNumericPicture(l.DataType,l.Picture).DecimalPrecision,s,q,B;g?(s=z[l.DataField],q=k(e,z[l.DataField],l,D),B=w(z[p])):
B=q=s="";if((gx.lang.gxBoolean(e.IncludeTrend)||gx.lang.gxBoolean(e.IncludeSparkline)||gx.lang.gxBoolean(e.IncludeMaxAndMin))&&g){var y=c(e,l,p,r);h.push(y)}var I=a(l,s);s={};var L="qv-card-element-value";qv.util.startsWith(I,"{")&&qv.util.endsWith(I,"}")?s=JSON.parse(I):L=I;I=null;e.ItemClick&&l.RaiseItemClick&&(L+=(""==L?"":" ")+"gx-qv-clickable-element",I=function(){qv.card.fireItemClickEvent(event,e,x)});e.Orientation==QueryViewerOrientation.Vertical&&(n=qv.util.dom.createRow(C));var H=e.Orientation==
QueryViewerOrientation.Horizontal?"10px":"",u=e.Orientation==QueryViewerOrientation.Vertical?"10px":"",H=qv.util.dom.createCell(n,1,"center",{paddingRight:H,paddingLeft:H,paddingBottom:u,paddingTop:u},""),H=qv.util.dom.createTable(H,"",{}),u=qv.util.dom.createRow(H),u=qv.util.dom.createCell(u,1,"center",{},""),u=qv.util.dom.createTable(u,"",{}),u=qv.util.dom.createRow(u),G=qv.util.dom.createCell(u,1,"center",{},"");qv.util.dom.createSpan(G,e.getContainerControl().id+"_"+l.Name,L,""!=p?B:"",s,I,q);
var G=qv.util.dom.createCell(u,1,"",{},"");g&&(e.IncludeTrend&&!e.IncludeSparkline&&y.LinearRegression.AnyTrend)&&v(G,e,y);u=qv.util.dom.createRow(H);u=qv.util.dom.createCell(u,1,"center",{},"");span1=qv.util.dom.createSpan(u,"","qv-card-element-title",""!=p?B:"",{},null,l.Title);e.IncludeSparkline&&(""!=p&&g)&&(u=qv.util.dom.createRow(H),u=qv.util.dom.createCell(u,1,"",{},""),u=qv.util.dom.createTable(u,"",{width:"100%"}),u=qv.util.dom.createRow(u),G=qv.util.dom.createCell(u,1,"",{width:"100%"},
""),qv.util.dom.createDiv(G,b(e.userControlId(),f),"","",{height:"50px",width:"100%",minWidth:"100px"},""),G=qv.util.dom.createCell(u,1,"",{width:"0%"},""),g&&(e.IncludeTrend&&y.LinearRegression.AnyTrend)&&v(G,e,y));e.IncludeMaxAndMin&&(""!=p&&g)&&(u=qv.util.dom.createRow(H),u=qv.util.dom.createCell(u,1,"center",{},""),u=qv.util.dom.createTable(u,"",{"margin-top":"10px"}),u=qv.util.dom.createRow(u),G=qv.util.dom.createCell(u,1,"",{},""),d(G,k(e,y.MinValue,l,D),w(y.MinWhen),gx.getMessage("GXPL_QViewerCardMinimum")),
G=qv.util.dom.createCell(u,1,"",{},""),d(G,k(e,y.MaxValue,l,D),w(y.MaxWhen),gx.getMessage("GXPL_QViewerCardMaximum")))}}if(e.IncludeSparkline&&""!=p&&g)for(f=0;f<e.Metadata.Data.length;f++)g=m(e,h[f].ChartSeriesData,f),new Highcharts.Chart(g);e._ControlRenderedTo=e.RealType;qv.util.hideActivityIndicator(e)}return{tryToRenderCard:function(a){var b="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(a,c){var d=!1;a!=c.xml.recordsetCacheKey&&(c.xml.recordsetCacheKey=
a,d=!0);qv.util.anyError(a)?(b=qv.util.getErrorFromText(a),qv.util.renderError(c,b)):(d&&qv.services.parseRecordsetCacheKeyXML(c),qv.services.GetMetadataIfNeeded(c,function(a,f){var c=false;if(a!=f.xml.metadata){f.xml.metadata=a;c=true}(new Date).getTime();if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(f,b)}else{c&&qv.services.parseMetadataXML(f);f.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(f,function(a,f){var c=false;if(a!=f.xml.data){f.xml.data=a;c=true}(new Date).getTime();
if(qv.util.anyError(a)){b=qv.util.getErrorFromText(a);qv.util.renderError(f,b)}else{c&&qv.services.parseDataXML(f);s(f)}}):qv.util.renderError(f,f.Metadata.ParserResult.Message)}}))})},GetMetadataCard:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataCard:function(a){return a.xml.data},fireItemClickEvent:function(a,b,c){a=a.target.id;a=a.substr(a.lastIndexOf("_")+1);e(b.ItemClickData,b,a,c);b.ItemClick()}}}();
qv.map=function(){function a(a){if(a.MapType==QueryViewerMapType.Choropleth||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&"F0"!=a.Chart.Series.DataFields[0])return a.Chart.Series.ByIndex[0].Color.Color?"#"+a.Chart.Series.ByIndex[0].Color.Color:"#0F5B78";if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&
"F0"==a.Chart.Series.DataFields[0])return a.Metadata.Axes[0].Style?a.Metadata.Axes[0].Style.substring(6,a.Metadata.Axes[0].Style.length):"#0F5B78"}function c(b){var c=[];if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){if(0<b.Chart.Categories.DataFields.length&&0<b.Chart.Series.DataFields.length)for(var d=0;d<b.Chart.Categories.Values.length;d++){var e=b.Chart.Categories.Values[d].Value,g=parseFloat(b.Chart.Series.ByIndex[0].Points[d].Value);b.MapLibrary===QueryViewerMapLibrary.ECharts?
c.push({name:e,value:g}):c.push([axisvalue,g])}}else if(b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var c=[],l,k=b.Metadata.Axes[0],d=0;d<b.Data.Rows.length;d++){e=b.Data.Rows[d][k.DataField];e=e.substring(7,e.length-1);for(g=0;g<e.length;g++)if(" "==e[g])var m=parseFloat(e.substring(0,g)),q=parseFloat(e.substring(g+1,e.length));e=[m,q];g=parseFloat(b.Chart.Series.ByIndex[0].Points[d].Value);"F0"==b.Chart.Series.DataFields[0]?c.push({coord:[e[0],e[1]],additionalData:b.Data.Rows[d]}):
0==b.Chart.colorAxis.dataClasses.length?c.push({coord:[e[0],e[1]],value:g,itemStyle:{color:a(b)},additionalData:b.Data.Rows[d]}):(l=b.Chart.Series.ByIndex[0].Points[d].Color.Color,x(l)&&(l="#"+l),c.push({coord:[e[0],e[1]],value:g,itemStyle:{color:l},additionalData:b.Data.Rows[d]}))}return c}function e(a,b,c,d,e,g,k,m,q){function B(a,c){var f={};f.Name=a.Name;var d=qv.util.GetPictureProperties(a.DataType,a.Picture);a.DataType!=QueryViewerDataType.GeoPoint?(d=qv.util.ApplyPicture(c,a.Picture,a.DataType,
d),f.Values=[d]):f.Values=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?c[y.DataField]:[c];return f}var y=b.Metadata.Axes[0];a.Name=c;a.Type=d;a.Axis="";a.Value=e;a.Selected=g;a.Context=[];y.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Bubble?B(y,b.Data.Rows[q]):b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?B(y,m[q].name):B(y,m[q].Value),
a.Context.push(d));for(c=0;c<b.Metadata.Data.length;c++)d=b.Metadata.Data[c],d.IsComponent||(d=b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&b.MapType==QueryViewerMapType.Choropleth?B(d,k[q].value):B(d,k[q].Value),a.Context.push(d));a.Filters=[]}function b(a){a.on("mousedown",function(){a.getZr().setCursorStyle("auto")});a.on("mousemove",function(){a.getZr().setCursorStyle("auto")});a.on("mouseup",function(){a.getZr().setCursorStyle("auto")});a.on("mouseover",function(){a.getZr().setCursorStyle("auto")});
a.on("mouseout",function(){a.getZr().setCursorStyle("auto")})}function m(a,b){a.on("mousedown",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mousemove",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseup",
function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseover",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")});a.on("mouseout",function(c){b.MapType==QueryViewerMapType.Choropleth?a.getZr().setCursorStyle("pointer"):
"markPoint"===c.componentType?a.getZr().setCursorStyle("pointer"):a.getZr().setCursorStyle("auto")})}function d(a,b){a.on("click",function(d){if(b.MapType==QueryViewerMapType.Choropleth||b.MapType==QueryViewerMapType.Bubble&&"markPoint"===d.componentType){var g=b.Chart.Series.ByIndex[0],n=qv.util.formatNumber(d.value,g.NumberFormat.DecimalPrecision,g.Picture,!1),l=b.Chart.Series.ByIndex[0].Points,m;b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?m=b.Data.Rows:
b.MapType==QueryViewerMapType.Choropleth&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint?l=m=k(c(b),a,b):m=b.Chart.Categories.Values;var o;o=a.getOption();if(b.SelectionAllowed())if(b.MapType==QueryViewerMapType.Choropleth)o=o.series[0].selectedMap,o=!0==o[Object.keys(o)[0]]?!0:!1;else{var q;0==b.Chart.colorAxis.dataClasses.length?q=o.series[0].color:(q=b.Chart.Series.ByIndex[0].Points[d.dataIndex].Color.Color,x(q)&&(q="#"+q));o=a.BubbleSelect==d.dataIndex&&o.series[0].markPoint.data[d.dataIndex].itemStyle.color==
q?!0:a.BubbleSelect==d.dataIndex&&o.series[0].markPoint.data[d.dataIndex].itemStyle.color!=q?!1:a.BubbleSelect!=d.dataIndex&&o.series[0].markPoint.data[d.dataIndex].itemStyle.color==q?!0:!1}else o=!1;d.dataIndex>m.length-1&&Number.isNaN(d.value)||(e(b.ItemClickData,b,g.FieldName,QueryViewerElementType.Datum,n,o,l,m,d.dataIndex),b.ItemClick())}})}function w(a,b,c){function d(a,b){for(var c=a[0],f=a[1],e=!1,h=0,g=b.length-1;h<b.length;g=h++){var k=b[h][0],m=b[h][1],o=b[g][0],g=b[g][1];m>f!=g>f&&c<(o-
k)*(f-m)/(g-m)+k&&(e=!1==e?!0:!1)}return e}return function(a,b,c){var f=[];if(b.Region==QueryViewerRegion.Country&&(b.Country==QueryViewerCountry.US||b.Country==QueryViewerCountry.ES||b.Country==QueryViewerCountry.PT||b.Country==QueryViewerCountry.FR||b.Country==QueryViewerCountry.GQ||b.Country==QueryViewerCountry.MU)){for(var e=[[QueryViewerCountry.US,["US-AK","US-HI","US-PR"]],[QueryViewerCountry.ES,["ES-CN","ES-IB"]],[QueryViewerCountry.PT,["PT-20","PT-30"]],[QueryViewerCountry.FR,["FR-GF","FR-RE",
"FR-GP","FR-MQ","FR-YT"]],[QueryViewerCountry.GQ,["GQ-AN","GQ-BS","GQ-BN"]],[QueryViewerCountry.MU,["MU-RO","MU-CC","MU-AG"]]],h,g,k,m,o,u,p,t=0;t<e.length;t++)if(e[t][0]==b.Country){m=e[t];break}for(b=0;b<c._coordSysMgr._coordinateSystems[0].regions.length;b++)for(e=0;e<m[1].length;e++)for(t=0;t<a.length;t++)if(c._coordSysMgr._coordinateSystems[0].regions[b].name==m[1][e]){if(h=d(a[t].coord,c._coordSysMgr._coordinateSystems[0].regions[b].properties.specialArea),!0==h){height=c._coordSysMgr._coordinateSystems[0].regions[b].properties.specialAreaHeight;
g=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.x;h=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.y;k=c._coordSysMgr._coordinateSystems[0].regions[b]._rect.width;void 0!=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth&&c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit?(o=c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[0],u=c._coordSysMgr._coordinateSystems[0].regions[b].properties.coordlimit[1],p=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaWidth,
areaHeight=c._coordSysMgr._coordinateSystems[0].regions[b].properties.AreaHeight,g-=[(o-a[t].coord[0])/p*k],h=h+height-Math.abs((u-a[t].coord[1])/areaHeight*height)):(g=a[t].coord[0]+(g-a[t].coord[0])+k,h=a[t].coord[1]*height/90+h);a[t].coord=[g,h];u=a[t];u.name=null;u.name=c._coordSysMgr._coordinateSystems[0].regions[b].name;f.push(u);break}}else for(h=0;h<c._coordSysMgr._coordinateSystems[0].regions[b].geometries.length;h++)if(d(a[t].coord,c._coordSysMgr._coordinateSystems[0].regions[b].geometries[h].exterior)){u=
a[t];g=!1;for(k=0;k<f.length;k++)f[k].coord===u.coord&&f[k].value===u.value&&(g=!0);g||(u=a[t],u.name=null,u.name=c._coordSysMgr._coordinateSystems[0].regions[b].name,f.push(u))}return f}if(b.Region==QueryViewerRegion.World&&b.MapType!=QueryViewerMapType.Choropleth)return a;for(m=0;m<a.length;m++){e=!1;for(b=0;b<c._coordSysMgr._coordinateSystems[0].regions.length&&!1==e;b++)for(h=0;h<c._coordSysMgr._coordinateSystems[0].regions[b].geometries.length&&!1==e;h++)if(d(a[m].coord,c._coordSysMgr._coordinateSystems[0].regions[b].geometries[h].exterior)){u=
a[m];u.name=null;u.name=c._coordSysMgr._coordinateSystems[0].regions[b].name;f.push(u);e=!0;break}}return f}(a,b,c)}function k(a,b,c){for(var d=[],b=w(a,c,b),a=[],e=0;e<b.length;e++)d.push({name:b[e].name,value:0,additionalData:[b[e].additionalData]});for(b=0;b<d.length;b++){for(var e=d[b],g=!1,k=[],m=0;m<a.length;m++)a[m].name===e.name&&(k=a[m].additionalData,k.push(e.additionalData[0]),a[m].additionalData=k,g=!0);!1==g&&a.push(e)}for(b=0;b<a.length;b++)d=qv.util.aggregateData(c.Metadata.Data,a[b].additionalData,
c),a[b].value=d[c.Metadata.Data[0].DataField];return a}function s(b){var c;if(b.MapType==QueryViewerMapType.Choropleth&&0==b.Chart.colorAxis.dataClasses.length)return c={min:0,maxColor:a(b)};if(b.MapType==QueryViewerMapType.Choropleth&&0!=b.Chart.colorAxis.dataClasses.length||b.MapType==QueryViewerMapType.Bubble&&0!=b.Chart.colorAxis.dataClasses.length)return c=b.Chart.colorAxis;b.MapType==QueryViewerMapType.Bubble&&0==b.Chart.colorAxis.dataClasses.length&&(c=[]);return c}function o(a){var b;if(a.MapType==
QueryViewerMapType.Choropleth)return b={enabled:!0};a.MapType==QueryViewerMapType.Bubble&&(b=0!=a.Chart.colorAxis.dataClasses.length?{enabled:!0}:{enabled:!1});return b}function v(b){var d;if(b.MapType==QueryViewerMapType.Choropleth)return d=[{name:qv.util.getTranslation(b.Title),type:"map",borderColor:"gray",colorByPoint:!1,data:c(b),joinBy:["name","hc-key"],dataLabels:{enabled:!0,format:"{point.name}"}}];b.MapType==QueryViewerMapType.Bubble&&(d=0==b.Chart.colorAxis.dataClasses.length?b.Chart.Series.ByIndex[0].Color.Color?
[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),styledMode:!1,color:a(b),showInLegend:!0,minSize:4,maxSize:"12%"}]:[{enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",joinBy:["name","hc-key"],data:c(b),colorIndex:b.Metadata.Data[0].colorIndex,opacity:0.5,showInLegend:!0,minSize:4,maxSize:"12%"}]:[{color:"#E0E0E0",enableMouseTracking:!1},{name:qv.util.getTranslation(b.Title),type:"mapbubble",
joinBy:["name","hc-key"],data:c(b),styledMode:!1,showInLegend:!0,minSize:4,maxSize:"12%"}]);return d}function g(a){var b;if(a.MapType==QueryViewerMapType.Choropleth)return b={};a.MapType==QueryViewerMapType.Bubble&&(b={});return b}function x(a){var b=/[0-9A-Fa-f]{6}/g,a=b.test(a)?!0:!1;b.lastIndex=0;return a}function p(b,c,d){var e=[],g;if(d.MapType==QueryViewerMapType.Choropleth&&d.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint)for(var l=0;l<b.length;l++)for(var k=0;k<c._coordSysMgr._coordinateSystems[0].regions.length;k++){if(c._coordSysMgr._coordinateSystems[0].regions[k].name==
b[l].name){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[k].properties.center?(g=d.Chart.Series.ByIndex[0].Points[l].Color.Color,x(g)&&(g="#"+g),e.push({name:b[l].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[1]],value:b[l].value,itemStyle:{color:g}})):e.push({name:b[l].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].center[0],c._coordSysMgr._coordinateSystems[0].regions[k].center[1]],
value:b[l].value,itemStyle:{color:g}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[k].properties.center?e.push({name:b[l].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[0],c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[1]],value:b[l].value,itemStyle:{color:a(d)}}):e.push({name:b[l].name,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].center[0],c._coordSysMgr._coordinateSystems[0].regions[k].center[1]],value:b[l].value,itemStyle:{color:a(d)}});
break}}else for(l=0;l<d.Chart.Categories.Values.length;l++)for(k=0;k<c._coordSysMgr._coordinateSystems[0].regions.length;k++)if(c._coordSysMgr._coordinateSystems[0].regions[k].name==d.Chart.Categories.Values[l].Value){0!=d.Chart.colorAxis.dataClasses.length?void 0!=c._coordSysMgr._coordinateSystems[0].regions[k].properties.center?(g=d.Chart.Series.ByIndex[0].Points[l].Color.Color,x(g)&&(g="#"+g),e.push({name:d.Chart.Categories.Values[l].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[1]],value:b[l].value,itemStyle:{color:g}})):e.push({name:d.Chart.Categories.Values[l].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].center[0],c._coordSysMgr._coordinateSystems[0].regions[k].center[1]],value:b[l].value,itemStyle:{color:g}}):void 0!=c._coordSysMgr._coordinateSystems[0].regions[k].properties.center?e.push({name:d.Chart.Categories.Values[l].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[0],
c._coordSysMgr._coordinateSystems[0].regions[k].properties.center[1]],value:b[l].value,itemStyle:{color:a(d)}}):e.push({name:d.Chart.Categories.Values[l].Value,coord:[c._coordSysMgr._coordinateSystems[0].regions[k].center[0],c._coordSysMgr._coordinateSystems[0].regions[k].center[1]],value:b[l].value,itemStyle:{color:a(d)}});break}return e}function r(f,e){function g(a,b,c){var d=[],f=function(a){for(var b=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),
c=[],d,f=0;f<a.Chart.colorAxis.dataClasses.length;f++)d=a.Chart.colorAxis.dataClasses[f].Operator,d=d==QueryViewerConditionOperatorSymbol.Interval?qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[f].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b)+d+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[f].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d==QueryViewerConditionOperatorSymbol.Equal?""+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[f].from,
a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d==QueryViewerConditionOperatorSymbol.LessThan||d==QueryViewerConditionOperatorSymbol.LessOrEqual?d+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[f].to,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b):d+" "+qv.util.ApplyPicture(a.Chart.colorAxis.dataClasses[f].from,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,b),c.push(d);return c}(a),e=function(a){for(var b=a.MapType==QueryViewerMapType.Bubble&&
a.Metadata.Axes[0].DataType==QueryViewerDataType.Character?[""]:[],c,d=0;d<a.Chart.colorAxis.dataClasses.length;d++)c=a.Chart.colorAxis.dataClasses[d].color,b.push(c);return b}(a),a=function(a,b,c,d){var f=[];if(a.Metadata.Axes[0].DataType==QueryViewerDataType.Character)b={name:"serie",type:"map",markPoint:{nameProperty:"iso-code",data:b}};else var b=w(b,a,d),e=Math.max.apply(Math,b.map(function(a){return a.value})),d=a.getContainerControl(),g=Math.min(d.offsetWidth,d.offsetHeight),b={name:"serie",
type:"map",markPoint:{data:b,symbolSize:function(a){return void 0==a?8:Math.sqrt(a/e)*g/10}}};f.push(b);for(b=0;b<a.Chart.colorAxis.dataClasses.length;b++)f.push({name:c[b],type:"map",data:[]});return f}(a,b,f,c);d.push(f,e,a);return d}function o(a,b){b.TextStyle.fontFamily&&(a.fontFamily=b.TextStyle.fontFamily);b.TextStyle.fontSize&&(a.fontSize=b.TextStyle.fontSize);b.TextStyle.fontStyle&&(a.fontStyle=b.TextStyle.fontStyle);b.TextStyle.fontWeight&&(a.fontWeight=b.TextStyle.fontWeight);b.TextStyle.color&&
(a.color=b.TextStyle.color);b.BoxStyle.backgroundColor&&(a.backgroundColor=b.BoxStyle.backgroundColor);b.BoxStyle.borderColor&&(a.borderColor=b.BoxStyle.borderColor);b.BoxStyle.borderWidth&&(a.padding=3,a.borderWidth=b.BoxStyle.borderWidth)}0==f.offsetHeight&&(f.style.height="400px",f.style.overflow="hidden");var n=echarts.init(f),l=function(a){function b(a,c){if(a.fontFamily&&!c.fontFamily)c.fontFamily=a.fontFamily;if(a.fontSize&&!c.fontSize)c.fontSize=a.fontSize;if(a.fontStyle&&!c.fontStyle)c.fontStyle=
a.fontStyle;if(a.fontWeight&&!c.fontWeight)c.fontWeight=a.fontWeight;if(a.color&&!c.color)c.color=a.color}function c(a,b){if(a.fontFamily)b.fontFamily=a.fontFamily;if(a.fontSize)b.fontSize=parseFloat(a.fontSize);if(a.fontStyle)b.fontStyle=a.fontStyle;if(a.fontWeight)b.fontWeight=a.fontWeight;if(a.color)b.color=a.color}function d(a,b){if(a.backgroundColor)b.backgroundColor=a.backgroundColor;if(a.borderWidth)b.borderWidth=parseFloat(a.borderWidth);if(a.borderColor)b.borderColor=a.borderColor}for(var f=
{fontFamily:"Source Sans Pro"},e={},g={},h={},k={},l={},m={},n={},o="white",q="lightcoral",p=qv.util.GetThemeStyleSheet(a),p=p.rules||p.cssRules,a=qv.util.GetContainerControlClass(a),r=0;r<p.length;r++){var s=p[r].style;p[r].selectorText==="."+a?c(s,f):p[r].selectorText==="."+a+" .gx-qv-selected-element"?q=s.backgroundColor:p[r].selectorText==="."+a+".qv-map"?o=s.backgroundColor:p[r].selectorText==="."+a+" .gx-qv-title"?c(s,e):p[r].selectorText==="."+a+" .gx-qv-legend-box"?d(s,l):p[r].selectorText===
"."+a+" .gx-qv-legend-text"?c(s,k):p[r].selectorText==="."+a+" .gx-qv-series-labels-box"?d(s,h):p[r].selectorText==="."+a+" .gx-qv-series-labels-text"?c(s,g):p[r].selectorText==="."+a+" .gx-qv-tooltip-box"?d(s,n):p[r].selectorText==="."+a+" .gx-qv-tooltip-text"&&c(s,m)}b(f,e);b(f,k);b(f,g);b(f,m);return{TextStyle:f,SelectionColor:q,BackgroundColor:o,Title:{TextStyle:e},Legend:{TextStyle:k,BoxStyle:l},SeriesLabels:{TextStyle:g,BoxStyle:h},Tooltip:{TextStyle:m,BoxStyle:n}}}(e);n.clear();var r={backgroundColor:l.BackgroundColor,
series:function(b,d){var f=a(b),e=gx.lang.gxBoolean(b.ShowValues)&&b.MapType===QueryViewerMapType.Bubble,g=b.getContainerControl(),h=Math.min(g.offsetWidth,g.offsetHeight),k=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture),g={type:"map",map:qv.map.getMapDirectory(b).mapKey,roam:true,scaleLimit:{min:1},selectedMode:b.SelectionAllowed()?"single":false,label:{show:false,formatter:"{c}"},emphasis:{label:{show:false},itemStyle:{borderWidth:0.5}},select:{label:{show:false},
itemStyle:{borderWidth:0.5}}};if(b.MapType===QueryViewerMapType.Choropleth){g.nameProperty="iso-code";if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character)g.data=c(b);o(g.label,d.SeriesLabels);if(b.SelectionAllowed()){g.select.itemStyle.areaColor=d.SelectionColor;g.emphasis.itemStyle.areaColor=d.SelectionColor}else{g.emphasis.itemStyle.borderWidth=1;g.emphasis.itemStyle.areaColor=null;g.emphasis.itemStyle.borderColor=qv.util.color.lightenDarkenColor(f,50)}}else if(b.MapType==QueryViewerMapType.Bubble&&
b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){var l=b.Chart.Series.ByIndex[0].MaxValue;if(b.Chart.colorAxis.dataClasses.length===0)g.color=f;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=c(b);g.showLegendSymbol=false;g.markPoint={symbol:"circle",symbolSize:function(a){return Math.sqrt(a/l)*h/10},label:{show:e,formatter:function(a){return qv.util.ApplyPicture(a.value,b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,
k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(f,50),borderWidth:1},emphasis:{label:{show:e},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(f,100),borderWidth:2}}};o(g.markPoint.label,d.SeriesLabels)}else if(b.MapType==QueryViewerMapType.Bubble&&b.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){g.color=f;g.nameProperty="iso-code";g.emphasis.itemStyle.areaColor="#eeeeee";g.select.itemStyle.areaColor="#eeeeee";g.data=[];g.markPoint={symbol:"circle",
label:{show:e,formatter:function(a){return qv.util.ApplyPicture(a.value,b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,k)}},itemStyle:{opacity:0.6,borderColor:qv.util.color.lightenDarkenColor(f,50),borderWidth:1},emphasis:{label:{show:e},itemStyle:{opacity:0.7,borderColor:qv.util.color.lightenDarkenColor(f,100),borderWidth:2}}};o(g.markPoint.label,d.SeriesLabels)}return g}(e,l),title:{text:qv.util.getTranslation(e.Title),left:"center",textStyle:l.Title.TextStyle},dataRange:function(b,
c){function d(c){return c!=null?c:a(b)}var f,e=qv.util.GetPictureProperties(b.Chart.Series.ByIndex[0].DataType,b.Chart.Series.ByIndex[0].Picture);if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length!=0){f=[];for(var h=0;h<b.Chart.colorAxis.dataClasses.length;h++){var k={},l=g(b,"",null)[0];b.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.Interval?k={start:b.Chart.colorAxis.dataClasses[h].from,end:b.Chart.colorAxis.dataClasses[h].to,color:d(b.Chart.colorAxis.dataClasses[h].color),
label:l[h]}:b.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.Equal||b.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.NotEqual?k={value:b.Chart.colorAxis.dataClasses[h].from,color:d(b.Chart.colorAxis.dataClasses[h].color),label:l[h]}:b.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.GreaterThan?k={start:b.Chart.colorAxis.dataClasses[h].from,color:d(b.Chart.colorAxis.dataClasses[h].color),label:l[h]}:b.Chart.colorAxis.dataClasses[h].Operator==
QueryViewerConditionOperatorSymbol.GreaterOrEqual?k={start:b.Chart.colorAxis.dataClasses[h].from-1,color:d(b.Chart.colorAxis.dataClasses[h].color),label:l[h]}:b.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.LessThan?k={end:b.Chart.colorAxis.dataClasses[h].to,color:d(b.Chart.colorAxis.dataClasses[h].color),label:l[h]}:b.Chart.colorAxis.dataClasses[h].Operator==QueryViewerConditionOperatorSymbol.LessOrEqual&&(k={end:b.Chart.colorAxis.dataClasses[h].to+1,color:d(b.Chart.colorAxis.dataClasses[h].color),
label:l[h]});f.push(k)}f={left:"left",orient:"vertical",splitList:f,textStyle:c.TextStyle}}else if(b.MapType==QueryViewerMapType.Choropleth&&b.Chart.colorAxis.dataClasses.length==0){f={min:0,calculable:true,orient:"horizontal",left:"center",color:[a(b),"white"],textStyle:c.TextStyle,formatter:function(a){return qv.util.ApplyPicture(a,b.Chart.Series.ByIndex[0].Picture,b.Chart.Series.ByIndex[0].DataType,e)}};if(b.Metadata.Axes[0].DataType==QueryViewerDataType.Character){h=b.Chart.Series.ByIndex[0].MaxValue;
f.max=h}}if(b.MapType==QueryViewerMapType.Choropleth){if(c.BoxStyle.backgroundColor)f.backgroundColor=c.BoxStyle.backgroundColor;if(c.BoxStyle.borderColor)f.borderColor=c.BoxStyle.borderColor;if(c.BoxStyle.borderWidth)f.borderWidth=c.BoxStyle.borderWidth}return f}(e,l.Legend),tooltip:function(a,b){var d=qv.util.GetPictureProperties(a.Chart.Series.ByIndex[0].DataType,a.Chart.Series.ByIndex[0].Picture),f;if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.Character||
a.MapType==QueryViewerMapType.Choropleth)f={trigger:"item",textStyle:b.TextStyle,formatter:function(b){for(var c=0;c<n._coordSysMgr._coordinateSystems[0].regions.length;c++)if(n._coordSysMgr._coordinateSystems[0].regions[c].name==b.name)return Number.isNaN(b.value)?n._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : 0":n._coordSysMgr._coordinateSystems[0].regions[c].properties.name+" : "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,
d)}};else if(a.MapType==QueryViewerMapType.Bubble&&a.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint){coordData=c(a);f={trigger:"item",textStyle:b.TextStyle,formatter:function(b){for(var c in a.Chart.Series.ByName)var f=a.Chart.Series.ByName[c].Name;if(Number.isNaN(b.value))for(c=0;c<n._coordSysMgr._coordinateSystems[0].regions.length;c++){if(n._coordSysMgr._coordinateSystems[0].regions[c].name==b.name)return n._coordSysMgr._coordinateSystems[0].regions[c].properties.name}else return b.value!=
void 0?gx.getMessage("GXPL_QViewerMapLatitude")+" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]+"<br />"+f+": "+qv.util.ApplyPicture(b.value,a.Chart.Series.ByIndex[0].Picture,a.Chart.Series.ByIndex[0].DataType,d):gx.getMessage("GXPL_QViewerMapLatitude")+" "+b.data.coord[0]+"<br />"+gx.getMessage("GXPL_QViewerMapLongitude")+" "+b.data.coord[1]}}}if(b.BoxStyle.backgroundColor)f.backgroundColor=b.BoxStyle.backgroundColor;if(b.BoxStyle.borderColor)f.borderColor=
b.BoxStyle.borderColor;if(b.BoxStyle.borderWidth)f.borderWidth=b.BoxStyle.borderWidth;return f}(e,l.Tooltip)};b(n);n.setOption(r);var s=qv.util.GetPictureProperties(e.Chart.Series.ByIndex[0].DataType,e.Chart.Series.ByIndex[0].Picture);n.lastSelected=null;n.BubbleSelect=null;e.SelectionAllowed()&&m(n,e);e.ItemClick&&e.Metadata.Data[0].RaiseItemClick&&d(n,e);if(e.MapType==QueryViewerMapType.Bubble){var q=p(c(e),n,e),q=e.Metadata.Axes[0].DataType==QueryViewerDataType.Character?p(c(e),n,e):c(e),r=g(e,
q,n),r={color:r[1],series:r[2],legend:{orient:"vertical",x:"left",y:"bottom",selectedMode:!1,data:r[0],textStyle:l.Legend.TextStyle,formatter:function(a){return a}}};if(e.SelectionAllowed())n.on("click",function(a){if(a.componentType==="markPoint"){var b=n.getOption(),c;if(e.Chart.colorAxis.dataClasses.length==0)c=b.series[0].color;else{c=e.Chart.Series.ByIndex[0].Points[a.dataIndex].Color.Color;x(c)&&(c="#"+c)}if(n.lastSelected!=a.dataIndex){if(n.lastSelected!=null)if(e.Chart.colorAxis.dataClasses.length==
0)b.series[0].markPoint.data[n.lastSelected].itemStyle={color:b.series[0].color};else{colorLastBubble=e.Chart.Series.ByIndex[0].Points[n.lastSelected].Color.Color;x(colorLastBubble)&&(colorLastBubble="#"+colorLastBubble);b.series[0].markPoint.data[n.lastSelected].itemStyle={color:colorLastBubble}}b.series[0].markPoint.data[a.dataIndex].itemStyle={color:l.SelectionColor};n.lastSelected=a.dataIndex}else{b.series[0].markPoint.data[a.dataIndex].itemStyle={color:c};n.lastSelected=null}n.BubbleSelect=a.dataIndex;
n.setOption(b)}});if(0!=e.Chart.colorAxis.dataClasses.length&&(l.Legend.BoxStyle.backgroundColor&&(r.legend.backgroundColor=l.Legend.BoxStyle.backgroundColor),l.Legend.BoxStyle.borderColor&&(r.legend.borderColor=l.Legend.BoxStyle.borderColor),l.Legend.BoxStyle.borderWidth))r.legend.borderWidth=l.Legend.BoxStyle.borderWidth;n.setOption(r)}else e.MapType==QueryViewerMapType.Choropleth&&(e.Metadata.Axes[0].DataType==QueryViewerDataType.GeoPoint&&(q=k(c(e),n,e),maxValue=Math.max.apply(Math,q.map(function(a){return a.value})),
r={series:{data:q},dataRange:{max:maxValue}}),n.setOption(r),gx.lang.gxBoolean(e.ShowValues)&&(dataValues=e.Metadata.Axes[0].DataType==QueryViewerDataType.Character?p(c(e),n,e):p(q,n,e),r={series:{markPoint:{symbol:"circle",symbolSize:function(){return 0},label:{show:!0,color:"black",formatter:function(a){return qv.util.ApplyPicture(a.value,e.Chart.Series.ByIndex[0].Picture,e.Chart.Series.ByIndex[0].DataType,s)}},data:dataValues}}},o(r.series.markPoint.label,l.SeriesLabels)),n.setOption(r));e.Charts=
[n];(function(a){var b="try { qv.map.CheckMapSize("+a.me()+") } catch (e) {}";a.IntervalCheckChartSize=setInterval(b,500)})(e);e._ControlRenderedTo=e.RealType}return{tryToRenderMap:function(a){var b="";(new Date).getTime();a.xml=a.xml||{};qv.services.GetRecordsetCacheKeyIfNeeded(a,function(c,d){var e=!1;c!=d.xml.recordsetCacheKey&&(d.xml.recordsetCacheKey=c,e=!0);qv.util.anyError(c)?(b=qv.util.getErrorFromText(c),qv.util.renderError(d,b)):(e&&qv.services.parseRecordsetCacheKeyXML(d),qv.services.GetMetadataIfNeeded(d,
function(c,d){var e=false;if(c!=d.xml.metadata){d.xml.metadata=c;e=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{e&&qv.services.parseMetadataXML(d);d.Metadata.ParserResult.Success?qv.services.GetDataIfNeeded(d,function(c,d){var e=false;if(c!=d.xml.data){d.xml.data=c;e=true}(new Date).getTime();if(qv.util.anyError(c)){b=qv.util.getErrorFromText(c);qv.util.renderError(d,b)}else{e&&qv.services.parseDataXML(d);e=qv.util.ProcessDataAndMetadata(a);
if(e==""){e=a.getContainerControl();qv.util.hideActivityIndicator(a);if(a.MapLibrary==QueryViewerMapLibrary.Highcharts){Highcharts.mapChart(e,{chart:a.MapType==QueryViewerMapType.Bubble&&a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Choropleth&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color||a.MapType==QueryViewerMapType.Bubble&&a.Chart.colorAxis.dataClasses.length!=0&&!a.Chart.Series.ByIndex[0].Color.Color?{map:qv.map.getMapDirectory(a).mapKey,
styledMode:false}:{map:qv.map.getMapDirectory(a).mapKey,styledMode:true},title:{text:qv.util.getTranslation(a.Title)},mapNavigation:{enabled:true,buttonOptions:{verticalAlign:"bottom"}},tooltip:g(a),series:v(a),colorAxis:s(a),legend:o(a)});a._ControlRenderedTo=a.RealType}else echarts.getMap(qv.map.getMapDirectory(a).mapKey)==null?qv.util.renderError(a,gx.getMessage("GXPL_QViewerNoMapSupport")):r(e,a)}else qv.util.renderError(a,e)}}):qv.util.renderError(d,d.Metadata.ParserResult.Message)}}))})},getMapDirectory:function(a){var b=
"QueryViewer/"+(a.MapLibrary===QueryViewerMapLibrary.Highchart?"highcharts/":"Echarts/"),c;c={};if(a.Region==QueryViewerRegion.Country)b=b+"countries/"+a.Country.toLowerCase()+"-all.js",c="countries/"+a.Country.toLowerCase()+"/"+a.Country.toLowerCase()+"-all";else if(a.Region==QueryViewerRegion.Continent){c="custom/";b+="continents/";switch(a.Continent){case QueryViewerContinent.SouthAmerica:a="south-america";break;case QueryViewerContinent.NorthAmerica:a="north-america";break;default:a=a.Continent.toLowerCase()}c+=
a;b+=a+".js"}else a.MapLibrary==QueryViewerMapLibrary.Highcharts?(c="custom/world-highres",b+="continents/world-highres.js"):(c="world",b+="World/world.js");return c={mapKey:c,mapDir:qv.services.url.getStaticDirectory()+b}},GetMetadataMap:function(a){return qv.util.GetDesigntimeMetadata(a)},GetDataMap:function(a){return a.xml.data},CheckMapSize:function(a){var b=a.getContainerControl();if(b.offsetWidth!=a.Chart._lastWidth||b.offsetHeight!=a.Chart._lastHeight)a.Charts[0].resize({width:b.offsetWidth+
"px",height:b.offsetHeight+"px"}),a.Chart._lastWidth=b.offsetWidth,a.Chart._lastHeight=b.offsetHeight},IsAfricanCountry:function(a){return 0<="DZ AO BJ BW BF BI CM CV CF TD KM CD DJ EG GQ ER SZ ET GA GM GH GN GW CI KE LS LR LY MG MW ML MR MU MA MZ NA NE NG CG RW ST SN SC SL SO ZA SS SD TZ TG TN UG EH ZM ZW".split(" ").indexOf(a)},IsAsianCountry:function(a){return 0<="AF AZ AM BH BD BT BN KH CN CY TL GE IN ID IR IQ IL JP JO KZ KW KG LA LB MY MV MN MM NP KP OM PK PS PH QA RU SA SG KR LK PS SY TW TJ TH TR TM AE UZ VN YE".split(" ").indexOf(a)},
IsEuropeanCountry:function(a){return 0<="AL AD AT AZ AM BY BE BA BG HR CY CZ DK EE FO FI FR GE DE GR HU IS IE IT XK LV LI LT LU MT MD MC ME NL MK NO PL PT RO RU SM RS SK SI ES SE CH TR UA GB VA".split(" ").indexOf(a)},IsNorthAmericanCountry:function(a){return 0<="AI AG BB BZ BM VG CA CR CU DM DO SV GL GD GT HT HN JM MX NI PA PR LC KN VC BS US TT".split(" ").indexOf(a)},IsOceanianCountry:function(a){return 0<="AU CK FJ ID KI MY MH FM NR NC NZ PW PG PH WS SB TK TO TV VU".split(" ").indexOf(a)},IsSouthAmericanCountry:function(a){return 0<=
"AR BO BR CL CO EC GF GY PY PE SR TT UY VE".split(" ").indexOf(a)}}}();
