/*
 GeneXus 17.0.10.161375*/
(function(c,h){"object"===typeof exports&&exports&&"string"!==typeof exports.nodeName?h(exports):"function"===typeof define&&define.amd?define(["exports"],h):(c.Mustache={},h(c.Mustache))})(this,function(c){function h(a){return"function"===typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function g(f,j){function g(a){"string"===typeof a&&(a=a.split(o,2));if(!k(a)||2!==a.length)throw Error("Invalid tags: "+a);D=RegExp(e(a[0])+"\\s*");L=RegExp("\\s*"+e(a[1]));G=RegExp("\\s*"+
e("}"+a[1]))}if(!f)return[];var h=[],s=[],w=[],p=!1,H=!1,D,L,G;g(j||c.tags);for(var z=new d(f),F,C,N,R;!z.eos();){F=z.pos;if(N=z.scanUntil(D)){R=0;for(var Z=N.length;R<Z;++R)if(C=N.charAt(R),m.call(q,C)?H=!0:w.push(s.length),s.push(["text",C,F,F+1]),F+=1,"\n"===C){if(p&&!H)for(;w.length;)delete s[w.pop()];else w=[];H=p=!1}}if(!z.scan(D))break;p=!0;C=z.scan(u)||"name";z.scan(n);"="===C?(N=z.scanUntil(l),z.scan(l),z.scanUntil(L)):"{"===C?(N=z.scanUntil(G),z.scan(t),z.scanUntil(L),C="&"):N=z.scanUntil(L);
if(!z.scan(L))throw Error("Unclosed tag at "+z.pos);R=[C,N,F,z.pos];s.push(R);if("#"===C||"^"===C)h.push(R);else if("/"===C){C=h.pop();if(!C)throw Error('Unopened section "'+N+'" at '+F);if(C[1]!==N)throw Error('Unclosed section "'+C[1]+'" at '+F);}else"name"===C||"{"===C||"&"===C?H=!0:"="===C&&g(N)}if(C=h.pop())throw Error('Unclosed section "'+C[1]+'" at '+z.pos);return b(a(s))}function a(a){for(var b=[],d,f,j=0,k=a.length;j<k;++j)if(d=a[j])"text"===d[0]&&f&&"text"===f[0]?(f[1]+=d[1],f[3]=d[3]):
(b.push(d),f=d);return b}function b(a){for(var b=[],d=b,f=[],j,k=0,c=a.length;k<c;++k)switch(j=a[k],j[0]){case "#":case "^":d.push(j);f.push(j);d=j[4]=[];break;case "/":d=f.pop();d[5]=j[2];d=0<f.length?f[f.length-1][4]:b;break;default:d.push(j)}return b}function d(a){this.tail=this.string=a;this.pos=0}function f(a,b){this.view=a;this.cache={".":this.view};this.parent=b}function j(){this.cache={}}var s=Object.prototype.toString,k=Array.isArray||function(a){return"[object Array]"===s.call(a)},m=RegExp.prototype.test,
q=/\S/,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},n=/\s*/,o=/\s+/,l=/\s*=/,t=/\s*\}/,u=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail};d.prototype.scan=function(a){a=this.tail.match(a);if(!a||0!==a.index)return"";a=a[0];this.tail=this.tail.substring(a.length);this.pos+=a.length;return a};d.prototype.scanUntil=function(a){var a=this.tail.search(a),b;switch(a){case -1:b=this.tail;this.tail="";break;case 0:b="";break;default:b=
this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=b.length;return b};f.prototype.push=function(a){return new f(a,this)};f.prototype.lookup=function(a){var b=this.cache,d;if(b.hasOwnProperty(a))d=b[a];else{for(var f=this,j,k,c,e=!1;f;){if(0<a.indexOf(".")){j=f.view;k=a.split(".");for(c=0;null!=j&&c<k.length;)c===k.length-1&&(e=null!=j&&"object"===typeof j&&k[c]in j||null!=j&&"object"!==typeof j&&j.hasOwnProperty&&j.hasOwnProperty(k[c])),j=j[k[c++]]}else j=f.view[a],e=null!=f.view&&
"object"===typeof f.view&&a in f.view;if(e){d=j;break}f=f.parent}b[a]=d}h(d)&&(d=d.call(this.view));return d};j.prototype.clearCache=function(){this.cache={}};j.prototype.parse=function(a,b){var d=this.cache,f=a+":"+(b||c.tags).join(":"),j=d[f];null==j&&(j=d[f]=g(a,b));return j};j.prototype.render=function(a,b,d,j){var k=this.parse(a,j),b=b instanceof f?b:new f(b);return this.renderTokens(k,b,d,a,j)};j.prototype.renderTokens=function(a,b,d,f,j){for(var k="",c,e,n,g=0,h=a.length;g<h;++g)n=void 0,c=
a[g],e=c[0],"#"===e?n=this.renderSection(c,b,d,f):"^"===e?n=this.renderInverted(c,b,d,f):">"===e?n=this.renderPartial(c,b,d,j):"&"===e?n=this.unescapedValue(c,b):"name"===e?n=this.escapedValue(c,b):"text"===e&&(n=this.rawValue(c)),void 0!==n&&(k+=n);return k};j.prototype.renderSection=function(a,b,d,f){function j(a){return c.render(a,b,d)}var c=this,e="",n=b.lookup(a[1]);if(n){if(k(n))for(var g=0,m=n.length;g<m;++g)e+=this.renderTokens(a[4],b.push(n[g]),d,f);else if("object"===typeof n||"string"===
typeof n||"number"===typeof n)e+=this.renderTokens(a[4],b.push(n),d,f);else if(h(n)){if("string"!==typeof f)throw Error("Cannot use higher-order sections without the original template");n=n.call(b.view,f.slice(a[3],a[5]),j);null!=n&&(e+=n)}else e+=this.renderTokens(a[4],b,d,f);return e}};j.prototype.renderInverted=function(a,b,d,f){var j=b.lookup(a[1]);if(!j||k(j)&&0===j.length)return this.renderTokens(a[4],b,d,f)};j.prototype.renderPartial=function(a,b,d,f){if(d&&(a=h(d)?d(a[1]):d[a[1]],null!=a))return this.renderTokens(this.parse(a,
f),b,d,a)};j.prototype.unescapedValue=function(a,b){var d=b.lookup(a[1]);if(null!=d)return d};j.prototype.escapedValue=function(a,b){var d=b.lookup(a[1]);if(null!=d)return c.escape(d)};j.prototype.rawValue=function(a){return a[1]};c.name="mustache.js";c.version="3.0.1";c.tags=["{{","}}"];var w=new j;c.clearCache=function(){return w.clearCache()};c.parse=function(a,b){return w.parse(a,b)};c.render=function(a,b,d,f){if("string"!==typeof a)throw new TypeError('Invalid template! Template should be a "string" but "'+
(k(a)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)');return w.render(a,b,d,f)};c.to_html=function(a,b,d,f){a=c.render(a,b,d);if(h(f))f(a);else return a};c.escape=function(a){return(""+a).replace(/[&<>"'`=\/]/g,function(a){return p[a]})};c.Scanner=d;c.Context=f;c.Writer=j;return c});(function(){window.onpageshow=function(c){c.persisted&&window.location.reload()}})();
var gx=function(c){var h=/^(?:gx\.O\.)(.+)$/,e=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,g=function(){return!1};return{$:c.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",servletBasePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,
msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:g,trueFn:function(){return!0},numericLenDec:function(a){var b=a.split("."),a=2===b.length?b[0]:a,b=2===b.length?b[1]:"",a=(a.match(/9|Z/g)||[]).length,b=(b.match(/9|Z/g)||[]).length;return{Integers:a,Decimals:b}},rtPicture:function(a,b){return b&&b.getAttribute("data-gx-rt-picture")||a&&a.pic||""},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,b){return"string"===typeof a?(b=b||
document,b.getElementById(a)):a},byName:function(a){return a?document.getElementsByName(a):[]},byTag:function(a,b){b=b||document;return b.getElementsByTagName(a)},byClass:function(a,b,d){return!b&&(d=document||d,d.getElementsByClassName)?d.getElementsByClassName(a):c((b||"")+"."+a,d).toArray()},bySelector:function(a){return c(a).toArray()},scripts:function(a){var b=document.scripts;b||(b=document.getElementsByTagName("script"));if("undefined"!=typeof b){for(var d=[],f=b.length,j=0;j<f;j++)if(!(a&&
null!=b[j].getAttribute("data-gx-external-script"))){var c=b[j].attributes.src;c&&c.value&&(c=c.value,"//:"!=c&&d.push(c))}return d}return[]},getIntersectionObserver:function(a){"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?a&&a(window.IntersectionObserver):gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"intersection-observer.js",!1),function(){a&&a(window.IntersectionObserver)})},_init:function(){gx.evt.processing=
!1;gx.evt.userReadyCnt=1;gx.evt._userReady=!1;gx.evt.on_ready(this,function(){var a,b,d=gx.util.browser,f=[];if(document.querySelectorAll)f=document.querySelectorAll("input[type='hidden']");else{var j=gx.dom.byTag("input");a=0;for(b=j.length;a<b;a++)"hidden"==j[a].getAttribute("type")&&f.push(j[a])}a=0;for(b=f.length;a<b;a++)f[a].setAttribute("autocomplete","off");c('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(d.isChrome()){d=document.querySelectorAll("select");
a=0;for(b=d.length;a<b;a++)if(!d[a].value&&(f=d[a].querySelectorAll("option[selected]"))&&f.length)d[a].value=f[0].value}c('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"}},evt:{enter:!1,lastKey:-1,lastControl:null,
lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!1,skipPromptCtrl:!0,touchTimer:null,userReadyCnt:0,_userReady:!1,userReadyThreshold:2E3,userReadyThresholdFast:400,hooks:[],types:{VALUECHANGED:1,VALUECHANGING:2},serialRunner:function(){var a=[];return{addTask:function(b){a.push(b);if(1===a.length)a[0]()},signalEndTask:function(){a.shift();if(0<a.length)a[0]()}}},
addHook:function(a,b,d,f){this.hooks.push({c:a,e:b,f:d,o:f})},removeHookByKey:function(a){c.each(gx.evt.hooks,function(b,d){d.o&&(d.o.hookKey&&a===d.o.hookKey)&&(gx.evt.detach(d.e,d.o,d.f),gx.evt.hooks[b]=void 0)});gx.evt.hooks=gx.evt.hooks.filter(function(a){return a})},attach:function(a,b,d,f,j){j=j||{};if("string"==typeof b){var c=d;f&&(c=d.closure(f));var k=gx.evt.hooks.length;if(j.single){var e=c,g=!1,h,c=function(){g||(h&&clearTimeout(h),gx.evt.detach(a,b,e,j),e.apply(this,arguments),gx.evt.hooks.splice(k,
1),g=!0)};j.timeout&&(h=setTimeout(c,j.timeout))}a.addEventListener?a.addEventListener(b,c,j.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c;this.addHook(a,b,c,j)}else if(gx.lang.isArray(b))for(var c=0,n=b.length;c<n;c++)this.attach(a,b[c],d,f,j)},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,
"gx-spa-navigating")},onbeforesend:function(a,b,d){gx.pO.MasterPage&&a.req.setRequestHeader(d,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,d,f,j,c){gx.reinit(!c)},oncontentreplace:function(a,b,d,f,j,c,k,e){var a=gx.lang.getType(f),c=(c=c==k?c:k)?gx.lang.getType(c.toLowerCase()):!1,g=gx.ajax.getJsonResponse();g&&gx.fn.setJsonHiddens(null,g.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);e?gx.setMasterPage(j):c&&gx.setMasterPage(new c);gx.ajax.clearJsonResponse();
g?gx.ajax.setJsonResponse({response:g,isPostBack:!1,afterCmpLoaded:function(){e&&(j.restoreTargetComponents(),j.restoreExoEventHandlers());gx.objectLoad(g.gxGrids,g.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}).done(function(){gx.fn.setFocusAfterLoad(!0)}):gx.objectLoad()}}})})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==
document.readyState)gx.evt.onload()},_init:function(){gx.evt.userReadyThresholdFast=gx.util.browser.isIE()?2E3:gx.evt.userReadyThresholdFast;document.gxReadyState="loading";gx.lang.doCallTimeout(function(){gx.evt.userReadyThreshold=gx.evt.userReadyThresholdFast},gx.evt,[],gx.evt.userReadyThreshold);gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE())?this.attach(document,"readystatechange",this.onready):9<=gx.util.browser.ieVersion()&&
!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini()?this.attach(document,"DOMContentLoaded",this.onload):gx.util.browser.isBlackBerry()?this.attach(window,"load",this.onload):gx.wi(function(){this.onready(null)},gx.evt);gx.wi(function(){this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup",
"touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},gx.evt)}},define:function(a,b,d){for(var f=0,j=window||this,a=a.split("."),c=a.length,f=0;f<c-1;f++)"undefined"==typeof j[a[f]]&&(j[a[f]]={}),j=j[a[f]];j[a[c-1]]=d;b||(j[a[c-1]].prototype=
new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout;gx.fx.obs.notify(gx.PARENT_OBJECT_EVT)},createParentObj:function(a){if(!gx.spa||!gx.spa.started)a instanceof gx.GxObject||(GxObj=new a),GxObj&&this.setParentObj(GxObj)},setExecutableComponent:function(a){(!gx.spa||!gx.spa.started)&&gx.wi(function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(a,"")),gx.fn.objectOnload(void 0,!0))},this)},setMasterPage:function(a){gx.wpo(function(){null!=
gx.pO&&(gx.pO.MasterPage=a,gx.fx.obs.notify(gx.SETMASTERPAGE_EVT))})},createMasterPage:function(a){gx.wpo(function(){var b;gx.spa.isNavigating()||(a instanceof gx.GxObject||(b=new a),b&&this.setMasterPage(b))},this)},addComponent:function(a,b){null!=gx.pO&&gx.pO.setWebComponent(a,b)},createComponent:function(a,b,d){var f=null,j,a=gx.lang.getType(a);null!=a&&(a.prototype=new gx.GxObject,j=gx.csv.cmpCtx,gx.csv.cmpCtx=b,f=new a(b),d&&f.setContainer(d),gx.csv.cmpCtx=j,f.serviceUrl=gx.fn.getControlValue(f.CmpContext+
"_CMPPGM"));return f},getObj:function(a,b){return""==a?!0==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(){var a,b;1==arguments.length&&"object"==typeof arguments[0]?gx.O=arguments[0]:(a=arguments[0],b=arguments[1],gx.O=this.getObj(a,b)||gx.pO);gx.csv.cmpCtx=gx.O.CmpContext;return gx.O},setVar:function(a,b){gx.O.setVariable(a,b)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var b=h,b=b.exec(a);null!=b&&b[1]?a=b[1]:
(b=e,b=b.exec(a),null!=b&&b[1]&&(a=b[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=
a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var b=gx.staticDirectory.length,a=!gx.isabsoluteurl(a)&&"/"!=gx.staticDirectory.charAt(0),b="/"!=gx.staticDirectory.charAt(b-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(b?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");if(a&&a!=this.theme&&(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search("/"+this.theme+".css")))a.href=a.href.replace(/[^/]*.css/,
this.theme+".css")},setTheme:function(a){var b=gx.util.browser,d=b.isIE(),b=b.ieVersion(),f=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{void 0===a&&f.resetFixesStyleElement();gx.HTML5&&f.html5(a);if(void 0===a){d&&(c(document.documentElement).addClass("ie"),c(document.documentElement).addClass("ie"+b),gx.runtimeTemplates&&!Modernizr.flexbox&&c(document.documentElement).addClass("gx-align-fallback"));if(d&&10==b){var j=document.createElement("style");j.innerHTML=
"input::-ms-clear {display: none;}";document.body.appendChild(j)}f.setPopupMinWidth()}f.fixTableResets(a)}catch(e){gx.dbg.logEx(e,"gxapi.js","setTheme")}},typedOld:function(a,b,d){switch(d){case "int":return this.OldInteger(a,b);case "decimal":return this.OldDecimal(a,b,!0);case "date":return this.OldDate(a,b);case "dtime":return this.OldDateTime(a,b);default:return this.Old(a,b)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.isvalidating()||gx.spa.isNavigating())},
types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:g,isJava:function(){return!this.net},resolveObjClass:function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&(gx.pO&&gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName))&&(b=a.substring(gx.pO.PackageName.length+
1));return b}},util:{executionContext:{getContext:function(){return gx.http.currentUrl()},changedContext:function(a){return a!==gx.util.executionContext.getContext()}},contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",
mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},compare:function(a,b,d){if(typeof a!=typeof d)return!1;if("string"==typeof a&&"like"==b)return b=d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),b=gx.text.replaceAll(gx.text.replaceAll(b,"%",".*"),"_","."),RegExp(b,"i").test(a);switch(b){case ">":return a>
d;case ">=":return a>=d;case "<":return a<d;case "<=":return a<=d;case "<>":return a!=d;default:return a==d}},isKnownContentType:function(a){for(var b in this.contentTypes)if(this.contentTypes[b]==a)return!0;return!1},getContentTypeFromExt:function(a){a=a.split(/[#?]/)[0].split(".").pop().trim();return this.getContentType(a)},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var b=a.lastIndexOf(".");-1!=
b&&(a=a.substring(b+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var b=a.lastIndexOf("/"),d=a.lastIndexOf("\\"),b=b>d?b:d,d=a.lastIndexOf(".");if(!a)return a;if(0>d||b>d)d=a.length;return a.substring(b+1,d)},getFileType:function(a){var b=a.lastIndexOf("/"),d=a.lastIndexOf("\\"),f=a.lastIndexOf(".");return 0>f||f<b||f<d?"":a.substring(f+1)},getWindowInfo:function(){var a="",b=!0,d=!1;try{if(d=window.location!=window.parent.location?!0:!1)try{b=window.frameElement.id||
window.top.document.body,a=window.name}catch(f){b=!1}}catch(j){}return{insideIframe:d,canAccessFrame:b,frameId:a}},browser:function(){var a=navigator.userAgent,b=/; rv.([0-9]+)/,d;return{w3c:!0,ie5:!0,ie:-1!=a.indexOf("MSIE")||-1!=a.indexOf("Trident"),edge:-1!=a.indexOf("Edge"),ff:-1!=a.indexOf("Firefox"),winCE:-1!=a.indexOf("Windows CE"),iphone:-1!=a.indexOf("iPhone"),ipad:-1!=a.indexOf("iPad"),ipod:-1!=a.indexOf("iPod"),blackBerry:-1!=a.indexOf("BlackBerry"),operaMini:-1!=a.indexOf("Opera Mini"),
opera:-1!=a.indexOf("Opera"),chrome:-1!=a.indexOf("Chrome"),android:-1!=a.indexOf("Android"),webkit:-1!=a.search(/webkit/ig),safari:-1!=a.indexOf("Safari")&&-1===a.indexOf("Chrome"),isIEStrict:function(){return this.ie},isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},
isAndroid:function(){return this.android},isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},isOldIE:function(a){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=(a||8)},ieVersion:function(){d||
(d=function(){var d;if(this.ie)try{var j=a.indexOf("MSIE");if(0<=j){var c=a.indexOf(";",j),k=a.substring(j+5,c);return parseFloat(k,10)}d=a.match(b);if(1<d.length)return parseFloat(d[1],10)}catch(e){gx.dbg.logEx(e,"gxapi.js","ieVersion")}else if(this.edge&&(d=a.match(/ Edge\/([0-9]+)\./),1<d.length))return parseFloat(d[1],10);return-1}.call(this));return d},chromeVersion:function(){if(this.isChrome()){var b=a.match(/Chrome\/([0-9]+)/);if(1<b.length)return parseFloat(b[1],10)}},setupIE:function(){9<=
this.ieVersion()&&!this.isCompatMode()&&("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=function(a){var b=document.createDocumentFragment(),d=document.createElement("div");b.appendChild(d);d.outerHTML=a;return b});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=this.ie&&document.getElementById&&
document.all?!0:!1);this.setupIE()}}}(),addOnce:function(a,b,d){void 0==a[d]&&(a[d]=b)},inArray:function(a,b){if(null==a||!gx.lang.isArray(b))return!1;if("function"==typeof b.indexOf)return-1!=b.indexOf(a);for(var d=b.length,f=0;f<d;f++)if(b[f]==a)return!0;return!1},pushOnceSorted:function(a,b){for(var d=!0,f=0,j=b.length;f<j;f++){if(a==b[f]){d=!1;break}if(a<b[f]){b.splice(f,0,a);d=!1;break}}d&&b.push(a)},lastArray:function(a){return 0<a.length?a[a.length-1]:null},noParmsUrl:function(a){var b=a.indexOf("?");
-1!=b&&(a=a.substring(0,b));return a},resolveUrl:function(a){return!a?a:gx.isabsoluteurl(a)?a:gx.isRelativeToHost(a)?0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+a,!1):a:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1)},resourceUrl:function(){var a;return function(b,d){a||(a=RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof b)return"";if(-1!=b.indexOf("://")||"."==b.charAt(0))return gx.text.startsWith(b,gx.basePath)?b.substring(gx.basePath.length):
b;var f="/"!=gx.basePath.charAt(gx.basePath.length-1),j=""==gx.basePath?0:b.search(a);if(0==j&&!d)return("/"==b.charAt(0)?"":"/")+b;if(-1!=j||d){var c="",c=-1!=j&&0<gx.basePath.length?gx.text.replaceAll(b.substring(j+gx.basePath.length),"\\","/"):b;if("/"==b.charAt(0))return location.protocol+"//"+location.host+b;j=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0);f=f&&"/"!=c.charAt(0);return location.protocol+"//"+location.host+(j?"/":"")+gx.basePath+(f?"/":"")+c}return b}}(),sameAppUrl:function(a){a=
new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var b,d="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1),f=0<gx.basePath.length;b="/"==gx.staticDirectory.charAt(0)?gx.staticDirectory.substring(1):gx.staticDirectory;b=RegExp("(?:/)?(?:"+gx.basePath+(f?"/":"")+"(?:"+b+(d?"/":"")+")?)?((?:[\\S]*))").exec(a);null!=b&&b[1]&&(a=b[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?
"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,b=/^(([^@]+)@)?([^\:]+)(:(.+))?$/,d=function(d){this.url=d;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(d,f){var c=a,c=c.exec(f),e=!gx.lang.emptyObject(c);if(e&&(d.protocol=
c[2]?c[2]:"",e=c[4]?c[4]:"",d.path=c[5]?c[5]:"",d.query=c[7]?c[7]:"",d.hash=c[9]?c[9]:"",c=b,c=c.exec(e),e=!gx.lang.emptyObject(c)))d.user=c[2]?c[2]:"",d.host=c[3]?c[3]:"",d.port=c[5]?c[5]:""})(this,d)};d.parseWithAnchor=function(a){var b=document.createElement("a");b.href=a;!b.protocol&&gx.util.browser.isIE()&&(b.href=b.href);return b};return d}(),regExp:{isMatch:function(a,b){return null!==RegExp(b).exec(a)},replace:function(a,b,d){return a.replace(b,d)},split:function(a,b){return a.split(b)},matches:function(a,
b){var d=RegExp(b).exec(a);return null!==d?d:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");null!=a&&(a=gx.json.evalJSON(a),a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&
(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var b="";if(-1!=a.indexOf("&"))for(var d=a.length,f=0;f<d-1;f++)if("&"==a[f]&&"&"!=a[f+1]){b+=a[f+1];break}return b},accessKeyCaption:function(a){var b="";if(-1==a.indexOf("&"))return a;for(var d=a.length,f=0;f<d-1;f++)if("&"==a[f]&&"&"!=a[f+1]){b+=a.substring(f+1);break}else b+=a[f];return b},invalidFunc:function(a){throw"gxInvalidFunc: "+a;},urlValue:function(a){var b=a;"string"!=typeof b&&
(b=gx.fn.getControlValueInt(a));return encodeURIComponent(b)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init()}},guid:{generate:function(){return([1E7]+-1E3+-4E3+-8E3+-1E11).replace(/[018]/g,function(a){(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}},lang:{inherits:function(a,b,d){var f=a.prototype;a.prototype=new b;for(var c in f)"undefined"==
typeof a.prototype[c]&&(a.prototype[c]=f[c]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===d&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);f.constructor.apply(this,arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var d in b)a[d]=b[d];return a},instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||
b==Array&&"array"==typeof a||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var d=a.base;"undefined"!=typeof d;){if(d==b)return!0;d=d.base}return!1},clone:function(a){var b={},d;for(d in a)b[d]=a[d];return b},cloneDeep:function(a){return JSON.parse(JSON.stringify(a))},isDateType:function(a){return"date"==a||"dtime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==
a},isFixedCharacterType:function(a){return"char"==a||"bits"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||
"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,b){var d=null,d=b instanceof String||"string"==typeof b?a[b]:b;return function(){return d.apply(a,arguments)}},getType:function(a){var b=null;try{for(var d=0,f=a.split("."),c=f.length;null===b&&d<c;)b=
this.getTypeImpl(window,f,d++,c)}catch(e){gx.dbg.logEx(e,"gxapi.js","getType")}return b},getTypeImpl:function(a,b,d,f){var c=null;for(i=d;i<f;i++)if(a[b[i]])a=a[b[i]];else break;i===f&&(a&&"function"===typeof a)&&(c=a);return c},doEval:function(a,b){b=b||window;return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],d=arguments.length,f=1;f<d;f++)b.push(arguments[f]);return a.apply(this,b)}catch(c){gx.dbg.logEx(c,"gxapi.js","doCall")}},
doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,d,f){a=a.closure(b,d);f=setTimeout(a,f);return{f:a,t:f}},requestAnimationFrame:function(a,b){a=b?a.closure(b):a;window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,10)},htmlDecode:function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=escape(b).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=b,b=c(a).text(),c(a).text(""));return unescape(b)}}(),
arrayUnique:function(a,b){for(var d=a.concat(),f=0;f<d.length;++f)for(var c=f+1;c<d.length;++c)(b&&b(d[f],d[c])||d[f]===d[c])&&d.splice(c--,1);return d},objToArray:function(){var a=function(a){return[a]};return function(b){return c.map(b,a)}}()},cache:function(){var a=!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(a){return!this.exceptionsRegEx?!0:!!a&&-1==a.search(this.exceptionsRegEx)},addRemoteFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,
!0)]=!0)},addLoadedFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(a){var d;if(a)for(d in this.remoteFiles)a.exec(d)&&(this.remoteFiles[d]=!1)},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,
d){for(var f=[],c=a.length,e=0;e<c;e++){var k=a[e];if(!gx.lang.emptyObject(k)){for(var g=!1,h=d.length,p=0;p<h;p++)if(k==d[p]){g=!0;break}g||f.push(k)}}g=gx.staticDirectory;"/"==g.charAt(0)&&(g=g.substring(1));c=f.length;for(e=0;e<c;e++)k=f[e],"/"!=k.charAt(0)&&(k=g+k),this.removeRemoteFile(k)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){if(!a){a=!0;var b=gx.staticDirectory;
"/"==b.charAt(0)&&(b=b.substring(1));for(var d=gx.dom.scripts(!0),f=d.length,c=0;c<f;c++){var e=d[c];gx.lang.emptyObject(e)||("/"!=e.charAt(0)&&!gx.isabsoluteurl(e)&&(e=b+e),this.addRemoteFile(e))}d=gx.dom.styles();f=d.length;for(c=0;c<f;c++)e=d[c],gx.lang.emptyObject(e)||("/"!=e.charAt(0)&&!gx.isabsoluteurl(e)&&(e=b+e),this.addRemoteFile(e))}}}}(),json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=
this._nonSerializables.length,d=0;d<b;d++)if(this._nonSerializables[d]==a)return!0;return!1},evalJSON:function(a,b){try{return window.JSON&&!b?void 0===a?a:JSON.parse(a):eval("("+a+")")}catch(d){gx.dbg.logEx(d,"gxapi.js","evalJSON")}return a},evalValidJSON:function(a){return eval("("+a+")")},serializeSDTJson:function(a,b,d){a=gx.lang.cloneDeep(a);a=gx.O.applySDTMapping(a,b,!1);return gx.json.serializeJson(a,d)},serializeJson:function(a,b){if(b&&window.JSON)return JSON.stringify(a);var d=this.objToJson(a);
if(null===d)d=this.arrayToJson(a);else return d;if(null===d){if("function"==typeof a)return null;var d=[],f;for(f in a)if(b||!this.isNonSerializable(f)){var c=this.objToJson(f,!0);if(null!==c){var e=this.serializeJson(a[f]);"string"==typeof e&&d.push(c+":"+e)}}return"{"+d.join(",")+"}"}return d},objToJson:function(a,b){var d=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==d)return gx.text.escapeString(a);if("number"==d)return'"'+a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+
a.toString()+'"'}}else{if("undefined"==d)return d;if("string"==d)return gx.text.escapeString(a);if("number"==d||"boolean"==d)return a.toString();if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"';if(null===a)return"null";if("function"==typeof a.json&&(d=a.json(),a!==d))return this.serializeJson(d)}return null},arrayToJson:function(a){if(Array.isArray(a)){for(var b=[],d=a.length,f=0;f<d;f++){var c=this.serializeJson(a[f]);"string"!=typeof c&&(c="undefined");
b.push(c)}return"["+b.join(",")+"]"}return null},SDTFromJson:function(a,b,d,f){(d=gx.json.objFromJson(a,d,f))&&gx.O.applySDTMapping(a,b,!0);return d},objFromJson:function(a,b,d){try{var f=this.evalValidJSON(b);if(Array.isArray(a)&&Array.isArray(f))for(;a.length>f.length;)a.shift();else for(var c in a)"function"!=typeof a[c]&&delete a[c];for(c in f)a[c]=f[c];return!0}catch(e){return gx.dbg.logEx(e,"gxapi.js","objFromJson"),d&&d.push({Id:"FromJson Error",Description:gx.dbg.exTxt(e),Type:0}),!1}}},dbg:{lastTime:0,
enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()}},stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},csv:{},http:{currentUrl:function(){return location.href.replace(location.hash,"")},loadScript:function(a,b,d){var f=b,e=!1,g,k,h;"string"!==typeof a&&
(g=a.callback,e=a.isExternal,k=a.attris,a=a.url,f=function(){g&&g();b()});var q=gx.dom.byTag("head")[0],p,n=c("script[src='"+a+"']"),o=!0;0<n.length&&!d&&(e?n.remove():(p=n.get(0),o=!1));d=function(a){var b=function(){a();p.removeAttribute("data-gx-loading-script")};if(typeof a=="function")p.addEventListener?gx.evt.attach(p,["load","error"],b,{userCapture:false}):p.onreadystatechange=function(){(p.readyState=="loaded"||p.readyState=="complete")&&b()}};if(p)null!==p.getAttribute("data-gx-loading-script")?
d(f):f();else{p=document.createElement("script");p.type="text/javascript";p.src=a;if(k)for(h in k)k.hasOwnProperty(h)&&p.setAttribute(h,k[h]);f&&p.setAttribute("async","");e&&p.setAttribute("data-gx-external-script","");d(f);o&&(q.appendChild(p),p.setAttribute("data-gx-loading-script",""))}}},storage:function(a){this._store=window.sessionStorage;this._prefix=a;this.supported=!1;this.set_string=function(a,b){this.supported&&(this._store[this._prefix+a]=b)};this.get_string=function(a){return this.supported?
this._store[this._prefix+a]:null};this.set=function(a,b){this.set_string(a,gx.json.serializeJson(b))};this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1,!1)}},_setBasePath:function(){for(var a=
gx.dom.scripts(),b=null,d=0,f=a.length;d<f;d++)if(0<=a[d].indexOf("gxgral.js")||0<=a[d].indexOf("gxcore.js")||0<=a[d].indexOf("gxapiSD.js")){b=a[d];break}var c="",a="";if(!gx.isRelativeToHost(b)||gx.isabsoluteurl(b))d=location.pathname.lastIndexOf("/"),c=1<d?location.pathname.substring(1,d):"";else{var b=b.split("/"),e=location.pathname.split("/");b.splice(b.length-1,1);e.splice(e.length-1,1);d=0;for(f=e.length;d<f;d++)if(e[d]==b[d])c=c+(""==c?"":"/")+e[d];else if(gx.gen.isJava()&&"servlet"==e[d])a=
e[d];else break}gx.basePath=c;gx.servletBasePath=a},objectLoad:function(a,b){var d=c.Deferred();if(!gx.evt.execLoad)return d.resolve(),d.promise();var f=function(){gx.sec.loadKey();void 0===gx.runtimeTemplates&&(gx.runtimeTemplates=0<c("div[data-abstract-form]").length);var f=!0;gx.setTheme();gx.html.applyCustomHTMLAttributes();gx.fx.obs.addObserver("webcom.render",this,function(a){if(a=a.getContainer()){gx.setTheme(a);gx.html.applyCustomHTMLAttributes(a);if(!f){gx.pendingCmps=gx.pendingCmps||0;gx.pendingCmps=
gx.pendingCmps+1;gx.plugdesign.applyTemplateObject({selector:"#"+a.id,observerKey:a.id,deferred:true}).then(function(){if(typeof gx.pendingCmps!="undefined"){gx.pendingCmps=gx.pendingCmps-1;gx.pendingCmps===0&&gx.fx.obs.notify("webcom.all_rendered")}})}}});gx.fx.obs.addObserver("grid.onafterrender",this,function(a,b){b||gx.dom.fixes.fixTableResets(a.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();gx.dom.fixes.createLegacyNotification();
gx.cache._init();gx.fn.installComponents(!0,b);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,!1);gx.plugdesign.init().done(function(){if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var a=jstz.determine().name();!gx.lang.emptyObject(a)&&(gx.http.getCookie("GxTZOffset")!=a&&gx.http.setCookie("GxTZOffset",a,365,false,"/")&&gx.config.timezone.reload)&&gx.http.reload()}gx.evt.attach(window,"load",gx.http.applyDeferredStyles);gx.fn.objectOnload();gx.goReady(function(){gx.evt.setReady(true,
"goReady")});document.gxReadyState="complete";gx.util.autoRefresh.install();gx.fn.setOpacity("reset","body");gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();f=false;d.resolve()})};gx.popup?gx.goInteractive():gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxi.js",!1),function(){gx.goInteractive()});gx.wpo(function(){f()});return d.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);
gx.evt.clearHooks();gx.fx.notifications.deinit();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);gx.plugdesign.deinit();gx._deinit();c(document).off("keypress keyup");gx.evt.detach(document,"keydown",gx.evt.onkeypress_hdlr);gx.evt.userReadyCnt=0},_init_interactive:function(){gx.evt.dispatcher.initialize();gx.base64._init();gx.sec._init();gx.geolocation._init();gx.popup._init();gx.livePrevWS._init()},_init:function(){gx.wi(gx._init_interactive,gx);gx.lang.apply(this,{oldValues:[],
oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus",
"onchange"],b=gx.fn.getFormElements(),d=0,f=b.length;d<f;d++)gx.dom.purgeElement(b[d],a);b=gx.dom.byTag("span");d=0;for(f=b.length;d<f;d++)gx.dom.purgeElement(b[d],a);b=gx.dom.byTag("img");d=0;for(f=b.length;d<f;d++)gx.dom.purgeElement(b[d],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);gx._init()}}}(jQuery);gx.$.extend(gx.dbg,gxdbg);
Object.defineProperty(gx.evt,"userReady",{get:function(){return gx._isReadyUI()}});
gx.plugdesign=function(c){var h={},e=!1,g,a,b=1,d={},f={},j=function(a,b){return function(d){var f=a[d.property],c;f&&(c=f[d.control.id]);!c&&f&&(c=f[d.control.name]);c&&(f=!0===c.fn.call(c.template,d.control,d.value),b&&(d.cancel=f))}},s=function(a,b){b=b||{};!0===b.deferred&&window.requestIdleCallback?window.requestIdleCallback(a):gx.lang.requestAnimationFrame(a)};return{init:function(){gx.plugdesign.initialized=!0;gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this));
gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);return gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},
onBeforePropertyChange:j(d,!0),onAfterPropertyChange:j(f,!1),registerTemplate:function(a){h[a.name]=a},unRegisterTemplate:function(a){delete h[a];gx.plugdesign.definition.templates=c.grep(gx.plugdesign.definition.templates,function(b){return b!==a})},getDOMContext:function(a,b,d,f,e,j){var g,h,b={};j&&(b.text=c(a).text());j=0;for(h=a.attributes.length;j<h;j++)g=a.attributes[j],b[g.name]=g.value;b.el=a;d&&(b.outerHTML=a.outerHTML);f&&(b.innerHTML=a.innerHTML);e&&(b=e.call(this,b,a)||b);return b},assingUserAPI:function(a,
b){b.fnc_isRO=a.fnc_isRO},getElements:function(a,b,d){a="function"==typeof a.selector?a.selector(!b?"":b):b&&!a.global?c(b).find(a.selector):c(a.selector);return d?a.not(d):a},shouldApplyOnElement:function(a,b){return"function"==typeof b.selector?this.getElements(b).is(a):c(a).is(b.selector)},applyTemplateOnElement:function(a,b,e){var e=e||{},j=c.Deferred();s(function(){if("string"==typeof a&&(a=h[a],!a))return;if(!0!==e.checkInclusion||this.shouldApplyOnElement(b,a)){var c=gx.plugdesign.getDOMContext(b,
c,a.outerHTML,a.innerHTML,a.setContext);a.apply(b,c);a.initialize&&a.initialize(c);if(a.listeners){var g=a.listeners,l,c="function"==typeof g.control?g.control(c):g.control;if(g.before)for(l in g.before)g.before.hasOwnProperty(l)&&(d[l]||(d[l]={}),d[l][c]={id:c,fn:g.before[l],template:a});if(g.after)for(l in g.after)g.after.hasOwnProperty(l)&&(f[l]||(f[l]={}),f[l][c]={id:c,fn:g.after[l],template:a})}j.resolve()}}.closure(this),e);return j},applyTemplateSelection:function(a,b,d,f){var f=f||{},e=c.Deferred(),
j=[],g="data-gx-tpl-applied-"+a.name,h=this.getElements(a,b,d,f);!0!==a.onDemandInvoke&&!a.reDraw&&(h=h.not("["+g+"]"));h.each(function(b,d){if(d)if("function"==typeof a.reDraw&&null!==d.getAttribute(g)){var c;c=gx.plugdesign.getDOMContext(d,c,!1,!1,a.setContext);a.reDraw(c)}else j.push(gx.plugdesign.applyTemplateOnElement(a,d,f))});c.when.apply(c,j).done(function(){a.outerHTML&&(h=this.getElements(a,b,d,f));h.attr(g,"");e.resolve()}.closure(this));return e},applyClassMapOnElement:function(a,b){var d,
f,c;a.initialize&&(d=gx.plugdesign.getDOMContext(b,d,!1,!1,a.setContext));if(Array.isArray(a.cssClass)){f=0;for(c=a.cssClass.length;f<c;f++)gx.dom.addClass(b,a.cssClass[f])}else gx.dom.addClass(b,a.cssClass);a.initialize&&a.initialize(d)},applyClassSelection:function(a,b,d,f){var c=function(b){"Class"==b.property&&gx.dom.matchesSelector(b.control,a.selector)&&gx.plugdesign.applyClassMapOnElement(a,b.control)};this.getElements(a,b,d,f).each(function(b,d){d&&(gx.plugdesign.applyClassMapOnElement(a,
d),gx.plugdesign.assingUserAPI(a,d),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,c,{unique:!1,observerKey:f.observerKey}))})},controlValueChanged:function(a,b){a&&gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:a,property:"Value",value:b}])},applyControlValue:function(a,b){gx.fn.setControlValue(a.id,b);gx.html.onchange(a,b)},applyTemplates:function(a,d,f,e,j){var j=j||{},g=c.Deferred();if(0===a.length)return g.resolve();a=c.map(a,function(a){var k=c.Deferred();"string"==
typeof a?a=h[a]:(a.name=a.name||"auto-generated-"+b++,a=new gx.plugdesign.Template(a));if(!e||"function"==typeof e&&e(a)){var g=function(){gx.plugdesign.applyTemplateSelection(a,d,f,j).done(function(){k.resolve()})};!0===j.deferred?s(g):(g(),k.resolve())}else k.resolve();return k});!0===j.deferred?c.when.apply(c,a).done(function(){g.resolve()}):g.resolve();return g},applyClassMaps:function(a,b,d,f,e){var j=c.Deferred(),g=function(a,f){gx.plugdesign.applyClassSelection(f,b,d,e)},h=function(){a=c.grep(a,
f||gx.trueFn);c.each(a,g);j.resolve()};!0===e.deferred?s(h):h();return j},applyTemplateObject:function(b){var b=b||{},d=b.selector,f=b.excluded,j=b.templateSelector,n=b.classMapSelector,h=c.Deferred(),l,s,u=c.Deferred(),j=j||function(a){return!0!==a.onDemandInvoke};if(!gx.runtimeTemplates||!gx.plugdesign.initialized)return h.resolve().promise();if(e)s=this.applyTemplates(g,d,f,j,b),l=this.applyClassMaps(a,d,f,n,b),h.resolve();else{var w=gx.plugdesign.definition;w.css&&c.each(w.css,function(a,b){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+b+"?"+gx.gxBuild,!1),!1,!0)});var r=[];w.js&&c.each(w.js,function(a,b){r.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b+"?"+gx.gxBuild,!1))});var v=jQuery;jQuery=gx.$;gx.http.loadScripts(r,function(){e=!0;g=w.templates||[];a=w.class_maps||[];s=this.applyTemplates(g,d,f,j,b);l=this.applyClassMaps(a,d,f,void 0,b);jQuery=v;h.resolve()}.closure(this))}c.when.apply(c,[h,s,l]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",[b]);u.resolve()});return u.promise()},
fixBootstrapGridLayout:function(){0===c(".container-fluid, .container").length&&c(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var a=function(a){var b,d=[],a=a||{};if(a.name){if(a.selector){if(a.listeners){var f=a.listeners;if(!f.control&&(f.before||f.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}}this.preProcessTemplate=function(){var a=this.template,b=/\{\{\$(\w+)\$\}\}/g,f,c=0;for(d=[];null!==(f=
b.exec(a));)d[c]=f[1],a=a.replace(f[0],'<span id="hook_'+c+'"></span>'),c++;return a};this.postProcessTemplate=function(a){var b,f,e,j;if(d){b=0;for(f=d.length;b<f;b++)e=a[d[b]],j=c("#hook_"+b),e&&j.after(e),j.remove()}};this.apply=function(a,d){var f,e=gx.util.browser.isIE(),j=!1;!b&&this.template&&(b=this.preProcessTemplate(),Mustache.parse(b));if(b){f=Mustache.render(b,d);if("inner"==this.applyTo){if(e)for(;a.firstChild;)a.removeChild(a.firstChild);a.innerHTML=f}else j=a===document.activeElement,
a.parentNode&&!e?a.outerHTML=f:c(a).replaceWith(f);this.postProcessTemplate(d);j&&gx.fn.setFocus(a)}};gx.lang.apply(this,a);return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};a.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}};return a}()}}(gx.$);
gx.plugdesign.definition={css:[],js:[],templates:"labels atts-vars readonly-atts-vars checkbox radio-button prompt prompt-trigger datepicker geolocation multimedia-upload navbar navbar-textblock-link navbar-textblock-text textarea-auto-expand image usercontrol errorviewer password-atts-vars".split(" "),class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]):not([type="checkbox"]), .gx-attribute > select, .gx-attribute > textarea',
cssClass:"form-control"},{selector:".gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input",cssClass:"form-control"},{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"][data-gx-button], .gx-grid-paging-bar button',cssClass:["btn","btn-default"],first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',
cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:["btn","btn-default"],
first:!0}]};
gx.html=function(c){var h=/<style[^>]*>([\s\S]*?)<\/style>/i,e=RegExp("<style[^>]*>([\\s\\S]*?)</style>","ig"),g=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,a=/<link ([^>]*rel=['"]?shortcut icon['"]?[^>]*)>/i,b=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),d=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<.?\/script>)/i,f=/(<script[^>]*>\s*)\r?\n?<\!--\s*\r?\n?(.*)\r?\n?\s*\/\/--\>\s*\r?\n?(<.?\/script>)/ig,j=/<script([^>]*)>([\s\S]*?)<\/script>/i,s=/data-gx-external-script/;HREF_ELEMENT_ATT_REGEX=
/href=(['"]?)([^'">]*)\1/i;ID_ELEMENT_ATT_REGEX=/id=(['"]?)([^'">]*)\1/i;SRC_ELEMENT_ATT_REGEX_1=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i;SRC_ELEMENT_ATT_REGEX_2=/src=(['"]?)([^"']*)\1/i;INPUT_GXSTATE_REGEX=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g;return{encodeCaseFormat:function(a,b,d){b==gx.html.controls.formats.TEXT?a=gx.html.encode(a,!1,d):b==gx.html.controls.formats.TEXT_W_SPACES&&(a=gx.html.encode(a,!0,d));return a},applyCustomHTMLAttributes:function(a){(a?c(a):c(document)).find("input[data-msk-att], textarea[data-msk-att]").each(function(a,
b){var d=c(b),f=d.attr("data-msk-att");d.attr(f,d.attr("data-"+f))})},encode:function(a,b,d){var f=["<",">","&"],c=["&lt;","&gt;","&amp;"];b&&(f.push(" "),c.push("&nbsp;"));d&&(f.push("\n"),c.push("<br/>"),f.push("\r"),c.push(""));return gx.text.charReplace(a,f,c)},getHidden:function(a,b){return'<input type="hidden" id="'+a+'" name="'+a+'" value="'+b+'">'},viewportWidth:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientWidth,document.body.clientWidth):document.body.clientWidth},
viewportHeight:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(a,d){(void 0===d||d)&&(a=a.replace(e,""));for(var a=a.replace(b,""),f=[];f;)if(f=a.match(j)){var c=this.nestedScripts(f,a);0<c&&(f=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+c+"}"),"i"),f=a.match(f));(c=f.lastIndex)||(c=f.index+f[0].length);
a=a.substring(0,f.index)+a.substring(c)}else break;return a},setOuterHtml:function(a,b){a.outerHTML=b},setInnerHtml:function(a,b,d,f,e){var j=gx.dom.styles(),g=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME;gx.dom.shouldPurge()&&gx.dom.purge(a,!0);var h=c(a).children("."+g).get(0);!h&&f&&(h=document.createElement("div"),gx.dom.addClass(h,g),gx.dom.addClass(h,"Form-fx"),a.appendChild(h));f&&gx.pO.fullAjax&&h&&gx.dom.hasClass(h,g)&&!gx.dom.hasClass(a,"transitioning")?(a=document.createElement("div"),a.innerHTML=
this.cleanHtmlRefs(b,e),gx.dom.replaceWithFx(h,a.children[0])):c(a).html(this.cleanHtmlRefs(b,e));gx.util.browser.isIE()&&gx.cache.updateStyles(j,gx.dom.styles());!0==d&&this.processCode(b,!1)},setInnerText:function(a,b,d,f){var e=c(a);null!=a.nodeValue?a.nodeValue=b:!gx.util.browser.isChrome()&&null!=a.innerText?a.innerText=b:gx.util.browser.isFirefox()||gx.util.browser.isChrome()?e.html(gx.html.encodeCaseFormat(b,d,f)):"TEXT"==a.tagName&&null!=a.innerHTML?e.html(b):e.html("<text>"+b+"</text>")},
nodesFromText:function(a){var b=document.createElement("div");b.style.visibility="hidden";b.style.display="none";document.body.appendChild(b);gx.dom.shouldPurge()&&gx.dom.purge(b,!0);b.innerHTML=a;for(var a=[],d=b.childNodes.length,f=0;f<d;f++)a.push(b.childNodes[f].cloneNode(!0));gx.dom.removeControlSafe(b);return a},onTypeAvailable:function(a,b,d,f){try{var c=gx.gen.resolveObjClass(a),e;try{e=window.eval(c)}catch(j){}(e=e||eval(c))?d instanceof Array?b.apply(this,d):b():10>f&&setTimeout(function(){gx.html.onTypeAvailable(a,
b,d,f+1)},0)}catch(g){10>f&&setTimeout(function(){gx.html.onTypeAvailable(a,b,d,f+1)},150)}},processCSS:function(a){if(""!=a){var b=document.createElement("style");b.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(b);b.styleSheet?b.styleSheet.cssText=a:(a=document.createTextNode(a),b.appendChild(a))}},nestedScripts:function(a,b){for(var f=a[0].match(d),c=b,e=0;f;)c=c.replace(f[1],""),e++,f=(a=c.match(j))?a[0].match(d):null;return e},processCode:function(b,d,e,
p,n,o,l){var t=b,u=[],w=!1,r=[],v=[],B=[],x="",J=[],x=[];if(""!=b){if(void 0===o||o)for(;x;){if(x=b.match(h))(o=x.lastIndex)||(o=x.index+x[0].length),b=b.substring(o);else break;B.push(x[1])}b=t;for(x=[];x;){if(x=b.match(g))(o=x.lastIndex)||(o=x.index+x[0].length),b=b.substring(o);else break;o=x[1].match(HREF_ELEMENT_ATT_REGEX);idAttr=x[1].match(ID_ELEMENT_ATT_REGEX);o&&!gx.cache.fileLoaded(o[2])&&(v.push({href:o[2],id:idAttr&&2<idAttr.length?idAttr[2]:null}),gx.cache.addRemoteFile(o[2]))}b=t;for(x=
[];x;){if(x=b.match(a))(o=x.lastIndex)||(o=x.index+x[0].length),b=b.substring(o);else break;c("head link[rel='shortcut icon'").remove();c(document.head).append(x[0])}b=t.replace(INPUT_GXSTATE_REGEX,"");gx.util.browser.isIE()&&(b=b.replace(f,"$1$2$3"));for(x=[];x;){if(x=b.match(j))t=this.nestedScripts(x,b),0<t&&(x=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+t+"}"),"i"),x=b.match(x)),(o=x.lastIndex)||(o=x.index+x[0].length),b=b.substring(o);
else break;if(void 0!=x[1]&&""!=x[1])if(o=x[1].match(SRC_ELEMENT_ATT_REGEX_1),t=!!x[1].match(s),null==o&&(o=x[1].match(SRC_ELEMENT_ATT_REGEX_2)),o&&!gx.cache.fileLoaded(o[2])){var E=o[2];gx.lang.emptyObject(o[3])||(E+="?"+o[3]);u.push({url:E,isExternal:t,callback:t?void 0:function(a){return function(){gx.cache.addRemoteFile(a)}}(o[2],t)})}else o&&gx.cache.fileLoaded(o[2])?w=!0:!o&&x[2]&&r.push(x[2]);else x[2]&&r.push(x[2])}if(!0!=d){x=r.join(";");""!=x&&gx.lang.doEval(x);if("function"==typeof e)gx.http.loadScripts(u,
function(a,b){b instanceof Array?a.apply(this,b):a()}.closure(this,[e,p]),void 0,l);else{d={method:"GET",useCash:!0};d.load=function(a,b){gx.lang.supEval(this,J.push(b))}.closure(this);d.mimetype="text/plain";d.sync=!0;for(var O=u.length,b=0;b<O;b++)d.url=u[b].url,gx.http.doCall(d)}x=J.join("");""!=x&&gx.lang.doEval(x);u=document.getElementsByTagName("style");scrQty=v.length;for(b=0;b<scrQty;b++){d=!1;l=u.length;for(r=0;r<l;r++)if(u[b]&&v[b].href==(u[r].styleSheet&&u[r].styleSheet.cssText?u[r].styleSheet.cssText:
u[r].innerHTML))d=!0;d||((d=gx.dom.byId(v[b].id))?d.href=v[b].href:gx.http.loadStyle(v[b].href,gx.emptyFn,!1,v[b].id))}x=B.join("");gx.html.processCSS(x);if(0==O&&"function"==typeof e)if(w&&n)gx.html.onTypeAvailable(n,e,p,0);else p instanceof Array?e.apply(this,p):e()}}},getFieldLabel:function(a,b){var d,f=a.id,e=a.previousSibling;if(e&&"LABEL"===e.tagName&&e.htmlFor===f)labelEl=e;else if("INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName?d=a.id:"SPAN"==a.tagName?(d=c(a).attr("data-gx-enabled-id"),
!d&&0===f.indexOf("span_")&&(d=f.substring(5))):gx.dom.hasClass(a,gx.uc.gxCssClass)&&(d=gx.uc.CtrlId(a.id)),gx.dom.hasClass(a,gx.html.multimediaUpload.gxCssClass)&&(d=gx.html.multimediaUpload.CtrlId(a.id)),d)return c("label[for='"+d+"']",b).get(0)},multimediaUpload:{gxPreviewHTMLAtt:"data-gx-preview-image",gxCssClass:"gx-multimedia-upload",setPreviewAtt:function(a,b){var d="Object"===typeof a?a:gx.dom.el(a);d&&d.setAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt,b)},getPreviewAtt:function(a){return(a=
"Object"===typeof a?a:gx.dom.el(a))?a.getAttribute(gx.html.multimediaUpload.gxPreviewHTMLAtt):""},getInputFileEl:function(a){return c("#"+a+"[type='file']")[0]},CtrlId:function(a){return a.replace(/_ct$/,"")},resolveFileName:function(a,b){return a||b||""},onOptionChange:function(a){var a=this.getElements(a),b=a.fileField,d=a.uriField;a.uriOption.checked?(gx.dom.removeClass(b,"field-selected"),gx.dom.addClass(d,"field-selected")):(gx.dom.removeClass(d,"field-selected"),gx.dom.addClass(b,"field-selected"))},
imageLoadHandler:function(a,b){var d=function(a){var b="IMG"==a.tagName?"src":"href";return!a[b]||a[b]==document.location.href||"/"==a[b].charAt(a[b].length-1)};gx.dom.removeClass(b,"gx-multimedia-unknown");gx.dom.removeClass(b,"gx-multimedia-download");!a||d(a)?gx.dom.addClass(b,"gx-multimedia-empty"):gx.dom.removeClass(b,"gx-multimedia-empty");d(a)&&(b&&!d(b))&&(gx.dom.removeClass(b,"gx-multimedia-empty"),("IMG"!==a.tagName||d(a))&&gx.dom.addClass(b,"gx-multimedia-download"));if(gx.util.browser.isIE()&&
a&&"IMG"==a.tagName){var d=c(a),f=parseInt(d.css("maxWidth")),e=parseInt(d.css("maxHeight"));f<a.width&&(d.css("height",gx.dom.addUnits(f*a.height/a.width)),d.css("width",gx.dom.addUnits(f)));e<a.height&&(d.css("width",gx.dom.addUnits(e*a.width/a.height)),d.css("height",gx.dom.addUnits(e)))}},dialogCloseHandler:function(a,b){var d=this.getElements(a);b.style.display="none";a.appendChild(b);d.uriOption.checked?this.refreshPreviewImg(a,d.uriField):this.refreshPreviewImg(a,d.fileField);d.action.focus();
gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler)},prevImgClickHandler:function(a,b){var a=a||event,d=gx.evt.source(a);0<c(d).closest(".gx-multimedia-empty").length&&this.actionClickHandler(a,b)},actionClickHandler:function(a,b){var d=gx.html.multimediaUpload.isModal,a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var f=this.getElements(b),e=f.button;f.fieldsCt.style.display="block";var j=130,g=500,h=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(b.style.position=
"static",f.fileField.style.marginTop="0",f.uriField.style.marginTop="0",j=230);gx.runtimeTemplates&&(h=!1,c(window).width()<g&&(g=c(window).width()-20,j=170));d=gx.popup.openDialog({parentElement:b,w:g,h:j,contentHtml:f.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:h,isModal:void 0===d||d,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[b,f.fieldsCt,e])}});f.fileOption.focus();gx.evt.attach(e,"click",d.close,d,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,
this.keypressHandler)},clearActionHandler:function(a,b){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var d=this.getElements(b);d.uriField.value="";d.fileField.value="";d.uriOption.checked=!1;d.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[b]);this.clearPreviewImg(b);this.imageLoadHandler(d.previewImg,d.previewLink)},keypressHandler:function(a){13==a.event.keyCode&&(a.cancel=!0,gx.popup.currentPopup.close())},tapHandler:function(a){this.getElements(a).action.focus()},
getElements:function(a){var a=gx.dom.byId(a),b=c(a),a=b.find(".change-action")[0],d=b.find(".clear-action")[0],f=null,e=c(d).next()[0],b=b.find(".fields-ct");e&&("A"==e.tagName?(f=e,e=e.firstChild):"IMG"!=e.tagName&&(e=null));return{previewLink:f,action:a,clearAction:d,previewImg:e,fieldsCt:b[0],uriField:b.find("input[type='text']")[0],fileField:b.find("input[type='file']")[0],uriOption:b.find("input[type='radio'][value='uri']")[0],fileOption:b.find("input[type='radio'][value='file']")[0],button:b.find("input[type='button']")[0]}},
getContainer:function(a){for(a=gx.dom.byId(a);a;){if(gx.dom.hasClass(a,gx.html.multimediaUpload.gxCssClass))return a;a=a.parentNode}return null},setPreviewImage:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);0>gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&d.uriOption.checked||(this.clearPreviewImg(a),d.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(b),"image")&&("IMG"==d.previewImg.tagName&&(d.previewImg.src=b),this.imageLoadHandler(d.previewImg,d.previewLink)))},
setPreviewLink:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);d.previewLink&&(b&&d.previewLink)&&(d.previewLink.href=b);this.imageLoadHandler(d.previewImg,d.previewLink)},clearPreviewImg:function(a){a=gx.dom.byId(a);if((a=this.getElements(a))&&a.previewImg&&a.previewLink)a.previewImg.src="",a.previewLink.href=""},refreshPreviewImg:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);if(d.previewImg&&"INPUT"==b.tagName){this.setPreviewAtt(a,"");if(b==d.fileField){var f;if(b.files&&(f=
b.files[0]))if(f.type.match(/image.*/)){var c=new FileReader;c.onload=function(b,d,f){d.src=b.target.result;f.href=b.target.result;this.setPreviewAtt(a,b.target.result)}.closure(this,[d.previewImg,d.previewLink],!0);c.readAsDataURL(f)}else{d.previewLink.href="#";d.previewLink.className="gx-multimedia-download";this.clearPreviewImg(a);return}b.gxctrldeleted&&this.clearPreviewImg(a)}else b==d.uriField&&(d.previewImg.src=b.value,d.previewLink.href=b.value);this.imageLoadHandler(d.previewImg,d.previewLink)}},
setType:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);d.fileOption.checked=b;d.uriOption.checked=!b;b&&(d.uriField.value="");this.onOptionChange(a)},getOptionValue:function(a){a=gx.dom.byId(a);return this.getElements(a).fileOption.checked?"file":"uri"},createControl:function(a){a=gx.dom.byId(a);if(!a._created){a._created=!0;var b=this.getElements(a);gx.dom.addClass(b.fileField,"field-selected");b.action.setAttribute("gxfocusable","1");var d=document.createElement("input");d.type="button";
d.className="BtnEnter";d.value=gx.getMessage("GXM_uploadconfirmoption");b.fieldsCt.appendChild(d);var d=this.imageLoadHandler.closure(this,[b.previewImg,b.previewLink]),f=this.onOptionChange.closure(this,[a]);d();b.previewImg&&gx.evt.attach(b.previewImg,"load",d);f();gx.evt.attach(b.uriOption,"click",f);gx.evt.attach(b.fileOption,"click",f);gx.evt.attach(b.action,"click",this.actionClickHandler.closure(this,[a],!0));gx.evt.attach(b.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,
[a],!0));gx.evt.attach(b.clearAction,"click",this.clearActionHandler.closure(this,[a],!0));gx.evt.attach(a,"touchstart",this.tapHandler.closure(this,[a]))}}},controls:function(){var a={},b={label:'<label class="gx-label {{className}} control-label" {{{additionalAtts}}} for="{{relatedElement}}">{{caption}}</label>',radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',
"{{/values}}","</span>"]},d=function(d,f){var c=gx.lang.isArray(b[d])?b[d].join(""):b[d];a[d]||(a[d]=!0,Mustache.parse(c));return Mustache.render(c,f)},f=/\"/g;return{applyTemplate:d,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,
formGroup:28,formGroupEnd:29},formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(a){return"combo"==a||"dyncombo"==a||"listbx"==a||"dynlistbx"==a?!0:!1},eventJSCode:function(a,b,d,f,c){var e="";if(4==a&&d)e=d;else if(1==a)e="gx.fn.closeWindow();";else if(7==a)a="",f&&c&&(a=",'"+f.gridName+"','"+c.gxId+"'"),e="gx.evt.execCliEvt( "+b+a+",this);";else if(6==a||5==a)e="gx.evt.execEvt("+b+",this,"+f.gridId+");";return e},onJsEventAttributes:function(a,b,d){var f=gx.GxObject,c=
" "+f.GX_EVENT_DATA_ATTR+'="'+a+'"';scriptAttribute="";4===a&&(scriptAttribute=" "+f.GX_EVENT_CODE_DATA_ATTR+'="'+a+'"');d?c=b?c+(" "+f.GX_EVENT_CONDITION_DATA_ATTR+'="'+d+'"'+scriptAttribute):c+scriptAttribute:b&&(c+=scriptAttribute);return c+" "},startAnchor:function(a,b,d,f,c,e,j){j=j?' class="'+j+'"':"";b=this.onJsEventAttributes(b,d,f);f?a.append('<a href="#"'+b+j+">"):d?a.append('<a href="#"'+b+j+">"):c&&(d=c.replace(/(\\")/ig,"\\u0022"),a.append('<a href="'+d+'"'),""!=e&&a.append(' target="'+
e+'"'),a.append(j+">"))},endAnchor:function(a,b,d,f){(b||d||f)&&a.append("</a>")},onJSEvent_impl:function(a,b,d){var f=[];""!=d&&f.push('jsevent="'+d+'" ');f.push(a+'="if( ');""!=b?f.push("gx.evt.jsEvent(this)) {"+b+'} else return false;"'):f.push('!gx.evt.jsEvent(this)) return false;"');return f.join("")},onJSEvent:function(a,b,d,f){a.append(" ");a.append(this.onJSEvent_impl(b,d,f))},htmlControl:function(a,b,d,c,e){this.id=a||"";this.width=b||0;this.widthUnit="px";this.height=d||0;this.heightUnit=
"px";this.cssClass=c||"";this.style=this.ownCssClass=this.roClass="";this.title=e||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(a){return this.buffer.append(a)};
this.tagAtt=function(a,b){b=b.toString();b=0<=b.indexOf('"')?b.replace(f,"&quot;"):b;return this.buffer.append(" "+a+(b?'="'+b+'"':""))};this.persistValue=function(){var a=this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&a&&(this._persistValue?this._persistValue():a.v2v&&a.v2v(this.value))};this.setIndividualProp=function(a,b){this[a]="enabled"==a||"visible"==a||"isPassword"==a||"autoComplete"==a||"hasJsLink"==a?gx.lang.gxBoolean(b):b};this.setGridData=function(a){this.grid=a.grid;this.row=
a.row;this.gridId=a.gridId;this.gridRow=a.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var a=this.grid.parentObject;return gx.json.serializeJson([a.CmpContext,a.IsMasterPage])}},singleLineEdit:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=
!1;this.setProperties=function(a,b,d,f,c,e,j,g,h,n,o,k,s,l,m,t,p,q,u,M,I,y,A,K,Q,S,P,T,U,V,W,X,aa,ba,da,ea,Y){this.id=a;this.inputType=u;this.step=M;this.title=j;this.placeholder=g;this.width=I;this.widthUnit=y;this.height=17==A?0:A;this.heightUnit=K;this.maxLength=Q;this.visible=0!=t;this.enabled=0!=p;this.rtEnabled=0!=q;this.isPassword=0!=S;this.format=P;this.link=c;this.linkTarget=e;this.style=k;this.cssClass=o;this.roClass=s;this.columnClass=l;this.columnHeaderClass=m;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);
if(da&&(this.rtEnabled||this.enabled))b=Y;this.formattedValue=""===Y?"":!gx.lang.emptyObject(b)?gx.html.encodeCaseFormat(b,P):gx.applyPicture(this.vStruct,gx.html.encodeCaseFormat(Y||"",P));this.extraAttributes=d;this.jsScrCode=n;this.usrOnclick=h;this.eventName=f;this.parentId=T;this.hasTheme=U;this.autoComplete=0!=V;this.autoCorrection=0!=W;this.value=Y||"";this.domainName=aa;this.rtPicture=ea};this._getHtml=function(){var a="",b="",d=this.getVStruct();0==this.width&&(this.width=this.colSize?this.colSize:
this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?a=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");b=this.style;this.style+=!this.visible?";display:none;":"";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&
this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(!0==this.isPassword)this.tagAtt("type","password");else{this.tagAtt("type",this.inputType);
if(this.step&&("number"==this.inputType||"range"==this.inputType)){this.tagAtt("step",this.step);var f=Math.pow(10,this.maxLength)-1;this.tagAtt("min",-1*f);this.tagAtt("max",f);"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"')}this.dataType==gx.types.geolocation&&(this.extraAttributes+=" data-gx-geolocation")}this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);
this.append(a);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&("datetime"!=this.inputType&&"datetime-local"!=this.inputType)&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.rtPicture&&this.tagAtt("data-gx-rt-picture",this.rtPicture);a=this.style;
""!=this.column.align&&(a+=";text-align:"+this.column.align);f=!this.enabled&&this.rtEnabled?";display:none;":"";a+=f;""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);gx.fn.controlFiresEvent(d)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,d.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(a=this.grid.parentObject.getValidStructFld(this.id),void 0!=a.dp&&(0==a.dp.f&&
(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),f=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+f),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){f="";this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==gx.types.date||
this.dataType==gx.types.dateTime?this.formattedValue:this.value);f=this.hasTheme?gx.fn.prefixROClass(0==this.parentId?this.cssClass:this.roClass):this.cssClass;a="";this.format!=gx.html.controls.formats.RAW_HTML&&(gx.runtimeTemplates&&this.append('<p class="form-control-static">'),b+=!this.visible?";display:none;":"",this.append("<span"),gx.runtimeTemplates&&this.append(" data-gx-tpl-applied-readonly-atts-vars"),this.append(this.extraAttributes),""!=f&&this.tagAtt("class",f),""!=b&&this.tagAtt("style",
b),this.tagAtt("data-gx-readonly",""),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),gx.fn.controlFiresEvent(d)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,d.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"),a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,
a,this.usrOnclick,this.link,this.linkTarget));if(this.isPassword){b=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength);for(d=0;d<b;d++)this.append("*")}else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link),this.append("</span>"),gx.runtimeTemplates&&this.append("</p>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},
multipleLineEdit:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t,p,q,u,M,I,y,A,K,Q,S,P){this.id=a;this.visible=0!=c;this.enabled=0!=e;this.rtEnabled=0!=j;this.width=g;this.widthUnit=h;this.height=n;this.heightUnit=k;this.style=s;this.cssClass=l;this.columnClass=m;this.columnHeaderClass=t;this.maxLength=p;this.extraAttributes=d;this.autoresize=0!=q;this.format=f;this.link=b;this.linkTarget=M;this.placeholder=
I;this.value=P||"";this.autoCorrection=0!=y;this.domainName=K;this.maxTextLines=u;this.jsScrCode=S};this._getHtml=function(){var a=this.getVStruct();this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),this.append("<textarea"),""!=
this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",
this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(gx.html.encodeCaseFormat(this.value,gx.html.controls.formats.TEXT,!1)),this.append("</textarea>");
if(!this.enabled){var b=!this.visible?"display:none;":"";this.autoresize||(b+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);this.cssClass=gx.fn.prefixROClass(this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=b&&this.tagAtt("style",b);this.tagAtt("data-gx-readonly","");""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+this.id);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,
a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.format===gx.html.controls.formats.TEXT_W_SPACES&&this.tagAtt("data-text-format",gx.html.controls.formats.TEXT_W_SPACES);this.append(">");gx.html.controls.startAnchor(this,this.jsScrCode,!!a.evt,"",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,!!a.evt,"",this.link);gx.html.controls.specificDomainCtrls(this);
this.append("</span>")}}},blob:function(a,b,d,f,c,e,j){this.base(a,b,d,f,c);this.type=gx.html.controls.types.blob;this.display=e||0;this.contentType=j||"text/html";this.parameters=this.url="";this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t,w,r,p,q,u,K,Q,S,P,T,U,V,W,X){this.id=a;this.value=b;this.contentType=d||"text/html";this.linkTarget=c;this.parameters=e;this.display=j;this.visible=0!=h;this.enabled=0!=g;this.alt=n;this.title=k;this.borderWidth=o;this.autoresize=0!=s;this.width=l;this.widthUnit=
m;this.height=t;this.heightUnit=w;this.vSpace=r;this.hSpace=p;this.jsScrCode=q;this.usrOnclick=u;this.eventName=K;this.style=Q;this.cssClass=S;this.columnClass=P;this.columnHeaderClass=T;this.extraAttributes=U;this.extraDisplayAttributes=V;this.jsDynCode=W;this.url=gx.util.resolveUrl(X)};this._getHtml=function(){var a="";this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",
0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");var b=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(b){this.append("<img");this.tagAtt("alt",this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),
""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0!=this.width&&!this.autoresize&&(this.style=this.style+"width:"+this.width+this.widthUnit+";");0!=this.height&&!this.autoresize&&(this.style=this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);a=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass;this.enabled||(a=gx.fn.prefixROClass(a));this.tagAtt("class",a);this.append(this.extraDisplayAttributes);
this.append(">");b?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),
this.append("></a>"));this.append("</div><div>");if(this.enabled){var d="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");a=gx.dom.byId(this.id);this.grid&&this.grid.parentObject.isTransaction()&&a&&this.value===a.value?(b=this.id+"_hook",this.append("<div"),this.tagAtt("id",b),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:a,hookId:b})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),
this.visible||(d+="display:none;"),0!=this.width&&(d=d+"width:"+this.width+";"),this.tagAtt("style",d),this.tagAtt("value",this.value),a=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,this.enabled||(a=gx.fn.prefixROClass(a)),this.tagAtt("class",a),b&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(a,b,f,e,j){this.base(a,b,f,e,j);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=
[];this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t){this.possibleValues=a.v||[];this.id=b;this.title=d;this.visible=0!=f;this.enabled=0!=c;this.columns=e;this.orientation=j;this.style=g;this.cssClass=h;this.columnClass=n;this.columnHeaderClass=k;this.jsScrCode=o;this.usrOnclick=s;this.eventName=l;this.extraAttributes=m;this.value=t};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var a=[];a.push(this.enabled?this.cssClass:gx.fn.prefixROClass(this.cssClass));
a.push("gx-radio-button");1==this.orientation&&a.push("gx-radio-button-vertical");var a=a.join(" "),b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(d("radio",{id:this.id,className:a,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",b,this.usrOnclick),values:c.map(this.possibleValues,function(a,b){return{itemId:this.id+
"_"+b,itemValue:a[0],itemDesc:a[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(a[0].toString())}}.closure(this))}))}},comboBox:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t,p,q,u,M,I,y,A,K,Q){this.possibleValues=a.v||[];this.id=b;this.title=g;this.visible=0!=h;this.enabled=0!=n;this.rtEnabled=0!=k;this.rows=d;this.format=o;this.width=s;this.widthUnit=
l;this.height=m;this.heightUnit=t;this.style=p;this.cssClass=q;this.columnClass=u;this.columnHeaderClass=M;this.formattedValue=y;this.jsScrCode=c;this.usrOnclick=f;this.eventName=e;this.extraAttributes=I;this.value=Q;this.rawValue=a};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var a=
this.style+" ;overflow:hidden;",b=this.enabled||this.rtEnabled;this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(b){var d=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);
this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",d,this.usrOnclick);this.append(">");for(var d=this.possibleValues.length,f=0;f<d;f++){var c=this.possibleValues[f];this.append("<option");this.tagAtt("value",c[0]);gx.text.trim(c[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(c[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||
this.grid.addHiddenControl(this.id,this.value);d="";d=gx.fn.prefixROClass(this.cssClass);a+=!this.visible?";display:none;":"";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=d&&this.tagAtt("class",d);""!=a&&this.tagAtt("style",a);gx.O.DSO&&this.tagAtt("data-gx-readonly","");b||this.tagAtt(gx.GxObject.GX_DATA_RAW_VALUE_ATTR,gx.json.serializeJson(this.rawValue));this.append(this.extraAttributes);this.append(">");d=this.possibleValues.length;
for(f=0;f<d;f++)if(c=this.possibleValues[f],gx.text.trim(c[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(c[1]);break}this.append("</span>")}}},listBox:function(a,b,d,f,c,e){this.base(a,b,d,f,c);this.type=gx.html.controls.types.listBox;this.rows=e},checkBox:function(a,b,d,f,c,e,j,g){this.base(a,b,d,f,c);this.type=gx.html.controls.types.checkBox;this.caption=e||"";this.checkedValue=j;this.uncheckedValue=g;this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s){this.id=
a;this.title=b;this.visible=0!=f;this.enabled=0!=c;this.checkedValue=e;this.caption=j;this.style=g;this.cssClass=h;this.columnClass=n;this.columnHeaderClass=k;this.extraAttributes=o;this.value=s;this.labelCaption=d};this._getHtml=function(){var a=this.getVStruct();this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));var b=this.cssClass;this.enabled||(b=gx.fn.prefixROClass(this.cssClass));this.style+=this.visible?
"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=b&&this.tagAtt("class",b);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);
gx.fn.controlFiresEvent(a)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t,p,q,u,M,I,y,A,K,Q,S,P,T,U,V){this.id=a;this.accessKey=f;this.visible=0!=e;this.enabled=0!=j;this.alt=g;
this.title=h;this.borderWidth=n;this.autoresize=0!=k;this.width=o;this.widthUnit=s;this.height=l;this.heightUnit=m;this.vSpace=t;this.hSpace=p;this.link=b;this.linkTarget=d;this.jsScrCode=q;this.usrOnclick=u;this.eventName=M;this.style=I;this.cssClass=y;this.columnClass=A;this.columnHeaderClass=K;this.align=Q;this.extraAttributes=S;this.useMap=P;this.jsDynCode=T;this.imgSrcSet=U;this.value=this.imageUrl=V};this._getHtml=function(){var a=this.getVStruct();this.grid.addHiddenControl(this.id,this.imageUrl);
""!=this.eventName&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));var b=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=b&&(this.accessKey=b);this.style+=this.visible?"":";display:none;";b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,this.jsScrCode,b,this.usrOnclick,this.link,this.linkTarget,"gx-image-link");
this.append("<img");this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&
(this.style=this.style+";border-width: "+this.borderWidth);this.tagAtt("alt",this.alt||this.title);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);
a.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&(""!=this.link&&""==b)&&gx.html.controls.endAnchor(this,b,this.usrOnclick,this.link)};this._persistValue=function(){var a=this.getVStruct();a.v2v&&a.v2v(this.imageUrl)}},
multimedia:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.multimedia;this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t,p,q,u,M,I,y,A){this.id=a;this.text=b;this.display=0!=d;this.visible=0!=f;this.enabled=0!=c;this.autoresize=0!=e;this.width=j;this.widthUnit=g;this.height=h;this.heightUnit=n;this.jsScrCode=k;this.usrOnclick=o;this.eventName=s;this.style=l;this.cssClass=m;this.columnClass=t;this.columnHeaderClass=p;this.extraInputAttributes=q;this.jsDynCode=M;this.readOnly=
0!=I;this.isBlob=gx.lang.gxBoolean(y);this.multimediaUrl=A;this.value=gx.util.resolveUrl(A)};this.startMultimediaUploadControl=function(a,b,d,f){return['<div id="',a,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(f||"")+(b?"":"display:none;"),'" ',gx.html.multimediaUpload.gxPreviewHTMLAtt,'="',this.value,'" ">'].join("")};this.endMultimediaUploadControl=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t){d=[];f=gx.html.multimediaUpload.getInputFileEl(this.id);c="checked";e="";j=a.match(/([\w]+)(_\d{4})$/);
j=j[1]+"_GXI"+j[2];if(m||void 0===m)c="",e="checked",b="";m=['<div id="',a,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',a,'Option" type="radio" value="file" ',e,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',a,'Option" type="radio" value="uri" ',c,"/>",gx.getMessage("GXM_uploadurioption"),"</label>",'<input type="text" class="field ',k,'" id="',j,'" name="',j,'" value="',b,'" ',s," />"];d.push(m.join(""));m=f?['<div id="',
a,'_hook"></div>']:['<input type="file" class="field ',k,'" id="',a,'" name="',a,'" accept="',t,'" ',s,"/>"];d.push(m.join(""));m=["</div>","</div>"];d.push(m.join(""));return d.join("")};this.getPreviewHtml=function(){var a=gx.fn.prefixROClass(this.cssClass||""),b=this.value,d=b?' href="'+b+'"':"",f=this.readOnly||!this.enabled,c=f?this.id:"",e="",e=gx.text.startsWith(gx.util.getContentTypeFromExt(b),"image")||!f&&""===b?["<a",' class="'," gx-multimedia-ro",'"',' target ="_blank"',d,">",'<img id = "Object_',
this.id,'" class = "',a,'" alt = "',this.alt,'" src = "',b,'" />','<span id="',c,'" class="',this.placeHolderClass,'"></span>',"</a>"]:["<a",b?" download":"",' class="'," gx-multimedia-ro",'"',' target = "_blank"',d,">",'<span id = "',c,'" class = "',a," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),'"></span>',"</a>"];return e.join("")};this._getHtml=function(){!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,
this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,
this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}};this._persistValue=function(){var a=this.getVStruct();a.v2v&&a.v2v(gx.html.multimediaUpload.getPreviewAtt(this.id+"_ct")||this.multimediaUrl)}},image:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.image;this.alt=
"";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t,p,q,u,M,I,y,A,K,Q,S,P,T,U,V,W,X,aa,ba){this.id=a;this.accessKey=f;this.visible=0!=e;this.enabled=0!=j;this.alt=g;this.title=h;this.borderWidth=n;this.autoresize=0!=k;this.width=o;this.widthUnit=s;this.height=l;this.heightUnit=m;this.vSpace=t;this.hSpace=p;this.link=b;this.linkTarget=d;this.jsScrCode=q;this.usrOnclick=u;this.eventName=M;this.style=
I;this.cssClass=y;this.columnClass=A;this.columnHeaderClass=K;this.align=Q;this.extraInputAttributes=S;this.extraImageAttributes=P;this.useMap=T;this.jsDynCode=U;this.readOnly=0!=V;this.isBlob=gx.lang.gxBoolean(W);this.isAttribute=gx.lang.gxBoolean(X);this.imgSrcSet=aa;this.multimediaUrl=ba;this.value=gx.util.resolveUrl(ba);this.themeName=c;this.className=y;X&&(this.className=gx.fn.prefixROClass(y));a=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(a);this.innerImage.column=
this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.widthUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.value)};
this.getPreviewHtml=function(){var a=this.value;return['<a target="_blank" class="gx-multimedia-ro"><img id="Object_',this.id,'" class="',gx.fn.prefixROClass(this.cssClass||""),'" alt="',this.alt,'" src="',a,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,
this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,
this.readOnly,this.isBlob,"image/*"));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}}},video:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},
file:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.textBlock;this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l){this.id=a;this.visible=0!=n;this.enabled=0!=k;this.rtEnabled=0!=o;this.format=s;this.title=h;this.link=b;this.linkTarget=d;this.jsScrCode=g;this.usrOnclick=f;this.eventName=c;this.extraAttributes=e;this.cssClass=j;this.value=
gx.text.replaceAll(l,"�","'")};this._getHtml=function(){var a,b=this.getVStruct(),d=this.enabled||this.rtEnabled;this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(a=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(a=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",this.id),this.enabled||(this.cssClass=(this.cssClass||"")+" gx-disabled"),""!=this.cssClass&&this.tagAtt("class",
this.cssClass),this.tagAtt("data-gxformat",this.format),""!=a&&this.tagAtt("style",a),""!=this.title&&this.tagAtt("title",this.title),gx.fn.controlFiresEvent(b)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,b.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0")),this.append(">"));a="";d?(a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,a,this.usrOnclick,
this.link,this.linkTarget)):a="";this.append(gx.html.encodeCaseFormat(this.value,this.format));d&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1)}},label:function(a,b,f,c,e){this.base(a,b,f,c,e);this.type=gx.html.controls.types.label;this.setProperties=function(a,
b,d,f,c,e){this.referencedEl=a;this.labelCaption=b;this.labelClass=d;this.extraStyle=e;this.addAttributes=[0===f?"data-gx-sr-only":"",this.extraStyle?'style="'+this.extraStyle+'"':""].join(" ")};this._getHtml=function(){this.append(d("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},button:function(a,b,d,f,c,e){this.base(a,b,d,f,c);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=e||"rounded";
this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,o,s,l,m,t){this.reset=m;this.id=a;this.title=c;this.accessKey=e;this.style=j;this.cssClass=g;this.visible=0!=h;this.enabled=0!=n;this.buttonStyle=k;this.jsScrCode=f;this.usrOnclick=d;this.eventName=o+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=s;this.jsCode=b;this.jsDynCode=l;this.caption=t};this._getHtml=function(){var a=this.getVStruct();this.style+=this.visible?"":";display:none;";var b="BaseRBtn R"+this.cssClass;"rounded"==
this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",b),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");b="button";1==this.reset?b="submit":0==this.reset&&(b="reset");this.tagAtt("type",b);b=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==b&&(b=gx.util.accessKey(this.title),
this.title=gx.util.accessKeyCaption(this.title));""!=b&&(this.accessKey=b);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||this.append(" disabled");this.append(gx.html.controls.onJsEventAttributes(this.jsScrCode,this.jsCode,this.usrOnclick));this.append(this.extraAttributes);
gx.fn.controlFiresEvent(a)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(a){this.containerName=a;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=
function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(a,b){this.id=this.containerName=a;this.visible=0!=b};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(a,
b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(a,b){this.parentName=a;this.containerName=b;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.webComponent;
this.content=this.controlName="";this.setProperties=function(a){this.controlName=a;var b=this.grid.parentObject.getComponentData(this.controlName),a=b.Prefix,d=this.grid.gxComponentContext+"gxHTMLWrp"+a+this.gridRow,f=gx.dom.byId(d),c="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+a+this.gridRow);if(null!=f)b=d+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:b,el:d,p:this.grid.gxComponentContext+a+this.gridRow}),d=b;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&
!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(f=gx.csv.lastEvtResponse.gxComponents[d],gx.lang.emptyObject(f))c="";else{var c=gx.html.cleanHtmlRefs(f),e=gx.fn.getHidden(this.grid.gxComponentContext+a+this.gridRow);e||(e=b.GXClass);gx.lang.emptyObject(e)||this.grid.addComponentToDraw({load:!0,n:e.toLowerCase(),p:this.grid.gxComponentContext+a+this.gridRow,c:f})}this.id=d;this.content=c};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);
this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k){this.id=a;this.value=b;this.visible=0!=d;this.width=f;this.widthUnit=c;this.height=e;this.heightUnit=j;this.borderStyle=g;this.align=h;this.title=n;this.scrollbars=k};this._getHtml=function(){this.style+=this.visible?"":
";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=
this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k,s,o,l,m,t,p){this.id=a;this.visible=0!=b;this.cssClass=d;this.background=f;this.backColor=c;this.borderColor=e;this.align=j;this.title=g;this.borderWidth=h;this.cellPadding=n;this.cellSpacing=k;this.height=s;this.width=o;this.rules=
l;this.heightUnit=m;this.widthUnit=t;this.style="";this.header=p};this._getHtml=function(){var a=this.getVStruct();this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");if(""!=this.backColor){var b=parseInt(this.backColor),b=isNaN(b)?this.backColor:gx.color.html(b).Html;this.style=this.style+"background-color: "+b+";"}""!=this.borderColor&&
(b=parseInt(this.borderColor),b=isNaN(b)?this.borderColor:gx.color.html(b).Html,this.style=this.style+"border-color: "+b+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);
""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),
this.tagAtt("tabindex","0"));this.append(">");""!=this.header&&(this.append("<caption>"),this.append(this.header),this.append("</caption>"))}},row:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(a,b,d){b&&(this.cssClass=this.ownCssClass?b+(this.ownCssClass?" "+this.ownCssClass:""):b);this.style=d};this._getHtml=function(){this.append("<tr");
""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",
this.oncontextmenu);this.append(">")}},cell:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.cell;this.className=this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=function(a,b,d){this.background=a;this.cssClass=d;b&&""!=b&&0<b.indexOf("style=")&&(this.style=b.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=
typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",
this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(a,b,d,f,c){this.base(a,b,d,f,c);this._getHtml=function(){this.append("<div");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&
this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(a,b,d,f,c){this.base(a,b,d,f,c);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&
this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&
this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(a,b,d,f,c,e,j,g,h){this.id=a;this.caption=b;this.visible=0!=d;this.width=f;this.widthUnit=c;this.height=e;this.heightUnit=j;this.cssClass=g;this.extraAtts=h};this._getHtml=function(){this.append("<fieldset");
this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var a="-moz-border-radius:3pt;";"0"!=this.width&&(a+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(a+="height: "+this.height+this.heightUnit+";");this.visible||(a+="display:none;");this.tagAtt("style",a);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));
this.append("</legend>")}},div:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.div;this.setProperties=function(a,b,d,f,c,e,j,g,h,n,k){this.id=a;this.visible=0!=b;this.width=d;this.widthUnit=f;this.height=c;this.heightUnit=e;this.cssClass=j;this.align=g;this.vAlign=h;this.extraAtts=n;this.extraStyle=k};this._getHtml=function(){var a=this.getVStruct(),b=this.align&&"left"!=this.align.toLowerCase(),d=this.vAlign&&"top"!=this.vAlign.toLowerCase(),f=this.visible?"":";display:none;";
""!=this.height&&(f=f+"height: "+this.height+this.heightUnit+";");""!=this.width&&(f=f+"width: "+this.width+this.widthUnit+";");f+=this.extraStyle;this.append("<div");this.id&&this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=f&&this.tagAtt("style",f);""!=this.extraAtts&&this.append(this.extraAtts);b&&this.tagAtt("data-align",this.align.toLowerCase());d&&this.tagAtt("data-valign",this.vAlign.toLowerCase());gx.fn.controlFiresEvent(a)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,
a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.tagAtt("tabindex","0"));this.append(">");(b||d)&&this.append('<div data-align-outer=""><div data-align-inner="">')}},divEnd:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.divEnd;this.setProperties=function(a,b){this.align=a;this.vAlign=b};this._getHtml=function(){var a=this.align&&"left"!=this.align.toLowerCase(),b=this.vAlign&&"top"!=this.vAlign.toLowerCase();(a||b)&&this.append("</div></div>");
this.append("</div>")}},formGroup:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.formGroup;this.setProperties=function(a){this.captionPosition=a};this._getHtml=function(){1===this.captionPosition&&this.append('<div class="form-group gx-form-group">')}},formGroupEnd:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(a){this.captionPosition=a};this._getHtml=function(){1===this.captionPosition&&this.append("</div>")}},
specificDomainCtrls:function(a){if(a.domainName==gx.domains.component&&0==a.enabled){var b=a.enabled?";display:none;":"",d=a.id+"_comp_trigger",f=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);a.append("<img");a.tagAtt("src",f);a.tagAtt("id",d);a.tagAtt("class","");a.tagAtt("style",b+" margin-left:2px; cursor:pointer;");a.tagAtt("onclick","gx.popup.openUrl('"+a.value+"')");a.append("/>");b=[];b.push(a.column.gxId)}else a.dataType==gx.types.geolocation&&
(b=!a.enabled?";display:none;":"",d=a.id+"_geoLocMe",a.append("<img"),a.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),a.tagAtt("id",d),a.tagAtt("class","GeoLocOption"),a.tagAtt("style",b),a.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),a.append(">"),b=[],b.push(a.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,
this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,
this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,
this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){var c={};return{observers:[],initialObservers:[],addObserver:function(c,e,g,a){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(h,e,g,a){a=a||{};if(!1===a.unique||0>this.indexOf(h,e,g)){var b={e:h,o:e,f:g,cfg:a};a&&a.observerKey&&(c[a.observerKey]=c[a.observerKey]||[],c[a.observerKey].push(b));this.observers.push(b);!0===a.doNotDelete&&this.initialObservers.push({e:h,o:e,f:g,cfg:a})}},deleteObserverByKey:function(h){c[h]&&($.each(c[h],
function(c,g){gx.fx.obs.deleteObserver(g.e,g.o,g.f)}),c[h]=[])},deleteObserver:function(c,e,g){new gx.thread.Mutex(this,this.deleteObserverSync,[c,e,g])},deleteObserverSync:function(c,e,g){c=this.indexOf(c,e,g);0<=c&&this.observers.splice(c,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(c,e,g){for(var a=this.observers.length,b=0;b<a;b++){var d=this.observers[b];if(d&&d.e==c&&d.o==e&&d.f==g)return b}return-1},notify_count:0,notify:function(c,e,g){e||(e=[]);
var a=this.observers.length;this.notify_count+=1;for(var b=[],d,f=0;f<a;f++){var j=this.observers[f];if(j&&j.e==c&&!j.removed)try{j.cfg&&j.cfg.single&&(j.removed=!0),d=j.f.apply(j.o,e),j.cfg&&j.cfg.async&&b.push(d)}catch(s){gx.dbg.logEx(s,"gxfx.js","gx.obs.notify")}}gx.$.when.apply($,b).then(function(){this.notify_count-=1;if(0===this.notify_count)for(var a=this.observers.length-1;0<=a;a--)this.observers[a].removed&&this.observers.splice(a,1);g&&g()}.closure(this))}}};
gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(c,h){gx.fx.installSuggest(h,!0)})},installSuggest:function(c,h){if(!h&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[c.id]=c;else try{var e=gx.O.getValidStructFld(c.id);if(e&&!gx.lang.emptyObject(e.gxsgprm)){var g=0<e.grid?gx.fn.currentGridRowImpl(e.grid):"main",a=e.gxsgprm;a.installed||(a.installed={});a.installed[g]||(gx.ajax.suggest(gx.O,
a[1],c.id,a[0],a[3],a[2]),a.installed[g]=!0,$(c).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(c).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(c).val().length))}}catch(b){gx.dbg.logEx(b,"gxfx.js","installSuggest")}},updateSuggestParms:function(c){if(c)for(var h=c.length,e=0;e<h;e++){var g=gx.fn.validStruct(c[e]);g&&"function"==typeof g.c2v&&g.c2v()}},firesuggest:function(c,h,e,g){this.updateSuggestParms(g);if(c.textbox.value)return h.requestSuggestions(c.sdtParms,function(){h.values?c.autosuggest(h.values,e):c.hideSuggestions();
delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(""===c.textbox.value)gx.evt.onchange_impl(c.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(c,h,e,g,a,b){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=h;this.textbox=c;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=c.onblur);this.ControlRefresh=e;this.typeahead=g;this.suggestParms=a||[];this.sdtParms=b||[];this.requestSuggestions=function(a,
b,c){gx.fx.delayedValidation=true;var e=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(a,b,c,e)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};this.highlightSuggestion=function(a){for(var b=this.layer.childNodes.length,c=0;c<b;c++){var e=this.layer.childNodes[c];if(e==a)e.className="current";else if(e.className=="current")e.className=""}};this.init=function(){var a=function(a){if(!a)a=
window.event;this.handleKeyUp(a)};gx.evt.attach(this.textbox,"keyup",a.closure(this));gx.evt.attach(this.textbox,"keydown",function(a){if(!a)a=window.event;this.handleKeyDown(a)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",a.closure(this));this.createDropDown()};this.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur<a.length-
1?this.cur+1:0;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur>0?this.cur-1:a.length-1;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.selectRange=function(a,b){if(this.textbox.createTextRange){var c=this.textbox.createTextRange();c.moveStart("character",a);c.moveEnd("character",b-this.textbox.value.length);c.select()}else this.textbox.setSelectionRange&&
this.textbox.setSelectionRange(a,b);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(a){this.cur=-1;var b=null;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,true);this.layer.innerHTML="";if(!this.IFrameControl){b=false;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");if(!this.IFrameControl){b=true;this.IFrameControl=document.createElement("IFRAME");this.IFrameControl.src="about:blank";this.IFrameControl.id="gxAutosuggestIFrame"}$(this.IFrameControl).css({zIndex:1,
display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";b&&document.body.appendChild(this.IFrameControl)}for(var c=a.length,e=0;e<c;e++){b=document.createElement("div");b.appendChild(document.createTextNode(a[e].d));b.style.width=this.textbox.offsetWidth;this.layer.appendChild(b)}this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=
this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(a){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var b=this.textbox.value.length;this.pickvalue(a);a=a.length;b<a&&this.selectRange(b,a)}};this.pickvalue=function(a,b){for(var c=this.aSuggestions.length,e=0;e<c;e++)if(this.aSuggestions[e].d==a){this.textbox.value=a;b===true&&gx.evt.fireEvent(this.textbox,
"input");gx.evt.onchange_impl(this.textbox,void 0,true);break}};this.autosuggest=function(a,b){this.aSuggestions=a;var c=this.aSuggestions.length;if(b&&this.aSuggestions!=null&&c==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&(this.aSuggestions!=null&&c>0)&&(c==1&&this.aSuggestions[0].d!=this.textbox||c>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var a=false;this.layer=gx.dom.byId("gxAutosuggestElement");
if(!this.layer){a=true;this.layer=document.createElement("div");this.layer.className="suggestions";this.layer.id="gxAutosuggestElement"}this.setupLayer();a&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(a){var a=a||window.event,b=gx.evt.source(a);if(a.type=="mousedown"){gx.evt.cancel(a,true);this.pickvalue(b.firstChild.nodeValue,
true);this.hideSuggestions();window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)}else a.type=="mouseover"?this.highlightSuggestion(b):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var a=this.textbox,b=0;a!=null&&a.tagName!="BODY";){b=b+a.offsetLeft;a=a.offsetParent}for(a=this.textbox;a!=null&&a.tagName!="BODY";){b=b-a.scrollLeft;a=a.parentNode}return b};this.getTop=function(){for(var a=this.textbox,b=0;a!=null&&a.tagName!="BODY";){b=b+a.offsetTop;a=a.offsetParent}for(a=
this.textbox;a!=null&&a.tagName!="BODY";){b=b-a.scrollTop;a=a.parentNode}return b};this.handleKeyDown=function(a){switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(a){a=a.keyCode;if(a==9)this.hideSuggestions();else if(a==8||a==46)this.requestSuggestions(this,this.provider,false);else if(a<32||a>=33&&a<46||a>=112&&a<=123){if(a===0){var a=this.textbox.value.length,b=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||
"0",10);a!==b&&this.requestSuggestions(this,this.provider,this.typeahead)}}else this.requestSuggestions(this,this.provider,this.typeahead);$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};this.init()},suggestProvider:function(c,h,e,g){this.requestSuggestions=function(a,b,d,f){var j,s=gx.ajax.gxObjectUrl(c)+"?",k="gxajaxSuggest_"+g,m=h.length;for(j=0;j<m;j++)k+=","+encodeURIComponent(gx.fn.evalCtxScope(c,h[j]));k+=","+encodeURIComponent(void 0===f?gx.fn.getControlValue_impl(e):
f);m=a.length;for(j=0;j<m;j++)k+=","+encodeURIComponent(gx.fn.evalCtxScope(c,a[j]));s+=gx.ajax.encryptParms(c,k);gx.http.doCall({method:"GET",url:s,handler:function(a,d){var f=gx.json.evalJSON(d);this.values=gx.fx.returnSuggestValues(this.VarRefresh,f[0]);b()},error:d,obj:this})}},returnSuggestValues:function(c,h){return h},addElement:function(c,h,e){if(!this.elementExists(c,h,e)){var g=h.id;!0===e&&(g+=h.types.sort().join(""));c.splice(0,0,h);c[g]=h}},elementExists:function(c,h,e){var g=h.id;!0===
e&&(g+=h.types.sort().join(""));return c[g]?!0:!1},deleteElement:function(c,h,e){var g=h;e&&(g+=e.sort().join(""));c[g]&&delete c[g];for(var g=c.length,a=0;a<g;a++){var b=c[a];if(b.id==h)if(e){if(this.matchingTypes(e,b.types)){c.splice(a,1);break}}else{c.splice(a,1);break}}return c},matchingTypes:function(c,h){for(var e=h.length,g=0;g<e;g++){for(var a=!1,b=c.length,d=0;d<b;d++)h[g].toLowerCase()==c[d].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(c,h,e,g){h=gx.dom.el(e);if(null!=
h&&"none"!==$(h).css("display"))return h;h=gx.fn.getRONode(e,!1);if(g&&null!=h&&$(h).is(":visible"))return h;h=gx.dom.el("gxHTMLWrp"+e);if(null!=h)return h;g&&(!c.id&&"A"===c.tagName)&&(c=c.parentNode);e="(^"+(g?"("+gx.fn.getRONodePrefix()+")?":"")+"v?"+e+"_(?:(?:[0-9]){4})+$)";e=RegExp(e);return null!=c&&e.test(c.id)?c:null},isUnderMouse:function(c){var h=gx.evt.mouse.x,e=gx.evt.mouse.y,g=gx.dom.position(c),a=gx.dom.dimensions(c);return h>=g.x&&h<=g.x+a.w&&e>=g.y&&e<=g.y+a.h||"DIV"==c.tagName&&(0===
a.w&&0===a.h&&c.firstChild)&&(g=gx.dom.position(c.firstChild),a=gx.dom.dimensions(c.firstChild),h>=g.x&&h<=g.x+a.w&&e>=g.y&&e<=g.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(c){return"dblclick"==c?this.dblclicks:this.generics},addEventHandler:function(c,h,e,g){e=gx.lang.emptyObject(c)?e:c.CmpContext+e;c={id:h+e,cId:e,type:h,obj:c,hdl:g};h=this.getEventHandlers(h);gx.fx.addElement(h,c,!1)},deleteEventHandlers:function(c){for(var h=[this.dblclicks,this.generics],e=h.length,
g=0;g<e;g++){for(var a=[],b=h[g],d=b.length,f=0;f<d;f++){var j=b[f];j.obj==c&&a.push(j)}d=a.length;for(f=0;f<d;f++)gx.fx.deleteElement(b,a[f].id)}},hasEventHandler:function(c,h){for(var e=gx.evt.source(h),g=this.getEventHandlers(c),a=g.length,b=!1,d=0;d<a&&!b;d++){var f=g[d],f=gx.fx.findControl(e,f.obj,f.cId,!0);null!=f&&(b=h.currentTarget===f||gx.fx.isUnderMouse(f))}return b},delayedDispatch:function(c){return gx.fx.dom.hasEventHandler("dblclick",c)},raiseEvent:function(c,h){var e=gx.evt.source(h),
g=$(e),a=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR;"dblclick"==c&&(clearTimeout(parseInt(g.attr(a),10)),g.removeAttr(a));for(var g=this.getEventHandlers(c),a=g.length,b=0;b<a;b++){var d=g[b],f=gx.fx.findControl(e,d.obj,d.cId,!0);null!=f&&gx.fx.isUnderMouse(f)&&d.hdl.call(d.obj)}},highlight:function(c,h,e){var g=gx.color.fromRGB(h[0],h[1],h[2]),a=gx.dom.getStyle(c,"backgroundColor"),b="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){c.style.backgroundColor=g.Html;setTimeout(this.end,
e)},end:function(){var d=a;b&&(d="transparent");c.style.backgroundColor=d}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(c,h,e){e&&(gx.evt.setEventRow(c,this.dragCtrl),this.obj=e.call(c,this.dragCtrl),this.obj.gxDragTypes=h)},drop:function(c,h,e){e&&e.call(h,c,this.dragCtrl,this.obj)},noDrop:function(){var c=this.noDropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"NoAcceptDrag")},
out:function(){var c=this.dropCtrl;c&&c.gxClassName&&(c.className=c.gxClassName);this.dropCtrl=null;c=this.noDropCtrl;null!=c&&c.gxClassName&&(c.className=c.gxClassName);this.noDropCtrl=null},over:function(){var c=this.dropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var c=this.clonCtrl;null!=c&&((null==this.toHdl&&(c.dropLeft=parseFloat(c.style.left||
"0"),c.dropTop=parseFloat(c.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(c=this.nextCoords(),this.moveDragControl(c.X,c.Y)))},nextCoords:function(){var c=this.clonCtrl,h=parseFloat(c.style.left||"0"),e=parseFloat(c.style.top||"0"),g=0,a=0;h>=e?(g=h-1,a=c.dropTop-(c.dropTop-c.originalTop)*(c.dropLeft-g)/(c.dropLeft-c.originalLeft)):(a=e-1,g=c.dropLeft-(c.dropTop-a)*(c.dropLeft-c.originalLeft)/
(c.dropTop-c.originalTop));g<=c.originalLeft&&(g=c.originalLeft);a<=c.originalTop&&(a=c.originalTop);return{X:g,Y:a}},moveControl:function(c){if(null==this.clonCtrl){var h=document.createElement("DIV");h.style.position="absolute";c.gxDndClassName&&(h.className=c.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(h,!0);h.innerHTML=this.dragInfo();gx.fn.setOpacity(50,h);document.body.appendChild(h);h.originalLeft=gx.evt.mouse.x-10;h.originalTop=gx.evt.mouse.y-10;h.diffLeft=10;h.diffTop=10;
this.clonCtrl=h}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var c=this.clonCtrl;if(null==c)return!0;var h=parseFloat(c.style.left||"0"),e=parseFloat(c.style.top||"0")-c.originalTop;return 0>=h-c.originalLeft&&0>=e?!0:!1},moveDragControl:function(c,h){try{var e=this.clonCtrl;null!=e&&(e.style.left=c-e.diffLeft+"px",e.style.top=h-e.diffTop+"px")}catch(g){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var c="",h="",e;for(e in this.obj){if("gxDragTypes"!=
e){var g=[c];if("function"==typeof this.obj[e])continue;h+=e+": "+this.obj[e]+"</br>";c=g[0]}if(5<=c){h+="...";break}c++}return h}return""},deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var h=[],e,g=this.sources.length;for(e=0;e<g;e++){var a=this.sources[e];a.obj!=c&&h.push(a)}this.sources=h;h=[];g=this.targets.length;for(e=0;e<g;e++)a=this.targets[e],a.obj!=c&&h.push(a);this.targets=h},addSource:function(c,h,e,g,a){gx.thread.Mutex(this,
this.addSourceSync,[c,h,e,g,a])},addSourceSync:function(c,h,e,g,a){h=gx.lang.emptyObject(c)?h:c.CmpContext+h;gx.fx.addElement(this.sources,{id:h,cssClass:e,types:g,obj:c,hdl:a},!1)},addTarget:function(c,h,e,g,a){gx.thread.Mutex(this,this.addTargetSync,[c,h,e,g,a])},addTargetSync:function(c,h,e,g,a){h=gx.lang.emptyObject(c)?h:c.CmpContext+h;gx.fx.addElement(this.targets,{id:h,cssClass:e,types:g,obj:c,hdl:a},!0)},deleteSource:function(c){gx.thread.Mutex(this,this.deleteSourceSync,[c])},deleteSourceSync:function(c){this.sources=
gx.fx.deleteElement(this.sources,c)},getSource:function(c){for(var c=gx.evt.source(c),h=this.sources.length,e=0;e<h;e++){var g=this.sources[e],a=this.dragCtrl=gx.fx.findControl(c,g.obj,g.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=g.cssClass,gx.fx.isUnderMouse(a)))return g}return this.obj=this.dragCtrl=null},getTarget:function(c,h){for(var e=gx.evt.source(c),g=this.targets.length,a=0;a<g;a++){var b=this.targets[a],d=gx.fx.findControl(e,b.obj,b.id);if(null!=d&&(d.gxClassName=d.className,
d.gxDndClassName=b.cssClass,gx.fx.isUnderMouse(d))){if(gx.fx.matchingTypes(h,b.types))return this.noDropCtrl=null,this.dropCtrl=d,b;this.out();this.noDropCtrl=d;this.noDrop();return null}}this.out();return null}},notifications:{queuedEvents:[],initialize:function(c){c.notifications||(c.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",c,gx.fx.notifications.notify.closure(c),{single:!1,doNotDelete:c.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",c,gx.fx.notifications.fireQueuedEvents.closure(c),
{single:!1,doNotDelete:c.IsMasterPage}));if(!this.webSocket){c.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.');var c=gx.fn.getHidden("GX_WEBSOCKET_PORT"),h=gx.basePath&&0<gx.basePath.length?"/":"";this.webSocket=new gx.webSocket({port:c,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:"https:"===location.protocol?"wss://":"ws://",host:c?location.hostname+":"+c+"/":location.host+"/",resourceUrl:h+(gx.gen.isDotNet()?
"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:"notifications"})}},deinit:function(){gx.fx.notifications.queuedEvents=[]},addTracker:function(c,h,e,g,a,b){gx.fx.notifications.initialize(c);c.notifications[h||""]={gxO:c,handler:a,eventName:e,type:g,noWait:b}},notify:function(c){var c=gx.json.evalJSON(c),h=this.notifications[c.GroupName||""];h&&(gx.fx.notifications.queuedEvents.push({notifObj:h,data:c}),(h.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var c=
0;c<gx.fx.notifications.queuedEvents.length;c++){var h=gx.fx.notifications.queuedEvents[c];if(!h.executed){gx.fx.notifications.queuedEvents.splice(c--,1);var e=h.notifObj.gxO;h.executed=!0;if(gx.lang.emptyObject(h.data.Object)||h.data.Object.toUpperCase()==e.ServerClass.toUpperCase()){var g=h.notifObj.type,a=h.notifObj.eventName;if(a){var b=e.isServerEvent(a),d={};d[g[0][0]]=h.data;e.setEventParameters(h.notifObj.type,d);gx.evt.dispatcher.dispatch(e.getServerEventName(a),e,0,0,b,void 0,void 0,!0)}else h.notifObj.handler(h.data)}}}}},
ctx:{setters:[],trackers:[],deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var h,e=[],g=this.setters.length;for(h=0;h<g;h++){var a=this.setters[h];a.obj!=c&&e.push(a)}this.setters=e;e=[];g=this.trackers.length;for(h=0;h<g;h++)a=this.trackers[h],a.obj!=c&&e.push(a);this.trackers=e},addSetter:function(c,h,e,g,a){gx.thread.Mutex(this,this.addSetterSync,[c,h,e,g,a])},addSetterSync:function(c,h,e,g,a){h=gx.lang.emptyObject(c)?h:c.CmpContext+
h;gx.fx.addElement(this.setters,{id:h,cssClass:e,types:g,obj:c,hdl:a},!1)},addTracker:function(c,h,e){gx.thread.Mutex(this,this.addTrackerSync,[c,h,e])},addTrackerSync:function(c,h,e){gx.fx.addElement(this.trackers,{id:c.CmpContext+c.IsMasterPage.toString(),cssClass:"",types:h,obj:c,hdl:e},!0)},deleteSetter:function(c){gx.thread.Mutex(this,this.deleteSetterSync,[c])},deleteSetterSync:function(c){this.setters=gx.fx.deleteElement(this.setters,c)},notify:function(c,h,e){gx.thread.Mutex(this,this.notifySync,
[c,h,e])},notifySync:function(c,h,e){if(c&&c.forcedFocus)c.forcedFocus=!1;else{var g,a=gx.lang.emptyObject,b=function(a,b){var d=gx.O;gx.setGxO(a);b();gx.setGxO(d)},d=null;if(a(h)||a(e)){var f=this.setters.length;for(g=0;g<f;g++){var j=this.setters[g];if(a(c)){if(d=gx.fx.findControl(null,j.obj,j.id),null!=d&&a(d.onfocus)&&gx.fx.isUnderMouse(d)){b.apply(this,[j.obj,function(){gx.evt.setEventRow(j.obj,d);h=j.types;e=j.hdl.call(j.obj,d)}]);break}}else if(c.id==j.id){b.apply(this,[j.obj,function(){d=
c;gx.evt.setEventRow(j.obj,d);h=j.types;e=j.hdl.call(j.obj,d)}]);break}}}if(!a(h)&&(e||""===e)){a=this.trackers.length;for(g=0;g<a;g++){var s=this.trackers[g];gx.fx.matchingTypes(h,s.types)&&b.apply(this,[s.obj,function(){s.hdl.call(s.obj,null,d,e)}])}}}}}};
gx.date=function(){var c=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,h=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,e=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,g=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00(\.000)?)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==
a.getDay()&&this.getMonth()==a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},isoString:function(a){return a.toISOString()},jsonNullFormat:{Default:0,YearOne:1},gxdate:function(b,d){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var b=this.HasTimePart,d=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var c=this.getStringWithFmt("Y4MD")+" "+(b?this.getTimeString(!0,!0,!0,0<this.Value.getMilliseconds()):
"00:00:00");this.TimeFmt=a;this.HasTimePart=b;this.HasDatePart=d;return c};this.mapCTODFormatToPattern=function(a){return"ANSI"==a?"Y4MD":a};this.emptyDateString=function(a){return-1==a.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(b){b=this.mapCTODFormatToPattern(b);if(0===this.Value-a)return this.emptyDateString(b);var d=b,c,e,g,h=this.FormatPos(b);this.JsonNullFormat===gx.date.jsonNullFormat.YearOne?
(e=c="01",g="0001"):(c=gx.text.padl(this.Value.getDate().toString(),2,"0"),e=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),g=gx.text.padl(this.Value.getFullYear().toString(),4,"0"));d=d.replace("D",c+(3>h.DPos?"/":""));d=d.replace("M",e+(3>h.MPos?"/":""));-1==b.indexOf("Y4")?(g=g.slice(2,4),d=d.replace("Y",g+(3>h.YPos?"/":""))):d=d.replace("Y4",g+(3>h.YPos?"/":""));return d};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toISOString=
function(){return this.Value.toISOString()};this.toString=function(){var a=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+a};this.gxdtoc=function(a,b){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",b)};this.getUrlVal=function(){var a,b,d;if(gx.date.isNullDate(this))return"";this.HasDatePart?(a=gx.text.padl(this.Value.getDate().toString(),2,"0"),b=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),d=gx.text.padl(this.Value.getFullYear().toString(),
4,"0")):(b=a="01",d="0001");var c=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",e=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",g=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",h=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return d+b+a+c+e+g+h};this.getTimeString=function(a,b,d,c){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var e="";d&&(e+="  ");a&&(e+="   ");b&&(e+="   ");c&&
(e+="    ");return e}var e="",g=this.Value.getHours(),d=d||!0;12==this.TimeFmt&&12<=g?(12<g&&(g-=12),e=" PM"):12==this.TimeFmt&&(e=" AM");var h=this.HasTimePart?gx.text.padl(g.toString(),2,"0"):"",n=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",o=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",l=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";0===g&&""!==e&&(h="12");g="";d&&(g=h);a&&(g=g+":"+n);b&&(g=g+":"+o);
c&&(g=g+"."+l);return g+e};this.FormatPos=function(a){var b,d,c;"ANSI"==a?(b=1,d=2,a=3):(c=a.indexOf("Y4"),b=-1==c?a.indexOf("Y")+1:c+1,d=a.indexOf("M"),0!==c&&d++,a=a.indexOf("D"),0!==c&&a++);return{YPos:b,MPos:d,DPos:a}};this.assign_date=function(b){b instanceof gx.date.gxdate?(this.Value=b.Value,this.HasTimePart=b.HasTimePart,this.HasDatePart=b.HasDatePart):this.Value=void 0===b?a:b};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==
gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=this.HasDatePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=
this.HasDatePart;return a};this.assign_string=function(a,b,d,e){var g=c,q=g.exec(a),p=0;if(null!=q){var n=a.indexOf(q[0]);0<n&&"."==gx.text.substring(a,n,1)&&(q=null)}if(null==q)-1!=a.indexOf("  /  /  ")&&(d=!0);else for(var n=q.length,o=1;o<n;o++)gx.lang.emptyObject(q[o])||p++;var l=this.FormatPos(b),t=o=n=b=0,u=0,w=0,r=0;try{this.HasDatePart=!0;if(6==l.DPos+l.MPos+l.YPos&&null!=q&&3<=p){null!=q[l.YPos]&&(b=parseInt(q[l.YPos],10));if(isNaN(b))throw"InvalidDate";b<this.FYearOfCentury?b+=2E3:100>b?
b+=1900:1E3>b&&(b+=1E3);null!=q[l.MPos]&&(n=parseInt(q[l.MPos],10)-1);if(isNaN(n)||0>n||11<n)throw"InvalidDate";null!=q[l.DPos]&&(o=parseInt(q[l.DPos],10));if(isNaN(o)||0>o||o>gx.date.maxDays(n,b))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;l=0;null==q?(g=h,q=g.exec(a),null!=q&&(l=1,this.HasTimePart=!0)):3<p&&(l=4,this.HasTimePart=!0);if(this.HasTimePart&&!d){null!=q[l]&&(t=parseInt(q[l],10));if(gx.lang.emptyObject(q[l])||isNaN(t))throw this.HasTimePart=!1,"InvalidHour";null!=
q[l+1]&&(u=parseInt(q[l+1],10));isNaN(u)&&(u=0);null!=q[l+2]&&(w=parseInt(q[l+2],10));isNaN(w)&&(w=0);null!=q[l+3]&&(r=parseInt(q[l+3],10));isNaN(r)&&(r=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),t,u,w,r))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&12>t)t+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==t)t=0}}catch(v){if(e)throw v;"InvalidDate"==v&&(r=w=u=t=o=n=b=0);"InvalidHour"==v&&(r=w=u=t=0)}this.Value=new Date(b,n,o,t,u,w,r);if(0<b+n+o+t+u+w+r&&(!this.HasTimePart||
d)&&this.Value.getDate()!=o)this.Value=new Date(Date.UTC(b,n,o,t+12,u,w,r))};this.validTime=function(a,b,d,c,e){return a&&12<b||!a&&(24<b||24==b&&0<d+c)?!1:59>=d||59>=c||999>=e};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};this.compare_date=function(a){if(!a)return null;a=a instanceof gx.date.gxdate?a.Value:a;return this.HasTimePart?this.Value-a:this.Value.getFullYear()>
a.getFullYear()?1:this.Value.getFullYear()<a.getFullYear()?-1:this.Value.getMonth()>a.getMonth()?1:this.Value.getMonth()<a.getMonth()?-1:this.Value.getDate()>a.getDate()?1:this.Value.getDate()<a.getDate()?-1:0};this.JsonNullFormat=gx.date.jsonNullFormat.Default;this.TimeFmt=gx.timeFormat||12;this.SFmt=d||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof b?this.assign_string(b,this.SFmt):this.assign_date(b)},isANSIDateTime:function(a){return"string"==typeof a&&c.test(a)?!0:
!1},isANSIDate:function(a){return"string"==typeof a&&e.test(a)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0);if(a instanceof Date){var d=new this.gxdate("");
d.assign_date(a);return d}return new this.gxdate("")},clonedDate:function(a,d){var f=new this.gxdate("");f.assign_date(d);a instanceof this.gxdate&&(f.SFmt=a.SFmt,f.HasTimePart=a.HasTimePart,f.HasDatePart=a.HasDatePart);return f},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;a.HasDatePart=!0;return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,d){return new this.gxdate(a,d)},ctod:function(a,
d){var f=new this.gxdate(a,d);f.Value.setHours(0,0,0,0);return f},ymdtod:function(a,d,f){a=new this.gxdate(a+"/"+d+"/"+f,"ANSI");a.Value.setHours(0,0,0,0);return a},ymdhmstot:function(a,d,f,c,e,g){return new this.gxdate(a+"/"+d+"/"+f+" "+c+":"+e+":"+g,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*a},day:function(a){return(new this.gxdate(a)).Value.getDate()},
month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},addDays:function(a,d){return this.addMill(a,this.dayToMillisec(d))},addSec:function(a,d){return this.addMill(a,this.secToMillisec(d))},addMill:function(a,d){var f=this.dateObject(a).clone(),c=new this.gxdate;c.assign_date(f);var e=f.getMilliseconds();f.setMilliseconds(e+d);return c.getString(this.isANSIDate(a)?"Y4MD":-1==gx.dateFormat.indexOf("Y4")?gx.dateFormat.replace("Y",
"Y4"):gx.dateFormat)},secDiff:function(a,d){return this.millisecToSec(this.milliDiff(a,d))},daysDiff:function(a,d){return this.millisecToDay(this.milliDiff(a,d))},milliDiff:function(a,d){var f=this.gxdateObject(a),c=this.gxdateObject(d),a=f.Value.valueOf(),d=c.Value.valueOf();return a-d},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?
new this.gxdate(a):a},urlDate:function(a,d){var f=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,d);return!this.isNullDate(f)?f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,d){var f=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,d);return!f.HasDatePart?"00010101"+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),
2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0"):!this.isNullDate(f)?f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0")+(0===f.Value.getMilliseconds()?"":gx.text.padl(f.Value.getMilliseconds().toString(),3,"0")):""},isNullDate:function(a){a instanceof this.gxdate&&
(a=a.Value);var d=this.nullDate();return d.getFullYear()!=a.getFullYear()||d.getMonth()!=a.getMonth()||d.getDate()!=a.getDate()||d.getHours()!=a.getHours()||d.getMinutes()!=a.getMinutes()||d.getSeconds()!=a.getSeconds()||d.getMilliseconds()!=a.getMilliseconds()?!1:!0},dtoc:function(a,d,f){return(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).gxdtoc(d,f)},dttoc:function(a,d,f){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),c=gx.dateFormat,e="";0<d&&(8<d&&-1==c.indexOf("Y4")&&(c=
c.replace("Y","Y4")),e=a.getStringWithFmt(c)+" ");return 0<f?e+a.getTimeString(3<f,8<=f,1<f,12<=f):e},nulldate_toc:function(a,d){var f=new this.gxdate("");f.HasTimePart=!0;f.HasDatePart=!0;var c=gx.dateFormat,e="";0<a&&(8<a&&-1==c.indexOf("Y4")&&(c=c.replace("Y","Y4")),e=f.getStringWithFmt(c)+" ");return 0<d&&!gx.blankWhenEmpty?e+f.getTimeString(3<d,8<=d,1<d,12<=d):e},addyr:function(a,d){return this.addmth(a,12*d)},addmth:function(a,d){var f=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),
c=a.getDate();a.setDate(1);a.setMonth(a.getMonth()+1*d);a.setDate(Math.min(c,this.maxDays(a.getMonth(),a.getFullYear())));return this.clonedDate(f,a)},dtadd:function(a,d){var f=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),c=a.getMilliseconds();a.setMilliseconds(c+1E3*d);return this.clonedDate(f,a)},dtdiff:function(a,d){a=this.dateObject(a);d=this.dateObject(d);return(a-d)/1E3},maxDays:function(a,d){return[31,this.isLeapYear(d)?29:28,31,30,31,30,31,31,30,31,30,31][a]},eom:function(a){var d=
this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),f=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(f);return this.clonedDate(d,a)},dow:function(a){a=this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,d){var f,c,e;c=this.dateObject(a);f=this.dateObject(d);e=this.nullDate();if(c.equalsNoTime(e)||f.equalsNoTime(e)||c.equalsNoTime(f))return 0;if(f>=c){e=36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+1E3*f.getUTCSeconds()-(36E5*c.getUTCHours()+6E4*
c.getUTCMinutes()+1E3*c.getUTCSeconds());if(f.getUTCDate()>c.getUTCDate()||f.getUTCDate()==c.getUTCDate()&&0<=e)e=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()));else{e=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()-1,c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()));f=f.getUTCMonth()-1;for(-1==f&&(f=11);e.getUTCMonth()!=f;)e.setUTCDate(e.getUTCDate()-1)}return c=e.getUTCMonth()>=c.getUTCMonth()?e.getUTCFullYear()-
c.getUTCFullYear():e.getUTCFullYear()-1-c.getUTCFullYear()}return 0},valid_date:function(a,d,f,c,e,h,m,q){var p=m||!1,n=!1,h=a.value,o="",m=f,l="",l="^[ ]*(",t=0<d?"GXM_invaliddate":"GXM_invalidtime",o=gx.num.replaceFullWidthNumerals(h),o=o.split("\n")[0],f="YMD"==f?1:0,e=12==e?1:0;if(g.test(o))n=!0,h=o="";else if(0<d&&(4===o.length||5===o.length&&"/"===o[2]))var u=(new Date).getFullYear().toString().substring(10===d?0:2),o=1===f?u+o:o+u;l=0<d?8==d?l+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":
0===f?p?l+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":l+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":p?l+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":l+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":l+"( )?( )?( )?";0<c&&(l+="(",0<d&&(l+="[ ]*"),l+="([0-9]{1,2})",l=2<c?l+"(:?([0-9]{1,2}))?":l+"(( )?)?",l=5<c?l+"(:?([0-9]{1,2}))?":l+"(( )?)?",l=8<c?l+"(\\.?([0-9]{1,3}))?":l+"(( )?)?",l=(1==e?l+"[ ]*(a|am|p|pm)?":l+"(( )?)?")+")?");f=RegExp(l+")?[ ]*$","i");if(f.test(o)){f=o.match(f);
0<d?(l="/",0<o.indexOf("-")&&(l="-"),f[2]?l=f[2]+l+f[3]+l+f[4]:(l=1==q?"        ":"  "+l+"  "+l+"  ",10==d&&(l+="  "))):l="";0<c&&(0<d&&(l+=" "),1==q&&!f[6]&&!f[8]&&!f[10]&&!f[12]?l+="        ":(f[6]?l+=f[6]:n?(q=o.match(g),l=q[4]?l+q[4]:l+(1==e?"12":"00")):l+=1==e?"12":"00",2<c&&(l=f[8]?l+":"+f[8]:l+":00"),5<c&&(l=f[10]?l+":"+f[10]:l+":00"),8<c&&(l=f[12]?l+"."+f[12]:l+".000"),1==e&&(l="p"==(f[13]?f[13].substr(0,1):"a").toLowerCase()?l+" PM":l+" AM")));e=new this.gxdate("",m);try{e.assign_string(l,
m,0>=c,!0),""!==gx.text.trim(l)&&(l=this.formatDateTime(c,d,m,e))}catch(w){return gx.fn.alert(a,gx.getMessage(t)),gx.csv.setFormatError(a),!1}if(l!=h){a.value=l;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(d=gx.O.getValidStructFld(a))&&gx.O.refreshDependantGrids(d)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(t));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,d,f,c){var e="";0<a&&c.HasTimePart&&(e=c.getTimeString(4<=a,8<=a,void 0,12<=a));a=f;8<d&&
-1==a.indexOf("Y4")&&(a=a.replace("Y","Y4"));return 0<d?c.getStringWithFmt(a)+(c.HasTimePart?" "+e:""):c.HasTimePart?e:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(c){this.capacity=c||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var c=arguments[0],h=arguments.length,e=1;e<h;e++)c=c.replace("%"+e,gx.text.rtrim(arguments[e].toString()));return c},formatString:function(c,h,e,g){if(e)return gx.text.padl("",
h,"*");if(!gx.lang.emptyObject(g)&&this.startsWith(g,"@")&&0<g.indexOf("!")){h="";e=this.padr("",!c?0:c.length,"!");g=this.replaceAll(e,"!"," ");if(c)for(var a=0,b=0,d;a<g.length&&b<c.length;)d=c[b],this.isSeparator(e[a])?(d==e[a]?(b++,h+=d):h+=g[a],a++):(h+=this.getCaret(e,d,a,h),a++,b++);else h=g;return gx.text.rtrim(h)}return c},getCaret:function(c,h,e,g){switch(c[e]){case "9":if(isNaN(h))break;else return h;case "X":return h;case "A":case "M":case "!":return h.toUpperCase();case "Z":if("1"<=h&&
"9">=h)return h;if("0"==h){c=!0;for(h=0;h<e;h++)if(" "!=g[h]){c=!1;break}if(!c)return"0"}}return" "},isSeparator:function(c){return"9"!=c&&"X"!=c&&"!"!=c&&"Z"!=c&&"A"!=c&&"M"!=c},replaceAll:function(c,h,e){return-1!=c.toString().indexOf(h)?(""+c).split(h).join(e):c},charReplace:function(c,h,e){for(var g="",a=c.length,b=0;b<a;b++){for(var d=!1,f=h.length,j=0;j<f;j++)if(c.charAt(b)==h[j]&&j<e.length){g+=e[j];d=!0;break}!1===d&&(g+=c.charAt(b))}return g},length:function(c){return c.length},upper:function(c){return c.toUpperCase()},
lower:function(c){return c.toLowerCase()},padr:function(c,h,e){var g=h-c.length;if(1>g)return c.substring(0,h);for(h=0;h<g;h++)c+=e;return c},padl:function(c,h,e){var g=h-c.length;if(1>g)return c.substring(0,h);for(var h="",a=0;a<g;a++)h+=e;return h+c},ltrimstr:function(c,h,e){return this.ltrim(gx.num.str(c,h,e))},ltrim:function(c){return c.toString().replace(/^ */,"")},rtrim:function(c){return c.toString().replace(/ *$/,"")},trim:function(c){return this.rtrim(this.ltrim(c))},chr:function(c){return String.fromCharCode(c)},
like:function(c,h){if(null===h)return!1;h=h.replace(RegExp("([\\.\\\\\\+\\*\\?\\[\\^\\]\\$\\(\\)\\{\\}\\=\\!\\<\\>\\|\\:\\-])","g"),"\\$1");return RegExp(h.replace(/%/g,".*").replace(/_/g,".")).test(c)},compare:function(c,h){return this.rtrim(c).localeCompare(this.rtrim(h))},concat:function(c,h,e){return this.rtrim(c)+e+h},space:function(c){for(var h="",e=0;e<c;e++)h+=" ";return h},substring:function(c,h,e){return 0>e?c.toString().substring(h-1):c.toString().substring(h-1,h-1+e)},tostring:function(c){return c.toString()},
toformattedstring:function(c){return c.toString().replace(".",gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(c,h){var e=gx.text.escapeMapping[h];if(e)return e;e=h.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)},escapeString:function(c){return this.escapeRegex.start.test(c)?'"'+c.replace(this.escapeRegex.end,
this.escapeFn)+'"':'"'+c+'"'},indexOf:function(c,h,e){if(e>c.length)return 0;0>=e&&(e=1);return c.indexOf(h,e-1)+1},lastIndexOf:function(c,h,e){if(e>c.length)return 0;0>=e&&(e=c.length);return c.lastIndexOf(h,e-1)+1},endsWith:function(c,h){return-1!==c.indexOf(h,c.length-h.length)},startsWith:function(c,h){return 1==this.indexOf(c,h)},contains:function(c,h){return 0<this.indexOf(c,h)},charAt:function(c,h){return c.charAt(h-1)}};
gx.num=function(){var c=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,h=function(c,g,a,b){var d=gx.lang.instanceOf,f="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,j=gx.thousandSeparator,h=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,j,h));"string"==typeof b&&(b=gx.num.parseFloat(b,j,h));return d(a,f)&&d(b,Number)?a[c](new f(b.toString())).toString():d(a,Number)&&d(b,f)?(new f(a.toString()))[c](b).toString():d(a,Number)&&d(b,Number)||"undefined"==typeof gx.num.dec?
g(a,b):a[c](b)};return{str:function(c,g,a){if("string"===typeof c)return c;"undefined"==typeof g&&(g=10);if("undefined"==typeof a||g-1<=a)a=0;c=c.toFixed(a);return c.length<=g?gx.text.padl(c,g," "):gx.text.padr("",g,"*")},compare:function(c,g){if("number"===typeof c&&"number"===typeof g)return c>g?1:c===g?0:-1;"number"===typeof c&&(c=new gx.num.dec.bigDecimal(c.toString()));"number"===typeof g&&(g=new gx.num.dec.bigDecimal(g.toString()));return gx.lang.instanceOf(c,gx.num.dec.bigDecimal)&&gx.lang.instanceOf(g,
gx.num.dec.bigDecimal)?c.compareTo(g):c-g},maxNumericPrecision:function(){return 15},extractValue:function(c,g){g=gx.num.replaceFullWidthNumerals(g);if(gx.lang.instanceOf(g,Number)||this.overflowNumber(g))return g;var a,b=void 0===g?"":g;if(c){a="+"==c.charAt(0)||"-"==c.charAt(0)?c.replace(/[\+\-\d,*\.*Z*\s]+/,""):c.replace(/[\d,*\.*Z*\s]+/g,"");c.lastIndexOf(".")!=c.indexOf(".")&&(b=gx.text.replaceAll(b,".",""));for(var d=0;d<a.length;d++)b=b.replace(a.charAt(d),"")}return gx.text.trim(b)},formatNumber:function(c,
g,a,b,d,f,j){if(!a||""===c&&"Blank"===j)return c?c.toString():"";var c=gx.lang.emptyObject(c)?"0":c,b=-1!=a.indexOf(",")?gx.thousandSeparator:"",j=gx.decimalPoint,h=!1,k=gx.numericLenDec(a),m=k.Integers,g=k.Decimals;"string"==typeof c&&b&&(c=gx.text.replaceAll(c,b,""));"string"==typeof c&&(c=c.replace(j,"."));if(gx.num.overflowNumber(c))return c;try{c=!("undefined"!=typeof gx.num.dec&&c instanceof gx.num.dec.bigDecimal)&&0===g?gx.num.trunc(c,0).toString():gx.num.setScale(c,g,j)}catch(q){c=c.toString()}k=
c.split(".");k[0]||(k[0]="0");k[1]||(k[1]="");if(f){if(k[1].length>g&&k[1].replace(/0*$/,"").length>g)throw"InvalidNumber";if(d&&"-"==k[0].charAt(0)&&k[0].replace(/0*/,"").length>m||!d&&"-"==k[0].charAt(0)||k[0].replace(/[+]?0*/,"").length>m)throw"InvalidNumber";}m=k[0].substring(0,m);0>c&&(d=!0);if(k[1].length<g){for(var p=k[1],f=k[1].length+1;f<=g;f++)p+="0";k[1]=p}p="";d&&("-"==m.charAt(0)?(p="-",m=m.substring(1)):"+"==a.charAt(0)&&(0!==Number(c)&&(p="+"),"+"==m.charAt(0)&&(m=m.substring(1))));
if(b&&3<m.length){d=m;m="";for(c=3;c<d.length;c+=3)f=d.slice(d.length-c,d.length-c+3),m=b+f+m+"";c=d.substr(0,0===d.length%3?3:d.length%3);m=c+m}j=!k[1]?"":j;0<g?(c=a.split("."),c[1]==gx.text.padr("",g,"Z")&&(h=!0)):(c=Array(a),0<c.length&&0===gx.text.replaceAll(gx.text.replaceAll(c[0],",",""),"Z","").length&&(h=!0));g=0;a="";if(1<c.length){d=c[1];for(f=0;f<d.length;f++){var n=d.charAt(f);"9"==n||"Z"==n?k[1].length>g?(a+=k[1].charAt(g),g++):a+="0":"."!=n&&","!=n&&(a+=n)}}k="";c=c[0];g=m.length-1;
for(f=c.length-1;0<=f;f--)d=c.charAt(f),"9"==d||"Z"==d?0<=g?("Z"==d&&0===Number(m.substring(0,g+1))||(k=m.charAt(g)+k),g--):k=("9"==d?"0":"")+k:"Z"!=d&&","!=d&&"+"!=d?k=d+k:","==d&&m.charAt(g)==b&&(k=m.charAt(g)+k,g--);return h&&("0"==k||""===k)&&0===a.replace(/0+$/,"").length?"":p+k+(!a?"":j+a)},add:function(c,g){return h("add",function(a,b){return a+b},c,g)},subtract:function(c,g){return h("substract",function(a,b){return a-b},c,g)},multiply:function(c,g){return h("multiply",function(a,b){return a*
b},c,g)},divide:function(c,g){return h("divide",function(a,b){return a/b},c,g)},negate:function(c){return gx.lang.instanceOf(c,Number)||"undefined"==typeof gx.num.dec?-c:c.negate()},pow:function(c,g){return h("pow",function(a,b){return Math.pow(a,b)},c,g)},mod:function(c,g){return h("remainder",function(a,b){return a%b},c,g)},setScale:function(c,g){if(gx.lang.instanceOf(c,Number))return c.toFixed(g);"string"==typeof c&&(c=gx.text.trim(c));if(c.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===
c.length&&0===g)return"0";var a=c.split("."),b;a[1]||(a[1]="");if(a[1].length<g){var d=a[1];for(b=a[1].length+1;b<=g;b++)d+="0";a[1]=d;return a[0]+(""===a[1]?"":".")+a[1]}return Number(parseFloat(c)).toFixed(g)}return(new gx.num.dec.bigDecimal(c)).setScale(g,gx.num.dec.ROUND_UP).toString()},parseFloat:function(c,g,a){if(gx.lang.instanceOf(c,Number)||this.overflowNumber(c))return c;c=this.toInvariant(c,g,a);return c.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(c):
parseFloat(c)},toInvariant:function(c,g,a){return"number"==typeof c||"undefined"!=typeof gx.num.dec&&c instanceof gx.num.dec.bigDecimal?c:gx.text.replaceAll(c,g,"").replace(a,".")},parseInt:function(c,g,a){if("number"==typeof c)return c;var b=c,b=gx.text.replaceAll(c,a,"");return parseInt(b,g)},overflowNumber:function(c){return/\*(\**)/.test(c)},urlDecimal:function(c,g,a){return"undefined"!=typeof c?(c="undefined"!=typeof c.value?c.value:c,c=this.parseFloat(c,g,a),c.toString()):""},random:function(){return Math.random()},
intval:function(c){var g=0,c="undefined"!=typeof c?c.toString():"",g=c.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(c,0):(new gx.num.dec.bigDecimal(c)).setScale(0,gx.num.dec.ROUND_UP);isNaN(g)&&(g=0);return g},val:function(c){c=gx.text.trim(c).replace(",",".");c=this.parseFloat(c);isNaN(c)&&(c=0);return c},trunc:function(c,g){var a=c,c=c.toString(),b=c.indexOf(".");if(-1!=b){a=c.substring(0,b);if(0===g)return Number(a);b=c.substring(b+1,b+1+g);a=gx.num.parseFloat(a+
"."+b);isNaN(a)&&(a=0)}return a},round:function(c,g){return 0<=g?parseFloat(gx.num.decimalAdjust("round",c,-g).toFixed(g)):gx.num.roundNeg(c,g)},decimalAdjust:function(c,g,a){if("undefined"===typeof a||0===+a)return Math[c](g);g=+g;a=+a;if(isNaN(g)||!("number"===typeof a&&0===a%1))return NaN;g=g.toString().split("e");g=Math[c](+(g[0]+"e"+(g[1]?+g[1]-a:-a)));g=g.toString().split("e");return+(g[0]+"e"+(g[1]?+g[1]+a:a))},roundNeg:function(c,g){var c=c.toString(),a=c.indexOf("."),b="",d="",d=0,b="."+
"0000000000000000000000".substring(1,parseInt(g,0)+1)+"5",d=parseFloat(b);-1==a?(d="0000000000000000000000",b=""+c):0===a?(b="0",d=0+parseFloat(c)+parseFloat(d),c=d+"0000000000000000000000",d=""+c.substring(1,c.length)):(d=parseFloat(c)+d,b=d.toString().substring(0,a),d=""+(""+d+"0000000000000000000000").substring(a+1,a+1+parseInt(g,0)));d=d.substring(0,parseInt(g,0));a=parseFloat(b+"."+d);isNaN(a)&&(a=0);return a},normalize_decimal_sep:function(c,g,a,b){var d=b.lastIndexOf(a);0<=c.indexOf(".")&&
","==a&&-1==d&&b.lastIndexOf(".")==b.indexOf(".")?b=b.replace(".",a):-1==c.indexOf(g)&&("."==a&&-1==d&&b.lastIndexOf(",")==b.indexOf(","))&&(b=b.replace(",",a));return b},truncate:function(c,g,a){var g=c.lastIndexOf(g),b=c;-1!=g&&(b=c.slice(0,g+parseInt(a,10)+(0<a?1:0)));return b},valid_decimal:function(c,g,a,b){var d=c.value,f=!0,j=gx.O.getValidStructFld(c),h=gx.rtPicture(j,c),b=h?gx.numericLenDec(h).Decimals:b,d=this.normalize_decimal_sep(h,g,a,d);gx.lang.emptyObject(j)||(d=gx.num.extractValue(h,
d));var k=RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+g+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(d)if(k.test(d)){b=gx.num.truncate(d,a,b);try{gx.lang.emptyObject(j)||(b=gx.num.formatNumber(b,j.dec,h,j.len,j.sign,!0,j.emptyAsNull)),"."!=a&&"SELECT"==c.tagName&&(b=gx.num.toInvariant(b,g,a))}catch(m){f=!1}if(f&&b!=gx.text.trim(c.value)&&(c.value=b,gx.util.browser.isIEStrict()||-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else f=!1;else f=!0;f?gx.csv.setFormatError(c,!1):(gx.csv.setFormatError(c),
gx.fn.alert(c,gx.getMessage("GXM_badnum")))},valid_integer:function(c,g){var a,b,d,f=gx.O.getValidStructFld(c),j=gx.lang.emptyObject(f);b=c.value;j||(b=gx.num.extractValue(gx.rtPicture(f,c),b));a=!j&&-1!=gx.rtPicture(f,c).indexOf(",")?RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+g+"[0-9]{3})*[ ]*$"):/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/;d=!0;if(b)if(a.test(b)){try{j||(b=gx.num.formatNumber(b,f.dec,gx.rtPicture(f,c),f.len,f.sign,!0,f.emptyAsNull))}catch(h){d=!1}if(b!=gx.text.trim(c.value)&&(c.value=
b,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else d=!1;else d="number"===c.type&&"undefined"!==typeof c.validity?c.validity.valid:!0;d?gx.csv.setFormatError(c,!1):(gx.csv.setFormatError(c),gx.fn.alert(c,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(e){return"string"===typeof e?e.replace(c,function(c){return 8213==c.charCodeAt()||12540==c.charCodeAt()?String.fromCharCode(45):String.fromCharCode(c.charCodeAt()-65248)}):e}}}();
gx.color={rgb:function(c,h,e){return 65536*c+256*h+e},css:function(c){return"rgb"==c.substring(0,3)?eval(c):"#"==c.charAt(0)?parseInt(c.substring(1),16):0},html:function(c){c=this.toHex(c);gx.lang.emptyObject(c)&&(c="000000");var c=gx.text.padl(c,6,"0"),h={};h.Hexa=c;h.Html="#"+c;h.R=parseInt(c.substring(0,2),16);h.G=parseInt(c.substring(2,4),16);h.B=parseInt(c.substring(4,6),16);return h},fromRGB:function(c,h,e){var g={};"undefined"!=typeof c&&("undefined"!=typeof h&&"undefined"!=typeof e)&&(g.Hexa=
this.toHex(c)+this.toHex(h)+this.toHex(e),g.Html="#"+g.Hexa,g.R=c,g.G=h,g.B=e);return g},ARGBToHex:function(c){var h=this.toHex(c>>16&255),e=this.toHex(c>>8&255),c=this.toHex(c&255);return h+e+c},toHex:function(c){if(void 0===c)return"000000";if(0>c)return gx.color.ARGBToHex(c);if(0===c)return c+"0";for(var h=0,e="";0!==c;)h=c%16,c=(c-h)/16,e="0123456789ABCDEF".charAt(h)+e;0!==e.length%2&&(e="0"+e);return e}};
gx.grid=function(c){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,"0":"none",1:"uniform",2:"header",3:"report"},getImplClass:function(c,e){if(e){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,
c.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0);gx.lang.inherits(e,gx.ui.grid,!0);var g=new e(gx.$);c&&(g.ParentObject=c.parentObject,g.ControlName=c.gridName,c.parentObject.setUserControl(g));return g}return c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){var e=c,e=void 0!=c?c:1;return 0!=e?e:9999},setActiveGridRow:function(c,e){"string"===typeof c&&(c=(c=gx.O.getGrid(c))?c.grid:null);c&&c.gxAllowSelection&&(gx.csv.currentGridSelection=
c,"undefined"!==typeof e&&(c.toggleRowHoverById(c.gxHoveredRowId,!1),c.gxHoveredRowId=parseInt(e,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(c){if(!c||gx.csv.currentGridSelection===c.grid)delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler)},clearActiveGridHandler:function(c){c=
gx.evt.source(c.event);c=gx.fn.rowGridId(c);c=gx.fn.getGridObj(c);(!c||!c.grid.gxAllowSelection)&&gx.grid.clearActiveGrid()},handleKeyUpEvt:function(c){var e=gx.csv.currentGridSelection,g=!1;if(!e||!e.gxAllowSelection||e.gxAllowHovering)return g;switch(c.keyCode){case 38:case 40:e.ownerGrid.setSelection(e.ownerGrid.getSelection(),!0),gx.evt.cancel(c,!0),g=!0}return g},handleKeyPressEvt:function(c){var e=gx.csv.currentGridSelection,g=!1;if(!e||!e.gxAllowHovering&&!e.gxAllowSelection)return g;var a=
e.gxAllowHovering;switch(c.keyCode){case 38:a?g=e.setPreviousRowHovered():e.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(c,!0);break;case 40:a?g=e.setNextRowHovered():e.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(c,!0);break;case 13:g=e.ownerGrid.setSelection(e.gxHoveredRowId)&&e.gxOnLineActivate}return g},grid:function(h,e,g,a,b,d,f,j,s,k,m,q,p,n,o,l,t,u,w,r,v,B,x,J,E,O,H,D,L,G,z,F,C,N,R,Z,ca,M){var I=function(b){return function(d){d=this.parentObject.getGridById(a,d||gx.fn.currentGridRow(a));
return b.call(this,d||this)}.closure(this)}.closure(this);this.parentObject=h;this.parentObject["sub"+b+"_Rows"]=I(function(a){return a.grid.pageSize/a.grid.gxGridCols});this.parentObject[d.toUpperCase()+(s?"_MPAGE":"")+"_nFirstRecordOnPage"]=I(function(a){return a.grid.firstRecordOnPage});this.parentObject[d.toUpperCase()+(s?"_MPAGE":"")+"_nEOF"]=I(function(a){return a.grid.eof});this.gridLvl=e;this.gridLvlName=g;this.gridId=a;this.gridName=b;this.realGridName=d;this.containerName=f||this.gridName+
"Container";this.parentName=k||"";this.pagingParms=[];this.lvlKey=m||[];this.isFreestyle=q||!1;this.isResponsive=C||!1;this.allowHovering=(this.allowSelection=n||!1)&&o||!1;this.allowCollapsing=z||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=O||!1;this.hasAddlines=H||!1;this.hasForEachLine=D||!1;this.width=void 0!=v?v:0;this.widthUnit=B||"";this.height=void 0!=x?x:0;this.heightUnit=J||"";this.gridCols=void 0!=
p?p:1;this.gridCols=0!=this.gridCols?this.gridCols:9999;this.gridRows=void 0!=l?l:5;this.gridResponsiveCols=N||[1,1,1,1];this.usePaging=(this.usePaging=t||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=u||!1;this.defaultSetsContext=w||!1;this.boundedCollType=r||"";this.boundedCollName=F||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=j;this.isMasterPageGrid=s;this.htmlTags="";this.onLineActivate=G;this.addingRows=!1;
this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=L;this.grid=gx.grid.getImplClass(this,L);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=
this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=
this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=E?E:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=ca;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&
!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||"undefined"===this.grid.useHiddensForControlValues);this.gxCreateGridCode=function(a){var b,d=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+a,this.gridName,
this.containerName+"_"+a,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,
!1,0,this.grid.isAbstract,this.InverseLoading),c=this.grid,f=d.grid;d.emptyText=this.emptyText;f.ControlLvl=this.gridLvl;f.GridId=this.gridId;f.GridRow=a;f.GridBaseName=this.gridName;if(c.Properties)for(b in c.Properties)f.setProp(b,c.Properties[b],c[b],c.PropTypes[b]);if(c.DynProperties){a=0;for(len=c.DynProperties.length;a<len;a++)b=c.DynProperties[a],f.setDynProp(b,c.Properties[b],c[b],c.PropTypes[b],!0)}return d}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=
this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=R;this.InverseLoading=M;this.ScrollType=Z;this.isAbstract=ca;this.addColumnDinCode=function(a,b){this.gxAddColumnsCode.push(function(){a.apply(this,b)})};this.addSingleLineEdit=function(a,b,d,c,f,e,g,j,h,n,k,o,l,s,m,t,p,q,r,x,u,w,v,E){this.addColumnDinCode(this.addSingleLineEdit,arguments);var z=this.newColumn(c,g,o,j);z.visible=p;z.htmlName=d;z.gxId=b;z.gxAttId=a;z.gxAttName=e;z.gxTooltip=
f;z.gxWidthUnit=h;z.gxColSize=k;z.gxSetsContext=r;z.gxCssClass=u;z.gxColumnClass=v;z.gxColumnHeaderClass=E;z.gxControl=new gx.html.controls.singleLineEdit;z.gxControl.column=z;z.gxControl.isPassword=x;z.gxControl.visible=z.visible;z.gxControl.dataType=z.type;z.gxControl.clickEvent=l;this.grid.addColumn(z)};this.addPostingVar=function(a){this.postingVariables.push(a)};this.addMultipleLineEdit=function(a,b,d,c,f,e,g,j,h,n,k,o,l,s,m,t,p,q){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var r=
this.newColumn(c,e,l,g);r.visible=m;r.htmlName=d;r.gxId=b;r.gxAttId=a;r.gxAttName=f;r.gxWidthUnit=j;r.gxSetsContext=t;r.gxColumnClass=q;r.gxControl=new gx.html.controls.multipleLineEdit;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.visible=r.visible;r.gxControl.heightUnit=n;r.gxControl.clickEvent=s;this.grid.addColumn(r)};this.addBlob=function(a,b,d,c,f,e,g,j,h,n,k,o,l,s){this.addColumnDinCode(this.addBlob,arguments);var m=this.newColumn(c,e,"left",h);m.visible=o;m.htmlName=d;m.gxId=
b;m.gxAttId=a;m.gxAttName=f;m.gxWidthUnit=k;m.gxSetsContext=l;m.gxColumnClass=s;m.gxControl=new gx.html.controls.blob;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.visible=m.visible;m.gxControl.height=j;m.gxControl.width=h;this.grid.addColumn(m)};this.addRadioButton=function(a,b,d,c,f,e,g,j,h,n,k){this.addColumnDinCode(this.addRadioButton,arguments);var o=this.newColumn(c,e,"left","");o.visible=h;o.htmlName=d;o.gxId=b;o.gxAttId=a;o.gxAttName=f;o.gxSetsContext=n;o.gxColumnClass=k;o.gxControl=
new gx.html.controls.radio;o.gxControl.column=o;o.gxControl.dataType=o.type;o.gxControl.vertical=j;o.gxControl.visible=o.visible;o.gxControl.clickEvent=g;this.grid.addColumn(o)};this.addComboBox=function(a,b,d,c,f,e,g,j,h,n,k,o,l){this.addColumnDinCode(this.addComboBox,arguments);var m=this.newColumn(c,e,"left",k);m.visible=h;m.htmlName=d;m.gxId=b;m.gxAttId=a;m.gxAttName=f;m.gxSetsContext=n;m.gxWidthUnit=o;m.gxColumnClass=l;m.gxControl=new gx.html.controls.comboBox;m.gxControl.column=m;m.gxControl.dataType=
m.type;m.gxControl.rtEnabled=1==j;m.gxControl.visible=m.visible;m.gxControl.clickEvent=g;this.grid.addColumn(m)};this.addListBox=function(a,b,d,c,f,e,g,j,h,n,k,o,m,l){this.addColumnDinCode(this.addListBox,arguments);var s=this.newColumn(c,e,"left",k);s.visible=h;s.htmlName=d;s.gxId=b;s.gxAttId=a;s.gxAttName=f;s.gxSetsContext=n;s.gxWidthUnit=o;s.gxColumnClass=m;s.gxControl=new gx.html.controls.listBox;s.gxControl.column=s;s.gxControl.dataType=s.type;s.gxControl.rows=void 0!==l?l:4;s.gxControl.rtEnabled=
1==j;s.gxControl.visible=s.visible;s.gxControl.clickEvent=g;this.grid.addColumn(s)};this.addCheckBox=function(a,b,d,c,f,e,g,j,h,n,k,o,l,m,s){this.addColumnDinCode(this.addCheckBox,arguments);var t=this.newColumn(c,g,"left",l);t.visible=k;t.htmlName=d;t.gxId=b;t.gxAttId=a;t.gxAttName=e;t.gxChecked=j;t.gxUnChecked=h;t.gxSetsContext=o;t.gxWidthUnit=m;t.gxColumnClass=s;t.gxControl=new gx.html.controls.checkBox;t.gxControl.column=t;t.gxControl.checkedValue=j;t.gxControl.uncheckedValue=h;t.gxControl.dataType=
t.type;t.gxControl.visible=t.visible;t.gxControl.clickEvent=n;this.grid.addColumn(t)};this.addBitmap=function(a,b,d,c,f,e,g,j,h,n,k,o){this.addColumnDinCode(this.addBitmap,arguments);var l=this.newColumn(n,"","left",c);l.htmlName=b;l.gxId=d;l.gxAttId=a;l.gxWidthUnit=f;l.gxControl=new gx.html.controls.image;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=f;l.gxControl.height=e;l.gxControl.heightUnit=g;l.gxControl.clickEvent=j;l.gxCssClass=k;l.gxColumnClass=
o;this.grid.addColumn(l)};this.addVideo=function(a,b,d,c,f,e,g,j,h,n,k,o){this.addColumnDinCode(this.addVideo,arguments);var l=this.newColumn(n,"","left",c);l.htmlName=b;l.gxId=d;l.gxAttId=a;l.gxWidthUnit=f;l.gxControl=new gx.html.controls.video;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=f;l.gxControl.height=e;l.gxControl.heightUnit=g;l.gxControl.clickEvent=j;l.gxCssClass=k;l.gxColumnClass=o;this.grid.addColumn(l)};this.addAudio=function(a,b,d,c,f,e,
g,j,h,n,k,o){this.addColumnDinCode(this.addAudio,arguments);var l=this.newColumn(n,"","left",c);l.htmlName=b;l.gxId=d;l.gxAttId=a;l.gxWidthUnit=f;l.gxControl=new gx.html.controls.audio;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=f;l.gxControl.height=e;l.gxControl.heightUnit=g;l.gxControl.clickEvent=j;l.gxCssClass=k;l.gxColumnClass=o;this.grid.addColumn(l)};this.addFile=function(a,b,d,c,f,e,g,j,h,n,k,o){this.addColumnDinCode(this.addVideo,arguments);var l=
this.newColumn(n,"","left",c);l.htmlName=b;l.gxId=d;l.gxAttId=a;l.gxWidthUnit=f;l.gxControl=new gx.html.controls.file;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=f;l.gxControl.height=e;l.gxControl.heightUnit=g;l.gxControl.clickEvent=j;l.gxCssClass=k;l.gxColumnClass=o;this.grid.addColumn(l)};this.addTextBlock=function(a,b,d){this.addColumnDinCode(this.addTextBlock,arguments);var c=this.newColumn("","","left");c.gxId=d;c.htmlName=a;c.gxControl=new gx.html.controls.textBlock;
c.gxControl.column=c;c.gxControl.dataType=c.type;c.gxControl.clickEvent=b;this.grid.addColumn(c)};this.addLabel=function(a){this.addColumnDinCode(this.addLabel,arguments);var b=this.newColumn("","","left");b.htmlName=a;b.gxControl=new gx.html.controls.label;b.gxControl.column=b;this.grid.addColumn(b)};this.addButton=function(a,b,d,c,f){this.addColumnDinCode(this.addButton,arguments);var e=this.newColumn("","","left");e.htmlName=b;e.gxId=a;e.gxControl=new gx.html.controls.button;e.gxControl.column=
e;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.addGrid=function(a){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(a);var b=this.newColumn("","","left");b.htmlName=a.getContainerControlId();b.gxControl=new gx.html.controls.grid;b.gxControl.column=b;this.grid.addColumn(b)};this.addUsercontrol=function(a,b,d,c,f,e,g,j,h,n){this.addColumnDinCode(this.addUsercontrol,arguments);var k="",l=this.parentObject;l.GridUCsProps&&l.GridUCsProps[f]&&(k=l.GridUCsProps[f].title||"");
k=this.newColumn(k,"","left");k.gxUCId=a;k.gxUCLastId=b;k.gxUCClassName=d;k.gxUCContainerName=c;k.gxUCControlName=f;k.gxUCFieldName=e;k.gxShowFunc=g;k.gxC2VFuncs=j;k.gxV2CFuncs=h;k.visible=n;k.gxControl=new gx.html.controls.userControl;k.gxControl.column=k;k.gxControl.dataType=k.type;k.htmlName=f.toUpperCase();k.isUserControl=!0;this.grid.addColumn(k)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.userControlContainer;
a.gxControl.column=a;a.gxControl.dataType=a.type;this.grid.addColumn(a)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(a){this.addColumnDinCode(this.addWebComponent,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.webComponent;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addEmbeddedPage=function(a){this.addColumnDinCode(this.addEmbeddedPage,
arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.embeddedPage;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addHtmlCode=function(a){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(a)};this.startTable=function(a,b,d){this.addColumnDinCode(this.startTable,arguments);var c=this.newColumn("","","left");c.gxId=b;c.htmlName=a+"_"+b;c.gxControl=new gx.html.controls.table;c.gxControl.column=c;c.gxControl.width=d;c.gxControl.dataType=
c.type;this.grid.addColumn(c)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(a,b,d,c,f,e){this.addColumnDinCode(this.startRow,arguments);var g=this.newColumn("","","left");g.gxControl=new gx.html.controls.row;g.gxControl.column=g;g.gxControl.title=a;g.gxControl.align=b;g.gxControl.verticalAlign=d;g.gxControl.backColor=c;g.gxControl.borderColor=f;g.gxControl.cssClass=e;g.gxControl.ownCssClass=e;g.gxControl.dataType=
g.type;this.grid.addColumn(g)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(a,b,d,c,f,e,g,j,h,n){this.addColumnDinCode(this.startCell,arguments);var k=this.newColumn("","","left");k.gxControl=new gx.html.controls.cell;k.gxControl.column=k;k.gxControl.title=a;k.gxControl.align=b;k.gxControl.verticalAlign=d;k.gxControl.backColor=c;k.gxControl.borderColor=f;k.gxControl.height=e;k.gxControl.width=g;k.gxControl.colSpan=
j;k.gxControl.rowSpan=h;k.gxControl.cssClass=n;k.gxControl.dataType=k.type;this.grid.addColumn(k)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(a,b,d,c,f){this.addColumnDinCode(this.startGroup,arguments);var e=this.newColumn("","","left");e.htmlName=a;e.gxControl=new gx.html.controls.group;e.gxControl.column=e;e.gxControl.id=a;e.gxControl.caption=b;e.gxControl.height=
d;e.gxControl.width=c;e.gxControl.cssClass=f;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(a,b,d,c){this.addColumnDinCode(this.startDiv,arguments);var f=this.newColumn("","","left");f.gxId=a;f.htmlName=b+"_"+a;f.gxControl=new gx.html.controls.div;f.gxControl.column=f;f.gxControl.width=c;f.gxControl.height=d;f.gxControl.dataType=f.type;this.grid.addColumn(f)};
this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.divEnd;a.gxControl.column=a;this.grid.addColumn(a)};this.startFormGroup=function(a,b,d,c){this.addColumnDinCode(this.startFormGroup,arguments);var f=this.newColumn("","","left");f.gxId=a;f.htmlName=b+"_"+a;f.gxControl=new gx.html.controls.formGroup;f.gxControl.column=f;f.gxControl.width=c;f.gxControl.height=d;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endFormGroup=
function(){this.addColumnDinCode(this.endFormGroup,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.formGroupEnd;a.gxControl.column=a;this.grid.addColumn(a)};this.newColumn=function(a,b,d,c){b=this.getColumnType(b);a=new gx.grid.column(a,b,c,d);this.currentBuffer=a.buffer;a.htmlName="";a.gxId="";a.gxAttId="";a.gxAttName="";return a};this.getColumnType=function(a){switch(a){case "decimal":case "int":a=gx.types.numeric;break;case "date":a=gx.types.date;break;case "dtime":a=
gx.types.dateTime;break;case "boolean":a=gx.types.bool;break;case "GeneXus\\Geolocation":a=gx.types.geolocation;break;default:a=gx.types.character}return a};this.addOldComponent=function(a,b){"undefined"==typeof this.oldCmps[a]&&(this.oldCmps[a]=[]);this.oldCmps[a].push(b)};this.updateOldComponents=function(){for(var a=this.grid.rows.length,b=0;b<a;b++)delete this.oldCmps[this.grid.rows[b].gxId];for(var d in this.oldCmps){for(a=this.oldCmps[d];0<a.length;)b=a.shift(),gx.fn.deleteHidden(b);delete this.oldCmps[d]}};
this.addHidden=function(a){this.hiddens.push(a)};this.addHiddenControl=function(a,b,d){gx.fn.setHidden(a,b);!0!=d&&this.addHidden(a)};this.clearHiddens=function(){for(var a=0;a<this.hiddens.length;a++)gx.fn.deleteHidden(this.hiddens[a]);this.hiddens=[]};var y={};this.setHtmlTags=function(a){gx.lang.apply(y,a);var b;b=' style="'+("0"==y.Visible?"display:none;":"");var a=""+(' class="'+y.Class+'"'),d=gx.lang.emptyObject;b+=!d(y.Background)?"background:"+y.Background+";":"";b+=!d(y.Backcolor)&&"0"!=
y.Backcolor?"background-color:"+gx.color.html(y.Backcolor).Html+";":"";b+=!d(y.Bordercolor)&&"0"!=y.Bordercolor?"border-color:"+gx.color.html(y.Bordercolor).Html+";":"";b+=!d(y.Borderwidth)&&"0"!=y.Borderwidth?" border-width:"+y.Borderwidth+";":"";b+=!d(y.Width)&&"0"!=y.Width?" width:"+gx.dom.addUnits(y.Width,this.width==y.Width?this.widthUnit:"")+";":"";b+=!d(y.Height)&&"0"!=y.Height?"max-height:"+gx.dom.addUnits(y.Height,this.height==y.Height?this.heightUnit:"")+";":"";a+=!d(y.Align)?' align="'+
y.Align+'"':"";a+=!d(y.Tooltiptext)?' title="'+y.Tooltiptext+'"':"";a+=!d(y.Cellpadding)?' data-cellpadding="'+y.Cellpadding+'"':"";a+=!d(y.Cellspacing)?' data-cellspacing="'+y.Cellspacing+'"':"";this.htmlTags=gx.text.trim(a+(b+'"'));this.grid.gxHtmlTags=this.htmlTags;d(y.Width)||(this.grid.gxWidth=y.Width);d(y.Height)||(this.grid.gxHeight=y.Height)};var A={};this.setGridStyles=function(a){gx.lang.apply(A,a);this.grid.header=a.Header;this.visible=void 0!=A.Visible?gx.lang.gxBoolean(A.Visible):!0;
this.setSortable(void 0!=A.Sortable?gx.lang.gxBoolean(A.Sortable):!0);this.background=void 0!=A.Background?A.Background:"";this.cssClass=void 0!=A.Class?A.Class:"";this.titleBackstyle=void 0!=A.Backcolorstyle?A.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=A.Titlefont?A.Titlefont:"";this.linesFont=void 0!=A.Linesfont?A.Linesfont:"";this.borderWidth=void 0!=A.Borderwidth?A.Borderwidth:"";this.toolTipText=void 0!=A.Tooltiptext?A.Tooltiptext:"";try{this.backcolor=void 0!=A.Backcolor?gx.color.html(A.Backcolor).Html:
"",this.titleBackcolor=void 0!=A.Titlebackcolor?gx.color.html(A.Titlebackcolor).Html:"",this.titleForecolor=void 0!=A.Titleforecolor?gx.color.html(A.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=A.Backcolorodd?gx.color.html(A.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=A.Backcoloreven?gx.color.html(A.Backcoloreven).Html:"",this.bordercolor=void 0!=A.Bordercolor?gx.color.html(A.Bordercolor).Html:""}catch(b){gx.dbg.logEx(b,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=A.Borderwidth?
A.Borderwidth:"";this.toolTipText=void 0!=A.Tooltiptext?A.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;
this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=
this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):
(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=function(a){if(this.sortable!=a){this.sortable=a;for(var b=this.grid.columns.length,d=0;d<b;d++)this.grid.columns[d].sortable=a}};this.lastRowId=0;this.addRow=function(a){var b,d,c,f=this.lastRowId++,e=gx.grid.rowId(f+1),e=new gx.grid.row(f,a,e,this.grid.gxParentRowId);e.gxCmpContext=this.gxComponentContext;e.Grids=a.Grids;e.ownerGrid=this;e.gxLvl=this.gridLvl;this.setRowHiddens(a.Hiddens);
for(var g=this.grid.columns,j=g.length,h=0;h<j;h++){var n=g[h];if(0!==f){c=this.grid.rows[0].gxProps[h];b=a.Props[h].length;for(d=this.grid.rowsValues?c.length-1:c.length;b<d;b++)e.gxProps[h].push(c[b])}d=a.Props[h];d=d[d.length-1];if((c=this.grid.rowsValues)&&!this.autoRefreshing)b=c[f],void 0!==b&&0<b.length&&(d=c[f][h]);e.values[h]=d;this.grid.rowsValues&&e.gxProps[h].push(d);this.parentObject.isTransaction()&&(n=this.columnIndexInKey(n.gxAttId),-1!=n&&(e.gxKeyValues[n]=d))}this.isFreestyle&&(e.IsNew=
!0,this.installChildGrids(e));this.grid.addRow(e);return e};this.installChildGrids=function(a){for(var b=this.childGrids.length,d=0;d<b;d++){var c=this.childGrids[d],f=c.gxCreateGridCode(a.gxId);f.grid.parentGxObject=this.parentObject;var e=(!f.isMasterPageGrid?this.grid.gxCmpContext:"MP")+f.realGridName+"Container";f.gxContainerDivName=e+"Div_"+a.gxId;f.gxContainerDataName=e+"Data_"+a.gxId;f.gxContainerValuesName=e+"DataV_"+a.gxId;a.gxGrids.push(f);f.parentGrid=this;f.parentRow=a;this.parentObject.setGrid(f);
c.copyPropertiesTo(f);f.grid.gxCmpContext=this.grid.gxCmpContext;f.grid.gxParentRowId=a.gxId;this.installChildGridColumns(f,c)}};this.installChildGridColumns=function(a,b){for(var d=b.gxAddColumnsCode.length,c=0;c<d;c++)b.gxAddColumnsCode[c].call(a)};this.copyPropertiesTo=function(a){a.cssClass=this.cssClass;a.titleBackstyle=this.titleBackstyle;a.titleBackcolor=this.titleBackcolor;a.linesBackcolorOdd=this.linesBackcolorOdd;a.linesBackcolorEven=this.linesBackcolorEven;a.grid.gxCssClass=this.grid.gxCssClass;
a.grid.gxTitleClass=this.grid.gxTitleClass;a.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;a.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;a.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;a.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(a){if(a&&this.parentObject.isTransaction())for(var b in a)gx.fn.setHidden(b,a[b])};this.executeEvent=function(a,b){gx.evt.setGridEvt(this.gridId.toString(),b);this.instanciateRow(b);this.parentObject[a].call(this.parentObject,b)};this.getHiddenName=
function(a){var b="";this.parentRow&&(b="_"+this.parentRow.gxId);return this.grid.gxCmpContext+this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+a+b};this.updatePagingVars=function(a,b){void 0==a&&void 0==b?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=a,this.grid.firstRecordOnPage=b)};this.setPagingVars=function(a,b){this.grid.eof=a;this.grid.firstRecordOnPage=
b;gx.fn.setHidden(this.getHiddenName("nEOF"),a);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),b)};this.clearDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||this.defaultSetsContext)for(var a=this.grid.rows.length,b=0;b<a;b++){var d=this.containerName+"Row_"+this.grid.rows[b].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(d);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(d)}a=this.grid.columns.length;for(b=0;b<a;b++)if(d=this.grid.columns[b],!0==d.gxSetsContext)for(var c=
this.grid.rows.length,f=0;f<c;f++)gx.fx.ctx.deleteSetter(d.htmlName+"_"+this.grid.rows[f].gxId)};this.setDefaultEventHandlers=function(){var a=0,b=this.additiveResponse?this.firstAdditiveRow:0,d=this.getRowAsTypes();if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(var a=this.grid.rows.length,c=b;c<a;c++){var f=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[c].gxId,f=gx.dom.byId(f);null!=f&&(f.gxGrid=this.containerName,f.gxGridName=
this.gridName,f.gxId=this.grid.rows[c].gxId);f=this.containerName+"Row_"+this.grid.rows[c].gxId;e=function(a){return this.returnRowData(a)}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,f,this.cssClass,d,e);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,f,this.cssClass,d,e)}else{var a=this.grid.gxCmpContext+this.containerName+"Div",e=function(){return this.returnGridData()}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,a,this.cssClass,
[this.boundedCollType],e);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,a,this.cssClass,[this.boundedCollType],e)}if(this.parentGrid){e=gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"];a=this.grid.rows.length;for(c=b;c<a;c++)f=this.containerName+"Row_"+this.grid.rows[c].gxId,e&&e.hdl&&gx.fx.ctx.addSetter(this.parentObject,f,this.cssClass,d,e.hdl)}if(!this.additiveResponse){a=this.grid.columns.length;for(c=0;c<a;c++)if(d=this.grid.columns[c],!0==d.gxSetsContext){f=
this.grid.rows.length;for(e=b;e<f;e++){var g=gx.dom.el(this.gxComponentContext+d.htmlName+"_"+this.grid.rows[e].gxId,!0);null!=g&&(g.gxHtmlName=d.htmlName,gx.fx.ctx.addSetter(this.parentObject,d.htmlName+"_"+this.grid.rows[e].gxId,"",[d.gxAttName],this.returnColumnContext))}}}};this.infinite_scrolling_ensure_loading_scroll=function(){if(!this.mock_element){var a=c("#"+this.getGridInnerTableId());this.mock_element=c('<div class="gx-grid-loading" style="visibility:hidden;">'+gx.getMessage("GXM_Loading")+
"</div>");this.mock_element.insertAfter(a)}};this.infinite_scrolling_before_scroll=function(){this.infinite_scrolling_ensure_loading_scroll();!0!==this.isScrolling&&(this.mock_element.css("visibility","visible"),this.isScrolling=!0)};this.hide_loading_message=function(){this.mock_element&&this.mock_element.css("visibility","hidden")};this.remove_loading_message=function(){this.mock_element&&(c(this.mock_element).remove(),this.mock_element=void 0)};this.infinite_scrolling_after_scroll=function(){var a=
this.getGridInnerTableId();c("#"+a);this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.hide_loading_message()};this.fixColumnsWidth=function(a){if(!this.isFreestyle){var b=this.getGridInnerTableId();rows=c("#"+b).find("tbody tr[data-gxrendering_row]");c.each(rows,function(b,d){c(d).children().map(function(b,d){d.style.width=a[b]+"px";d.style.maxWidth=a[b]+"px"})});rows.removeAttr("data-gxrendering_row")}};this.unInstallScrollListener=function(){this.ScrollingElement&&(c(this.ScrollingElement).scrollTop(0),
this.remove_loading_message(),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(a){var b,d,f,e,g=gx.grid.scrollingThreshold||4,j=function(){var d,f,e,j,h;if(this.InverseLoading)return a.scrollTop<=30*a.clientHeight/100;1==this.ScrollType?(e=c(window),d=c(document).height(),f="CSS1Compat"===(document.compatMode||""),f=void 0!==window.pageXOffset?window.pageYOffset:f?document.documentElement.scrollTop:document.body.scrollTop,
e=e.height()):(d=a.scrollHeight,f=a.scrollTop,e=a.clientHeight);j=f;h=b;b=j;return j<h?!1:d-f-e<e*g}.closure(this),h=this;d=!0;e=function(){d=!0;f&&(f=!1,h.ScrollingHandler())};b=0;f=!1;this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(d){var a=h.grid;!0!==h.isScrolling&&(!a.isLastPage()&&j())&&(h.infinite_scrolling_before_scroll(),a.changeGridPage("NEXT",!1));d=!1;setTimeout(e,300)}else f=!0})};this.infinite_scrolling_ensure_loading_scroll();a.addEventListener("scroll",
this.ScrollingHandler,{passive:!0})};this.installFixedGridHeader=function(){if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&0<this.grid.rows.length){var a=this.getContainerControl();if(a){var b=c(a),d=this,f=this.getGridInnerTableId(),a=c("#"+f),e=a.find("tbody tr:first").children(),g=c("#"+f+"> tbody"),j=c("#"+f+"> thead > tr"),h=c("#"+f+"> thead"),f=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=a.width());this.fixedColumnsWidth||
(this.fixedColumnsWidth=e.map(function(){return c(this).width()}).get());b.addClass("gx-infinite-scrolling-container");if(!this.width||f)f?(b.addClass("gx-grid-fixed-header-ie7"),b.wrap("<div style='position:relative;'>"),a.css("width",""),b.width(this.fixedContainerWidth+c.position.scrollbarWidth()+2),e=h.position(),j.css("top",e.top),e=j.outerHeight(!0),b.css("paddingTop",gx.dom.addUnits(e,"px")),a.attr("data-bkgstyle",""),e=a.css("background-color"),h=j.css("background-color"),e&&(!h||"transparent"===
h)&&j.css("background-color",e)):a.width(this.fixedContainerWidth+c.position.scrollbarWidth()+2);0<this.fixedColumnsWidth.length&&(a.find("thead tr").children().each(function(a,b){c(b)[0].style.width=d.fixedColumnsWidth[a]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));g.addClass("gx-infinite-scrolling-element");b=!f?g:b;a.css("max-height","");b.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}}};this.handleInfiniteScrolling=function(){if(this.InfiniteScrolling){var a=
this.getContainerControl();if(a){var b=c(a);b.removeClass("gx-infinite-scrolling-container");if(0<this.grid.rows.length){var d=this,f=this.getGridInnerTableId(),e;if(1==this.ScrollType)e=window,this.fixedColumnsWidth=[];else{this.ScrollingHeight&&c(e).css({height:this.ScrollingHeight});var g=c("#"+f),j=g.find("tbody tr:first").children(),h=c("#"+f+">tbody"),n=c.grep(this.grid.columns,function(a){return!0==a.visible}).length;this.fixedColVisibleCount!=n&&(this.fixedColVisibleCount=n,this.isFreestyle||
(this.fixedColntainerWidth=g.width(),this.fixedColumnsWidth=j.map(function(){return this.offsetWidth}).get()));b.addClass("gx-infinite-scrolling-container");this.isFreestyle||g.width(this.fixedColntainerWidth+c.position.scrollbarWidth()+2);!this.isFreestyle&&0<this.fixedColumnsWidth.length&&(g.find("thead tr").children().each(function(a,b){c(b)[0].style.width=d.fixedColumnsWidth[a]+"px"}),this.fixColumnsWidth(this.fixedColumnsWidth));e=0<h.length?h[0]:a;c(e).addClass("gx-infinite-scrolling-element")}this.ScrollingHeight&&
1!=this.ScrollType&&c(e).css({height:this.ScrollingHeight});this.ScrollingElement=e;this.infinitScrollingInstalled=!0;var a=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector,k=this.infinite_scrolling_before_scroll.closure(this),l;if(!this.ScrollingHeight&&(this.isFreestyle||this.grid.rows.length>=this.grid.pageSize&&0<this.grid.pageSize))1!=this.ScrollType&&(l=c(e).height()-2,c(e).css({height:l})),this.ScrollingHeight=l;if(e){var o=0,m=function(){var a=!1;if(10==o)return o=
0,!1;(a=this.InverseLoading?0==e.scrollTop:1==this.ScrollType?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:document.body.scrollHeight<=document.body.clientHeight:e.clientHeight==e.scrollHeight)&&o++;return a}.closure(this),s=function(){if(!this.grid.isLastPage()&&m())return k(),this.grid.changeGridPage("NEXT",!1).then(function(){d.InverseLoading&&(e.scrollTop=e.scrollHeight);s()})}.closure(this);gx.lang.requestAnimationFrame(function(a,b,d,f){s();this.installScrollListener(a,
b,d,f)}.closure(this,[this.ScrollingElement,f,h,a]))}}}}};this.returnColumnContext=function(a){var b="",b="SPAN"==a.nodeName?gx.dom.spanValue(a):gx.fn.getControlValue_impl(a.id);return null!=b?b:""};this.returnRowData=function(a){var b={};if(a=this.grid.getRowByGxId(a.gxId))for(var d=this.grid.columns.length,f=0;f<d;f++){var c=this.grid.columns[f].gxAttName;""!=c&&(b[c]=a.values[f])}return b};this.returnGridData=function(){for(var a=[],b=this.grid.rows.length,d=0;d<b;d++){var f={};a[d]=f;for(var c=
this.grid.rows[d],e=this.grid.columns.length,g=0;g<e;g++){var j=this.grid.columns[g].gxAttName;""!=j&&(f[j]=c.values[g])}}return a};this.doDrop=function(a){this.getNewRows(void 0!=a.length?ropObj.length:1,null,function(b){this.addDropedRows(b,a)})};this.addDropedRows=function(a,b){a.gxHiddens&&gx.fn.setJsonHiddens(null,a.gxHiddens);var a=a.gxContainer?a.gxContainer:a,d=b.length;if(void 0!=d)for(var f=0;f<d;f++)this.setDroppedRow(a[f],b[f]);else this.setDroppedRow(a[0],b);this.setNewRows(a)};this.setDroppedRow=
function(a,b){for(var d=this.grid.columns.length,f=0;f<d;f++){var c=a.Props[f],e=this.grid.columns[f].gxAttName,g="";""!=e&&void 0!=b[e]&&(g=b[e]);c.Value=g;c.FormattedValue=g}};this.getRowAsTypes=function(){for(var a=[],b=this.grid.columns.length,d=0;d<b;d++){var f=this.grid.columns[d].gxAttName;""!=f&&a.push(f)}return a};this.addRows=function(a){var b=a.Count;this.grid.rowsValues=a.values;for(var d=0;d<b;d++)this.addRow(a[d])};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;
var a=this.grid.rows[this.grid.rows.length-1];return a.gxExists()||a.gxIsMod()?!0:!1};this.getNewRows=function(a,b,d){var d=void 0!=d?d:this.setNewRows,f=gx.util.browser.isFirefox()?"keypress":"keydown";null==b||(b.type==f&&(32==b.charCode||32==b.keyCode||13==b.keyCode)||"click"==b.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,a+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+
1)+this.grid.gxParentRowId,this.grid.gxParentRowId,d),gx.csv.pkDirty=!1,null!=b&&gx.evt.cancel(b,!0)):null!=b&&(32==b.keyCode||13==b.keyCode)&&gx.evt.cancel(b,!0)};this.setNewRows=function(a){return this.setNewRows_impl(a,function(){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(a){a.gxHiddens&&gx.fn.setJsonHiddens(null,a.gxHiddens);a=a.gxContainer?a.gxContainer:a;return this.setNewRows_impl(a,function(a){this.loadGrid({rowProps:a,
isPostback:!0,addRows:!0})})};this.setNewRows_impl=function(a,b){a.gxHiddens&&gx.fn.setJsonHiddens(null,a.gxHiddens);var a=a.gxContainer?a.gxContainer:a,d;if(void 0!=a.Count){var f=0;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(a.values);for(f=0;f<a.Count;f++)d=this.addRow(a[f]),gx.fn.setCurrentGridRow(this.gridId,d.gxId);0<a.Count&&(this.addingRows=!0,b.call(this,a),this.addingRows=!1,this.setFocusFirstControl(a[0]))}return d};this.gxNewRowFocused=
function(a){a.style.textDecoration="underline";var b=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(a,b,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(a){var b=gx.evt.source(a);void 0!=b&&(a.ctrlKey&&46==a.keyCode)&&(this.setRowDeleted(b),gx.evt.cancel(a,!0))};this.gxHasDuplicateKey=function(){for(var a=[],b=this.grid.rows,d=b.length,f=0;f<d;f++){var c=b[f];if((c.gxExists()||c.gxIsMod())&&!c.gxDeleted()){for(var e="",g=c.gxKeyValues.length,j=0;j<
g;j++)e+=c.gxKeyValues[j].toString();if(void 0!=a[e])return!0;a[e]=1}}return!1};this.columnIndexInKey=function(a){for(var b=this.lvlKey.length,d=0;d<b;d++)if(this.lvlKey[d]==a)return d;return-1};this.refreshVars=[];this.addRefreshingVar=function(a){if(!gx.lang.emptyObject(a)){var b="",d=function(){this.filterVarChanged()};this.refreshVars[this.refreshVars.length]=a;if(a.fld){var f=gx.dom.el(this.gxComponentContext+a.fld,!1,!0);if(void 0!=f&&gx.lang.emptyObject(a.hc)&&(b="radio"==f.type||"checkbox"==
f.type?"click":"SELECT"==f.tagName?"change":gx.evt.eachKeyAutorefreshType(a.type)?["keyup","input"]:"blur",""!=b))if("radio"==f.type)for(var f=gx.dom.byName(this.gxComponentContext+a.fld),a=f.length,c=0;c<a;c++)gx.evt.attach(f[c],b,d,this);else"search"==f.type&&(b=[b,"search"]),gx.evt.attach(f,b,d,this)}else if(b=this.parentObject.VarControlMap[a.rfrVar])if((b=this.parentObject.getValidStructFld(b.id))&&b.isuc)for(f in b.ucInstances)b.ucInstances.hasOwnProperty(f)&&(b.ucInstances[f].autoRefreshFn=
d.closure(this))}};this.refreshParms=[];this.addRefreshingParm=function(a){gx.lang.emptyObject(a)||(this.refreshParms[this.refreshParms.length]=a)};this.doRefresh=function(){this.callAsyncRefresh(this.getRefreshParmsUrl())};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var a=this.getRefreshParmsUrl();this.lastRefreshParms!=a&&(this.lastRefreshParms=a,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=
function(){for(var a=this.refreshVars.length,b=0;b<a;b++){var d=this.refreshVars[b];if("undefined"==typeof d.rfrVar){var f=gx.fn.getHidden(this.gxComponentContext+"GXH_"+d.fld),d=d.val();if(void 0!==f&&f!=d)return!0}}return!1};this.getRefreshParmsUrl=function(a){return this.getParmsValues(a,this.refreshParms,!0).join(",")};this.getParmsValues=function(a,b,d){var f=gx.O,c,e,g=b.length,j=[];gx.setGxO(this.parentObject);for(var h=function(a,b,d,f){!0===d&&(b=gx.ajax.ControlValuesObject(b,a))&&f.push(encodeURIComponent(gx.json.serializeJson(b)));
f.push(a)},n=0;n<g;n++){var k=b[n];if(k&&("function"==typeof k.c2v&&k.c2v(),"function"==typeof k.v2bc&&k.v2bc.call(gx.O),"undefined"!=typeof k.rfrVar)){e=gx.fn.vStructForVar(k.rfrVar);if(!e&&(e=gx.fn.getVarControlMapForVar(k.rfrVar))&&!a){var l=this.parentObject.getValidStructFld(e.id);if(l&&l.isuc){var o=l&&l.grid?gx.fn.currentGridRowImpl(l.grid):void 0;(l.getUCInstance(o)||l.uc).execC2VFunctions()}}if(e&&("undefined"==typeof k.rfrProp||this.isValueProperty(k.rfrProp)))c=e.type}if("undefined"!=typeof k.rfrVar){e=
ctrlName=colVStruct=void 0;if("undefined"!=typeof k.rfrProp){var m;"undefined"!=typeof k.gxAttId&&(m=this.grid.getColumnByGxAttId(k.gxAttId));m||(m=this.grid.getColumnForVar(k.rfrVar));if(m){if(l=k.rfrProp.toLowerCase(),e=m.hasOwnProperty(l)?m[l]:m.gxControl[l],this.isValueProperty(l)&&m.gxControl.type==gx.html.controls.types.image&&(e=gx.util.removeBaseUrl(e)),(colVStruct=this.parentObject.getValidStruct(m.gxId))&&this.isValueProperty(l))c=colVStruct.type}else e=""}else"undefined"!=typeof this.parentObject.VarControlMap[k.rfrVar]&&
(ctrlName=this.parentObject.VarControlMap[k.rfrVar].id),gx.lang.emptyObject(this.parentObject[k.rfrVar])?"undefined"==typeof e&&"undefined"!=typeof ctrlName&&(e=gx.fn.getHidden(this.gxComponentContext+ctrlName)):e=this.parentObject[k.rfrVar],"object"==typeof e&&("date"!=c&&"dtime"!=c)&&(e=gx.json.serializeJson(e));e="undefined"==typeof e?"":e;h(this.getFormattedParm(e,c),k.rfrVar,(!k.rfrProp||"Value"===k.rfrProp)&&d,j)}else"string"==typeof k.gxGrid?(e=gx.O.getGridByBaseName(k.gxGrid),"string"==typeof k.rfrProp&&
"Rows"==k.rfrProp&&j.push(e?e.grid.pageSize:9999)):gx.lang.emptyObject(k.hc)?(h(this.getFormattedVStructParm(k),k.gxvar,(!k.rfrProp||"Value"===k.rfrProp)&&d,j),gx.fn.setHidden(this.gxComponentContext+"GXH_"+k.fld,k.val())):(e=gx.fn.getHidden(this.gxComponentContext+"GXH_"+k.fld),j.push(encodeURIComponent(a&&"undefined"!==typeof e?e:this.parentObject[k.hc])))}this.parentObject.IsComponent&&j.push(encodeURIComponent(this.parentObject.CmpContext));gx.setGxO(f);return j};this.initRefreshParms=function(){this.parentObject.autoRefresh&&
(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.isValueProperty=function(a){return"undefined"!=typeof a&&"value"==a.toLowerCase()};this.getFormattedVStructParm=function(a){var b;"date"==a.type||"dtime"==a.type?(b=gx.dom.el(this.gxComponentContext+a.fld),b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b):b=a.val();return this.getFormattedParm(b,a.type)};this.getFormattedParm=function(a,b){"date"===b?a=gx.date.urlDate(a,gx.dateFormat):"dtime"===b&&(a=gx.date.urlDateTime(a,gx.dateFormat));
return encodeURIComponent(a)};this.callAsyncRefresh=function(a,b){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0,"callAsyncRefresh"));gx.evt.setReady(!1,"callAsyncRefresh");var d=gx.util.executionContext.getContext();this.refreshTimer=window.setTimeout(function(){if(!gx.util.executionContext.changedContext(d))if(this.autoRefreshing||gx.evt.processing)this.callAsyncRefresh(a);else{gx.fx.obs.addObserver("grid.onafterrefresh",
gx.evt,gx.evt.notifyRefreshGrid,{single:true});typeof a==="undefined"&&(a=this.getRefreshParmsUrl());gx.ajax.refreshGrid(this,a);gx.evt.setReady(true,"callAsyncRefresh");this.refreshTimer=null}}.closure(this),b||400)};this.updatePropsHidden=function(a){var b=this.getDataHiddenName();gx.fn.setHidden(b,a)};this.updatePagingVarsAfterRefresh=function(a){if(this.usePaging){var b=this.grid.gxGridName.toUpperCase()+"_nEOF",d=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(a[b],
a[d])}};this.getSelection=function(){if(this.allowSelection)for(var a=this.grid.rows.length,b=0;b<a;b++)if(this.grid.rows[b].selected)return b;return-1};this.setNextRowSelected=function(a){var b=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(b,a);this.grid.keepGridItemVisible(b)};this.setPreviousRowSelected=function(a){var b=Math.max(this.getSelection()-1,0);this.setSelection(b,a);this.grid.keepGridItemVisible(b)};this.setProperty=function(a){if(a.Selectedindex)if(a=Number(a.Selectedindex),
-1==a)this.setSelection(a);else return this.setSelectionRowCtrl(this.grid.getRowByPos(a));return!1};this.setSelection=function(a,b){if(this.allowSelection){if(-1==a)return this.grid.setRowSelected(void 0,"",void 0,void 0,b),!0;if(0<=a)return this.setSelectionRowCtrl(this.getRowCtrlByIdx(a),b)}return!1};this.setSelectionRowCtrl=function(a,b){return this.allowSelection&&a?(this.grid.setRowSelected(a,a.getAttribute("data-gxrow"),void 0,void 0,b),!0):!1};this.getRowCtrlByIdx=function(a){return gx.dom.el(this.grid.gxCmpContext+
this.grid.gxGridObject+"Row_"+gx.grid.rowId(a+1))};this.blankGridRows=function(){this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);if(!this.InfiniteScrolling||!this.additiveResponse)this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues};this.setRowDeleted=function(a){var b=null,b="string"==typeof a?this.grid.getRowByGxId(a):void 0==a.gxId?this.getRowFromHtmlCtrl(a):a;b.setDeleted(!b.gxDeleted());this.setRowModified(b.gxId);gx.fn.removeGridRow(b.gxId,this.gridId.toString());
this.refreshGrid({loadChildGrids:!1});gx.dom.indexElements()};this.setFocusFirstControl=function(a){for(var b=0;b<a.Count;b++){var d=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(d&&(d=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[b].htmlName+"_"+d.gxId),void 0!=d&&gx.fn.isAccepted(d))){gx.grid.lastFocusCtrl=this.grid.columns[b].gxId;gx.fn.setFocus(d);break}}};this.instanciateRow=function(a){var b=gx.O,d,f,c,e,g;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=
this;try{var j=a;"string"==typeof j&&(j=this.grid.getRowByGxId(a));if(null!=j){gx.fn.setCurrentGridRow(this.gridId,j.gxId);g=j.values.length;for(e=0;e<g;e++){var h=this.grid.columns[e];if(""!=h.gxId){var n=this.parentObject.getValidStruct(h.gxId);n&&(this.useUserControlModelValues()?n.v2v&&(n.v2v(this.grid.properties[j.id][h.index].value),gx.fn.setHidden(this.grid.properties[j.id][h.index].id,this.grid.properties[j.id][h.index].value)):"function"==typeof n.c2v&&n.c2v())}}}else{gx.fn.setCurrentGridRow(this.gridId,
a);g=this.grid.columns.length;for(e=0;e<g;e++)h=this.grid.columns[e],""!=h.gxId&&(n=this.parentObject.getValidStruct(h.gxId))&&"function"==typeof n.c2v&&n.c2v()}d=this.parentObject.UserControls;for(c in d)d.hasOwnProperty(c)&&(f=d[c],f.GridId===this.gridId&&f.GridRow===j.gxId&&(this.parentObject[f.DesignContainerName]=f))}catch(k){gx.dbg.logEx(k,"gxgrid.js","instanciateRow")}gx.setGxO(b);return!0};this.setRenderProp=function(a,b,d,f){this.grid.setProp(a,b,d,f)};this.setRenderDynProp=function(a,b,
d,f){this.grid.setDynProp(a,b,d,f)};this.addRenderEventHandler=function(a,b){this.grid.addEventHandler(a,b)};this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid=this.grid.selectedRows=null;this.unInstallScrollListener()};this.loadGrid=function(a){var b;gx.dbg.logPerf("loadGrid_"+
this.gridName);var a=a||{},d=a.rowProps,f=a.isPostback,e=a.addRows,a=a.isNestedLoad;this.isNestedLoad=this.isNestedLoad||a;a=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var g=this.parentObject.isTransaction();g&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));if(void 0!=d){var g=d.GridName?d[d.GridName.toUpperCase()+"_nEOF"]:void 0,j=d.GridName?d[d.GridName.toUpperCase()+"_nFirstRecordOnPage"]:void 0,h=this.getContainerControl();null!=h&&(this.autoRefreshing?this.updatePagingVarsAfterRefresh(d):
this.updatePagingVars(g,j),this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage),f&&!e&&(d.values=this.getValuesFromHidden(),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(h),this.additiveResponse||this.clearHiddens(),this.setRowsProperty(),f=this.getSelection(),this.autoRefreshing?this.updatePagingVarsAfterRefresh(d):this.updatePagingVars(g,j),e||this.blankGridRows(),this.setHtmlTags(d),
this.setGridStyles(d),this.setDeleteMethod(d.DeleteMethod),this.setSelectionAndHover(d.Allowselection,d.Selectioncolor,d.Allowhover,d.Hovercolor,d.Selectedindex),this.setCollapsing(d.Allowcollapsing,d.Collapsed),this.setSflColumns(d.SflColumns),this.setColumnsProperties(d.Columns),e||this.addRows(d),this.updateOldComponents(),this.initRefreshParms(),b=this.getGridInnerTableId(),b=void 0!==c("#"+b).attr("data-gx-grid-nodata"),b=this.refreshGrid({addRows:e&&!b,loadChildGrids:null,fromAutoRefresh:this.autoRefreshing}),
this.setProperty({Selectedindex:f+1}))}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=g||this.isFreestyle?9999:this.gridRows,h=this.getContainerControl(),null!=h?(this.grid.setContainerDelayed(h),e=this.getRowsFromHidden(),null!=e?(e.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(e),this.setGridStyles(e),this.setDeleteMethod(e.DeleteMethod),this.setSelectionAndHover(e.Allowselection,e.Selectioncolor,e.Allowhover,e.Hovercolor,e.Selectedindex),this.setCollapsing(e.Allowcollapsing,
e.Collapsed),this.setSflColumns(e.SflColumns),this.setColumnsProperties(e.Columns),this.updatePagingVars(),this.addRows(e),this.initRefreshParms(),this.addingRows=!0,b=this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),b=this.refreshGrid())):b=this.loadWrappedGridChilds();this.isLoading=!1;gx.setGxO(a);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded");return b};this.loadWrappedGridChilds=function(){var a=c.Deferred();
try{var b=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof b){for(var b=parseInt(b),d=0;d<b;d++)for(var f=this.grid.columns.length,e=0;e<f;e++){var g=this.grid.columns[e];g.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(d+1),c:g})}this.setupGridUsercontrols(this.GridUserControls)}}catch(j){gx.dbg.logEx(j,"gxgrid.js","loadWrappedGridChilds")}a.resolve();return a};this.getRowsFromHidden=function(){var a=this.getDataHiddenName(),
b=gx.fn.getHidden(a);gx.json.setNonSerializable(a);return"string"==typeof b?gx.json.evalJSON(b):"object"==typeof b?b:null};this.deleteGridData=function(){var a=this.getDataHiddenName();gx.json.setNonSerializable(a)};this.getValuesFromHidden=function(){var a=this.getValuesHiddenName(),b=gx.fn.getHidden(a);gx.lang.emptyObject(b)&&(b=gx.fn.getControlValue(a));gx.json.setNonSerializable(a);a=null;null!=b&&""!=b&&(a=gx.json.evalJSON(b));return a};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?
this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var a=gx.dom.byId(this.getContainerControlId());a&&(this.gxContainerCtrl=a,a.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(a,"gx-grid"),this.isResponsive&&gx.dom.addClass(a,"gx-responsive-grid"),gx.dom.addClass(a,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),a.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=
function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(a){try{if(!gx.lang.emptyObject(a))for(var b=
a.length,d=0;d<b;d++){var f=this.grid.columns[d],c;for(c in a[d]){var e=a[d][c];c=this.fixColumnPropName(c);this.isUsercontrol&&(f[c]=e);f[c.toLowerCase()]=e}this.checkPromptColumn(f)}}catch(g){gx.dbg.logEx(g,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(a){try{if(this.isPromptColumn(a)){var b=gx.fn.getAttachedCtrl(a.htmlName);if(b&&b.info&&b.info.controls){for(var d=!1,f=!1,c=b.info.controls.length,e=0;e<c;e++){var g=this.grid.getColumnByGxId(b.info.controls[e]),j=gx.lang.gxBoolean(g.enabled),
h=gx.lang.gxBoolean(g.visible);j&&(f=!0);h&&(d=!0)}f||(a.enabled="0");d||(a.visible="0")}}}catch(n){gx.dbg.logEx(n,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(a){return"Horizontalalignment"==a?"align":a};this.setDeleteMethod=function(a){if(this.parentObject.isTransaction()){var b="DSP"==this.parentObject.Gx_mode;!b&&(a&&"none"==a)&&(b=!0);this.deleteMethod=b?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(a,b,d,f,c){try{"undefined"!=typeof a&&
(this.allowSelection=gx.lang.gxBoolean(a));"undefined"!=typeof b&&(this.selectionColor=null);"undefined"!=typeof f&&(this.hoverColor=null);if(this.allowSelection&&"undefined"!=typeof b&&("undefined"!=typeof d&&(this.allowHovering=gx.lang.gxBoolean(d)),b=eval(b),this.selectionColor="undefined"!=typeof b[0]?gx.color.fromRGB(b[0],b[1],b[2]):gx.color.html(b),this.allowHovering&&"undefined"!=typeof f))f=eval(f),this.hoverColor="undefined"!=typeof f[0]?gx.color.fromRGB(f[0],f[1],f[2]):gx.color.html(f);
this.grid.gxAllowSelection=this.allowSelection;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxHoverColor=this.hoverColor;this.grid.selectedRows=[];c=Number(c||0);0<c&&(this.grid.Selectedindex=c-1)}catch(e){gx.dbg.logEx(e,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(a,b){try{if(void 0!==a&&(this.allowCollapsing=gx.lang.gxBoolean(a),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==b)this.collapsed=gx.lang.gxBoolean(b),
this.grid.gxCollapsed=this.collapsed}catch(d){gx.dbg.logEx(d,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(a){try{if(!gx.lang.emptyObject(a)||0===a)this.gridCols=gx.grid.validGridColsValue(parseInt(a)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(a){return a.gxAttId.indexOf&&-1!=a.gxAttId.indexOf("prompt_")?!0:!1};
this.setRowsProperty=function(){var a=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=a){try{this.gridRows=parseInt(a,10)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var a=this.grid.columns.length,b=0;b<a;b++){var d=this.parentObject.getValidStruct(this.grid.columns[b].gxId);d&&(d.gxsgprm&&d.gxsgprm.installed)&&(d.gxsgprm.installed={})}};this.refreshCollection=function(a){try{this.blankGridRows();
this.updatePagingVars();this.initRefreshParms();for(var b=a.length,d=0;d<b;d++){for(var f={Props:[]},c=a[d],e=this.grid.columns.length,g=0;g<e;g++){var j=this.grid.columns[g];f.Props[j.index]=[c[j.gxAttName]]}this.addRow(f)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(h){gx.dbg.logEx(h,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(a){var b=c.Deferred(),d=[b],a=a||{},f=a.loadChildGrids,e=a.fromAutoRefresh,g=a.fromCollection,j=a.isNestedLoad,h=a.immediateApplyInfiniteScroll;
this.isNestedLoad=this.isNestedLoad||j;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.ColumnPropertiesAfterRender=[];this.additiveResponse||(a.addRows||this.clearDefaultEventHandlers(),this.clearHiddens());this.crearInstalledSuggests();this.setRowsProperty();void 0!=this.parentRow&&!gx.lang.emptyObj(this.parentRow.Grids)&&(j=this.parentRow.Grids[this.realGridName],null!=j&&(this.setHtmlTags(j),this.setGridStyles(j),this.setColumnsProperties(j.Columns),
this.addingRows||this.parentRow.IsNew&&this.addRows(j)));var n=!1,j=function(){this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);this.installFixedGridHeader();var f=this,e=this.getGridInnerTableId(),g=this.grid.scroll_last_row_selector(this.gridRows),j=this.grid.scroll_first_row_selector(this.gridRows);this.grid.firstItemSelector="#"+e+j;this.grid.lastItemSelector="#"+e+g;var k=
function(a){a=c.map(a,function(a){return a.onLoadDeferred});c.when.apply(c,a).done(function(){if(f.InfiniteScrolling)if(h)f.handleInfiniteScrolling();else{var a=f.getContainerControl();gx.fn.isVisible(a)?gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",f,f.handleInfiniteScrolling,{single:true}):gx.ol(f.handleInfiniteScrolling,f):gx.dom.getIntersectionObserver(function(b){var d=new b(function(){if(gx.fn.isVisible(a)){d.disconnect();f.handleInfiniteScrolling()}},{root:document.body});d.observe(a)})}b.resolve()})};
this.setupGridComponents(this.GridComponents).then(function(){var b=c.map(f.GridComponents,function(a){return gx.pO.getWebComponent(a.p)});f.isFreestyle&&(d=d.concat(f.loadRowsGrids(n,a)));gx.fx.obs.notify("grid.onafterrender",[f.grid,f.isNestedLoad]);if(f.isNestedLoad){f.isNestedLoad=false;k(b)}else f.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",f,function(){f.infinite_scrolling_after_scroll()}):f.infinite_scrolling_after_scroll():f.applyTemplateObject().then(function(){k(b)});
f.additiveResponse=false});this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)}.closure(this);this.grid.doSort();!1==f?this.grid.render(n,!1,g,j,a):(n=!0,this.grid.render(n,e,g,j,a));var k=c.Deferred();c.when.apply(c,d).done(function(){k.resolve()});return k.promise()};this.getGridInnerTableId=function(){return this.gxComponentContext+this.containerName+"Tbl"};this.disposeTemplateObject=
function(){gx.fx.obs.deleteObserverByKey(this.getContainerControl().id)};this.applyTemplateObject=function(a){var a=a||{},b=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";gx.$.extend(a,{selector:"#"+this.getContainerControl().id,excluded:b,observerKey:this.getContainerControl().id});return gx.plugdesign.applyTemplateObject(a)};var K="gx-wc-bkp_"+j+"_"+b;this.getComponentsBackupContainer=function(){var a=gx.dom.byId(K);a||(a=document.createElement("div"),
a.id=K,a.style.display="none",document.body.appendChild(a));return a};this.destroyComponentsBackup=function(){var a=gx.dom.byId(K);a&&a.parentNode&&gx.dom.removeControlSafe(a)};this.backupComponents=function(){try{if(!this.additiveResponse)for(var a=this.grid.rows.length,b=0;b<a;b++){for(var d=this.grid.rows[b],f=this.grid.columns.length,c=0;c<f;c++)if(this.grid.columns[c].gxControl.type==gx.html.controls.types.webComponent){var e=this.gxComponentContext+"gxHTMLWrp"+this.parentObject.getComponentPrefix(d.gxProps[c][0])+
d.gxId,g=gx.dom.byId(e);g&&(g.parentNode.removeChild(g),this.getComponentsBackupContainer().appendChild(g))}for(var j=d.gxGrids.length,c=0;c<j;c++){var h=d.gxGrids[c];h&&h.isFreestyle&&h.backupComponents()}}}catch(n){gx.dbg.logEx(n,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(a){var b=this.getContainerControl();if(!b)return[];var d=b.firstChild,b=[];if(d.querySelectorAll)b=gx.fn.toArray(d.querySelectorAll("td[data-colindex='"+a+"'], th[data-colindex='"+a+"']"));else{for(var f=
gx.dom.byTag("TD",d),d=gx.dom.byTag("TH",d),c=0,e=f.length;c<e;c++)f[c].getAttribute("data-colindex")==a&&b.push(f[c]);c=0;for(e=d.length;c<e;c++)d[c].getAttribute("data-colindex")==a&&b.push(d[c])}return b};this.applyPropEntireColumn=function(a,b,d){for(var a=this.getEntireGridColumn(a),f=0;f<a.length;f++)gx.fn.setCtrlPropertyImpl(a[f],b,d)};this.setupFixedColumnProperties=function(){for(var a=0;a<this.ColumnPropertiesAfterRender.length;a++){var b=this.ColumnPropertiesAfterRender[a];this.applyPropEntireColumn(b.colIndex,
b.ptyName,b.ptyValue)}};this.addColPropertyAfterRender=function(a,b,d){d={colIndex:a,ptyName:b,ptyValue:d};a="gxpty"+b+a;(b=this.ColumnPropertiesAfterRender[a])?this.ColumnPropertiesAfterRender[b]=d:(b=this.ColumnPropertiesAfterRender.push(d)-1,this.ColumnPropertiesAfterRender[a]=b)};this.setupCellAttributes=function(a){for(var b in a){var d=a[b],f=gx.dom.byId(b);if(f)for(var c in d)f.setAttribute(c,d[c])}};this.setupGridControls=function(a){for(var b=0,d=a.length;b<d;b++){var f=a[b],c=gx.dom.byId(f.hookId),
e=c.parentNode;e&&(e.insertBefore(f.el,c),gx.dom.removeControlSafe(c))}};this.setupGridComponents=function(){var a=function(a,b){var d,f=a.length;for(d=0;d<f;d++){var c=a[d];if(!1!==c.create){var e=gx.createComponent(c.n,c.p);if(null!=e){gx.addComponent(e);e.readServerVars();if(c.load)e.onload(void 0,!0);d==f-1&&b.resolve()}}}},b=function(a){var b,d=a.length;for(b=0;b<d;b++)gx.dom.removeClass(a[b],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(d){var f=c.Deferred(),e,g=d.length,j=[];
0==g&&f.resolve();var h=[];for(e=0;e<g;e++){var n=d[e];if(!1===n.create){var k=gx.dom.byId(n.existingEl);if(k){var l=k.parentNode,n=gx.dom.byId(n.el);gx.dom.removeControlSafe(k);l.appendChild(n);h.push(n)}e==g-1&&f.resolve()}else j.push(n.c)}gx.lang.requestAnimationFrame(b.closure(this,[h]));0<j.length&&gx.html.processCode(j.join(""),!1,a.closure(this,[d,f]));this.destroyComponentsBackup();return f.promise()}}();this.setupGridUsercontrols=function(a){var b=a.length;gx.uc.StartRender();for(var d=0;d<
b;d++){var f=a[d].r,c=a[d].c,f=gx.uc.getNew(this.parentObject,c.gxUCId,c.gxUCLastId,c.gxUCClassName,c.gxUCContainerName+"_"+f,c.gxUCControlName,c.gxUCFieldName,this.gridLvl,this.gridId,f);f.DesignContainerName=c.gxUCContainerName;f.setC2ShowFunction(c.gxShowFunc);for(var e=c.gxC2VFuncs.length,g=0;g<e;g++)f.addC2VFunction(c.gxC2VFuncs[g]);e=c.gxV2CFuncs.length;for(g=0;g<e;g++)f.addV2CFunction(c.gxV2CFuncs[g],c.gxUCFieldName);f.setGridProperties();f.setGridEventHandlers();this.parentObject.setUserControl(f);
f.execV2CFunctions(!0);f.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(a){for(var b=a.length,d=0;d<b;d++){for(var f=a[d].CtrlId,c=a[d].Grid,e=a[d].Row,g=gx.O,j=null,h=gx.fn.controlIds(),n=h.length,k=0;k<n&&!(j=gx.fn.validStruct(h[k]),j.grid==c&&g.CmpContext+j.fld+"_"+e==f);k++);null!=j&&void 0!=j.dp&&gx.fn.installDatePicker(f,j,g,j.dp.f,j.dp.st,j.dp.wn,j.dp.mf,gx.fn.datePickerFormat(j.dp.pic,j.dp.dec,j.len),j.len,j.dp.dec)}};this.installImageControls=function(){var a=
this.gxContainerCtrl,b=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null;this.additiveResponse&&(b&&b.childNodes[0])&&(a=b);a=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",a);if(a[0])for(var b=0,d=a.length;b<d;b++)gx.html.multimediaUpload.createControl(a[b])};this.addComponentToDraw=function(a){this.GridComponents.push(a)};this.addUsercontrolToDraw=function(a){this.GridUserControls.push(a)};this.addDatepickerToSetup=function(a){this.DatePickersControls.push(a)};this.addControlToReuse=
function(a){a.el.parentNode&&gx.dom.removeControlSafe(a.el);this.GridControls.push(a)};this.loadRowsGrids=function(a,b){for(var b=b||{},d=[],f=this.grid.rows.length,c=this.additiveResponse||b.addRows?this.firstAdditiveRow:0;c<f;c++)d=d.concat(this.loadRowGrids(this.grid.rows[c],a));return d};this.loadRowGrids=function(a,b){for(var d=a.gxGrids.length,f=[],c=0;c<d;c++){var e=a.gxGrids[c];e.grid.setContainerDelayed(gx.dom.byId(e.gxContainerDivName));if(b){if(void 0!=e.parentRow&&!gx.lang.emptyObj(e.parentRow.Grids)){var g=
e.getDataHiddenName();gx.fn.setHidden(g,gx.json.serializeJson(e.parentRow.Grids[e.realGridName]))}f.push(e.loadGrid({isNestedLoad:!0}))}else f.push(e.refreshGrid({isNestedLoad:!0}));a.IsNew=!1}return f};this.updateRcdCount=function(){if(this.hasForEachLine||this.parentObject.isTransaction())gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var a=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+
"_ROW");if(0==this.lastRowId||parseInt(a,10)>this.lastRowId)this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(a,b,d){try{var f=this,c=d=d||gx.fn.currentGridRow(a.grid).toString(),e=d.length;if(4<e){var g=d.substring(4,e),f=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+g,this.isMasterPageGrid);if(!f)return;c=d.substring(0,4)}var j=parseInt(c,10)-1;!0==b&&f.setRowModified(d);var h=f.getColumnIndexByName(a.fld),n=gx.dom.el(this.gxComponentContext+
a.fld+"_"+d);f.updateRowValue(h,j,n);return f}catch(k){gx.dbg.logEx(k,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(a,b,d){var f=a.lastIndexOf("_");if(-1!=f){var c=a.substring(0,f);if(f=this.grid.getRowByGxId(a.substring(f+1)))if(c=this.grid.getColumnByHtmlName(c)){var e=this.parentObject[d.gxvar];"decimal"==d.type&&gx.lang.instanceOf(e,Number)&&(e=e.toFixed(d.dec));f.values[c.index]=e;f.gxProps[c.index]||(f.gxProps[c.index]={});if((a=gx.dom.el(a))&&"SELECT"==a.tagName)f.gxProps[c.index].Values=
gx.dom.comboBoxToObj(a);f.gxProps[c.index].Value=e;f.gxProps[c.index].FormattedValue=b}}};this.getColumnIndexByName=function(a){for(var b=this.grid.columns,d=b.length,f=0;f<d;f++)if(b[f].htmlName==a)return f;return-1};this.setRowModified=function(a){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+a,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(a)};this.validateRow=function(a){if(a)try{var b=a.getAttribute("data-gxgridid");
gx.fn.setCurrentGridRow(b,a.gxrow);var d=gx.fn.lastGridControl(b);gx.csv.validControls(gx.csv.lastId,d+1,!0,gx.O)}catch(f){gx.dbg.logEx(f,"gxgrid.js","validateRow")}};this.updateRowValue=function(a,b,d){var b=this.grid.getRowById(b),f=this.grid.columns[a];"checkbox"==d.type&&(d.value=d.checked?f.gxChecked:f.gxUnChecked);d=this.parentObject.getValidStruct(this.grid.columns[a].gxId).val(b.gxId);b.values[a]=d;gx.lang.emptyObject(b.gxProps[a])||(b.gxProps[a].Value=d,b.gxProps[a].FormattedValue=gx.fn.getControlValue(this.grid.columns[a].htmlName+
"_"+b.gxId,"screen"));this.parentObject.isTransaction()&&(a=this.columnIndexInKey(f.gxAttId),-1!=a&&(b.gxKeyValues[a]=d));f.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+f.htmlName+"_"+b.gxId+"_gxBlob",d)};this.expandCollapse=function(a,b){gx.evt.cancel(b,!0);var d=gx.dom.byId(this.getGridInnerTableId());null!=d&&(this.collapsed?(c(d).removeAttr("data-gx-sr-only"),a.src=gx.ajax.getImageUrl(gx,"collapseImage")):(c(d).attr("data-gx-sr-only",""),a.src=gx.ajax.getImageUrl(gx,
"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(d=this.gridName.substring(this.gridName.lastIndexOf("_")),d=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+d):d=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(d,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(a){var b=a.gxrow;gx.lang.emptyObject(b)&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return this.grid.getRowByGxId(b)};
this.showContextMenu=function(a,b){this.contextMenu.show(a,b)}},contextMenu:function(c){this.gxgrid=c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var e=new gx.text.stringBuffer;this.show=function(c,a){this.gxgrid.validateRow(c);this.contextEvent=a;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(a,!0);this.rowClicked=c;this.startMenu();e.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");
this.endMenu()};this.startMenu=function(){e.clear();var c=this.getMenuCoords();e.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');e.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');e.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");
e.append("top:"+c.top+"; left:"+c.left+";").append('">')};this.endMenu=function(){e.append("</div>");var c=gx.dom.byId(this.controlName);null==c&&(c=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),c.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",
IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(c),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=e.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};
this.getMenuCoords=function(){var c=0,a=0,b=this.contextEvent;if(b.pageX||b.pageY)c=b.pageX,a=b.pageY;else if(b.clientX||b.clientY)c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:c,top:a}};this.contextMenuClicked=function(c){this.handleContextMenuAction(gx.evt.source(c).id);this.hide()};this.handleContextMenuAction=function(c){switch(c){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);
break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},getPaddedRowId:function(c){c=""+c;return"0000".substring(0,4-c.length)+c},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):
gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):
"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}}}(gx.$);
gx.grid.impl=function(c){return function(h){var e=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnAutoHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";
this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=h;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;
var b=this.columns.length;a.index=b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.getColumnByCtrlType=function(a){return c.map(this.columns,function(b){return b.gxControl.type==a?b:null})};this.addRow=function(a,b){a.table=this;if(a!=null){this.rows[this.rows.length]=
a;typeof a.id!="undefined"&&(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,d;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){d=a.substring(0,this.gxCmpContext.length);if(d==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};this.getColumnByGxId=
function(a){return this.columnsGxId[a]};this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var d=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(d&&d.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:gx.lang.booleanValue(b);
else{this.sortColumn=a;this.ascSort=b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:true})};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};
this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.byId(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName==
"A")a.parentNode.style.display="inline"}};this.appendDeleteHeader=function(a,b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var d=this.isGxTrn(),f=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)f=true;else return;else gx.grid.deletePosition==b&&(f=true);if(d&&f){d="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)d=gx.grid.deleteTitle;a.append('<th class="'+this.columnAutoHeaderClass+'">'+
d+"</th>")}}};this.appendDeleteImage=function(a,b,d){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var f=false,c=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){f=b.gxDeleted();c=b.gxIsMod()||b.gxExists()}var e=this.deleteImgId(b.gxId),g=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(d==gx.grid.deletePositions.left)g=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==d)g=true;else if(this.gxIsFreestyle){var h=
gx.grid.deletePositionFree;d==gx.grid.deletePositions.left?g=h==gx.grid.deletePositions.topL||h==gx.grid.deletePositions.bottomL:d==gx.grid.deletePositions.right&&(g=h==gx.grid.deletePositions.topR||h==gx.grid.deletePositions.bottomR);d=h}if(g){var q="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(d)+" gx-remove-row-"+this.deleteVerticalAlign(d)+'" style="text-align:'+this.deleteImageAlign(d)+";vertical-align:"+this.deleteVerticalAlign(d)+'">',d="</"+this.CELL_TAG+">",
g="",h=false;if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)g=gx.grid.undeleteImage;else if(c&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)g=gx.grid.deleteImage;else if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)g=gx.grid.deleteImage;else{g=gx.grid.deleteImage;h=true}f="";a.append(q);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){c=gx.fn.firstGridControl(this.ownerGrid.gridId);f=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+
this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+c+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+"',"+this.ownerGrid.gridId+')"');b="";h&&(b=b+"display:none;");b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+e+'" src="'+g+'"');f&&a.append(' title="'+f+'"');a.append(' style="border-style: none;');h&&a.append("display:none;");a.append('"');a.append(' class="gx-grid-delete"/>');this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.images&&a.append("</a>");a.append(d)}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==
gx.grid.deletePositions.topL)b="left";return b}return"center"};this.getRowByPos=function(a){return this.container.querySelector(" tbody>tr:nth-child("+a+")")};this.scroll_last_row_selector=function(a){return this.ownerGrid.additiveResponse?" tbody tr:nth-last-child("+Math.min(a/2,1)+")":" tbody tr:last-child"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(a,b){var d=this.ROW_TAG,
f=this.ROW_BASE_CLASS;if(this.gxIsFreestyle)d=this.CELL_TAG;f=f+((f?" ":"")+(a?this.evenRowClass:this.oddRowClass)+(b?" RowDeleted":""));return{cls:f,tag:d}};this.simpleAppendFn=function(a){return function(b){b.append(a)}};this.appendGridStyle=function(a){var b=e.exec(this.gxHtmlTags);b&&b.length>1&&a.append(b[1]);gx.lang.emptyObject(this.gxBackground)||a.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');");gx.lang.emptyObject(this.gxBorderWidth)||a.append(";border: solid "+
this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?a.append(";"):a.append(this.gxBordercolor+";");this.ownerGrid.width>0&&a.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(a){a.append(this.gxHtmlTags.replace(e,""));this.gxAllowCollapsing&&this.gxCollapsed&&a.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(a){this.gxHtmlTags.indexOf("class=")==-1&&a.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=
function(a){a.append('<div valign="top" ><div>');a.append('<img class="collapse-icon" style="cursor:pointer;" src="');this.gxCollapsed?a.append(gx.ajax.getImageUrl(gx,"expandImage")):a.append(gx.ajax.getImageUrl(gx,"collapseImage"));a.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></div><div>')};this.appendCollapsingWrapperEnd=function(a){a.append("</div></div>")};this.appendContainerStart=function(a,b){b.append("<table ");this.appendGridClassAttribute(b);b.append(' id="'+
a+'" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');b.append('style="');this.appendGridStyle(b);b.append('" ');this.appendGridAttributes(b);if(!this.isAbstract){b.append('data-bkgstyle="');b.append(gx.grid.styles[this.gxTitleBackstyle]);b.append('" ')}b.append(">");if(!gx.lang.emptyObject(this.header)){b.append("<caption>");b.append(this.header);b.append("</caption>")}};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(a,
b){gx.lang.emptyObject(this.headerText)||b.append('<tr><td colspan="'+a+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(a,b){gx.lang.emptyObject(this.footerText)||b.append('<tr><td colspan="'+a+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>")};this.appendHeader=function(a,b){var d=a.length,f=[],c=gx.ajax.getImageUrl(gx,"ascImage"),e=gx.ajax.getImageUrl(gx,"descImage"),g=0,h;b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,
gx.grid.deletePositions.left);for(var q=0;q<d;q++){var p=a[q];h=[p.gxColumnClass||p.gxControl.columnClass,p.columnheaderclass||"",this.columnAutoHeaderClass].join(" ");b.append('<th class="'+h+'"');h="white-space:nowrap;";gx.lang.gxBoolean(p.visible)||(h=h+"display:none;");if(p.width){if(!p.gxWidthUnit)p.gxWidthUnit="px";h=h+("width:"+p.width+p.gxWidthUnit+";")}p.align&&(h=h+("text-align:"+p.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||
this.gxTitleBackstyle==gx.grid.styles.report)){h=h+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform){h=h+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(h=h+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(h=h+this.gxTitleFont);p.titlefontunderline?h=h+
"text-decoration: underline;":p.titlefontstrikethru&&(h=h+"text-decoration: line-through;");p.titlefontbold&&(h=h+"font-weight: bold;");p.titlefontitalic&&(h=h+"font-style: italic;");p.titlebackcolor&&(h=h+("background-color:"+gx.color.html(p.titlebackcolor).Html+";"));p.titleforecolor&&(h=h+("color:"+gx.color.html(p.titleforecolor).Html+";"));b.append(' style="'+h+';"');b.append(' data-colindex="'+g+'"');b.append(">");g++;if(gx.lang.emptyObject(gx.text.trim(p.title)))b.append("&nbsp;");else{b.append("<span");
p.gxTooltip&&b.append(' title="'+p.gxTooltip+'"');p.sortable&&b.append(' onclick="'+this.gridObject()+".grid.setSort("+p.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"");b.append(">");b.append(p.title);if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=c;this.descLabel.src=e;p.sortable&&this.sortColumn==p.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,f))}b.append("</span>")}b.append("</th>")}this.appendDeleteHeader(b,
gx.grid.deletePositions.right);b.append("</tr>");b.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");
this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnAutoHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;c.each(this.beforeRenderCallbacks,
function(a,b){b()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var a=this.ownerGrid,b=a.getGridInnerTableId();a.emptyText&&c("#"+b+" + .gx-text-gridnodata").length===0&&c(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(a.emptyText).insertAfter(c("#"+b));this.rows.length===0?c("#"+b).attr("data-gx-grid-nodata",""):c("#"+b).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){var a,b,d=["onblur","onclick","onfocus","onchange"],f=gx.dom.byTag("input",
this.container);b=0;for(a=f.length;b<a;b++)gx.dom.purgeElement(f[b],d);f=gx.dom.byTag("textarea",this.container);b=0;for(a=f.length;b<a;b++)gx.dom.purgeElement(f[b],d);f=gx.dom.byTag("select",this.container);b=0;for(a=f.length;b<a;b++)gx.dom.purgeElement(f[b],d);f=gx.dom.byTag("span",this.container);b=0;for(a=f.length;b<a;b++)gx.dom.purgeElement(f[b],d);f=gx.dom.byTag("img",this.container);b=0;for(a=f.length;b<a;b++)gx.dom.purgeElement(f[b],d)};this.render=function(a,b,d,f,c){var a=!!a,e=this.ownerGrid.getGridInnerTableId(),
g=this.container;this.ownerGrid.disposeTemplateObject();this.beforeRender();this.ownerGrid.additiveResponse&&this.doSort();a=this.drawGrid(e,a,b,d,c);gx.dom.shouldPurge()&&this.purgeGrid();var h=gx.dom.getActiveElement(),b=h?h.tagName.toUpperCase():"",g=h&&(h.id||h.name)&&b!="FORM"&&gx.dom.isChildNode(h,g),q=gx.dom.getCaretOffset(h);this.setGridHtml(this.container,a,c);this.ownerGrid.isNestedLoad||gx.dom.fixes.fixTableResets(this.container);this.ownerGrid.applyTemplateObject({deferred:false});this.gxIsFreestyle||
this.ownerGrid.instanciateRow(gx.fn.currentGridRowImpl(this.ownerGrid.gridId));this.ownerGrid.additiveResponse&&this.sortColumn!=-1&&this.ownerGrid.handleInfiniteScrolling();g&&setTimeout(function(){var a=gx.dom.el(h.id||h.name,false,true);if(a){gx.csv.disableFocus=true;a.offsetWidth>0&&a.offsetHeight>0&&gx.fn.setFocus(a,function(){gx.dom.setCaretOffset(a,q)})}},10);this.drawEmptyContent();this.afterRender(e);f();this.rendered=true};this.setGridHtml=function(a,b,d){d=d||{};gx.csv.IgnoreBlur=true;
var f,e=this.ownerGrid.InverseLoading,g;if(this.ownerGrid.additiveResponse||d.addRows)if(this.sortColumn!==-1){a.innerHTML=b;gx.plugdesign.applyTemplateObject({selector:a})}else{if(this.gxIsFreestyle){a=document.createElement("div");a.className="gx-sr-only";a.innerHTML=b;a.setAttribute("data-gx-grid-rendering-additive-rows","");f=c(a);b=e?this.firstItemSelector:this.lastItemSelector;e?f.insertBefore(b):f.insertAfter(b)}else e?f=c(b).insertBefore(this.firstItemSelector):a=c(b).insertAfter(this.lastItemSelector);
this.newAdditiveRows=f;gx.plugdesign.applyTemplateObject({selector:f,deferred:true}).then(function(){if(this.newAdditiveRows){g=this.newAdditiveRows.children();e?g.insertBefore(this.newAdditiveRows):g.insertAfter(this.newAdditiveRows);this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render");this.newAdditiveRows.remove();delete this.newAdditiveRows}}.closure(this))}else a.innerHTML=b;gx.csv.IgnoreBlur=false};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=
function(a,b,d,f,c){var c=c||{},e=this.isGxTrn(),g=this.gxIsFreestyle&&this.gxGridCols>1,h=new gx.text.stringBuffer,q=this.columns,d=q.length,p,n,o,l,t,u,w,r,v=this.ownerGrid.additiveResponse||c.addRows;!this.gxIsFreestyle&&e&&d++;var B,x;if(v||c.immediateApplyInfiniteScroll){B=!v&&(this.firstRecordOnPage=="0"||this.sortColumn!=-1)?0:this.lastRenderedRow;x=this.rows.length;this.ownerGrid.firstAdditiveRow=B}else if(Number(this.pageSize)!==0){c=this.getMaxPage();if(this.currentPage<=0)this.currentPage=
1;else if(this.currentPage>c)this.currentPage=c;B=Math.max(this.pageSize*(this.currentPage-1),0);x=Math.min(B+this.pageSize,this.rows.length)}else{B=0;x=this.rows.length}this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(h);var J=q.length;if(!this.gxIsFreestyle&&x>B)for(c=0;c<J;c++){o=q[c];if(u=gx.lang.gxBoolean(o.visible)){var E=false;for(p=B;p<x&&!E;p++){n=this.rows[p];r=o.gxControl;w=n.gxProps[o.index];f||r.setProperties.apply(r,w);r.visible&&(E=true)}if(!E)o.visible=false}}if(!v||this.sortColumn!=
-1){this.appendContainerStart(a,h);this.appendHeaderText(d,h);this.gxIsFreestyle||this.appendHeader(q,h);this.appendBodyWrapperStart(h)}var O=true,a=function(){O=!O;n=this.rows[p];b&&(p===B&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,n.gxId);var a=n.gxDeleted(),d=new gx.text.stringBuffer,c=this.getRowRenderingProps(O,a,p,B,x);if(g&&this.gxIsFreestyle&&(p>0&&p%this.gxGridCols===0||p===0&&this.gxGridCols>0)){p>0&&this.appendRowEnd(h,p,B,x);this.appendRowStart(h,p,B,x)}var j=
"";this.gxTitleBackstyle==gx.grid.styles.report&&(j=O?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)j=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)j=this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&g){this.appendRowPrefix(d,p,B,x);d.append("<"+c.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId+"'");this.gxIsFreestyle||d.append(' data-gxrendering_row=""');if(this.gxIsFreestyle&&g){d.append(' data-gxrow="'+
n.gxId.toString()+'"');(t=this.columns[1].gxControl.verticalAlign)&&d.append(' data-cell-valign="'+t+'"')}else d.append(' data-gxrow="'+n.gxId.toString()+'"');d.append(' class="'+c.cls+'"');n.selected&&d.append(' data-selected="1"');var v="";j&&(v="background-color:"+j+";");gx.lang.emptyObject(this.gxLinesFont)||(v=v+this.gxLinesFont);v&&d.append(' style="'+v+'" ');d.append(">");h.append(d.toString())}if(this.gxIsFreestyle){g&&this.appendRowBreaksWrapperStart(h,n);l=this.gxBuffer.toString();h.append(l)}this.gxIsFreestyle||
this.appendDeleteImage(h,n,gx.grid.deletePositions.left);this.appendCellPrefixStart(h,p,B,x,n,c);for(d=0;d<J;d++){o=q[d];u=gx.lang.gxBoolean(o.visible);w=n.gxProps[o.index];v=n.values[o.index];r=o.gxControl;if(this.gxIsFreestyle&&r.type==gx.html.controls.types.row&&o.index===0)r.isFreestyleRow=true;r.setGridData({grid:this.ownerGrid,row:n,gridId:this.gxId,gridRow:n.gxId});if(f){delete r.formattedValue;r.value=v;r.id=o.htmlName+"_"+r.gridRow}else{r.setProperties.apply(r,w);if(r.isFreestyleRow)r.cssClass=
c.cls}if(b)delete gx.usrPtys[r.id];else if(gx.usrPtys[r.id]!==void 0)for(var E in gx.usrPtys[r.id]){if(E=="enabled")r.rtEnabled=true;r.setIndividualProp(E,gx.usrPtys[r.id][E])}if(a){r.rtEnabled=true;r.enabled=false}v=this.parentGxObject.getValidStruct(o.gxId);if(typeof w.Value!=="undefined")r.value=gx.decimalPoint!="."&&v&&v.type=="decimal"&&typeof w.Value=="string"?w.Value.replace(".",gx.decimalPoint):w.Value;if(typeof w.FormattedValue!=="undefined")r.formattedValue=w.FormattedValue;if(typeof r.formattedValue===
"undefined")if(f&&v&&v.v2c){r.persistValue();v.v2c(n.gxId);r.formattedValue=gx.fn.getControlValue(r.id)}else r.formattedValue=r.value;if(w.Values)r.possibleValues=w.Values.v;if(this.gxIsFreestyle&&r.type==gx.html.controls.types.row&&o.index===0){r.id=this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId;if(e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)r.oncontextmenu=this.gridObject()+".showContextMenu(this, event);";if(j)r.style=r.style+("background-color:"+j+";")}if(!this.gxIsFreestyle){h.append("<"+
this.CELL_TAG+' class="gx-attribute '+(r.columnClass||"")+'" data-cell-valign="'+o.valign+'"');h.append(' data-colindex="'+d+'"');v="";if(!u){v=v+"display:none;";r.visible&&(!o.isGxRemove()&&!this.ownerGrid.isPromptColumn(o))&&this.ownerGrid.addColPropertyAfterRender(d,"Visible",1)}if(o.width){if(!o.gxWidthUnit)o.gxWidthUnit="px";v=v+("width:"+o.width+o.gxWidthUnit+";")}else if(o.gxColSize)r.colSize=o.gxColSize;o.align&&(v=v+("text-align:"+o.align+";"));r.style&&(v=v+r.style.replace(/content:var\(.*\);/,
""));v&&h.append(' style="'+v+'" ');h.append(">")}h.append(r.getHtml());this.gxIsFreestyle&&(r.type==gx.html.controls.types.row&&o.index===0)&&this.appendDeleteImage(h,n,gx.grid.deletePositions.left);r.persistValue();this.gxIsFreestyle||h.append("</"+this.CELL_TAG+">");if(this.gxIsFreestyle){o.index==this.columns.length-1&&this.appendDeleteImage(h,n,gx.grid.deletePositions.right);l=o.buffer.toString();h.append(l)}}this.appendCellPrefixEnd(h,p,B,x);this.gxIsFreestyle&&g?this.appendRowBreaksWrapperEnd(h):
this.appendDeleteImage(h,n,gx.grid.deletePositions.right)};if(this.ownerGrid.InverseLoading)for(p=x-1;p>=B;p--)a.apply(this);else for(p=B;p<x;p++)a.apply(this);this.gxIsFreestyle&&(this.gxGridCols>0&&g)&&this.appendRowEnd(h);this.lastRenderedRow=x;if(!v){this.appendBodyWrapperEnd(h);this.appendFooterWrapperStart(h);!this.ownerGrid.InfiniteScrolling&&(e||this.hasPagingButtons())&&this.appendNavigationBar(d,h);this.appendFooterText(d,h);this.appendFooterWrapperEnd(h);this.appendContainerEnd(h);this.gxAllowCollapsing&&
this.appendCollapsingWrapperEnd(h)}a=h.toString();h.clear();h=null;return a};this.defineEventHandlers=function(){var a={},b;if(this.ownerGrid&&this.ownerGrid.parentObject&&this.ownerGrid.parentObject.IsComponent)b=this.ownerGrid.parentObject;if(b){b=gx.pO.getWebComponent(b.CmpContext);a.hookKey=b&&b.getContainer()&&b.getContainer().id}if(!this.gxIsFreestyle){gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this,a);gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this,a)}this.isGxTrn()&&
this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this,a);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[],true),this,a);gx.evt.attach(this.container,"click",this.clickHandler,this,a);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this,a)};this.isGridRow=function(a){return a&&a.tagName.toLowerCase()==this.ROW_TAG&&a.getAttribute("data-gxrow")!=null&&c(a).closest(".gx-grid")[0]==
this.container};this.getTargetRow=function(a,b){for(var d=a;d&&gx.dom.isChildNode(d,this.container);){if(this.isGridRow(d)&&(!b||b=="body"&&d.parentNode.tagName=="TBODY"||b=="header"&&d.parentNode.tagName=="THEAD"))return d;d=gx.dom.findParentByTagName(d,this.ROW_TAG)}};this.mouseOverHandler=function(a){if(!gx.runtimeTemplates&&this.gxAllowHovering)if((a=this.getTargetRow(gx.evt.source(a)))&&a.getAttribute("data-selected")!="1"){this.toggleRowHoverById(this.gxHoveredRowId,false);this.startRowHover(a);
this.gxHoveredRowId=parseInt(a.getAttribute("data-gxrow").substring(0,4),10)-1}};this.mouseOutHandler=function(a){if(!gx.runtimeTemplates&&this.gxAllowHovering)(a=this.getTargetRow(gx.evt.source(a)))&&a.getAttribute("data-selected")!="1"&&this.endRowHover(a)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a));b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=function(a,b){var d=this.getTargetRow(gx.evt.source(a));if(d){b=typeof b==="undefined"?this.gxAllowSelection&&
!this.gxIsFreestyle:b;this.setRowSelected(d,d.getAttribute("data-gxrow"),false,b)}};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a))&&this.ownerGrid.rowKeyPressed(a)};this.clickHandler=function(a){var b=gx.evt.source(a);b.parentNode&&gx.dom.hasClass(b.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(b,a)}.closure(this))};this.pagingHandler=function(a,b){var d="";gx.evt.cancel(b,true);if(!gx.dom.hasClass(a,this.pagingButtonDisabled)){gx.dom.hasClass(a,
this.pagingButtonFirstClass)?d="FIRST":gx.dom.hasClass(a,this.pagingButtonPreviousClass)?d="PREV":gx.dom.hasClass(a,this.pagingButtonNextClass)?d="NEXT":gx.dom.hasClass(a,this.pagingButtonLastClass)&&(d="LAST");this.changeGridPage(d)}};this.changeGridPage=function(a,b){var d=c.Deferred(),f=this.gxGridName.toUpperCase()+"PAGING",e=this.ownerGrid,g="",h;if(a){e.InfiniteScrolling||this.mask();if(gx.pO.fullAjax){gx.setGxO(this.parentGxObject);g="E"+e.realGridName.toUpperCase()+"_"+a+"PAGE"+(e.isMasterPageGrid?
"_MPAGE":"");if(e.parentGrid)h=e.parentGrid.gridId}else{gx.fn.setHidden(this.gxCmpContext+f,a);g=this.gxCmpContext+"E"+f+"."}gx.evt.execEvt(void 0,void 0,g,gx.evt.dummyCtrl,h,void 0,void 0,false,function(){this.unmask();d.resolve()}.closure(this),b);return d.promise()}};this.setRowSelected=function(a,b,d,f,e){gx.grid.setActiveGridRow(this,b);var f=f===void 0||f,e=e===void 0||e,g=function(){var d=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){if(f&&!gx.runtimeTemplates&&a.gxOriginalBackcolor===
void 0)a.gxOriginalBackcolor=a.style.backgroundColor;this.instanciateSelectionVars(b);var g=this.getRowByGxId(b),h=this.selectedRows||[],s=[];g&&h.push(g);for(g=0;g<h.length;g++){var n=h[g];n.selected=n.gxId==b;if(n.selected){if(f){if(!gx.runtimeTemplates){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;if(this.gxSelectionColor)a.style.backgroundColor=this.gxSelectionColor.Html}gx.dom.addClass(a,this.selectedRowClass);c(a).attr("data-gxselected","")}s.push(n)}else if(f){n=
gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId);if(n!=null&&n.gxSBackcolor!==void 0&&!gx.runtimeTemplates)n.style.backgroundColor=n.gxSBackcolor;gx.dom.removeClass(n,this.selectedRowClass);c(n).removeAttr("data-gxselected")}}for(g=0;g<s.length;g++)this.instanciateSelectedRow(s[g],!e);gx.setGxO(d)}};d&&(f||gx.O.isTransaction())?setTimeout(g.closure(this),100):g.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+
this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a,b){this.selectedRows=[a];this.setSelectedRowVars(a);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading){gx.csv.instanciatedRowGrid=this.ownerGrid;if(!b){var d=this.parentGxObject;gx.lang.doCallTimeout(function(){gx.evt.doAfterProcessing(function(){if(d.fullAjax){var b=d.isServerEvent(this.gxOnLineActivate);gx.evt.dispatcher.dispatch(d.getServerEventName(this.gxOnLineActivate),d,this.ownerGrid.gridId,a.gxId,
b)}else d[this.gxOnLineActivate].call(d,a.gxId)},this)},this,[],100)}}};this.setSelectedRowVars=function(a){for(var b=this.parentGxObject,d=this.columns.length,f=0;f<d;f++){var c=b.GXValidFnc[this.columns[f].gxId];c!=null&&c.c2v&&c.c2v(a.gxId)}};this.scrollIntoView=function(a,b,d){function f(a,b,d,e){return{left:a,top:b,width:d,height:e,right:a+d,bottom:b+e,translate:function(c,g){return f(c+a,g+b,d,e)},relativeFromTo:function(g,h){var k=a,s=b,g=g.offsetParent,h=h.offsetParent;if(g===h)return c;for(;g;g=
g.offsetParent){k=k+(g.offsetLeft+g.clientLeft);s=s+(g.offsetTop+g.clientTop)}for(;h;h=h.offsetParent){k=k-(h.offsetLeft+h.clientLeft);s=s-(h.offsetTop+h.clientTop)}return f(k,s,d,e)}}}var c,e;for(c=f(a.offsetLeft,a.offsetTop,a.offsetWidth,a.offsetHeight);e=a.parentNode;){var g=e.offsetLeft+e.clientLeft,h=e.offsetTop+e.clientTop+d;c=c.relativeFromTo(a,e).translate(-g,-h);e.scrollTop=false===b||c.top<=e.scrollTop+e.clientHeight&&e.scrollTop<=c.bottom-e.clientHeight+d+e.clientHeight?Math.min(c.top,
Math.max(c.bottom-e.clientHeight+d,e.scrollTop)):(c.bottom-e.clientHeight+d+c.top)/2;c=c.translate(g-e.scrollLeft,h-e.scrollTop);a=e}};this.keepGridItemVisible=function(a,b){var d=gx.util.browser.isOldIE(),f=c(this.ownerGrid.getContainerControl()),e=!d?c("#"+this.ownerGrid.getContainerControlId()+" > table > tbody"):f.closest(".gx-grid-fixed-header-ie7");if(e.length>0&&e[0].offsetHeight<e[0].scrollHeight)if(e=this.ownerGrid.getRowCtrlByIdx(a)){d=d?parseInt(f.css("paddingTop"),10):0;this.scrollIntoView(e,
b,d)}};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+1,true,false)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,true,true)};this.toggleRowHoverById=function(a,b,d){var f=this.ownerGrid.getRowCtrlByIdx(a),c=false;if(f){c=true;if(b){this.toggleRowHoverById(this.gxHoveredRowId,false);this.startRowHover(f);this.gxHoveredRowId=a;this.keepGridItemVisible(a,d)}else this.endRowHover(f)}return c};this.getRowByDOMCtrl=function(a){return this.getRowById(parseInt(a.getAttribute("data-gxrow").substring(0,
4),10)-1)};this.startRowHover=function(a){if(gx.runtimeTemplates)c(a).addClass("gx-row-hovered");else{if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;var b=this.getRowByDOMCtrl(a);if(this.gxAllowHovering&&this.gxHoverColor&&!b.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html}}};this.endRowHover=function(a){if(gx.runtimeTemplates)c(a).removeClass("gx-row-hovered");else{var b=this.getRowByDOMCtrl(a);if(this.gxAllowHovering&&
!b.selected&&a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor}};this.hasPagingButtons=function(){return this.usePaging&&this.pageSize>0&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(a,b){gx.lang.emptyObject(this.gxRealTitleBackColor)?b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+
';">')};this.appendNavBarRowEnd=function(a){a.append("</td></tr>")};this.appendNavigationBar=function(a,b){var d=this.getRowCount(),f=a,d=(d>0||d===0&&!this.isFirstPage())&&this.usePaging,c=this.parentGxObject.Gx_mode,c=this.isGxTrn()&&!this.gxHasAddlines&&!(c=="DSP"||c=="DLT");this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)f=this.gxGridCols;(d||c)&&this.appendNavBarRowStart(f,b);if(d){b.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">');
if(this.currentPage<=0)this.currentPage=1;b.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first")));b.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous")));b.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next")));b.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last")));b.append("</div>")}c&&b.append(this.buildLink("["+
this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));(d||c)&&this.appendNavBarRowEnd(b)};this.buildPagingButton=function(a,b,d){return'<button type="button" class="'+a+(b?"":" "+this.pagingButtonDisabled)+'"'+('style="padding-left:20px;padding-bottom:5px;'+(b?"":"opacity:.7;cursor:default")+'"')+' title="'+d+'"'+(b?"":" disabled")+"/>"};this.buildLink=function(a,b,d,c,e){var g=this.navigationLinkClass;
return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+e+'" onblur="this.style.textDecoration = \'none\';"><span '+(c!==void 0?'id="'+c+'"':"")+' style="'+("cursor:"+(document.createTextRange?"hand":"pointer")+";")+'" class="'+g+'" onclick="'+b+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+d+"';return true;\" onMouseOut=\"this.className='"+g+"';window.status='';return true;\">"+a+"</span></a>"};this.isLastPage=
function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)=="0"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var g=0;this.handleLabel=function(a){if(a.src){var b="img"+g;g++;return"<img name='"+b+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&
b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var d=a.table,c=d.getColumnByIndex(d.sortColumn),e,g;e=a.values[d.sortColumn];g=b.values[d.sortColumn];gx.lang.instanceOf(e,Array)||(e=[e]);gx.lang.instanceOf(g,Array)||(g=[g]);switch(c.type){case gx.types.numeric:c=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:c=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,
"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:c=function(a){return gx.lang.booleanValue(a)?1:0};break;default:c=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var h=Math.max(e.length,g.length),m=0,q=0;m===0&&q<h;q++){var p=e[q];p==null&&(m=-1);var n=g[q];n==null&&(m=1);if(m===0){p=c(p);n=c(n);m=typeof p.localeCompare=="function"?p==n?0:p.localeCompare(n):p==n?0:p>n?1:-1}m!==0&&(m=m*(d.ascSort?1:-1))}return m};this.mask=function(){var a=this.container||typeof this.getContainerControl===
"function"&&this.getContainerControl();a&&a.firstChild&&gx.dom.mask(a.firstChild)};this.unmask=function(){var a=this.container||typeof this.getContainerControl==="function"&&this.getContainerControl();a&&a.firstChild&&gx.dom.unmask(a.firstChild)}}}(gx.$);
gx.grid.column=function(c,h,e,g,a){this.table=null;this.index=-1;this.title=c||"";this.type="undefined"!=typeof h?h:gx.types.character;this.width=e||"";this.align=g||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(c,h,e,g){this.table=null;this.id=c;this.gxParentRowId=g||"";this.gxId=e+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=h.Props||[];this.gxRenderProps=h.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(c){var h=["xs","sm","md","lg"];return function(e){e=new gx.grid.impl(e);e.appendContainerStart=function(c,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+c+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');this.appendGridAttributes(a);a.append(">")};e.getRowByPos=function(c){return this.container.querySelector((1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+
c+")")};e.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"};e.scroll_firt_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"};e.ROW_TAG="div";e.CELL_TAG="div";e.ROW_BASE_CLASS="row";e.getRowRenderingProps=function(e,a){var b=this.ROW_TAG,d=this.ROW_BASE_CLASS,f=this.gxGridResponsiveCols;this.gxIsFreestyle&&(b=this.CELL_TAG,d=c.map(h,function(a,b){return["col-",a,"-",Math.floor(12/(f[b]||12))||1].join("")}).join(" "));
this.gxIsFreestyle||(d+=" "+(e?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:d,tag:b}};e.appendGridClassAttribute=function(c){c.append(' class="'+this.gxCssClass+'"')};e.appendGridAttributes=function(c){this.gxAllowCollapsing&&this.gxCollapsed&&c.append(" data-gx-sr-only ")};e.appendContainerEnd=e.simpleAppendFn("</div>");e.appendHeaderText=gx.emptyFn;e.appendFooterText=gx.emptyFn;e.appendHeader=gx.emptyFn;e.appendBodyWrapperStart=gx.emptyFn;e.appendBodyWrapperEnd=gx.emptyFn;
e.appendFooterWrapperStart=e.simpleAppendFn("<div>");e.appendFooterWrapperEnd=e.simpleAppendFn("</div>");e.appendRowStart=function(c,a,b){a==b&&!0!==this.ownerGrid.additiveResponse&&c.append('<div class="row">')};e.appendRowEnd=function(c,a,b,d){a==d&&!0!==this.ownerGrid.additiveResponse&&c.append("</div>")};e.appendRowBreaksWrapperStart=function(c,a){c.append("<div>");this.appendDeleteImage(c,a,gx.grid.deletePositions.left)};e.appendRowBreaksWrapperEnd=e.simpleAppendFn("</div></div>");e.appendRowPrefix=
function(e,a,b){if(a!=b){var d=this.gxGridResponsiveCols,f=!1,b=c.map(h,function(b,c){return 1!=d[c]&&0===a%d[c]||0===d[c]&&0===a%12?(f=!0,"visible-"+b):""}).join(" ");f&&e.append('<div class="clearfix '+b+'"></div>')}};e.appendCellPrefixStart=function(c,a,b,d,f){a=f.gxDeleted()?" RowDeleted":"";1==this.gxGridCols&&(c.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId+'" data-gxrow="'+f.gxId.toString()+'" class="row'+a+'"><div class="col-xs-12">'),this.appendDeleteImage(c,f,gx.grid.deletePositions.left))};
e.appendCellPrefixEnd=function(c){1==this.gxGridCols&&c.append("</div></div>")};e.appendNavBarRowStart=function(c,a){a.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')};e.appendNavBarRowEnd=function(c){c.append("</div></div>")};return e}}(gx.$);
gx.grid.flexGrid=function(c){var h,e=gx.dom;this.useNativeChildControls=!0;this.show=function(){var a;h=c("#"+this.getContainerControl().id);a=this.drawGrid(this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(h.get(0),a);this.ownerGrid.applyTemplateObject({deferred:!1});gx.dom.fixes.fixTableResets(this.container);this.gxWidth&&h.width(e.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&h.height(e.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){h&&h.hide()};this.appendGridAttributes=
function(a){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);a.append(" data-gx-flex")};var g={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"},a=function(a,d,c){g[d]!==c&&a.append(d+": "+c+";")};this.appendGridStyle=function(b){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);a(b,"flex-direction",this.FlexDirection);a(b,"flex-wrap",this.FlexWrap);a(b,"justify-content",this.JustifyContent);
a(b,"align-items",this.AlignItems);a(b,"align-content",this.AlignContent)};this.getRowRenderingProps=function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowPrefix=this.appendRowEnd=this.appendRowStart=gx.emptyFn;this.appendRowBreaksWrapperStart=function(a,d){this.appendDeleteImage(a,d,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</div>");this.appendCellPrefixStart=function(a,d,c,e,g){1==this.gxGridCols&&(a.append('<div id="'+this.gxCmpContext+this.gxGridObject+
"Row_"+g.gxId+'" data-gxrow="'+g.gxId.toString()+'">'),this.appendDeleteImage(a,g,gx.grid.deletePositions.left))};this.appendCellPrefixEnd=function(a){1==this.gxGridCols&&a.append("</div>")};this.appendNavBarRowStart=function(a,d){d.append('</div></div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(a){a.append("</div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};
gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);
gx.GxObject=function(c){var h=function(){this.onLoadDeferred=c.Deferred();this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=
[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=h.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})+$/;this.postEventPopupCommands=[];this.targetsCounter=9996;this.feedbackCallCounter=this.feedbackTimeoutId=
0;gx.lang.apply(this,new gx.util.Observable)};h.GX_EVENT_CONTROL_DATA_ATTR="data-gx-evt-control";h.GX_EVENT_CONDITION_DATA_ATTR="data-gx-evt-condition";h.GX_EVENT_DATA_ATTR="data-gx-evt";h.GX_EVENT_CODE_DATA_ATTR="data-gx-evt-code";h.GX_EVENT_CONTEXT_DATA_ATTR="data-gx-context";h.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay";h.GX_EVENT_EXCLUDED_CTRLTYPES=["dyncombo","combo"];h.GX_EVENT_EVENT_IN_PROGRESS="data-gx-evt-inprogress";h.WEBCOMPONENT_CLASS_NAME="gxwebcomponent";h.WEBCOMPONENT_LOADING_CLASS_NAME=
"gxwebcomponent-loading";h.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";h.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/;return h}(gx.$);
gx.fn=function(c){var h=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,e=function(a){a=a.replace(/\\/g,".");return gx.gen.isDotNet()?a.replace(/\.aspx$/,""):a},g=function(){var a=function(a,d){return a.gxIndex<d.gxIndex?-1:a.gxIndex>d.gxIndex?1:0};return function(b){return gx.fn.toArray(b).sort(a)}}();return{disableKeys:function(){gx.fx.obs.addObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},enableKeys:function(){gx.fx.obs.deleteObserver("gx.keypress",gx.fn,gx.fn.swallowKeys)},
swallowKeys:function(a){a.cancel=!0;a.event.preventDefault()},attachedControls:function(){return gx.attachedControls},cancelWindow:function(a){this.closeWindow(a,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(a,b,d){b=b||{};d=d||gx.O;if("string"==typeof a){if(this.closeFromServer(a,b.parmsMetadata))return;a=[]}a||(a=[]);if(gx.popup.ispopup()){var c=gx.popup.getPopup(),e=c.url?gx.util.noParmsUrl(c.url):"";if(!c.frameWindow||-1!=c.frameWindow.location.href.search(e+"(\\?.*)?$")||
gx.grid.drawAtServer){c.close(a,b,d);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(a=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(a)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),a=gx.absoluteurl(a),gx.spa.started?(gx.spa.redirect(a),gx.ajax.enableForm(d)):(gx.evt.redirecting=!0,location.href=a)))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(a,
b){try{if(window.parent&&window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}):window.parent.gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}),!0}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(a,b,d){gx.evt.execLoad=!1;d&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(a,
{parmsMetadata:b})},invalidEmptyValue:function(a){if(gx.lang.emptyObject(a.s)){for(var b=a.v.length,d=0;d<b;d++)if(a.v[d][0]===a.s)return!1;return!0}return!1},trimSelectValue:function(a,b){return"int"==b?gx.text.trim(a):gx.text.rtrim(a)},selectedDescription:function(a,b){for(var d=a.v.length,c=0;c<d;c++)if(this.trimSelectValue(a.v[c][0],b)===a.s)return a.v[c][1];return null},setGridCheckBoxValue:function(a,b,d,c){this.setCheckBoxValue(a+"_"+b,d,c)},setGridDecimalValue:function(a,b,d){return this.setGridControlValue(a,
b,d)},setGridControlValue:function(a,b,d,c){if(void 0!==b)return this.setControlValue(a+"_"+b,d,c)},setVarValues:function(a,b){for(var d=a.length,c=0;c<d;c++){var e=gx.fn.vStructForVar(a[c]);e&&e.v2v?e.v2v(b[c]):eval(a[c]+'="'+b[c]+'"')}},refreshControlOldValue:function(a){if(void 0!==c(a).attr(gx.csv.GX_OLD_VALUE_ATTRIBUTE)){var b=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));gx.fn.setControlOldValue(a,b)}},setControlOldValue:function(a,b){if(a){var d=a.id,c=gx.O.getValidStructFld(d),
b=gx.applyPicture(c,b,a);c&&c.gxgrid&&(c.gxgrid.IsValidState[d]=c.gxgrid.IsValidState[d]||{},c.gxgrid.IsValidState[d][gx.csv.GX_OLD_VALUE_ATTRIBUTE]=b);if("radio"==a.type)for(var d=gx.dom.byName(a.name),c=d.length,e=0;e<c;e++)d[e].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b);else a.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b)}},setControlGxValid:function(a,b){if(a&&a.id){var d=a.id,c=gx.O.getValidStructFld(d);c&&c.gxgrid&&(c.gxgrid.IsValidState[d]?c.gxgrid.IsValidState[d].gxvalid=b:c.gxgrid.IsValidState[d]=
{gxvalid:b});a.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,b)}},setControlValue:function(a,b,d){a=gx.csv.ctxControlId(a);this.setControlValueAny(a,b,d)},setControlValueAny:function(a,b,d){var c=gx.O.getValidStructFld(a),e,g=!1;e=gx.dom.el(a,c&&("edit"==c.ctrltype||"checkbox"==c.ctrltype||"combo"==c.ctrltype));c&&("dtime"==c.type||"date"==c.type?""===b?b=gx.date.nulldate_toc(c.len,c.dec):"string"==typeof b&&(b=new gx.date.gxdate(b)):gx.lang.isFixedCharacterType(c.type)&&(b=gx.text.rtrim(b)));b instanceof
gx.date.gxdate?gx.lang.emptyObject(c)||(b=gx.date.formatDateTime(c.dec,c.len,gx.dateFormat,b)):gx.lang.instanceOf(b,Number)||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal?gx.lang.emptyObject(c)||(b=gx.num.formatNumber(b,c.dec,gx.rtPicture(c,e),c.len,c.sign,!1,c.emptyAsNull)):"string"==typeof b&&!gx.lang.emptyObject(c)&&((g=void 0!=c.isPwd)?null!=e&&"SPAN"==e.nodeName&&(b=gx.text.formatString(b,c.len,c.isPwd)):b=gx.text.formatString(b,c.len,c.isPwd,gx.rtPicture(c,e)));this.persistGridControlValue(a,
b);null!=e&&"SPAN"!=e.nodeName?(this.setControlValue_impl(e,b,d),!0!==gx.csv.settingUIparms&&gx.fn.setControlOldValue(e,b)):gx.fn.setHidden(a,b);null!=e&&"SPAN"==e.nodeName&&(a=e);var h=!1,h=c?c.multiline:null!=e&&"TEXTAREA"==e.tagName;g?this.setControlValue_span_safe(a,gx.text.formatString(b,c.len,c.isPwd,gx.rtPicture(c,e),d,h)):this.setControlValue_span_safe(a,b,d,h)},setDecimalValue:function(a,b){this.setControlValue(a,b)},toDecimalValue:function(a,b,d){return gx.num.parseFloat(a,b,d)},toDatetimeValue:function(a,
b){return new gx.date.gxdate(a,b)},setCheckBoxValue:function(a,b,d){try{var a=gx.csv.ctxControlId(a),c=gx.dom.byId(a);c||(c=gx.dom.form()[a]);c&&(c.checked=b.toString()==d.toString(),c.value=b)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(a,b,d){var c=a.lastIndexOf("_");if(-1!=c&&(d=d?d:gx.O.getValidStructFld(a.substring(0,c)))&&d.gxgrid)c=a.substring(c+1),4<c.length?(c=c.substring(4,c.length),(c=gx.O.getGrid(d.gxgrid.gridName+"_"+c))&&c.persistControlValue(a,
b,d)):d.gxgrid.persistControlValue(a,b,d)},setControlValue_span_safe:function(a,b,d,f){"string"==typeof a&&(a=gx.dom.byId("span_"+a));if(a&&"SPAN"!==a.nodeName)var e="span_",e="string"==typeof a?e+a:e+gx.dom.id(a),a=gx.dom.byId(e);null!=a&&(e=gx.dom.bySelector('[data-name="'+a.id+'"]'),2>e.length&&(e=[a]),c.each(e,function(a,c){gx.fn.setControlValue_fmt(c,b,d,f)}))},setControlValue_fmt:function(a,b,d,c){try{if(null!=a)if(1==d){var e=a.getAttribute("data-gxlink");!gx.lang.emptyObject(e)&&(null!=a.firstChild&&
"A"==a.firstChild.nodeName)&&(a=a.firstChild);gx.html.setInnerHtml(a,b,!0)}else{0==d&&"string"==typeof b&&(b=b.replace(/ +/g," "));for(e=a;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;0==d&&(null==a.firstChild||"#text"!=a.firstChild.nodeName)&&"A"!=a.nodeName?gx.html.setInnerText(e,b,d,c):gx.html.setInnerText(a,b,d,c)}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(a,b,d){"string"==typeof a&&(a=gx.dom.el(a));b instanceof gx.date.gxdate&&
(b=b.getString());if(null!=a){var f=gx.dom.byName(a.id);if(2>f.length||"radio"===a.type)f=[a];c.each(f,function(a,c){if("radio"===c.type)gx.fn.setRadioValue(c.name,b);else if(gx.dom.isEditControl(c)||"textarea"==c.type){var f=c.value!==b&&gx.dom.getActiveElement()===c&&c.selectionStart!==c.selectionEnd&&0<c.selectionEnd;c.value=b;f&&gx.fn.setSelection(c)}else void 0!=c.value?c.value=b:gx.fn.setControlValue_span_safe(c,b,d)})}},setGridComboBoxValue:function(a,b,d){this.setComboBoxValue(a+"_"+b,d)},
setComboBoxValue:function(a,b){var d=gx.util.browser.isIE(),a=gx.csv.ctxControlId(a),c=gx.dom.byId(a);if(c){var e="",g=gx.O.getValidStructFld(a);gx.lang.emptyObject(g)||(e=g.type);"int"==e?b=gx.text.trim(b):"date"==e&&b instanceof gx.date.gxdate?b=b.getStringWithFmt("Y4MD"):"decimal"!=e&&(b=gx.text.rtrim(b));var h=b,m=!1;try{for(var q=c.options.length,p,n=0;n<q;n++){var o=c.options[n];if(gx.lang.isNumericType(e)?Number(o.value)==Number(b):gx.text.trim(o.value)==gx.text.trim(b)){if(h="undefined"!=
typeof o.innerText?o.innerText:o.text,c.selectedIndex=n,m=!0,o.setAttribute("selected","selected"),p=o,d)break}else d||o.removeAttribute("selected")}p&&(p.value!=c.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(c);m||(c.selectedIndex=0);0<g.grid&&this.persistGridControlValue(a,b,g)}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(a,h,0)}},loadRadioButton:function(a,b,d){var f=c(a).parent().closest(".gx-radio-button"),e=c(a),b=c(gx.html.controls.applyTemplate("radio",
{id:a.name,className:f.attr("class"),style:f.attr("style"),title:a.title,isDisabled:a.disabled,gxoch0:e.attr("data-gxoch0"),values:c.map(b,function(b,c){return{itemId:a.name+"_"+c,itemValue:b[0],itemDesc:b[1],isSelected:gx.text.trim(d.toString())==gx.text.trim(b[0].toString())}})}));f.replaceWith(b);gx.plugdesign.applyTemplateObject(b)},loadComboBox:function(a,b){this.setComboValues(a,b)},setGridComboValues:function(a,b){if(0==this.controlGridId(a))this.setComboValues(a,b);else for(var d=1;999>d;d++){var c=
gx.text.padl(d.toString(),4,"0"),c=gx.dom.el(a+"_"+c);if(null==c)break;this.setComboValues(c.name,b)}},setComboValues:function(a,b){var d=gx.dom.el(a),c=gx.util.browser;if(null!=d){var e="";-1!=d.selectedIndex&&(e=d.options[d.selectedIndex].value);for(;d.options.length>b.length;)d.remove(d.options.length-1);for(;b.length>d.options.length;){var g=document.createElement("OPTION");d.options.add(g)}for(var h=b.length,m=0;m<h;m++)if(g=d.options[m],g.value=b[m][0],c.isIE()&&9<=c.ieVersion()?g.innerText!=
b[m][1]&&(g.innerText=b[m][1]):g.text!=b[m][1]&&(g.text=b[m][1]),Number(g.value)?Number(g.value)==Number(e):gx.text.trim(g.value)==gx.text.trim(e))d.selectedIndex=m;if(0==d.options.length)d.selectedIndex=-1;else if(-1==d.selectedIndex||d.selectedIndex>d.options.length-1)d.options[0].selected=!0}},getControlRefById:function(a){return(a=this.validStruct(a))?0==a.grid?this.getControlRef(a.fld,!1):this.getControlGridRef(a.fld,a.grid):null},getControlRef:function(a,b){b||(a=gx.csv.ctxControlId(a));if("FORM"==
a)return document;var d=gx.dom.el(a);return null!=d?d:null},getControlRef_list:function(a){var b=gx.dom.byName(a);if(null!=b)return b;a=gx.dom.byId(a);return null!=a?[a]:null},screen_CtrlRef:function(a){a=this.getControlGridRef(a,this.controlGridId(a));return!gx.lang.emptyObject(a)?("hidden"==a.type&&(a=gx.dom.byId("span_"+gx.dom.id(a))),a):null},screen_CtrlId:function(a){return this.getControlGridId(a,this.controlGridId(a))},getControlGridId:function(a,b,d){a=gx.csv.ctxControlId(a);if(gx.dom.el(a))return a;
try{if(0==b)return a;void 0==d&&(d=this.currentGridRow(b));return a+"_"+d}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(a,b,d){var c,a=gx.csv.ctxControlId(a);if(0==b||-1!==a.search(gx.csv.CTRL_ROW_INDEX_REGEXP))if(c=gx.dom.el(a))return c;try{if(0==b)return null;void 0==d&&(d=this.currentGridRow(b));if(c=gx.dom.el(a+"_"+d))return c;var e=gx.O.getComponentData(a);if(e)return gx.dom.el("gxHTMLWrp"+e.Prefix+d)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getControlGridRef")}},
setCurrentGridRowSafe:function(a,b){var d=gx.fn.getGridObj(a,b);if(d&&d.grid.rows.length>=b)return gx.fn.setCurrentGridRow(a,b)},setCurrentGridRow:function(a,b){if("0000"!=b)try{return gx.currentRows[a]=b}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(a){try{return gx.currentRows[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(a){a=this.currentGridRowImpl(a);return void 0==a?"0001":a},gridDuplicateKey:function(a){a=
gx.fn.validStruct(a);if(void 0!=a){var b=a.gxgrid;if(null!=b&&(b=b.updateControlValue(a,!0)))return b.gxHasDuplicateKey()}return!1},firstGridControl:function(a,b){var d=gx.fn.controlIds(),c=d.length;for(i=0;i<c;i++){var e=gx.fn.validStruct(d[i],b);if(void 0!=e&&e.grid==a)return d[i]}return-1},lastGridControl:function(a,b){var d=gx.fn.controlIds();for(i=d.length-1;0<=i;i--){var c=gx.fn.validStruct(d[i],b);if(void 0!=c&&c.grid==a)return d[i]}return-1},getGridDateTimeValue:function(a,b){var d=this.getControlValue(a+
"_"+b);return new gx.date.gxdate(d,gx.dateFormat)},getGridDecimalValue:function(a,b,d,c){return this.getDecimalValue(a+"_"+b,d,c)},getGridIntegerValue:function(a,b,d){return this.getIntegerValue(a+"_"+b,d)},getGridControlValue:function(a,b){return this.getControlValue(a+"_"+b)},getControlValue:function(a,b,d,c){return this.getControlValue_impl(gx.csv.ctxControlId(a,d),b,d,c)},getControlValue_impl:function(){var a=/_CMPPGM$/g;return function(b,d,c,e){if("hidden_only"==d)return gx.fn.getHidden(b);if(0<=
b.search(a))return"nohidden"===d?null:gx.fn.getHidden(b);var c=c||gx.O,g,e=e||(c?c.getValidStructFld(b):null);if(!e||!e.gxgrid||!e.gxgrid.grid||!e.gxgrid.grid.useHiddensForControlValues){var h;h=e&&("edit"==e.ctrltype||"checkbox"==e.ctrltype||"combo"==e.ctrltype)?gx.dom.byId(b):gx.dom.el(b,!1,!0);if(null!=h&&c){e&&!h.gxtype&&(h.gxtype={type:e.type,len:e.len,dec:e.dec});if("checkbox"==h.type&&e.values&&e.values.length&&1<e.values.length)g=h.checked?e.values[0]:e.values[1];else if("hidden"==h.type||
"text"==h.type||"textarea"==h.type||"checkbox"==h.type)g=h.value;else if("radio"==h.type)g=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==h.nodeName&&0<h.options.length?g=-1!=h.selectedIndex?"screen"==d?h.options[h.selectedIndex].text:h.options[h.selectedIndex].value:"screen"==d?h.options[0].text:h.options[0].value:e&&("date"!=e.type&&"dtime"!=e.type&&"bits"!=e.type&&"audio"!=e.type&&"video"!=e.type&&"binaryfile"!=e.type)&&(g=h.value),"IMG"==h.nodeName||"INPUT"==h.nodeName&&"image"==h.type)g=
h.getAttribute("src");if(void 0!==g)return e&&"boolean"==e.type?gx.lang.gxBoolean(g):g}h=gx.dom.byId("span_"+b);if(null!=h)return b=gx.fn.getHidden(b),h=gx.fn.getControlValue_span(h),"screen"==d?void 0!=h?h:b:void 0!=b?b:h;h=gx.dom.form()[b];if(null!=h)return"file"==h.type&&(d=gx.html.multimediaUpload.getPreviewAtt(h.id+"_ct"))?d:this.getControlValueInt(h);ControlList=gx.dom.byName(b);if(null!=ControlList){c=ControlList.length;for(e=0;e<c;e++)if(h=ControlList[e],null!=h)return this.getControlValueInt(h);
if(h=ControlList[0])return h.value}}return null==h?"nohidden"===d?null:gx.fn.getHidden(b):""}}(),setRadioValue:function(a,b){var a=gx.csv.ctxControlId(a),d=gx.dom.byName(a);if(null!=d)for(var f=d.length,e=0;e<f;e++){var g=c(d[e]);if(gx.text.ltrim(d[e].value)==gx.text.ltrim(b)){g.attr("checked","");g.prop("checked",!0);break}}},getRadioValue:function(a){for(var b=a.length,d=0;d<b;d++)if(a[d].checked)return a[d].value;return""},getRadioSelected:function(a){for(var a=gx.dom.byName(a),b=a.length,d=0;d<
b;d++)if(a[d].checked)return a[d];return null},getControlValueInt:function(a){if(void 0!=a.length&&"SELECT"!=a.tagName&&"undefined"!=typeof a[0]&&"radio"==a[0].type)return this.getRadioValue(a);if("checkbox"==a.type)return a.checked;if("SPAN"==a.tagName){var b=gx.fn.getHidden(gx.dom.id(a));return void 0!=b?b:gx.fn.getControlValue_span(a)}if("INPUT"==a.tagName&&"text"==a.type&&(b=gx.dom.id(a),gx.O)){var d=gx.O.getValidStructFld(b);if(d&&"undefined"!=typeof gx.rtPicture(d,a)){if("int"==d.type)return this.getIntegerValue(b,
-1!=gx.rtPicture(d,a).indexOf(",")?gx.thousandSeparator:"");if("decimal"==d.type)return this.getDecimalValue(b,-1!=gx.rtPicture(d,a).indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return a.value},getControlValue_span:function(a){for(;a&&!a.nodeValue;)a=a.childNodes[0];return a&&a.nodeValue?a.nodeValue:""},getDateTimeArrayValue:function(a){try{var b,d=function(a,b){gx.lang.emptyObject(a)||c.each(a,function(d,c){a[d]=new gx.date.gxdate(c,b)});return""},f=this.getControlValue(a,"nohidden");b=
d(f,gx.dateFormat);b||(f=gx.fn.getHidden(gx.csv.ctxControlId(a)),b=d(f,"Y4MD"));return b}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(a){return this.getDateTimeValue(a)},getDateTimeValue:function(a){try{var b=this.getControlValue(a,"nohidden");if(!gx.lang.emptyObject(b))return new gx.date.gxdate(b,gx.dateFormat);b=gx.fn.getHidden(gx.csv.ctxControlId(a));return new gx.date.gxdate(b,"Y4MD")}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getDateValue")}return""},
getIntegerValue:function(a,b,d){var c=0,c=gx.O?gx.O.getValidStructFld(a):null,a=this.getControlValue(a,d,void 0,c);c&&a&&(a=gx.num.extractValue(gx.rtPicture(c),a));if(gx.lang.isArray(a))return a;a="undefined"!=typeof a?a.toString():"";if(0===a.length&&c&&"Blank"===c.emptyAsNull)return a;c=a.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(a,10,b):(new gx.num.dec.bigDecimal(gx.text.replaceAll(a,b,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(c)?0:
c},getDecimalValue:function(a,b,d,c){var e=gx.O?gx.O.getValidStructFld(a):null,c=this.getControlValue(a,c,void 0,e),a=gx.dom.el(a,e&&("edit"==e.ctrltype||"checkbox"==e.ctrltype||"combo"==e.ctrltype));e&&c&&(c=gx.num.extractValue(gx.rtPicture(e,a),c));if("undefined"!==typeof c&&0===c.length&&e&&"Blank"===e.emptyAsNull)return"";if(gx.lang.isArray(c))return c;b=gx.num.parseFloat(c||"",b,d);return isNaN(b)?0:b},getBlobValue:function(a){var b=gx.dom.byId("Object_"+a);if(null!=b){if(b.data&&!gx.text.endsWith(b.data,
"about:blank"))return b.data}else if(b=gx.dom.byId("Link_"+a),null!=b)return b.getAttribute("href");return""},getVarControlMap:function(a,b){if(a=a||gx.O)for(var d in a.VarControlMap)if("function"!=typeof d){var c=a.VarControlMap[d];if(c.id==b||a.CmpContext+c.id==b)return d}return null},getVarControlMapForVar:function(a){for(var b in gx.O.VarControlMap)if("string"==typeof b&&b==a)return gx.O.VarControlMap[b];return null},v2c:function(a,b,d,c){a.v2c(c);"undefined"===typeof b&&(b=a.val(c));a=gx.fn.getControlGridRef(a.fld,
a.grid,c);gx.plugdesign.controlValueChanged(a,b);d&&(a.value="")},v2cMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var d="";"number"==typeof b.grid&&0!=b.grid&&(d="_"+gx.fn.currentGridRowImpl(b.grid));gx.fn.setHidden(gx.O.CmpContext+b.id+d,gx.O[a])}},c2vMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var d="";"number"==typeof b.grid&&0!=b.grid&&(d="_"+gx.fn.currentGridRowImpl(b.grid));gx.O[a]=gx.fn.getHidden(gx.O.CmpContext+b.id+d)}},depsToVars:function(a){for(var b=
0;b<a.length;b++){var d=a[b],c=gx.fn.vStructForVar(d);!gx.lang.emptyObject(c)&&"function"==typeof c.c2v?c.c2v():this.c2vMap(d)}},verticalFormula:function(a,b,d,c,e,g,h){var m=gx.fn.vStructForVar(a);gx.lang.emptyObject(m)?this.v2cMap(a):m.v2c(c);var q=gx.fn.currentGridRowImpl(d),p=gx.fn.getGridObj(d,c),n=0,o=!1;if(p){for(var l=p.grid.rows.length,t=0;t<l;t++){var u=p.grid.rows[t],w=u.gxDeleted(),r=u.gxExists(),v=u.gxIsMod();if(!w&&(r||v))gx.fn.setCurrentGridRow(d,u.gxId),h&&0<h.length?this.depsToVars(h):
!gx.lang.emptyObject(m)&&"function"==typeof m.c2v?m.c2v():this.c2vMap(a),e.call(gx.O)&&(o=!0,n=g(t,n))}gx.fn.setCurrentGridRow(d,q);h&&0<h.length?this.depsToVars(h):!gx.lang.emptyObject(m)&&"function"==typeof m.c2v?m.c2v(c):this.c2vMap(a);o||(n=b)}else gx.dbg.write("verticalFormula: can´t find grid "+d+" at row "+c);return n},rowValueHandler:function(a,b,d,c,e,g,h){try{var m=gx.fn.vStructForVar(a)||gx.fn.getVarControlMapForVar(a),q=m?m.type:"decimal";switch(q){case "boolean":return c(a,b,d);case "int":case "decimal":var p=
gx.num.parseFloat(gx.O[a],g,h);return 0==b?p:e(a,b,d,p);default:gx.dbg.write("Warning: Forumula not supported for: ",a,q)}}catch(n){gx.dbg.logEx(n,"gxfrmutl.js","Formula could not be calculated for Field: "+a)}},maxFrm:function(a,b,d,c,e,g,h,m){var q=function(a,b,d){return d||gx.O[a]},p=function(a,b,d,c){return c>d?c:d};return gx.fn.verticalFormula(a,b,e,g,h,function(b,e){return gx.fn.rowValueHandler(a,b,e,q,p,d,c)},m)},sumFrm:function(a,b,d,c,e,g,h,m){var q=function(a,b,d){return d||gx.O[a]},p=function(a,
b,d,c){return c+d};return gx.fn.verticalFormula(a,b,e,g,h,function(b,e){return gx.fn.rowValueHandler(a,b,e,q,p,d,c)},m)},minFrm:function(a,b,d,c,e,g,h,m){var q=function(a,b,d){return d&&gx.O[a]},p=function(a,b,d,c){return c<d?c:d};return gx.fn.verticalFormula(a,b,e,g,h,function(b,e){return gx.fn.rowValueHandler(a,b,e,q,p,d,c)},m)},averageFrm:function(a,b,d,c,e,g,h,m){return gx.fn.verticalFormula(a,b,e,g,h,function(b,e){var g=gx.num.parseFloat(gx.O[a],d,c);return 0==b?g:(e*b+g)/(b+1)},m)},countFrm:function(a,
b,d,c,e,g){return gx.fn.verticalFormula(a,b,d,c,e,function(a,b){return 0==a?1:b+1},g)},serialRule:function(a,b,d,c,e){e=e||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(d),d))return e[a];gx.lang.emptyObject(e[b])&&(e[b]=e[a]+c,(d=gx.fn.vStructForVar(b))&&d.v2c(),(d=e.VarControlMap[a])&&gx.fn.setControlValue(d.id,e[b]));b=e[b]||0;a=e[a]||0;return 0<c?Math.max(b,a):Math.min(b,a)},setReturnParms:function(a,b,d,c){try{gx.csv.settingUIparms=!0;var e,g,h;if(c){g=d.length;for(e=0;e<g;e++)h=gx.fn.vStructForVar(b[e]),
c.grid.setCellValue.apply(c.grid,[h,d[e]])}else if(a&&(b&&d)&&(g=b.length,g==d.length)){gx.setGxO(a);c=null;for(e=0;e<g;e++){var m=b[e];if(m){var q=d[e];h=gx.fn.vStructForVar(m);gx.lang.emptyObject(h)&&(h=gx.fn.vStructForHC(m));if(h){var p=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(h.fld));h.v2v&&(h.v2v(q),gx.fn.v2c(h,q));"function"===typeof h.v2bc&&h.v2bc.call(a);gx.fn.isAccepted(p)&&(c=p,gx.evt.onchange_impl(p));a.refreshDependantGrids(h)}else a.setVariable(m,q)}}c&&gx.fn.setFocus(c)}}catch(n){gx.dbg.logEx(n,
"gxfrmutl.js","setReturnParms")}gx.csv.settingUIparms=!1},isOutputParm:function(a){return a&&a.IOType&&("out"==a.IOType||"inout"==a.IOType)?!0:!1},checkPopupFocus:function(a){if(gx.popup.ispopup()){var b=gx.popup.getPopup();if(b&&b.frameDocument&&(a.ownerDocument?a.ownerDocument:a.document).URL!=b.frameWindow.location.href)return b.setFocusFirst(),!1}return!0},persistControlProperty:function(a,b,d){a=gx.fn.screen_CtrlId(gx.csv.ctxControlId(a));gx.usrPtys[a]||(gx.usrPtys[a]={});gx.usrPtys[a][b.toLowerCase()]=
d},setCtrlProperty:function(a,b,d){if(gx.O){var c=null,c="FORM"==a?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a));if(null!=c){this.persistControlProperty(a,b,d);var e=gx.O.getValidStructFld(a);this.setCtrlPropertyImpl(c,b,d,e)}}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(a,b,d){var f=gx.fn.screen_CtrlRef(a);if(null!=f){this.setCtrlPropertyImpl(f,b,d);var e=gx.fn.controlGridId(a);if(e&&(f=c(f).parent().closest("TD",
c("[data-gxgridid="+e+"]").get(0)).get(0)))this.persistControlProperty(a,b,d),this.setCtrlPropertyImpl(f,b,d)}},getControls:function(a){var b=[a];(a=this.getRONode(a.id,!1))&&b.push(a);return c(b)},setCtrlPropertyImpl:function(a,b,d,f){if(null!=a&&(a==document&&"Backcolor"==b&&(a=document.body,this.setCtrlPropertyImpl(gx.dom.form(),b,d)),f=f||gx.O.getValidStructFld(a.id),!("Enabled"===b||"Visible"===b)||!f||!(0<f.grid&&gx.fn.rowIsRemoved(f.grid,gx.fn.controlRowId(a))))){var e=f?f.ctrltype:null,g=
a,h={control:g,property:b,value:d};gx.fx.obs.notify("gx.control.onbeforepropertychange",[h]);if(!h.cancel){var m;m=c();switch(b){case "Picture":a.setAttribute("data-gx-rt-picture",d);f&&(f.v2c(),f.c2v());break;case "Caption":this.setCtrlCaption(a,d);break;case "Tooltiptext":a.title=d;break;case "Invitemessage":a.placeholder=d;break;case "Visible":if("INPUT"==a.nodeName&&"button"==a.type)this.setButtonVisibility(a,!this.propertyValueFalse(d));else{f="checkbox"===a.type;"INPUT"==a.nodeName&&(f&&c(a).parent().is("span:not(.gx-checkbox-wrapper)")?
m=c(a).parent():"radio"==a.type&&(h=c(a).parent().closest(".gx-radio-button"),0<h.length&&(a=h[0])),(h=gx.html.multimediaUpload.getContainer(a))&&(a=h));h=this.propertyValueFalse(d);e=a.gxusrdisabled&&!f?a.gxusrdisabled:!1;h?(f=gx.dom.byId("span_"+a.id),this.setVisible(a,!h),f&&this.setVisible(f,!h)):((f=this.getRONode(a.id,e))&&this.setVisible(f,e),this.setVisible(a,!e));for(f=0;f<m.length;f++)this.setVisible(m[f],!e);gx.fn.setDateCtrlProperties(a,!e,!h)}gx.fn.checkAttachedProperty(a.id,b,gx.lang.gxBoolean(d));
break;case "Enabled":h=this.propertyValueFalse(d);if("hidden"===a.type)return;"textblock"===e&&c(a).toggleClass("gx-disabled",h);if(("SPAN"===a.tagName||"DIV"===a.tagName&&"1"===a.getAttribute("data-gxformat"))&&h)return;if("INPUT"===a.nodeName&&"radio"===a.type){m=gx.dom.byName(a.name);e=m.length;for(f=0;f<e;f++)this.setEnabledProperty(m[f],!h)}else(gx.dom.isEditControl(a)||"textarea"===a.type||"file"===a.type||"SELECT"===a.tagName)&&"password"!==a.type?(f=this.getRONode(a.id,h,f.fmt),gx.fn.isVisible(a,
0)||f&&gx.fn.isVisible(f,0)?(f&&this.setVisible(f,h),this.setEnabledProperty(a,!h),this.setVisible(a,!h),gx.fn.setDateCtrlProperties(a,!h,!0),gx.fn.checkAttachedProperty(a.id,b,!h),gx.fn.checkAttachedProperty(a.id,"Visible",!h)):(this.setEnabledProperty(a,!h),gx.fn.setDateCtrlProperties(a,!h,!1),gx.fn.checkAttachedProperty(a.id,b,!h))):this.setEnabledProperty(a,!h);break;case "Class":a==document?(h=c(gx.dom.form()),m=c(document.body),f=h.attr("data-gx-class")||"",m.removeClass(f).attr("class",d+" "+
m.attr("class")),h.removeClass(f).attr({"class":d+" "+h.attr("class"),"data-gx-class":d})):(m=this.getControls(a),m.attr("class",d),!gx.O.DSO&&0>=d.indexOf("Readonly")&&c(this.getRONode(a.id,!1)).attr("class",d+" Readonly"+d));break;case "Columnclass":(h=a.parentNode)&&"TD"==h.tagName&&this.setCtrlClass(h,"gx-attribute "+d);break;case "Columnheaderclass":if((h=a.parentNode)&&"TD"==h.tagName)(h=c(h).closest("table").find("th:nth-child("+(h.cellIndex+1)+")").get(0))&&this.setCtrlClass(h,d);break;case "Link":this.setCtrlLink(this.getRONode(a.id,
!1)||a,d);break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(a.id,!1)||a,d);break;case "Backcolor":if((h=gx.color.html(d))&&void 0==a.gxGridName)m=this.getControls(a),m.css("background-color",h.Html);break;case "Background":m=this.getControls(a);m.css("background-image","url("+d+")");break;case "Forecolor":if(h=gx.color.html(d))m=this.getControls(a),m.css("color",h.Html);break;case "Fontbold":h=this.propertyValueFalse(d);m=this.getControls(a);m.css("fontWeight",h?"normal":"bold");break;
case "Fontitalic":h=this.propertyValueFalse(d);m=this.getControls(a);m.css("fontStyle",h?"normal":"italic");break;case "Fontunderline":h=this.propertyValueFalse(d);m=this.getControls(a);m.css("textDecoration",h?"none":"underline");break;case "Fontstrikethru":h=this.propertyValueFalse(d);m=this.getControls(a);m.css("textDecoration",h?"none":"line-through");break;case "Fontname":m=this.getControls(a);m.css("fontFamily",d);break;case "Fontsize":m=this.getControls(a);m.css("fontSize",d+"pt");break;case "Filename":this.setBlobFilename(a,
d);break;case "Filetype":this.setBlobFiletype(a,d);break;case "URL":this.setBlobUrl(a,d);break;case "IsBlob":this.setMultimediaType(a,d);break;case "Bitmap":a.src=d;break;case "SrcSet":void 0!==d&&(a.srcset=d);break;case "gximage":a.style.content=""!==d?"var(--GXResource-Image_"+d+")":"";break;case "Multimedia":this.setMultimediaValue(a.id,d);break;case "Jsonclick":a.jsevent=d;break;case "Source":h=d;m=h.indexOf("?");0<m&&(h=h.substring(0,m));a.src=-1==h.indexOf(":")&&-1==h.indexOf("/")?gx.ajax.objectUrl(d):
gx.util.resourceUrl(d,!0);gx.evt.attach(a,"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==a.tagName||gx.dom.isRadio(a)||"SPAN"==a.tagName)d=gx.json.evalJSON(d),"SELECT"==a.tagName?!1!=d.isset&&(gx.fn.loadComboBox(a.id,d.v),gx.fn.setComboBoxValue(a.id,d.s)):gx.dom.isRadio(a)?!1!=d.isset&&gx.fn.loadRadioButton(a,d.v,d.s):(h=a.id.substring(5),m="",e=d.s,f=gx.O.getValidStructFld(h),gx.lang.emptyObject(f)||(m=f.type),e=gx.fn.trimSelectValue(e,m),d.s=e,gx.fn.setControlValue_span_safe(h,gx.fn.selectedDescription(d,
m)));break;case "Width":a.width&&(a.width=d);a.style.width=gx.dom.addUnits(d);break;case "Height":a.height&&(a.height=d);a.style.height=gx.dom.addUnits(d);break;case "Ispassword":a.type=gx.lang.gxBoolean(d)?"password":"text"}if(a=gx.dom.id(a))if(f=gx.O.getValidStructFld(a),a=a+(f&&f.grid&&0<f.grid?"":"_")+b,gx.fn.createPtyCondition(b)||gx.fn.isHidden(a))d=!0==d?"1":!1==d?"0":d,gx.fn.setHidden(a,d);gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:g,property:b,value:d}])}}},createPtyCondition:function(a){return("Visible"==
a||"Enabled"==a)&&gx.O.isTransaction()},setEnabledProperty:function(a,b,d){var c=gx.dom.id(a);if(gx.lang.gxBoolean(b)){if(delete gx.disabledControls[c],gx.fn.isAccepted(a,!1))return}else gx.util.addOnce(gx.disabledControls,a,c);!0==gx.csv.isvalidating()&&(b&&null==gx.csv.validActivatedControl&&a!=gx.csv.lastControl)&&(c=gx.O.getValidStructId(c),c>gx.O.fromValid&&c<=gx.O.toValid&&(gx.csv.validActivatedControl=a));a.gxusrdisabled=!b;a.disabled=a.gxdisabled?!0==a.gxdisabled?!0:a.gxusrdisabled:a.gxusrdisabled;
(void 0===d||d)&&this.setEnabled(a,b)},setEnabled:function(a,b){var d=function(a,b){gx.lang.booleanValue(b)?a.removeAttribute("data-gx-readonly"):a.setAttribute("data-gx-readonly","")};gx.lang.booleanValue(b)?gx.dom.removeClass(a,"gx-disabled"):gx.dom.addClass(a,"gx-disabled");if(this.disabledAsSpan(a)){var f;try{if("checkbox"==a.type&&(f=a.parentNode),"radio"==a.type)f=c(a).parent().closest(".gx-radio-button")[0],d(a,b)}catch(e){}if(gx.lang.booleanValue(b)){if(!gx.O.DSO&&(f&&0==f.className.indexOf("Readonly"))&&
(f.className=f.className.substring(8)),this.isVisible(a))this.setVisible(a,1),(d=this.getRONode(a.id,!0))&&this.setVisible(d,0)}else if(!gx.O.DSO&&(f&&0>f.className.indexOf("Readonly")&&!gx.text.startsWith(f.className,"gx-"))&&(f.className="Readonly"+f.className),this.isVisible(a)&&"password"!=a.type&&"image"!=a.type&&"checkbox"!=a.type&&"radio"!==a.type)if(d=this.getRONode(a.id,!0)){this.setVisible(a,0);this.setVisible(d,1);f=gx.O.getValidStructFld(a);var h=0;!gx.lang.emptyObject(f)&&f.format&&(h=
f.format);this.setControlValue_span_safe(d,gx.fn.getControlValue(gx.dom.id(a),"screen",void 0,f),h,"textarea"==a.type)}}else d(a,b)},disabledAsSpan:function(a){var b=a.tagName.toUpperCase();return"IMG"!=b&&!("INPUT"==b&&"button"==a.type)},setVisible:function(a,b){c(a).toggleClass("gx-invisible",!gx.lang.booleanValue(b));a.style.display=0==b?"none":this.displayByType(a.nodeName);var d=gx.O.getValidStructFld(a),f=a.parentNode;b&&d&&d.gxgrid&&!d.gxgrid.grid.gxIsFreestyle&&null!=f.getAttribute("data-colindex")?
d.gxgrid.applyPropEntireColumn(f.getAttribute("data-colindex"),"Visible",b):gx.fn.rowGridId(a)&&(d=c(a).find("table")[0])&&this.setVisible(d,b)},getRONodePrefix:function(){return"span_"},prefixROClass:function(a){return gx.O.DSO||""===a||0===a.indexOf("Readonly")?a:"Readonly"+a},getRONode:function(a,b,d){d=void 0===d?gx.html.controls.formats.TEXT:d;if(d===gx.html.controls.formats.RAW_HTML||d===gx.html.controls.formats.HTML||gx.lang.emptyObject(a))return null;var d=gx.dom.byId(a),a=this.getRONodePrefix()+
a,c=gx.dom.byId(a);if(null!=c)return c;if(!b||null==d||"INPUT"===d.nodeName&&("radio"===d.type||"checkbox"===d.type))return null;b=document.createElement("SPAN");b.setAttribute("id",a);b.setAttribute("data-gx-readonly","");this.setVisible(b,!1);b.className=gx.fn.prefixROClass(d.className);a="IMG"==d.nodeName||"INPUT"==d.nodeName&&"image"==d.type?d.value:gx.fn.getControlValue(gx.dom.id(d),"screen");b.appendChild(document.createTextNode(a||""));d.parentNode.insertBefore(b,d);return b},setDateCtrlProperties:function(a,
b,d){var f=gx.dom.byId(gx.dom.id(a)+"_dp_trigger");f&&c(f).toggle(b);if(f=c(gx.dom.byId(gx.dom.id(a)+"_dp_container")))a.Flat&&c(a).hide(),a=c(".calendar",f),f.toggle(b&&d||!b&&d),a&&a.toggle(b&&d)},getGridCtrlProperty:function(a,b,d){try{if(0!=a){var c=this.getGridObj(a);if(c){var e=c.grid.getColumnByHtmlName(b);if(e)return e[d.toLowerCase()]}}else return this.getCtrlProperty(b,d)}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(a,b){var d=gx.O.getValidStructFld(a),
c=d&&0<d.grid?"_"+gx.fn.currentGridRowImpl(d.grid):"",c=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a+c));if(null!=c)return c[b];if(c=this.screen_CtrlRef(a))return"Picture"===b?gx.rtPicture(d,c):"Text"===b?this.getControlValue(a,"screen",void 0,d):"Visible"==b&&gx.fn.getRONode(c.id)?this.getCtrlProperty_impl(c,b)||this.getCtrlProperty_impl(gx.fn.getRONode(a),b):"Enabled"==b&&gx.fn.getRONode(c.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(c.id),"Visible"):this.getCtrlProperty_impl(c,b)},
getCtrlProperty_impl:function(a,b){if(null==a)return"";switch(b){case "Tooltiptext":return a.title;case "Invitemessage":return a.placeholder;case "Visible":if("INPUT"===a.nodeName&&"radio"===a.type){var d=c(a).parent().closest(".gx-radio-button");0<d.length&&(a=d[0])}return"none"!=a.style.display;case "Enabled":return void 0===a.disabled?c(a).hasClass("gx-disabled")?!1:!0:!a.disabled;case "Class":return a.className;case "Backcolor":return gx.color.css(a.style.backgroundColor);case "Forecolor":return gx.color.css(a.style.color);
case "Width":return gx.dom.dimensions(a).w;case "Height":return gx.dom.dimensions(a).h;case "Caption":return this.getCtrlCaption(a);case "Fontbold":return"bold"==a.style.fontWeight;case "Fontitalic":return"italic"==a.style.fontStyle;case "Fontunderline":return"underline"==a.style.textDecoration;case "Fontstrikethru":return"line-through"==a.style.textDecoration;case "Fontname":return a.style.fontFamily;case "Filename":return a.value.split(/(\\|\/)/g).pop();case "Fontsize":return d=parseInt(a.style.fontSize),
isNaN(d)?12:d;case "Ispassword":return"password"==a.type}},displayByType:function(a){switch(a){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(a,b){try{var d=gx.html.getFieldLabel(a);if(d)gx.fn.setControlValue_fmt(d,b,0,!1);else{switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var c=a.getAttribute("data-gxformat"),e=gx.O.getValidStructFld(a);null==c&&(c=!gx.lang.emptyObject(e)&&e.format?
e.format:0);d=!1;e&&(d="edit"===e.ctrltype?e.multiline:!0);gx.fn.setControlValue_fmt(a,b,c,d);return;case "INPUT":"checkbox"!=a.type&&(a.value=b);return}"#document"==a.nodeName&&(a.title=b)}}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(a){var b=gx.html.getFieldLabel(a);if(b)return c(b).text();switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":b=a.getAttribute("data-gxformat");if(null!=b&&"1"==b)return a.innerHTML;for(;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=
a.firstChild;return"undefined"!=typeof a.innerText?a.innerText:a.textContent||a.text;case "INPUT":if("checkbox"!=a.type)return a.value;break;default:return""}},propertyValueFalse:function(a){return"string"==typeof a&&(a=a.toLowerCase(),"false"==a||0==gx.num.parseFloat(a))?!0:0==a},setButtonVisibility:function(a,b){var d=b?"":"none",c=a.parentNode;!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d,c=c.parentNode,!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d,c=c.parentNode,
!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d,c=c.parentNode,!gx.lang.emptyObject(c)&&"SPAN"==c.nodeName&&(c.style.display=d))));a.style.display=d},setBlobValue:function(a,b){this.setBlobUrl(gx.dom.byId(a)||gx.dom.byId("Object_"+a),b)},setBlobFilename:function(a,b){if(null!=a){var d=gx.O.getValidStructFld(a);d&&gx.fn.setHidden(d.fld+"_Filename",gx.text.trim(b))}},setBlobFiletype:function(a,b){if(null!=a){var d=gx.O.getValidStructFld(a);d&&gx.fn.setHidden(d.fld+"_Filetype",gx.text.trim(b));
d=a;"INPUT"==d.nodeName&&"file"==d.type&&(d=gx.dom.byId("Object_"+a.id));null!=d&&(b=gx.util.getContentType(b),this.setObjectCtrlType(d,b),gx.fn.setVisible(d,!0))}},resolveResourceUrl:function(a,b){if(""==a)return b?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.isabsoluteurl(a))if(gx.isRelativeToHost(a)){if(0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+a,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1);return a},setBlobUrl:function(a,
b){var d=gx.html.multimediaUpload.getContainer(a);if(d){var f=this.resolveResourceUrl(b,!1);gx.html.multimediaUpload.setPreviewImage(d,f);gx.html.multimediaUpload.setPreviewLink(d,f)}else if(!b.match(/^[a-z]:[\S]*/i)&&null!=a){d=a;f="INPUT"==d.nodeName&&"file"==d.type;if(""===b&&""===b){var e=c(d);e.wrap("<form>").closest("form").get(0).reset();e.unwrap()}f&&(d=gx.dom.byId("Object_"+a.id));null!=d&&(f=gx.util.getContentTypeFromExt(b),d=this.setObjectCtrlType(d,f));null!=d?"IMG"==d.tagName?(b=this.resolveResourceUrl(b,
!0),d.src=b):(d.data=b||"about:blank",gx.fn.setVisible(d,!0),this.resizeObject(d),gx.dom.redrawControl(d)):(d=gx.dom.byId("Link_"+a.id),null!=d&&(d.style.display=""!=b?"block":"none",d.href=b))}},setGridMultimediaValue:function(a,b,d,c){if(void 0!==b)return this.setMultimediaValue(a+"_"+b,d,c)},setMultimediaValue:function(a,b,d){var c=gx.dom.byId(gx.csv.ctxControlId(a));if(c){var e=gx.html.multimediaUpload.getContainer(c),h=this.resolveResourceUrl(d||b||"",!1);if(e){0<=gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&
gx.html.multimediaUpload.setPreviewImage(e,h);var g=""==b&&""==d||""!=b;if(!g){var m=gx.dom.byId(c.id+"_GXI");m&&(m.value=d)}if((a=gx.dom.byId(a))&&""==b)a.value="";this.setMultimediaType(c,g);gx.html.multimediaUpload.setPreviewLink(e,h)}else{if("IMG"==c.tagName||"INPUT"==c.tagName&&"image"==c.type)c.src=h;if((b=c.parentNode)&&"A"==b.tagName&&gx.dom.isMultimediaElement(c))h?b.href=h:b.removeAttribute("href")}}},setMultimediaType:function(a,b){if(a){var d=gx.html.multimediaUpload.getContainer(a);d&&
gx.html.multimediaUpload.setType(d,gx.lang.gxBoolean(b))}},setObjectCtrlType:function(a,b){var d=a;if("IMG"==a.nodeName&&(!b||0==b.indexOf("image/")))return d;if(a.type!=b||"OBJECT"==a.nodeName&&0==b.indexOf("image/"))if(d=0==b.indexOf("image/")?gx.html.nodesFromText('<img id="'+a.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+a.id+'" type="'+b+'">')[0]){try{for(var c in a.attributes)if("id"!=c&&("type"!=c&&"implementation"!=c)&&a[c])try{d[c]=a[c]}catch(e){gx.dbg.logEx(e,"gxfrmutl.js",
"setObjectCtrlType")}}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","setObjectCtrlType")}if(c=a.parentNode){var g=null,m=c.childNodes.length;for(i=0;i<m;i++)if(c.childNodes[i]==a){i<m-1&&(g=c.childNodes[i+1]);break}gx.dom.removeControlSafe(a);null!=g?c.insertBefore(d,g):c.appendChild(d)}}return d},resizeObject:function(a){var b=gx.lang.emptyObject;!b(a.data)&&"about:blank"!=a.data&&(b(a.width)&&b(a.height)&&b(a.style.width)&&b(a.style.height))&&(a.style.width="200px",a.style.height="200px")},restoreLostCtrlOnGridRefresh:function(a,
b,d){if(null==b.form){var c=gx.dom.id(b);if((c=gx.O.getValidStructFld(c))&&"checkbox"==b.type&&(!c.gxgrid||parseInt(a||0,10)===parseInt(c.gxgrid.grid.firstRecordOnPage||0,10)))b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=d}return b},checkboxClick:function(a,b,d,c,e){var h=b.checked,e=e?gx.getObj(e):null,g="object"===typeof a?a:gx.fn.validStruct(a,e),m=g&&g.gxgrid?g.gxgrid.grid.firstRecordOnPage:0,a=g&&g.grid?g.grid:0,q=function(){b=this.restoreLostCtrlOnGridRefresh(m,b,h);gx.fn.setControlOldValue(b,
b.value);b.checked=h;b.value=h?d:c;g&&("function"==typeof g.c2v&&g.c2v(),"function"==typeof g.v2bc&&g.v2bc.call(gx.O),gx.csv.invalidateCtrl(b,!0))}.closure(this);a&&gx.pO.supportAjaxEvents&&gx.fx.obs.addObserver("gx.onaftervalidate",this,function(a){a!==gx.evt.types.VALUECHANGED&&q()},{single:!0});gx.fx.obs.notify("gx.validation",null,function(){if(gx.evt.fixWebKitOnFocus())b.onfocus();q.call(this,!0)});gx.pO.fullAjax||q.call(this,!0);e&&gx.util.browser.isIE()&&gx.setGxO(e)},setCtrlClass:function(a,
b){null!=a&&(a.className=b)},setCtrlLink:function(a,b){if(null!=a)if(""==b)this.unsetCtrlLink(a);else if("A"==a.tagName)a.href=b;else{var d=a.firstChild;if(d&&"A"==d.tagName)d.href=b;else{var f=a.parentNode;if("A"==f.tagName)f.href=b;else{var e=document.createElement("A");e.href=b;d&&"#text"==d.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(e,!0),e.innerHTML=d.nodeValue,a.replaceChild(e,d)):(f.replaceChild(e,a),e.appendChild(a));(d=c(a).attr("data-gx-link-target"))&&c(e).attr("target",d)}}}},unsetCtrlLink:function(a){if(null!=
a&&(a=a.parentNode,"A"==a.tagName)){var b=a.firstChild;ParentTag2=a.parentNode;if(null!=ParentTag2){for(;null!=b;)ParentTag2.insertBefore(b,a),b=a.firstChild;gx.dom.removeControlSafe(a)}}},setCtrlLinkTarget:function(a,b){if(null!=a){var d=c(a);d.is("a")||(d=d.children());d.is("a")&&d.attr("target",b);c(a).attr("data-gx-link-target",b)}},isVisible:function(a,b){if(!a||gx.dom.hasClass(a,"gx-invisible")||"INPUT"===a.tagName.toUpperCase()&&"hidden"===a.type||"none"===a.style.display)return!1;try{for(var d;a&&
("undefined"==typeof b||0<=b);){if((d=gx.dom.getComputedStyle(a))&&("hidden"==d.visibility||"none"==d.display))return!1;a=a.parentNode;"undefined"!=typeof b&&b--}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(a,b){var d=this.gridObjByLvl(a),c=null;if(d)return d=gx.O.getGridById(d.gridId,b)||d,(c=d.grid.getRowByGxId(b))?c.gxIsMod():!0;d=!1;try{d=1==this.getControlValue("nIsMod_"+a+"_"+b)}catch(e){d=!1}return d},gridObjByLvl:function(a){for(var b=gx.O.Grids,d=b.length,
c=0;c<d;c++)if(b[c].gridLvl==a)return b[c];return null},forceEnableControls:function(a){for(var b in gx.disabledControls){b=this.getControlRef_list(b);for(var d=b.length,c=0;c<d;c++)try{"button"!=b[c].type&&"submit"!=b[c].type&&(b[c].disabled=a)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","forceEnableControls")}}},alert:function(a,b){try{var d=gx.util.balloon.getNew(a.id);d.setError(b);d.show();gx.csv.invalidForcedCtrl=a}catch(c){gx.util.alert.showError(b)}},getGridRowMode:function(a,b){return this.getGridRowModeImpl(a,
b,this.currentGridRow(b))},getGridRowModeImpl:function(a,b,d){b=this.rowIsRemoved(b,d);a=this.getControlValue("nRcdExists_"+a+"_"+d);return"1"==b?"DLT":"0"==a?"INS":"UPD"},rowIsRemoved:function(a,b){var d=this.getGridObj(a);return null!=d&&(d=d.grid.getRowByGxId(b))?d.gxDeleted():!1},getGridObj:function(a,b){return gx.O.getGridById(a,b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},initOld:function(a){void 0==gx.oldValues[a.id]&&
(gx.oldValues[a.id]=a.value)},setFocusOnError:function(a){var b=gx.fn.controlGridId(a),a=gx.csv.ctxControlId(a),d=null,d=0==b?gx.dom.el(a):gx.fn.getControlGridRef(a,b);null!=d&&(gx.O.AnyError=1,gx.csv.anyError=!0,d.setAttribute("data-gxvalid","0"),gx.csv.stopOnError&&gx.fn.setFocus(d))},usrSetFocus:function(a){gx.usrPendingControl=a},usrSetFocus_commit:function(){gx.usrPendingControl&&(gx.fn.usrSetFocus_impl(gx.usrPendingControl),delete gx.usrPendingControl)},usrSetFocus_impl:function(a,b){void 0===
b&&(b=!0);var d=gx.fn.screen_CtrlRef(a);null==d?gx.grid.setActiveGridRow(a,0):(a=gx.dom.id(d),!0==gx.csv.isvalidating()?b?gx.fx.obs.addObserver("gx.onaftervalidate",this,function(a){gx.lang.doCallTimeout(gx.fn.usrSetFocus_impl,gx.fn,[a,!1],200)}.closure(gx.fn,[a]),{single:!0}):gx.usrFocusControl=a:(gx.fn.setFocus(d),delete gx.usrFocusControl))},setFocus:function(a,b){if(a){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&
window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(a.id)&&(a=gx.dom.byId(a.id),!a))return;gx.fn.setFocusSafe(a,function(a){gx.fn.setSelection(a);a.forcedFocus=!0;b&&b()})}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(a,b){var d=gx.csv.setFocusOnload;if(a){var c=function(a,b){try{d&&b&&gx.fx.obs.addObserver("gx.onafterfocus",this,b.closure(this,[a]),{single:!0}),a.focus()}catch(c){}!d&&
b&&b(a)};gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",window,function(){c.call(this,a,b)},{single:!0}):gx.lang.doCallTimeout(c,this,[a,b],d?500:0)}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(a){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},arrayCtrlFocus:function(a){a&&"radio"==a.type&&(a=gx.fn.getRadioSelected(a.name)||a);return a},setFocusOnload:function(a){a=void 0===a?!0:!1;gx.wpo(function(){if(!gx.pO.focusOnlyNEmb||
top===self||gx.popup.ispopup()){var b=null,b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var d=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(d))gx.csv.userFocus=gx.fn.getControlRef(b);else{d.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?b=gx.csv.lastActiveControl:(b=gx.fn.firstAcceptedControl(gx.popup.ispopup()),b=gx.fn.arrayCtrlFocus(b)));
try{b?(d=function(){gx.csv.setFocusOnload=false},gx.csv.lastControl=b,gx.csv.setFocusOnload=a,gx.fn.isAccepted(b)?(gx.O&&gx.O.IsComponent&&(gx.csv.disableFocus=!0),gx.fn.setFocus(b,d)):(gx.popup.setFocus(),d())):gx.popup.setFocus()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocusOnload")}}}})},setSelectionImpl:function(a){gx.util.browser.isSafari()?setTimeout(function(){c(a).select()},0):a.select&&a.select()},setSelection:function(a){if(a&&gx.fn.isVisible(a))try{if(gx.csv.lastControl=a,(gx.dom.isEditControl(a)||
"file"==a.type)&&a.select)this.setSelectionImpl(a);else if("TEXTAREA"==a.nodeName||"SELECT"==a.nodeName)a.focus(),this.setSelectionImpl(a)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}},isAccepted:function(a,b,d){var b=void 0===b||b,d=d||gx.O,c=["FIELDSET"],c=null!=a&&a.type&&"hidden"!==a.type&&!a.disabled&&!a.readOnly&&!gx.util.inArray(a.nodeName,c)&&gx.fn.isVisible(a);if(!c)return!1;b&&(a=gx.dom.id(a),b=d.getValidStructFld(a),a=d.getVariable("Gx_mode"),0<gx.csv.lastGrid&&d.setVariable("Gx_mode",
gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),c=!gx.lang.emptyObject(b)&&b.nac?!b.nac.call(d):!0,d.setVariable("Gx_mode",a));return c},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(a,b){var b=b||gx.csv.lastControl,d=gx.fn.getControlIndex(b),c=d,e=this.controlGridId(b.id||b.name),h=!1;a&&gx.dom.hasClass(b,"gx_newrow")&&(c=b.gxControlIdx,h=!0);if(-1==c)return!0;for(var g=null,m=gx.fn.getFormElements(),
g=gx.fn.searchFocus(++c,!0);;g=gx.fn.searchFocus(++c,!0))if(null==g||c==m.length)c=-1;else{if(a)break;if(gx.evt.isEnterEvtCtrl(g))break;if("INPUT"==g.nodeName&&"submit"!=g.type&&"button"!=g.type&&"image"!=g.type)break}if(!h&&(e&&gx.O.isTransaction())&&this.controlGridId(g.id||g.name)!=e)c=gx.O.getGridById(e),g=gx.dom.byId(c.containerName+"_NewRow").parentNode,g.gxControlIdx=d;gx.fn.setFocus(g)},getFormElements:function(){return c.makeArray(c("button, fieldset, input, img, object, output, select, textarea"))},
getControlIndex:function(a){var b=gx.fn.getFormElements().length-1;return el=this.controlIndex(a,0,b)},controlIndex:function(a,b,d){if(document.all){var c=gx.fn.getFormElements(),e=c[b].sourceIndex,h=c[d].sourceIndex,g=parseInt(b+(d-b)/2)+1,c=c[g].sourceIndex;if(b==d&&a.sourceIndex==e&&a.sourceIndex==h||a.sourceIndex==e)return b;if(a.sourceIndex==h)return d;if(a.sourceIndex==c)return g;if(a.sourceIndex>c&&a.sourceIndex<h)return this.controlIndex(a,g+1,d-1);if(a.sourceIndex>e&&a.sourceIndex<c)return this.controlIndex(a,
b+1,g-1)}else return a.gxIndex},searchFocus:function(a,b){return b?this.searchFocusFwd(a):this.searchFocusBack(a)},searchFocusBack:function(a){for(var b=g(gx.fn.getFormElements());0<=a;a--)if(gx.fn.isAccepted(b))return b[a];return null},searchFocusFwd:function(a){for(var b=g(gx.fn.getFormElements()),d=b.length;a<d;a++)if(gx.fn.isAccepted(b[a]))return b[a];return null},rowGridId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxgridid");return null!=b?b:gx.fn.rowGridId(a.parentNode)},
controlRowIndex:function(a){return c(a).parentsUntil(".gx_usercontrol, .gxwebcomponent").filter("[data-gxrow]").attr("data-gxrow")||""},controlRowIdImpl:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxrow");return null!=b?b:gx.fn.controlRowIdImpl(a.parentNode)},controlRowId:function(a){var b=gx.fn.controlRowIdImpl(a);null===b&&(a&&a.id&&0<a.id.lastIndexOf("_"))&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return b},controlGridId:function(a){try{var b,d,c=gx.O.Grids;
if(c){d=0;for(len=c.length;d<len;d++)if(c[d].grid.columnsHtmlName[a])return c[d].gridId}b=gx.fn.controlIds();d=0;for(len=b.length;d<len;d++){var e=gx.fn.validStruct(b[d]);if(gx.O.isSameField(e,a))return e.grid}var h=gx.O.getComponentData(a);if(h){var g=gx.fn.gridObjByLvl(h.lvl);if(g)return g.gridId}}catch(m){}return 0},oldGridId:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var c=gx.fn.validStruct(b[i]);if(void 0!=c&&c.gxold==a)return c.grid}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js",
"oldGridId")}return 0},saveLvlOldParm:function(a,b){var d="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,a)&&(d=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,a)&&(d=gx.O.Gx_mode);return"no_mode"==d?!0:"UPD"==d||null==gx.csv.validatingGrid?(window[a]=b,!0):!1},isLvlParmOld:function(a,b){try{var d=gx.O.getOldLvl(b);if(0<=d){if(0<a){var c=gx.fn.gridLvl(a);return d<c}return!0}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","isLvlParmOld")}return!1},
gridLvl:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var c=gx.fn.validStruct(b[i]);if(void 0!=c&&void 0!=c.lvl&&c.grid==a)return c.lvl}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(a){try{var b=gx.fn.controlIds(),d=b.length;for(i=0;i<d;i++){var c=gx.fn.validStruct(b[i]);if(void 0!=c&&c.lvl==a)return c.grid}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(a){try{var b=gx.fn.controlIds();for(i=0;i<b.length;i++){var d=
gx.fn.validStruct(b[i]);if(void 0!=d&&d.fld==a)return b[i]}}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(a,b){try{var d=null;b&&(d=[]);var c=gx.fn.controlIds(),e=c.length;for(i=0;i<e;i++){var h=gx.fn.validStruct(c[i]);if(void 0!=h&&a(h))if(h.id=c[i],b)d.push(h);else return h}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getVStruct")}return d},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==
a})},vStructForVarWId:function(a,b){var d=gx.fn.getVStruct(function(b){return b.gxvar==a},!0),c=d[0],e=d.length;if(1<e)for(var h=0;h<e&&!(c=d[h],c.id==b);h++);return c},vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(a,b){for(var d=gx.fn.lastCtrlId(),c=a;c<d;c++){var e=gx.fn.validStruct(c);if(void 0!=e&&e.grid!=b)return c}return d},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,b){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(b)]}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","oldGridKey")}return""},setKey:function(a,b){null!=a&&(gx.oldKeyValues[a]=b)},unsetKey:function(a){null!=a&&(gx.oldKeyValues[a]=void 0)},setGridKey:function(a,b,d){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=d)},unsetGridKey:function(a,b){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=void 0)},removeGridRow:function(a,b){var d=gx.fn.rowIsRemoved(b,
a);try{var c=gx.fn.controlIds(),e=c.length;for(i=0;i<e;i++){var h=gx.fn.validStruct(c[i]);if(void 0!=h&&h.grid==b){var g=gx.dom.el(h.fld+"_"+a);null!=g&&(g.gxdisabled=d,g.disabled=d)}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(b,a)},controlFiresEvent:function(a){return a&&(a.evt||a.triggersEvt)},controlIds:function(a){return(a=a||gx.O)?a.getControlIds():[]},getControlContext:function(a){var b=null;(a=gx.json.evalJSON(c(a).attr(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR)||
"{}"))&&1<a.length&&(b=gx.getObj(a[0],a[1]));return b},validStruct:function(a,b){b=b||gx.O;return b.getValidStruct(a)},lastCtrlId:function(a){if(!0===a)for(var a=this.controlIds(),b=a.length-1;0<=b;b--){var d=this.validStruct(a[b]);if(d.v2v&&(void 0===d.isacc||1==d.isacc))return a[b]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(a,b){return 0==b&&a==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(a){try{for(var b=gx.fn.vStructsArray(),
d=gx.fn.controlIds(),c=d.length,e=0;e<c;e++){var h=b[d[e]];if(null!=h){var g=gx.fn.getControlGridRef(h.fld,h.grid);if(g&&gx.fn.isAccepted(g)&&(a||"submit"!=g.type&&"image"!=g.type&&"button"!=g.type&&"fieldset"!=g.type))return g}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var a=gx.dom.byId(gx.csv.cmpCtx+"BTN_DELETE");null!=a&&gx.fn.setCtrlPropertyImpl(a,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(a){!0!=gx.csv.isvalidating()&&
gx.lang.emptyObject(gx.csv.autoRefreshing)&&(a&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(a){var b=function(a){try{for(var b=a.length,c=0;c<b;c++)gx.fn.setCtrlPropertyImpl(a[c],"Enabled",0)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","disableCtrl")}},a=gx.fn.getControlRef_list(a);if(null!=a)if("complete"==document.gxReadyState)b(a);
else gx.evt.on_ready(this,b.closure(this,[a]))},refreshGridRowBC:function(a,b){try{var d=gx.O.getGridBC(a);if(d){var c=gx.pO.getGridForColl(d.gxvar);if(gx.csv.validatingGrid&&c&&gx.csv.validatingGrid.gridId==c.gridId)return gx.fn.setGridHidden(a,b),b=b[parseInt(gx.fn.currentGridRow(c.gridId))-1],gx.O.bcToScreen(d,b),!0}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","refreshGridRowBC")}return!1},refreshBC:function(a,b){b=gx.O.applySDTVarMapping(b,a);return this.refreshFormBC(a,b)||this.refreshGridRowBC(a,
b)},refreshFormBC:function(a,b){try{var d=gx.O.getFormBC(a)||gx.O.getFormBCForVar(a);if(d)return gx.setVar(a,b),gx.fn.setGridHidden(a,b),gx.O.bcToScreen(d,b),!0}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[a]},GX_HASH_PREFIX:"gxhash_",getHash:function(a,b,d){return gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b+(d?"_"+d:""))||gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b)},getHidden:function(a){gx.http.viewStateLoaded||
gx.http.loadState();return gx.http.viewState[a]},setHidden:function(a,b){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[a]=b},setGridHidden:function(a,b){var d=a,c=gx.fn.oldGridId(a);0<c&&(d=a+"_"+gx.fn.currentGridRowImpl(c));gx.fn.setHidden(d,b)},deleteHidden:function(a){gx.http.viewState&&delete gx.http.viewState[a]},setJsonHiddens:function(a,b,d){var c=[],e,h,d=void 0===d||d,g;for(g in b){d?gx.fn.setGridHidden(g,b[g]):gx.fn.setHidden(g,b[g]);var m=gx.fn.getVarControlMap(a,g);e=
b[g];if(!gx.lang.emptyObject(m)){if(a&&(h=a.VarControlMap[m],"date"==h.type||"dtime"==h.type))e=new gx.date.gxdate(b[g],"Y4MD");gx.setVar(m,e)}gx.fn.vStructForOld(g)&&gx.setVar(g,e);a&&a.UCBindingsHiddens[g]&&(c=c.concat(gx.O.UCBindingsHiddens[g].uc))}return c},filterHiddens:function(a,b){var d={},c;for(c in b)c&&0==c.search(a)&&(d[c]=b[c]);return d},autoRefreshingControl:function(a,b){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==b+a},setJsonValues:function(a,
b,d,c,e){if(!a)return[];for(var g=gx.O,h=a.length,m=[],q,p,n=0;n<h;n++){var o=a[n],l=o.CmpContext,t=gx.lang.booleanValue(o.IsMasterPage),u=gx.setGxO(l,t);if(!gx.lang.emptyObject(gx.O))for(var w in o)if(!("CmpContext"==w||"IsMasterPage"==w))if(!e||e(w)){var r=o[w];if(!("object"==typeof r&&gx.fn.refreshBC(w,o[w]))&&"function"!=typeof r){var v=gx.fn.vStructForVar(w)||gx.O.getValidStructFld(w);if(v){if(v.v2v&&!gx.fn.autoRefreshingControl(v.fld,l)&&(p=(p=gx.O.getGridById(v.grid))&&p.InfiniteScrolling,
0!=v.grid&&(q=gx.dom.el(w,!1,!1),q=gx.fn.controlRowId(q)||(v.grid==d?c:gx.fn.currentGridRow(v.grid))),!p))v.v2v(r),v.v2c(q)}else"GX_FocusControl"==w&&!b?g.CmpContext==l&&g.IsMasterPage==t&&(gx.usrFocusControl=r):(v=gx.fn.vStructForHC(w),!gx.lang.emptyObject(v)&&(!gx.lang.emptyObject(v.hc)&&!v.grid)&&(v.hc==w?(u[v.hc]=r,gx.fn.setHidden(l+"GXH_"+v.fld,r)):v.hd==w&&(u[v.hd]=r)),v=gx.fn.vStructForHC(w),gx.lang.emptyObject(v)||(p="",0!=v.grid&&(p=v.grid==d?c:gx.fn.currentGridRow(v.grid)),gx.fn.setHidden(l+
"GXHC"+v.fld+"_"+p,r)),v=gx.fn.getVarControlMap(u,w),gx.lang.emptyObject(v)?gx.setVar(w,r):gx.setVar(v,r),gx.fn.setGridHidden(w,r),gx.O.UCBindings[w]&&(m=m.concat(u.UCBindings[w].uc)))}}}gx.setGxO(g);return m},getPropertyControlRef:function(a,b,d){var c=gx.fn.getControlRef(a,!0),c=null==c&&!d?gx.dom.byId("Object_"+a):c;null==c&&(c=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a)));null==c&&b&&(c=gx.dom.el(a+"_"+b));return c},setJsonProperties:function(a,b){var d,c,e;if(!a)return[];for(var g=gx.O,h=a.length,
m=[],q=0;q<h;q++){var p=a[q],n=p.CmpContext,o=gx.lang.booleanValue(p.IsMasterPage),n=gx.setGxO(n,o);if(!gx.lang.emptyObject(gx.O))for(var l in p){var t;if(!("CmpContext"===l||"IsMasterPage"===l||""===l))if(o=p[l],"function"!=typeof o)if(c=n.getValidStructFld(l),"FORM"==l||c||0<=l.indexOf("gxHTMLWrp")||0<=l.indexOf("ContainerDiv")?(d=c&&("bits"==c.type||"bitstr"==c.type||"audio"==c.type||"video"==c.type||"binaryfile"==c.type),d=gx.fn.getPropertyControlRef(l,b,!d)):d=gx.fn.getPropertyControlRef(l,b),
e=!1,d&&d.gxGridName&&(t=gx.fn.gridObjFromGxO(d.gxGridName),e=t.setProperty(o)),!e)if(e=n.getGridColumn(l,b),(null==d||t)&&gx.uc.isUserControl(l,n)||e&&e.isUserControl)c=l,e&&e.isUserControl&&(c=l+"_"+b),gx.uc.setProperties(c,o),m.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(c)));else if(!(null==d&&null==e))for(var u in o){var w="object"===typeof o[u];e&&!w&&(e[u.toLowerCase()]=o[u]);if(d)if(d.parentElement||(d=gx.fn.getPropertyControlRef(l,b)),w)for(var r in o[u])gx.fn.setCtrlPropertyImpl(d,
r,o[u][r],c);else gx.fn.setCtrlPropertyImpl(d,u,o[u],c)}}}gx.setGxO(g);return m},loadJsonGrids:function(a,b,d){var d=d||[],e=[],g=function(a){for(var b=0;b<a.length;b++)if("string"===typeof a[b])return a[b];return""},h=function(a){var b="",d=a.lastIndexOf("_");-1!==d&&(b=(a=a.substring(d+5))?"_"+a:"");return b},k=function(a,b,d){for(var c=0;c<a.Count;c++){var e=a[c],f;for(f in e.Grids){var g=gx.fn.gridObj(b,f+"_"+gx.text.padl((c+1).toString(),4,"0"),!1);g&&g.isUsercontrol&&d.push({cmpCtx:b,gridName:f+
"_"+gx.text.padl((c+1).toString(),4,"0"),inMasterPage:!1})}}},m=[];if(a)for(var q=a.length,p,n=0;n<q;n++)try{var o=a[n];if(void 0!=o.Count){var l=o.CmpContext,t=o.GridName,u=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(u)||u.gxComponentContext!=l&&u.gridName!=t||!gx.lang.emptyObject(u.boundedCollType)){var w="true"==o.InMasterPage?!0:!1,r="",v="";o[0]&&(o[0].Props&&o[0].Props[0]&&gx.lang.isArray(o[0].Props[0]))&&(v=g(o[0].Props[0]));r=h(v);if(p=gx.fn.gridObj(l,t+r,w))k(o,l,m),m.push({cmpCtx:l,
gridName:t+r,inMasterPage:w}),b?(!gx.O.Grids[p.gridName]||!gx.O.Grids[p.gridName].parentGrid)&&e.push(p.loadGrid({rowProps:o,isPostback:b})):p.updatePropsHidden(o)}}}catch(B){gx.dbg.logEx(B,"gxfrmutl.js","loadJsonGrids")}for(var m=gx.lang.arrayUnique(m,function(a,b){return a.gridName===b.gridName}),x=[],n=0;n<m.length;n++)a=m[n],(a=gx.fn.gridObj(a.cmpCtx,a.gridName,a.inMasterPage))&&a.grid&&(!a.grid.ownerGrid||!a.grid.ownerGrid.parentGrid?d.push(a.grid):x.push(a.grid));var J=c.Deferred();c.when.apply(c,
e).done(function(){gx.dom.indexElements();J.resolve(x)});return J.promise()},getErrorViewerCtrls:function(){var a=gx.dom.byClass("gx_ev");if(0==a.length)for(var a=[],b=gx.dom.byTag("span"),d=b.length,c=0;c<d;c++)"gxErrorViewer"==b[c].getAttribute("data-gx-id")&&a.push(b[c]);return a},setErrorViewer:function(a,b){b=void 0===b||b;gx.O.AnyError=0;if(a)try{gx.fx.obs.notify("gx.onmessages",[a]);var d=gx.dom.byClass("gx_ev"),e=d.length,g;for(g in a){var h,k=a[g];gx.lang.isArray(k)||(h=k.fields,k=k.msgs);
var m=[];if(h)for(var q=0,p=h.length;q<p;q++)if(!gx.lang.isArray(h[q])){var n=gx.fn.vStructForVar(h[q].replace(/^gx\.O\./,""));n&&m.push(n.fld)}"MAIN"==g&&(g="");if("undefined"!=typeof k){for(q=0;q<e;q++){var o=d[q];if(o&&o.getAttribute("data-gx-id")==g+"gxErrorViewer"){var l=gx.csv.setFocusOnload?o.innerHTML:"";break}}var t={},u=!1,w;for(w in k){var r=k[w];r&&1==r.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(r.text)&&"function"!=typeof r){var v=gx.fn.screen_CtrlRef(r.att),B=v&&c(v).is("[data-gxgridid].gx-invisible "+
v.tagName);if(""!=r.att&&(B&&gx.fn.isVisible(v,0)||gx.fn.isVisible(v))){var x=t[r.att];x||(x=gx.util.balloon.getNew(r.att,void 0,r.id?m:[]),t[r.att]=x);1==r.type?x.setError(r.text):x.setMessage(r.text);!u&&"ForeignKeyNotFound"===r.id&&(u=!0)}else if("ForeignKeyNotFound"===r.id&&!u||"ForeignKeyNotFound"!==r.id)l+='<div class="'+(1==r.type?"gx-error-message":"gx-warning-message")+'">'+gx.html.encode(r.text)+"</div>"}}var u=!1,J;for(J in t)if(x=t[J],!1==x.show()&&!u&&(u=!0,gx.fn.setFocusOnError(J)),
gx.csv.oneAtAtime)break;for(q=0;q<e;q++)if((o=d[q])&&o.getAttribute("data-gx-id")==g+"gxErrorViewer"&&o.innerHTML!=l)if(gx.dom.shouldPurge()&&gx.dom.purge(o,!0),o.innerHTML=b?l:o.innerHTML+l,""!=l){var E=gx.fx.dom.highlight(o,[255,255,165],2500);E.play();o.effect=E}}}gx.plugdesign.applyTemplateObject({templateSelector:function(a){return"errorviewer"===a.name},classMapSelector:function(){return!1}});gx.config.csv.scrollTopOnError&&(gx.O.AnyError&&!u)&&window.scrollTo(0,0)}catch(O){gx.dbg.logEx(O,"gxfrmutl.js",
"setErrorViewer")}},cmpContextFromCtrl:function(a){var b=h.exec(a);return b?b[1]+b[2]:a},clearCompontHiddens:function(a){var b=[],d;for(d in a)"function"!=typeof a[d]&&b.push(gx.fn.cmpContextFromCtrl(d));try{gx.O.deleteComponentHiddens(b)}catch(c){except=!0,gx.dbg.logEx(c,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(a,b,d,f,g){try{var h=[],k=!1;gx.gen.isDotNet();var m=[],q;for(q in a)if(m.push(q),"function"!=typeof a[q])try{var p=a[q];if(p){var n=gx.dom.byId(q);!n&&b&&(n=gx.dom.byId(b[q]));
gx.lang.emptyObject(n)&&(c(document.body).append("<div id='"+q+"'></div>"),n=gx.dom.byId(q));if(!gx.lang.emptyObject(n)){n.id&&(gx.fx.obs.deleteObserverByKey(n.id),gx.evt.removeHookByKey(n.id));gx.html.setInnerHtml(n,p,!1,g);var o=gx.fn.cmpContextFromCtrl(q),l=e(gx.fn.getHidden(o+"_CMPPGM"));h.push({type:o,name:l,html:p,container:n})}}}catch(t){k=!0,gx.dbg.logEx(t,"gxfrmutl.js","setJsonComponents")}}catch(u){k=!0,gx.dbg.logEx(u,"gxfrmutl.js","setJsonComponents")}(0==h.length||k)&&"function"==typeof f?
f(m):(a=c.map(h,function(a){return gx.fn.createComponentAsync(a,d)}),c.when.apply(c,a).done(function(){f(m)}))},cmpRegexCache:{},getCmpRegex:function(a){var b=this.cmpRegexCache[a];this.cmpRegexCache[a]||(b=RegExp("^"+a),this.cmpRegexCache[a]=b);return b},processCodeCallback:function(a,b,d,c,e,g){gx.fn.createComponentObj(a,b,c);gx.fn.setJsonHiddens(e,d);g.resolve()},createComponentAsync:function(a,b){var d=c.Deferred(),e=a.type,g=a.name,h=a.html,k=a.container;d.then(function(){gx.fx.obs.notify("gx.onafterevent",
[gx.csv.lastEvtResponse])});try{var m=gx.O,q=gx.fn.filterHiddens(gx.fn.getCmpRegex(e),b);gx.cache.codeLoaded(e+g)?(gx.fn.createComponentObj(g,e,k),gx.fn.setJsonHiddens(m,q),d.resolve()):(gx.cache.addInlineCode(e+g),gx.html.processCode(h,!1,gx.html.onTypeAvailable,[g,gx.fn.processCodeCallback,[g,e,q,k,m,d],0],g))}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","createComponentAsync"),d.resolve()}return d},createComponentObj:function(a,b,d){a=gx.createComponent(a,b,d);null!=a&&gx.addComponent(a)},cleanAttachedCtrls:function(){gx.attachedControls=
[]},getAttachedCtrl:function(a){for(var b=gx.attachedControls.length,d=0;d<b;d++){var c=gx.attachedControls[d];if(c.id==a)return c}return null},attachCtrl:function(a,b){null==gx.fn.getAttachedCtrl(a)&&gx.attachedControls.push({id:a,info:b})},doAttachs:function(a){var b=gx.fn.attachedControls(),d=b.length,e=gx.O,g,a=a&&a.length?c.map(a,gx.fn.cmpContextFromCtrl):void 0,h,k,m,q,p,n;for(n=0;n<d;n++)if(h=b[n],!a||0<=c.inArray(h.info.wc,a))if(g=gx.setGxO(h.info.wc,h.info.mp),h.info.isPrompt&&g.isTransaction()&&
"DSP"==g.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(h.info.wc+h.info.id),"Visible",!1);else if(!h.attached){g=h.info.controls;k=g.length;q=[];for(p=0;p<k;p++)gx.fn.addAttach(g[p],h),m=gx.fn.validStruct(g[p]),gx.fn.checkAttachedPropertyVS(m,"Visible",!1),gx.fn.checkAttachedPropertyVS(m,"Enabled",!1),q.push(m.fld);h.attached=!0;c("#"+h.id).attr("data-gx-attached-ctrl",q.join(" "))}gx.setGxO(e)},addAttach:function(a,b){var c=gx.fn.validStruct(a);void 0==c.attachedCtrls&&(c.attachedCtrls=[]);c.attachedCtrls.push(b)},
checkAttachedProperty:function(a,b,c){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(a),b,c)},checkAttachedPropertyVS:function(a,b,c){if(void 0!=a&&(a=a.attachedCtrls,void 0!=a))for(var e=a.length,g=0;g<e;g++)gx.fn.checkAttachedControlProperty(a[g],b,c)},checkAttachedControlProperty:function(a,b,c){for(var e=a.info.id,a=a.info,g=!0,h=a.controls,a=a.wc,k=h.length,m=0;m<k;m++){var q=gx.fn.getCtrlProperty(a+gx.fn.validStruct(h[m]).fld,b),g=c?q==c:g&&q==c;if(c&&g)break}g&&gx.fn.setCtrlPropertyImpl(gx.dom.el(a+
e),b,c)},changeControlOpacity:function(a,b,c,e){var g=Math.round(e),h="",h="string"==typeof a?a:a.id;b>c?(gx.fn.setOpacity(b,h),setTimeout(function(){gx.fn.changeControlOpacity(a,b-10,c,e)},g)):b<c?(gx.fn.setOpacity(b,h),setTimeout(function(){gx.fn.changeControlOpacity(a,b+10,c,e)},g)):gx.fn.setOpacity(c,h)},setOpacity:function(a,b){var c=b;"string"==typeof b&&(c="body"==b?document.body:gx.dom.el(b));if(null!=c){var c=c.style,e="reset"==a?"":a/100;c.opacity=e;c.MozOpacity=e;c.filter="alpha(opacity="+
("reset"==a?100:a)+")"}},fadeControl:function(a,b,c){"in"==b?gx.fn.changeControlOpacity(a,0,100,c):gx.fn.changeControlOpacity(a,100,0,c)},fadeIn:function(a,b){gx.fn.fadeControl(a,"in",b)},statusMsg:function(a){window.status=a},objectOnload:function(a,b){var d=c(document.body),e="true"===d.attr("data-HasEnter"),g="true"===d.attr("data-Skiponenter");gx.evt.onkeypress_hdlr=gx.evt.onkeypress_hdlr||function(a){gx.evt.onkeypress(a,e,g)};gx.evt.attach(document,["keydown"],gx.evt.onkeypress_hdlr);c(document).on("keyup",
function(a){gx.evt.onkeyup(a)});c(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(a){gx.evt.oncontrolvaluechanging(a)});c(document).on("paste",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(a){gx.evt.oncontrolpasting(a)});null!=gx.pO&&(gx.pO.onload(a,b),gx.setGxO(gx.pO))},objectOnUnload:function(a){if(null!=
gx.pO)gx.pO.onunload(a)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},objectPostback:function(a,b){null!=gx.pO&&(gx.pO.postbackLoad(a,b),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,a,gx.O.IsMasterPage)},gridObj:function(a,b,c){return(a=gx.getObj(a,c))?a.getGrid(b):null},installComponents:function(a,b){var c=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=c){gx.gen.isDotNet();for(var f in c)if(a||!gx.pO.getWebComponent(f)){var g=
e(c[f].toLowerCase()),g=gx.createComponent(g,f);null!=g&&(gx.addComponent(g,b),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,[g]),1))}}},addComponentRemoteFiles:function(a){if(a=a.getContainer())gx.html.processCode(a.innerHTML,!0),gx.dom.fitToParent(a)},datePickerFormat:function(a,b,c){var e=gx.dateFormat,g=e.substr(0,1),h=e.substr(1,1),e=e.substr(2,1),g=gx.fn.datePickerDateFormat(g,a),h=gx.fn.datePickerDateFormat(h,a),a=gx.fn.datePickerDateFormat(e,a),e=gx.fn.datePickerTimeFormat(b);
return 0<c&&0<b?g+"/"+h+"/"+a+" "+e:0<c?g+"/"+h+"/"+a:e},datePickerDateFormat:function(a,b){return"Y"==a&&"99/99/9999"==b.substr(0,10)?"%Y":"Y"==a?"%y":"M"==a?"%m":"D"==a?"%d":""},datePickerTimeFormat:function(a){var b=gx.timeFormat,c;12==b?(b="%I",c=" %p"):(b=24==b?"%H":"",c="");if(2==a)a="";else if(5==a)a=":%M";else if(8==a)a=":%M:%S";else return"";return b+a+c},installDatePicker:function(a,b,c,e,g,h,k,m,q,p){(new gx.ui.controls.datePicker({inputId:a,triggerId:a+"_dp_trigger",inline:e,inputType:!g?
"date":"datetime",weeksNumbers:h,mondayFirst:k,format:m,datePartLength:q,timePartLength:p,afterChange:gx.fn.datePickerChanged,vStruct:b,gxO:c})).render()},datePickerChanged:function(a,b,c,e,g){if(!a||a.dateClicked){g=g||gx.O;if("undefined"===typeof e){var h=gx.fn.controlIds(),k=h.length;for(i=0;i<k;i++){var e=gx.fn.validStruct(h[i]),m=0!=e.grid?"_"+gx.fn.currentGridRow(e.grid):"";if(c.id==g.CmpContext+e.fld+m)break}}null!=e&&void 0!=e.dp&&(b=gx.date.isNullDate(b)?gx.date.nulldate_toc(e.len,e.dec):
b.print(gx.fn.datePickerFormat(e.dp.pic,e.dp.dec,e.len)),b!=c.value&&(c.setAttribute("data-gxvalid","0"),c.value=b,c.onchange(),a&&a.callCloseHandler(),0<e.grid&&(gx.fn.getGridObj(e.grid)||e.gxgrid).setRowModified(gx.fn.currentGridRow(e.grid)),g.refreshDependantGrids(e)))}},toArray:function(a){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var b=[],c=0,e=a.length;c<e;c++)b[c]=a[c];return b}return Array.prototype.slice.call(a)},evalCtxScope:function(a,b){var c=gx.O;gx.setGxO(a);var e=
eval(b);e instanceof Object&&(e=gx.json.serializeJson(e));gx.setGxO(c);return e}}}(gx.$);
Function.prototype.closure=function(c,h,e){var g=gx.util.browser;if(g.isIE()&&8>g.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var a=this,b=c.__objId;b||(__objs[b=c.__objId=__objs.length]=c);var d=a.__funId;d||(__funs[d=a.__funId=__funs.length]=a);h||(h=[]);var f=h.__argsId;f||(__args[f=h.__argsId=__args.length]=h);h=a=c=null;return function(){if(__funs){var a=__args[f];if(e===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[f])}a.length==0&&arguments.length>
0&&(a=arguments);a=__funs[d].apply(__objs[b],a);if(__objs)try{delete __objs[b].__objId}catch(c){__objs[b].__objId=null}__funs&&delete __funs[d].__funId;__args&&delete __args[f].__argsId;return a}}}a=this;return function(){var b=h||arguments;!0===e&&(b=Array.prototype.slice.call(arguments,0),b=b.concat(h));return a.apply(c||window,b)}};
gx.thread={Map:function(){this.map={};this.add=function(c,h){this.map[c]=h};this.remove=function(c){delete this.map[c]};this.get=function(c){return null==c?null:this.map[c]};this.first=function(){return this.get(this.nextKey())};this.next=function(c){return this.get(this.nextKey(c))};this.nextKey=function(c){for(i in this.map){if(!c)return i;c==i&&(c=null)}return null}},Command:function(c,h,e){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){h.apply(c,
e)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(c,h,e,g){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof g=="function")try{g.call(c,retVal)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(c,h,e);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};gx.INTERACTIVE_EVT="gx.onInteractive";gx.PARENT_OBJECT_EVT="gx.onCreateParentObject";gx.SETMASTERPAGE_EVT="gx.onSetMasterPage";
gx.ONREADY_EVT="gx.onready";gx.ONAFTERLOAD_EVT="onafterload";gx.isInteractive=!1;gx.isReady=!1;gx.getActiveContext=function(){var c=window;gx.popup.getPopup()&&gx.popup.getPopup().frameWindow&&(c=gx.popup.getPopup().frameWindow);return c};gx.isReadyUI_impl=function(c){return 1>c.gx.evt.userReadyCnt&&c.gx.evt.userReadyThresholdWait()&&c.gx.isInputEnabled()&&(c.gx.ajax.isFormEnabled()||null!=gx.popup.getPopup())};gx.isReadyUI=function(){return gx._isReadyUI()};gx._isReadyUI=function(){return gx.isReadyUI_impl(gx.getActiveContext())};
gx.goInteractive=function(){gx.isInteractive=!0;gx.fx.obs.notify(gx.INTERACTIVE_EVT)};gx.goReady=function(c){gx.isReady=!0;gx.fx.obs.notify(gx.ONREADY_EVT,[],c)};gx.goOnload=function(){gx.isLoaded=!0;gx.fx.obs.notify(gx.ONAFTERLOAD_EVT)};gx.observe_run=function(c,h,e,g){e[g]=function(a,b,d){d=d||[];c()?a.apply(b,d):gx.fx.obs.addObserver(h,b,a.closure(b,d),{single:!0})}};gx.observe_run(function(){return gx.isLoaded},gx.ONAFTERLOAD_EVT,gx,"ol");
gx.observe_run(function(){return gx.isReady},gx.ONREADY_EVT,gx,"wr");gx.observe_run(function(){return gx.pO&&gx.pO.MasterPage},gx.SETMASTERPAGE_EVT,gx,"wmp");gx.observe_run(function(){return gx.isInteractive},gx.INTERACTIVE_EVT,gx,"wi");gx.observe_run(function(){return gx.pO},gx.PARENT_OBJECT_EVT,gx,"wpo");gx.isabsoluteurl=function(c){return-1!==c.search("://")};gx.isRelativeToHost=function(c){return"/"==c.substr(0,1)};
gx.absoluteurl=function(c){return!gx.isabsoluteurl(c)?"/"!==c.charAt(0)?gx.util.resourceUrl(c,!0):location.protocol+"//"+location.host+c:c};gx.timeoutActions={ignore:0,warn:1};
gx.uc=function(c){return{PostRenderScripts:{},gxCssClass:"gx_usercontrol",getNew:function(h,e,g,a,b,d,f,j,s,k){var m;try{var q=eval(a);gx.lang.inherits(q,gx.uc.UserControl,!0);m=new q(c)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","getNew UserControl "+a),m=new gx.uc.UserControl}m.ContainerName=b;m.DesignContainerName=b;m.LabelForAttValue=h.CmpContext+d.toUpperCase()+(s?"_"+k:"");m.setupControl(h,d,f,e,g,j,s,k);return m},fromChild:function(c){var e=gx.pO.getUsercontrolFromChild(c);if(null!=e||gx.pO.hasMasterPage()&&
(e=gx.pO.MasterPage.getUsercontrolFromChild(c),null!=e))return e;for(var g=gx.pO.WebComponents.length,a=0;a<g;a++)if(e=gx.pO.WebComponents[a].getUsercontrolFromChild(c),null!=e)return e;return null},getUserControlObj:function(c){var e=gx.O.getUserControl(c);if(gx.lang.emptyObject(e)){if(gx.pO.hasMasterPage()&&(e=gx.pO.MasterPage.getUserControl(c),!gx.lang.emptyObject(e)))return e;for(var g=gx.pO.WebComponents.length,a=0;a<g&&!(e=gx.pO.WebComponents[a].getUserControl(c),!gx.lang.emptyObject(e));a++);
}return e},CtrlId:function(c){return c.replace(/Container$/,"")},userControlContainerId:function(c){var e=c+"Container";if(0<=c.indexOf("ContainerDiv"))return c;var g=gx.O.getValidStructFld(c);g&&g.uc&&(e=g.uc.ContainerName);return e&&(g=c.lastIndexOf("_"),-1!=g&&(c=e+c.substring(g),null!=gx.dom.byId(c)))?c:e},setProperties:function(c,e){var g=gx.uc.getUserControlObj(gx.uc.userControlContainerId(c));if(null!=g)if(void 0!=e.length)for(var a=e.length,b=0;b<a;b++)for(var d in e[b]){var f=e[b][d];g[d]=
f}else for(d in e)f=e[d],g[d]=f},isUserControl:function(c,e){var e=e||gx.O,g;return gx.lang.emptyObj(e.UserControls)?!1:c instanceof gx.uc.UserControl?!0:(g=gx.dom.byId(gx.uc.userControlContainerId(c)))&&"DIV"===g.tagName&&gx.dom.hasClass(g,gx.uc.gxCssClass)?!0:!1},StartRender:function(){PostRenderScripts={}},pushPostRenderScripts:function(h){c.each(h&&h.Scripts||[],function(c,g){PostRenderScripts[g]=g})},EndRender:function(){var h=gx.lang.objToArray(PostRenderScripts),h=c.map(h,function(c){return gx.util.resourceUrl(gx.util.resolveUrl(c),
!1)});gx.http.loadScripts(h,gx.emptyFn,0,!0)},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.IsPostBack=this.RealControl=this.C2ShowFunction=null;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=
null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(c){var e=""!=this.GridRow?"_"+this.GridRow:"",g=this.DesignContainerName+this.ControlName+"_"+c+e,g=gx.dom.byId(g);g||(g=this.DesignContainerName+c+e,g=gx.dom.byId(g));return g};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?
this.RealControl:this.getContainerControl()};this.setupControl=function(c,e,g,a,b,d,f,j){this.ParentObject=c;this.ControlName=e;this.ControlId=a;this.LastIdBefore=b;this.ControlLvl=void 0!=d?d:0;this.GridId=void 0!=f?f:0;this.GridRow=void 0!=j?j:"";gx.util.pushOnceSorted(this.ControlId,this.ParentObject.GXCtrlIds);var s=j||"_norow",k=this.ParentObject.GXValidFnc[this.ControlId];k||(this.ParentObject.GXValidFnc[this.ControlId]={id:this.ControlId,lvl:this.ControlLvl,fld:g,grid:this.GridId,op:[],ip:[],
isuc:!0,uc:this,fnc:this.validateControl},k=this.ParentObject.GXValidFnc[this.ControlId]);k=this.ParentObject.GXValidFnc[this.ControlId];k.ucInstances=k.ucInstances||{};k.ucInstances[s]=this;k.getUCInstance=function(a){a=a||s;return k.ucInstances[a]}};this.addValidFunction=function(c,e,g){this.ValidFunctions.push(c);this.ParentObject.addUsercontrolBinding(e,g+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var c=this.ValidFunctions.length,
e,g=0;g<c;g++)if((e=this.ValidFunctions[g])&&!e.call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var c=this.getContainerControl();if(gx.lang.emptyObject(document.frames))c.onfocus=this.onfocus,this.RealControl=c;else{var e=document.frames.length;if(0<e)for(var g=0,g=0;g<e;g++){var a=document.frames[g];if(!0==gx.dom.isChildNode(a,c)){a.frameElement.onfocus=this.onfocus;this.RealControl=a.frameElement;break}}}}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.oninput=function(){this.autoRefreshFn&&this.autoRefreshFn()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&
this.setFocus()};this.setHtml=function(c){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=c};this.createWebComponent=function(c,e,g,a,b){this.ParentObject.createWebComponent(c,e,g,this.GridRow,a,b)};this.deleteWebComponent=function(c){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(c))};this.notifyContext=function(c,e){gx.fx.ctx.notify(null,c,e)};this.addV2CFunction=function(c,e,g,a){var b,d;"function"==typeof c?(d=e,this.V2CFunctions.push(c),
b=gx.fn.getVarControlMap(this.ParentObject,d),void 0!==b&&this.ParentObject.addUsercontrolBinding(b,d,this)):(b=c,d=e,this.ParentObject.addUsercontrolBinding(b,d,this),this.V2CFunctions.push(function(c,e,h){var k=d;h&&(e&&(k=d+"_"+e),a?c.ParentObject[b][a]=gx.fn.getControlValue(k)[a]:c.ParentObject[b]=gx.fn.getControlValue(k));e=a?c.ParentObject[b][a]:c.ParentObject[b];if(c.useGxDateForBindings&&(h=gx.fn.getVarControlMapForVar(b),"date"===h.type||"dtime"===h.type))"string"===typeof e&&(e=c.IsPostBack?
new gx.date.gxdate(e):new gx.date.gxdate(e,"Y4MD"));c[g](e)}))};this.addC2VFunction=function(c){this.C2VFunctions.push(c)};this.setC2ShowFunction=function(c){this.C2ShowFunction=c};this.execV2CFunctions=function(c){var e=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var g=0,a=this.V2CFunctions,b=a.length,g=0;g<b;g++)try{a[g](this,this.GridRow,c)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=e};this.execC2VFunctions=function(){var c=gx.csv.cmpCtx;gx.csv.cmpCtx=
this.ParentObject.CmpContext;for(var e=0,g=this.C2VFunctions,a=g.length,e=0;e<a;e++)try{g[e](this,this.GridRow)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=c};this.sdtV2c=function(c,e,g,a,b){if(null!==e){if(e=parseInt(e,10)-1,void 0!==this.ParentObject[c][e])this[b](this.ParentObject[c][e][g])}else this.ParentObject[c]=gx.fn.getControlValue(a,null,this.ParentObject),this[b](this.ParentObject[c][g])};this.sdtC2v=function(c,e,g,a,b){null!==e?(e=parseInt(e,10)-1,this.ParentObject[c][e][g]=
this[b]()):this.ParentObject[c][g]=this[b]();gx.fn.setControlValue(a,this.ParentObject[c])};this.execShowFunction=function(){!1===this.IsPostBack&&(this.IsPostBack=!0);null===this.IsPostBack&&(this.IsPostBack=!1);var h=this.getContainerControl();try{null!=this.C2ShowFunction&&h&&this.C2ShowFunction(this)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","execShowFunction")}if(h){if(this.autoToggleVisibility){var g=c(h).add("label[for='"+this.LabelForAttValue+"']");gx.lang.gxBoolean(this.Visible)?g.show():g.hide()}gx.plugdesign.applyTemplateObject({selector:"#"+
h.id,templateSelector:function(a){return a.onDemandInvoke===true}})}gx.uc.pushPostRenderScripts(this)};this.updateAndShow=function(c){try{this.execV2CFunctions(c)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","updateAndShow")}c&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(c){var e=this.ParentObject,g=e.IsMasterPage?"_MPAGE":"",c=this.ControlName.toUpperCase()+g+"."+c.toUpperCase()+g;if(c=e.getClientEventName(c))return e.isServerEvent(c);gx.dbg.logDebug("Client event name couldn't be resolved.");
return!1};this.eventHandler=function(c,e,g){gx.evt.setReady(!1,"eventHandler");var a=gx.O;gx.setGxO(this.ParentObject);if(0<c){var b=this.DesignContainerName,d=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);d&&d[1]&&(b=d[1]);this.ParentObject[b]=this;(c=this.ParentObject.getGridById(c))&&c.instanciateRow(e)}this.execC2VFunctions();g.call(this.ParentObject,this.getEventRow()).always(function(a){gx.setGxO(a);gx.evt.setReady(!0,"eventHandler")}.closure(this,[a]));
gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(c,e){this[c]=function(g){var a=this.isServerEvent(c);a&&"function"===typeof g&&gx.fx.obs.addObserver("gx.onafterevent",this,g,{single:!0});this.eventHandler(this.GridId,this.GridRow,e);!a&&"function"===typeof g&&g.call(this)}.closure(this)};this.addProperty=function(c,e){this.Properties[c]=e};this.setProp=function(c,e,g,a){this.addProperty(c,e);this.PropTypes[c]=a;gx.lang.isBooleanType(a)?this[c]=gx.lang.gxBoolean(g):"color"==a?gx.lang.emptyObject(g)||
(this[c]="number"==typeof g||"string"==typeof g?gx.color.html(g):g):gx.lang.isNumericType(a)?gx.lang.emptyObject(g)||(this[c]=gx.num.parseFloat(g)):this[c]=g};this.setDynProp=function(c,e,g,a,b){this.addProperty(c,e);this.DynProperties.push(c);this.PropTypes[c]=a;var d=function(){var b=this.getDynPropertyValueFromHidden(c,e);void 0===b&&(b=g);this.setProp(c,e,b,a)};b?d.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(a){a===this.ParentObject&&d.call(this)}):
gx.wr(d,this)};this.refreshDynProperties=function(){for(var c=0,e=this.DynProperties.length;c<e;c++){var g=this.DynProperties[c];this[g]=this.getDynPropertyValueFromHidden(g,this.Properties[g])}};this.getDynPropertyValueFromHidden=function(c,e){var g=gx.fn.getHidden(this.getHiddenName(e));void 0===g&&(g=gx.fn.getHidden(this.getHiddenName(c)));return g};this.setGridProperties=function(){for(var c,e=this.ParentObject.getGridUCProperties(this.ControlName),g=e.length,a=0;a<g;a++){var b=e[a],d=b.v;c=this.getHiddenName(b.h);
c=gx.fn.getHidden(c);if(void 0===d||void 0!==c)d=c,"color"==b.t&&(d=gx.color.html(d));this.setProp(b.p,b.h,d,b.t)}};this.setGridEventHandlers=function(){for(var c=this.ParentObject.getGridUCEventHandlers(this.ControlName),e=c.length,g=0;g<e;g++){var a=c[g];this.addEventHandler(a.e,a.h)}};this.getHiddenName=function(c){var e="",g=this.ControlName.toUpperCase();""!=this.GridRow&&(e="_"+this.GridRow,this.ownerGrid&&(g=this.ownerGrid.realGridName.toUpperCase()));return this.ParentObject.CmpContext+g+
(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+c+e};this.saveProperties=function(){for(var c in this.Properties)if(this.hasOwnProperty(c)){var e=this[c];"function"!=typeof this.Properties[c]&&("undefined"!=typeof e&&("undefined"!=typeof e.R&&"undefined"!=typeof e.G&&"undefined"!=typeof e.B)&&(e=gx.color.rgb(e.R,e.G,e.B)),gx.lang.isBooleanType(this.PropTypes[c])&&(e=e?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[c]),e))}}}}}(gx.$);gx._init();
window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));!window.$.fn||!window.$.fn.jquery?gx.dbg.write("Warning: $ is not a jQuery object instance"):gx.dbg.write("global $ is jquery"+window.$.fn.jquery);
!function(c,h,e){var g,a;function b(){return"function"!=typeof h.createElement?h.createElement(arguments[0]):w?h.createElementNS.call(h,"http://www.w3.org/2000/svg",arguments[0]):h.createElement.apply(h,arguments)}function d(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,c){return b+c.toUpperCase()}).replace(/^-/,"")}function f(a,b){return function(){return a.apply(b,arguments)}}function j(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function s(a,
c,d,e){var f,g,n,l,o=b("div"),j;n=h.body;j=(n||(n=b(w?"svg":"body"),n.fake=true),n);if(parseInt(d,10))for(;d--;){n=b("div");n.id=e?e[d]:"modernizr"+(d+1);o.appendChild(n)}return f=b("style"),f.type="text/css",f.id="smodernizr",(j.fake?j:o).appendChild(f),j.appendChild(o),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(h.createTextNode(a)),o.id="modernizr",j.fake&&(j.style.background="",j.style.overflow="hidden",l=u.style.overflow,u.style.overflow="hidden",u.appendChild(j)),g=c(o,a),j.fake?(j.parentNode.removeChild(j),
u.style.overflow=l):o.parentNode.removeChild(o),!!g}function k(a,b){var d=a.length;if("CSS"in c&&"supports"in c.CSS){for(;d--;)if(c.CSS.supports(j(a[d]),b))return true;return false}if("CSSSupportsRule"in c){for(var f=[];d--;)f.push("("+j(a[d])+":"+b+")");return f=f.join(" or "),s("@supports ("+f+") { #modernizr { position: absolute; } }",function(a){if("getComputedStyle"in c){var a=getComputedStyle.call(c,a,null),b=c.console;null!==a?a=a.getPropertyValue("position"):b&&b[b.error?"error":"log"].call(b,
"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else a=a.currentStyle&&a.currentStyle.position;return"absolute"==a})}return e}function m(c,f,h,n){function l(){o&&(delete g,delete a)}if(n=typeof n==="undefined"?false:n,typeof h!=="undefined"){var j=k(c,h);if(typeof j!=="undefined")return j}for(var o,m,t,p,j=["modernizr","tspan","samp"];!g&&j.length;){o=true;a=b(j.shift());g=a.style}m=c.length;for(j=0;m>j;j++)if(t=c[j],p=g[t],!!~(""+t).indexOf("-")&&(t=d(t)),g[t]!==
e){if(n||typeof h==="undefined")return l(),"pfx"==f?t:true;try{g[t]=h}catch(r){}if(g[t]!=p)return l(),"pfx"==f?t:true}return l(),false}function q(a,b,c,d,e){var g=a.charAt(0).toUpperCase()+a.slice(1),h=(a+" "+v.join(g+" ")+g).split(" "),n;if(typeof b==="string"||typeof b==="undefined")n=m(h,b,d,e);else{h=(a+" "+r.join(g+" ")+g).split(" ");a:{var a=h,l;for(l in a)if(a[l]in b){b=c===false?a[l]:(n=b[a[l]],typeof n==="function"?f(n,c||b):n);break a}b=false}n=b}return n}function p(a,b,c){return q(a,e,
e,b,c)}var n=[],o=[],l={_version:"3.6.0",_config:{classPrefix:"",enableClasses:true,enableJSClass:true,usePrefixes:true},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){o.push({name:a,fn:b,options:c})},addAsyncTest:function(a){o.push({name:null,fn:a})}},t=function(){};t.prototype=l;t=new t;t.addTest("history",function(){var a=navigator.userAgent;return-1===a.indexOf("Android 2.")&&-1===a.indexOf("Android 4.0")||-1===a.indexOf("Mobile Safari")||-1!==a.indexOf("Chrome")||
-1!==a.indexOf("Windows Phone")||"file:"===location.protocol?c.history&&"pushState"in c.history:false});var u=h.documentElement,w="svg"===u.nodeName.toLowerCase(),r=l._config.usePrefixes?["moz","o","ms","webkit"]:[];l._domPrefixes=r;var v=l._config.usePrefixes?["Moz","O","ms","Webkit"]:[];l._cssomPrefixes=v;var B=b("modernizr");t._q.push(function(){delete B});g=B.style;a=void 0;t._q.unshift(function(){delete g});l.testProp=function(a,b,c){return m([a],e,b,c)};l.testAllProps=q;l.testAllProps=p;t.addTest("csstransitions",
p("transition","all",true));t.addTest("flexbox",p("flexBasis","1px",true));(function(){var a,b,c,d,e,f;for(f in o)if(o.hasOwnProperty(f)){if(a=[],b=o[f],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());c=typeof b.fn==="function"?b.fn():b.fn;for(d=0;d<a.length;d++){e=a[d];e=e.split(".");1===e.length?t[e[0]]=c:(!t[e[0]]||t[e[0]]instanceof Boolean||(t[e[0]]=new Boolean(t[e[0]])),
t[e[0]][e[1]]=c);n.push((c?"":"no-")+e.join("-"))}}})();(function(a){var b=u.className,c=t._config.classPrefix||"";if(w&&(b=b.baseVal),t._config.enableJSClass)b=b.replace(RegExp("(^|\\s)"+c+"no-js(\\s|$)"),"$1"+c+"js$2");t._config.enableClasses&&(b=b+(" "+c+a.join(" "+c)),w?u.className.baseVal=b:u.className=b)})(n);delete l.addTest;delete l.addAsyncTest;for(l=0;l<t._q.length;l++)t._q[l]();c.Modernizr=t}(window,document);
gx.spa=function(c){var h=/<head[^>]*>([\s\S]*?)<\/head>/i,e=/(<body[^>]*>[\s\S]*?<\/body>)/i,g=/<title[^>]*>([\s\S]*?)<\/title>/i,a=/#.*/,b=/#/,d=false,f=false,j=window.location.href,s=true,k={},m,q;"state"in window.history&&(s=false);gx.wpo(function(){if(gx.pO.fullAjax)gx.cache.exceptionsRegEx=/messages\..+\.js/},this);var p=function(){!d&&!f&&this.notify("onnavigatecomplete")};return{timeout:-1,setTimeout:function(a){this.timeout=a},isSameApp:function(a,b){var c=a.port===b.port,c=(c=c||a.port===
""&&a.protocol==="http:"&&b.port==="80")||a.port===""&&a.protocol==="https:"&&b.port==="443";return a.protocol===b.protocol&&a.hostname===b.hostname&&c},handleClick:function(d){var e=this.getTarget(d),f,g;if(e&&e.tagName.toUpperCase()==="A"&&!(e.getAttribute("href")===null||e.getAttribute("href")===void 0))if(!e.target||!(e.target=="_blank"||e.target=="_parent"&&window.parent!=window||e.target=="_top"&&window.top!=window||e.target.substr(0,1)!="_"&&window.name!=e.target))if(!(d.which>1||d.metaKey||
d.ctrlKey)){g=this.parseUrl(e.href);if(this.isSameApp(location,g)){var h=g.pathname.charAt(0)=="/"?g.pathname:"/"+g.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===h.substring(0,h.lastIndexOf("/"))&&!(g.href.search(b)>=0&&g.href.replace(a,"")===location.href.replace(a,""))&&e.getAttribute("href")!==""&&e.href.indexOf("javascript:")!==0)if(this.ignoreClick)this.ignoreClick=false;else{g=c(e);for(f in k)if(k.hasOwnProperty(f)&&g.is(f))return;this.navigate({url:e.href,
push:true,scrollTo:true,direction:"forward"});d.preventDefault()}}}},redirect:function(a,b){delete gx.referrer;var b=b===void 0||b,c=this.parseUrl(a),d=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;if(this.isSameApp(location,c))if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==d.substring(0,d.lastIndexOf("/")))window.location=a;else{gx.referrer=location.href;this.navigate({url:a,push:b,scrollTo:true,direction:"forward"})}else window.location=a},setLocation:function(a){this.setStopNavigating(a);
window.location=a},canNavigate:function(){return!d&&!f},isNavigating:function(){return!this.canNavigate()},isNavigatingRaw:function(){return d},cancelNavigating:function(){d=false},setStopNavigating:function(a){d=false;this.notify("onnavigate",[a])},navigate:function(a){var b,c,e=a.url,f=false;if(this.canNavigate()){d=true;this.notify("onbeforenavigate",[e]);if((c=this.request)&&c.readyState<4){c.onreadystatechange=gx.emptyFn;gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+
c.readyState);c.abort()}this.request=c=gx.http.doCall({method:"GET",url:e,handler:function(d,g,h){var d=h.getResponseHeader("X-SPA-REDIRECT-URL"),j=h.getResponseHeader("X-GXOBJECT");if(!f){b&&clearTimeout(b);if(h.status==530)this.setLocation(e);else if(d){this.setStopNavigating(d);setTimeout(gx.spa.redirect.closure(gx.spa,[d]),100)}else{if(a.push&&c.readyState>0&&j){this.updateState();this.state=this.createState(a);window.history.pushState(null,"",c.responseURL||e)}this.processResponse.call(this,
g,h,a)}}},beforeSend:function(a){this.notify("onbeforesend",[this.createEvent(a,e),"X-SPA-REQUEST","X-SPA-MP"]);this.timeout>0&&(b=setTimeout(this.timeoutHandler.closure(this,[a,e]),this.timeout));a.setRequestHeader("X-SPA-REQUEST","1")},offline:function(){b&&clearTimeout(b);f=true;d=false},error:function(a){a=this.createEvent(a,e);a.cancel=true;this.notify("onerror",[a]);a.cancel&&this.setLocation(e)},ajaxHeader:false,avoidCache:false,handleAllStatusCodes:true,obj:this});this.notify("onnavigatestart",
[e])}else this.setLocation(e)},processResponse:function(a,b,c){var d;try{d=c.url;var e=this.parseUrl(d).hash,g=c.direction,h=b.status,j=b.getResponseHeader("X-GXOBJECT"),k=b.getResponseHeader("X-SPA-RETURN"),m=b.getResponseHeader("X-SPA-RETURN-MD"),p=this.createEvent(b,d),q=gx.pO.MasterPage,s=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",H=b.getResponseHeader("X-SPA-MP")||"",D=!(s===""||s.toLowerCase()!=H.toLowerCase()),L=this.getContentPlaceholder();if(k!==null)gx.fn.closeWindowServerScript(k,
m,true);else if(h===500){window.history.pushState(null,"",d);this.cancelNavigating();gx.dom.writeError(b.responseText,gx.getMessage("GXM_runtimeappsrv"),h)}else if(j){this.notify("onbeforeprocessresponse",[p,a,j,s,H,D]);var G=this.extractContents(b,!D),z=D?L.firstChild:document.body,F=G.body;if(G.body){this.state=this.createState(c);c.push&&window.history.replaceState(this.state,"",b.responseURL||d);if(G.title)document.title=G.title;this.notify("onbeforecontentreplace",[b,d,G]);gx.cache.removeRemoteFile(gx.getThemeElement().href);
gx.dom.replaceWithFx(z,F,{domRemove:false,domAdd:D,enteringClass:g=="forward"?"entering":"leaving",leavingClass:g=="forward"?"leaving":"entering",enterDurationClass:g=="forward"?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:g=="forward"?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){F=this.replaceContentCallback(b,d,e,a,L,G,z,F,c,j,q,s,H,D);D||gx.html.processCode(G.rawHtml||G.head.innerHTML+G.body.innerHTML,false,this.processCodeCallback.closure(this,
[b,d,e,a,L,G,z,F,c,j,q,s,H,D]),null,null,false,true);f=false;this.notify("ontransitionend",[p,q,s,H,D]);this.recoverScrollPosition(c);return F}.closure(this),beforeTransitionStart:function(g){f=true;if(D){gx.html.processCode(a,false,function(){g&&g();this.processCodeCallback(b,d,e,a,L,G,z,F,c,j,q,s,H,D)}.closure(this),null,null,false);return true}}.closure(this)})}else this.setLocation(d)}else this.setLocation(d)}catch(C){gx.dbg.logEx(C,"gxspa.js","processResponse");this.setLocation(d)}},replaceContentCallback:function(a,
b,d,e,f,g,h,j,k,m,p,q,s,H){if(H){if(h.parentNode){this.dettachContent(h);h.parentNode.removeChild(h)}}else{if(gx.util.browser.isWebkit()||gx.util.browser.isFirefox()){this.dettachContent(document.body);c(document.body).remove();var D=document.createElement("body"),a=c(j).prop("attributes");c.each(a,function(){c(D).attr(this.name,this.value)});document.documentElement.appendChild(D);D.innerHTML=j.innerHTML;j=D}else{document.body=j;j=document.body}document.head=g.head}return j},processCodeCallback:function(a,
b,c,d,e,f,g,h,j,k,m,p,q,s){a=this.createEvent(a,b);try{this.notify("oncontentreplace",[a,d,f,k,m,p,q,s])}catch(D){gx.dbg.logEx(D,"gxspa.js","processCodeCallback");this.setLocation(b)}d=true;if(j.scrollTo){window.scrollTo(0,0);d=false}j.push&&window._gaq&&_gaq.push(["_trackPageview"]);j.push&&window.ga&&window.ga("send","pageview",location.pathname);if(c!==""){f=this.parseUrl(b);f.hash=c;window.history.replaceState(this.state,"",f.href);if(c=gx.dom.el(f.hash)){c.scrollIntoView(true);d=false}}this.setStopNavigating(b);
d&&this.recoverScrollPosition(j)},timeoutHandler:function(a,b){var c=this.createEvent(a,b);c.cancel=true;this.notify("ontimeout",[c]);if(c.cancel){a.abort();gx.dbg.logMsg("Request cancelled - timeout expired: "+a.readyState);this.setLocation(b)}},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(a,b){var d=document.createElement("div"),f={},j,k,m;if(b){d=document.createElement("iframe");d.src="about:blank";d.style.display="none";document.body.appendChild(d);
var p=a.responseText.match(h);p.length>1&&(j=p[1]);p=a.responseText.match(e);p.length>0&&(k=p[0]);p=a.responseText.match(g);if(p.length>1)f.title=p[1];d.contentDocument&&d.contentDocument.body==null&&d.contentDocument.write("<body></body>");d.contentDocument.body.outerHTML=k;m=d.contentDocument.head;m.innerHTML=j;c("head script").each(function(a,b){c(m).find("script").each(function(a,d){b.getAttribute("data-gx-external-script")===null?b.src==d.src&&m.removeChild(d):c(b).remove()})});f.body=d.contentDocument.body;
f.head=m;f.rawHtml=m.innerHTML+k}else{gx.html.setInnerHtml(d,a.responseText,false,false,false);j=gx.dom.byClass("gx-content-placeholder","div",d);if(j.length===0)return f;f.body=j[0].firstChild;j=gx.dom.byTag("title",d);if(j.length>0)f.title=j[0].innerText||j[0].textContent}return f},handlePopState:function(a){var a=a.state,b=this.getContentPlaceholder();if(a&&a.source=="gx-spa"){if(s&&j==a.url||this.state.url===a.url)return;this.navigate({id:a.id,url:a.url,push:false,scrollPosition:a.scrollPosition,
direction:this.state.id<a.id?"forward":"back"});b&&void 0}gx.popup.ispopup()&&gx.fn.cancelWindow()},parseUrl:function(a){var b=document.createElement("a");b.href=a;return b},createEvent:function(a,b){return{req:a,url:b,cancel:false}},addIgnoredSelector:function(a){k[a]=true},removeIgnoredSelector:function(a){delete k[a]},recoverScrollPosition:function(a){var b=a.scrollPosition;this.canNavigate()&&(!a.scrollTo&&b)&&window.scrollTo(b.x,b.y)},dettachContent:function(a){var b=gx.dom.getActiveElement();
b&&c.contains(a,b)&&gx.dom.purgeElement(b)},updateState:function(){var a=this.state;a.url=location.href;a.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(a,"",a.url)},createState:function(a){a=a||{};return{id:a.id||(new Date).getTime(),source:"gx-spa",url:a.url}},getTarget:function(a){return a.target&&a.target.tagName=="A"?a.target:gx.dom.findParentByTagName(a.target,"A")},applyConfig:function(a){if(a&&a.listeners)for(var b in a.listeners){var c=a.listeners[b];typeof c==
"function"&&this.addObserver(b,a.listeners.scope||this,c)}},setBodyClass:function(){var a="Form",b=document.body;b.className&&(a=b.className.split(" ")[0]);gx.dom.hasClass(b,a+"-fx")||gx.dom.addClass(b,a+"-fx")},isSupported:function(){return gx.util.browser.isIE()&&!gx.util.browser.isEdge()?false:gx.pO&&gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(a){if(this.isSupported()&&!this.started){this.applyConfig(a);m=this.handleClick.closure(this);
q=this.handlePopState.closure(this);document.addEventListener("click",m,false);window.addEventListener("popstate",q,false);this.state=this.createState({url:location.href});window.history.replaceState(this.state,document.title);this.setBodyClass();this.started=true;this.addObserver("onnavigate",this,p);this.addObserver("ontransitionend",this,p)}},stop:function(){if(this.started){document.removeEventListener("click",m,false);window.removeEventListener("popstate",q,false);this.started=false}}}}(gx.$);
gx.lang.apply(gx.spa,new gx.util.Observable);gx.core={};
gx.core.analytics=function(){return{supported:function(){if(typeof window.ga==="undefined"){console.log("Google Analytics - GA not enabled on this webpage");return false}return true},trackView:function(c){this.supported()&&window.ga("send","pageview",c)},trackEvent:function(c,h,e,g){this.supported()&&window.ga("send",{hitType:"event",eventCategory:c,eventAction:h,eventLabel:e,eventValue:g})},trackPurchase:function(c){var h=function(a,c,e,g,h){if(g&&gx.lang.emptyObject(e)&&h==null){console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",
c);return false}gx.lang.emptyObject(e)&&g&&(e=h);if(!gx.lang.emptyObject(e)){a[c]=e;return true}return false};if(this.supported()){window.ga("require","ecommerce");var e={},g=0;if(h(e,"id",c.TransactionId,true)){h(e,"affiliation",c.Affiliation);h(e,"revenue",c.Revenue);h(e,"shipping",c.Shipping);h(e,"tax",c.Tax);h(e,"currency",c.CurrencyCode);window.ga("ecommerce:addTransaction",e);for(g=0;g<c.Items.length;g++){var e=c.Items[g],a={};if(h(a,"id",c.TransactionId,true)&&h(a,"name",e.Name,true)){h(a,
"sku",e.Id);h(a,"category",e.Category);h(a,"price",e.Price);h(a,"quantity",e.Quantity);h(a,"currency",e.CurrencyCode);window.ga("ecommerce:addItem",a)}}window.ga("ecommerce:send")}}},setUserId:function(c){this.supported()&&window.ga("set","userId",c)}}}(gx.$);
gx.core.audio=function(c){var h,e=[],g=[];return{supported:function(){return!(gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8)},getSoundVar:function(a){return a==2?g:e[a]},playBackground:function(a){this.play(a,1)},play:function(a,b){h=true;b!=2&&this.stop(b);if(b==3){this.stop(2);this.pauseSound(this.getSoundVar(1))}b==2&&this.stop(3);this.playSound(b,a).always(function(){b==3&&this.resumeSound(this.getSoundVar(1))}.closure(this,[]))},playSound:function(a,b){var d=c.Deferred(),f;if(this.supported()){f=
new Howl({src:[b],html5:true,onplay:function(){},onend:function(){d.resolve()},onstop:function(){d.resolve()},onpause:function(){d.resolve()}});f.play()}else{f=c("<bgsound/>").attr({id:"gxIE7AudioSound_"+a,loop:"0",src:b});c("body").append(f)}e[a]=f;a==2&&g.push(f);return d.promise()},stop:function(a){if(a){this.stopSound(this.getSoundVar(a));e[a]=null}else{this.stopSound(this.getSoundVar(3));this.stopSound(this.getSoundVar(2));this.stopSound(this.getSoundVar(1))}},stopSound:function(a){var b=this.supported(),
a=gx.lang.isArray(a)?a:[a];c.map(a,function(d,e){d=a[e];if(!b&&d){c(d).attr("src","");c(d).remove();d=void 0}d&&d.stop&&d.stop()})},pauseSound:function(a){this.supported()&&a&&a.pause&&a.pause()},resumeSound:function(a){this.supported()&&a&&a.play&&a.play()},isPlaying:function(a){if(this.supported())return!a?this.isPlaying_impl(this.getSoundVar(3))||this.isPlaying_impl(this.getSoundVar(2))||this.isPlaying_impl(this.getSoundVar(1)):this.isPlaying_impl(this.getSoundVar(a))},isPlaying_impl:function(a){for(var b,
c=false,a=gx.lang.isArray(a)?a:[a],e=0;e<a.length;e++)(b=a[e])&&(c=c||b.playing())},_deinit:function(){if(h){this.stop(3);this.stop(2)}h=false}}}(gx.$);gx.core.pwa=function(){var c;window.addEventListener("beforeinstallprompt",function(h){c=h;c.userChoice.then(function(e){gx.fx.obs.notify("gx.pwa.onpromptchoice",[e.outcome]);c=null});gx.fx.obs.notify("gx.pwa.onbeforeinstallprompt")});return{showPrompt:function(){c&&c.prompt()}}}(gx.$);
gx.core.ds=function(){return{setOption:function(c,h){document.documentElement.setAttribute("gx-data-"+c,h)},clearOption:function(c){document.documentElement.removeAttribute("gx-data-"+c)}}}(gx.$);
gx.core.clientSocket=function(){var c,h,e=0;window.addEventListener("unload",function(){h&&h.close()});var g=function(a){gx.fx.obs.notify("gx.core.clientsocket.onmessagereceived",[a])},a=function(){e=1;gx.fx.obs.notify("gx.core.clientsocket.onconnect",[void 0])},b=function(){e=0;gx.fx.obs.notify("gx.core.clientsocket.onconnectfailed",[void 0])};return{open:function(a){if(e===1)gx.dbg.logDebug("gx.core.clientSocket - WebSocket already connected");else{c="clientSocket_"+a;try{this.attachHandlers(c);
if(a)h=new gx.webSocket({wsURL:a,namespace:c});else{var b=gx.fn.getHidden("GX_WEBSOCKET_PORT"),g=gx.basePath&&gx.basePath.length>0?"/":"";h=new gx.webSocket({port:b,clientId:gx.fn.getHidden("GX_WEBSOCKET_ID"),wsProtocol:location.protocol==="https:"?"wss://":"ws://",host:b?location.hostname+":"+b+"/":location.host+"/",resourceUrl:g+(gx.gen.isDotNet()?"gxwebsocket.svc?":"gxwebsocket?"),basePath:gx.basePath,namespace:c})}}catch(s){gx.dbg.logEx(s,"genexus-core.js","Could not initialize WebSocket Client")}}},
close:function(){this.detachHandlers(c);try{h&&h.close()}catch(a){}e=0},send:function(a){e===1?h.send(a):gx.dbg.logDebug("gx.core.clientSocket - WebSocket is disconnected")},attachHandlers:function(c){gx.fx.obs.addObserver("gx.ws.onMessage."+c,this,g,{single:false,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onOpen."+c,this,a,{single:false,doNotDelete:gx.O.IsMasterPage});gx.fx.obs.addObserver("gx.ws.onError."+c,this,b,{single:false,doNotDelete:gx.O.IsMasterPage})},detachHandlers:function(c){gx.fx.obs.deleteObserver("gx.ws.onMessage."+
c,this,g);gx.fx.obs.deleteObserver("gx.ws.onOpen."+c,this,a);gx.fx.obs.deleteObserver("gx.ws.onError."+c,this,b)}}}(gx.$);
(function(c){var h=/(gx-form-item|col-(?:xs|sm|md|lg)-\d{1,2})/g,e=function(a){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(a))},g=function(a,b){var d=c(a).parent().find("span");if(gx.lang.gxBoolean(b))d.parent("p").hide();else{d.removeClass("form-control");var e=d.parent("p");e.length===0?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",d[0],{checkInclusion:true}):e.show()}},a=function(a,b){var d=c(".gx-form-group[data-gx-for='"+gx.dom.id(a)+"']");d.length===0&&(d=c(a).parents("div.gx-attribute").first());
gx.lang.gxBoolean(b)?d.show():d.hide()},b=function(a,b){var b=b.trim(),c=gx.html.getFieldLabel(a),d=b.split(" ").join("Label ")+(b?"Label":""),e;if(c){e=(e=c.className.match(h))?e.join(" ")||"":"";d=["gx-label",e,d,"control-label"].join(" ");if(c.className!==d)c.className=d}};e({name:"labels",selector:"div.gx-form-group:has(label.gx-label:not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(a,b){var d=c(b).find("label.gx-label").addClass("control-label");a.labelEl=d[0];
return a},listeners:{control:function(a){return c(a.labelEl).attr("for")},after:{Class:b}}});e({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",initialize:function(a){(a=c("#"+a.id)[0])&&b(a,a.className.replace("form-control",""))},listeners:{control:function(a){return a.id},after:{Enabled:g,Visible:a}}});e({name:"readonly-atts-vars",selector:'.gx-attribute span[data-gx-readonly],span[class^="Readonly"]:not(:has(input[type="radio"], input[type="checkbox"]))',
template:'<p class="form-control-static">{{{outerHTML}}}</p>',outerHTML:true,listeners:{control:function(a){return a.id},after:{Visible:function(b,d){var e=c(b).parent("p");gx.lang.gxBoolean(d)?e.show():e.hide();a(b,d)}}}});e({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+gx.getMessage("GXM_revealpassword")+
'"><span class="glyphicon glyphicon-eye-open"></span></button></span></div>',setContext:function(a,b){a.inputEl=b;return a},initialize:function(a){var b=c("#"+a.id),d=c("#"+a.id)[0];b.next().on("click",function(){gx.fn.setCtrlProperty(d.id,"Ispassword",d.type!="password")})},listeners:{control:function(a){return a.id},after:{Visible:function(b,d){gx.lang.gxBoolean(d)&&gx.fn.isVisible(b,0)?c(b).next().show():c(b).next().hide();a(b,d)},Enabled:function(a,b){gx.lang.gxBoolean(b)?c(a).next().children().first().prop("disabled",
false):c(a).next().children().first().prop("disabled",true)},Ispassword:function(a,b){c("button",c(a).next()).attr("title",gx.getMessage(gx.lang.gxBoolean(b)?"GXM_revealpassword":"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")}}}});e({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute span > input[type="checkbox"]',setContext:function(a,b){a.id=c(b)[0].id;return a},initialize:function(a){a=c("#"+a.id).get(0);
c(a).closest("span").addClass("gx-checkbox-wrapper")},listeners:{control:function(a){return a.id},after:{Visible:function(b,d){var e=c(b).parent().closest(".gx-checkbox-wrapper");if(gx.lang.gxBoolean(d)){e.show();e.children().show()}else e.hide();a(b,d)}}}});e({name:"usercontrol",onDemandInvoke:true,selector:".gx_usercontrol",setContext:function(a,b){a.id=c(b)[0].id;return a},listeners:{control:function(a){return a.id},after:{Visible:a}}});var d=function(b,d,e){b.visible=d;var f=c(b).parent().find(".input-group-btn");
gx.lang.gxBoolean(d)&&gx.fn.isVisible(b,0)?(this.enabled||this.enabled===void 0)&&f.show():f.hide();e||a(b,d)};e({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}</a></span></div></div>',outerHTML:true,setContext:function(a,b){var d=c(b),e=d.attr("data-align");a.datePickerCt=b;a.inputEl=d.find("input")[0];
a.imgEl=d.find("img")[0];a.inputElId=a.inputEl.id;a.alignClass=e?"pull-"+e:"";a.nativeEl=d.find("#"+a.inputEl.id+"-picker")[0];d=c("#span_"+a.inputEl.id);if(d.length>0){e=d.parent("p")[0];a.spaneEl=e?e:d;e&&c(e).remove()}return a},initialize:function(a){var b=c("#"+a.inputElId),e=b.parent().closest(".dp_container");a.nativeEl&&e.append(a.nativeEl);e.find("a").on("click",function(a){try{if(a.target.nodeName!="IMG"){e.find("img")[0].click();return false}}catch(b){return false}});var f=gx.fn.isVisible(b[0],
0),a=c("#span_"+a.inputEl.id);a.length>0&&(f=f||gx.fn.isVisible(a[0],0));d.call(this,b[0],f,true)},listeners:{control:function(a){return a.inputEl.id},after:{Enabled:function(a,b){a.enabled=gx.lang.gxBoolean(b);var d=c(a).parent().find(".input-group-btn");if(gx.lang.gxBoolean(b)){var e=this.visible||gx.fn.isVisible(a);(e||e===void 0)&&d.show()}else d.hide();g(a,b)},Visible:d}}});var f=function(a){return c(a).parent().closest("span")},j=function(a){a.find(":checked").parent("label").button("toggle")},
s=function(a,b){var c=a.find("label");if(b){c.prop("disabled",false);c.removeClass("disabled");a.find("input, label").css("pointer-events","")}else{c.prop("disabled",true);a.find("input, label").css("pointer-events","none");c.addClass("disabled")}};e({name:"radio-button",selector:".gx-radio-button:not(.gx-tpl-ignore) label",setContext:function(a,b){var d=f(b);a.name=c(b).children("input").attr("name");a.spanEl=d;if(!c(d).prop("initialized")){d.children("label").addClass("gx-radio-label btn btn-default");
var e=c(b).children().prop("disabled");j(d);s(d,!(e===true||e==="disabled"));d.find("script").remove();d.attr("data-toggle","buttons");e=d.hasClass("gx-radio-button-vertical")?"-vertical":"";d.addClass("btn-group"+e).removeClass("gx-radio-button-vertical").css("vertical-align","baseline")}return a},initialize:function(a){if(!c(a.spanEl).prop("initialized")){a.spanEl.prop("initialized",true);a.spanEl.children("label").on("click",function(){var a=c(this).children("input");a.trigger("focus");a.attr("checked",
"");a.prop("checked",true);gx.evt.onchange(a.get(0))})}},listeners:{control:function(a){return a.name},after:{Visible:a,Enabled:function(a,b){s(f(a),b)},Value:function(a){j(f(a))}}}});e({name:"prompt",selector:function(a){return c('a:has(img[id*="PROMPT"])',a).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}</span></div>',setContext:function(a,b){a.inputEl=b;a.promptEl=c(b).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default");
return a},listeners:{control:function(a){return a.inputEl.id},before:{Visible:function(a,b){var d=c(a).parent();gx.lang.gxBoolean(b)?d.show():d.hide()},Enabled:function(a,b){var d=c(a).parent().find(".input-group-btn");gx.lang.gxBoolean(b)?d.show():d.hide()}}}});e({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(a,b){a.imgEl=b;return a},listeners:{control:function(a){return a.imgEl.id},before:{Enabled:function(a,b){var d=c(a).closest(".input-group-btn");gx.lang.gxBoolean(b)?
d.show():d.hide()}}}});var k=function(a,b){var d=c(a).parent(),d=d.add(d.find("img"));gx.lang.gxBoolean(b)?d.show():d.hide()};e({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"></div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"></div></a></span></div>',setContext:function(a,b){a.inputEl=c(b).prev()[0];a.triggerEl=c(b)[0];return a},initialize:function(a){gx.evt.attach(a.el,"click",
function(){gx.geolocation.getMyPosition(this)});c("#"+a.inputEl.id+"_hook").replaceWith(a.inputEl);c("#"+a.inputEl.id+"_trigger_hook").replaceWith(a.triggerEl);k.call(this,a.inputEl,gx.fn.isVisible(a.inputEl,0))},listeners:{control:function(a){return a.inputEl.id},before:{Visible:k,Enabled:function(a,b){var d=c(a).parent().find(".input-group-btn");gx.lang.gxBoolean(b)?d.show():d.hide()}}}});e({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}</div><div class="col-sm-12">{{$uriOptionLbl$}}</div></div></div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}</div></div><div class="row"><div class="col-sm-12">{{$button$}}</div></div>',
applyTo:"inner",setContext:function(a,b){var d=c(b).parent().closest(".gx-multimedia-upload")[0],e=gx.html.multimediaUpload.getElements(d);e.fileOptionLbl=e.fileOption.parentNode;e.uriOptionLbl=e.uriOption.parentNode;gx.lang.apply(a,e);a.container=d;return a},initialize:function(a){c(a.button).addClass("btn btn-default Button");c(a.uriField).addClass("form-control")},listeners:{control:function(a){return gx.html.multimediaUpload.CtrlId(a.container.id)},after:{Visible:function(b,c){a(b,c,7)}}}});e({name:"navbar",
selector:".gx-navbar",setContext:function(a,b){a.toggleBtn=c(b).find(".gx-navbar-toggle");a.navBarInner=c(b).find(".gx-navbar-inner");return a},initialize:function(a){a.toggleBtn.attr("data-target","#"+a.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var a=c(".navbar-collapse");a.collapse&&a.collapse("hide")});var m=function(a){a.anchor.get(0).href==location.href?a.anchor.parent().addClass("active"):a.anchor.parent().removeClass("active")};e({name:"navbar-textblock-link",
selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(a,b){var d=["id","class","style",gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,"title"],e=c(b),f;a.anchor=e.children("a");if(a.anchor.length===0&&e.is("a"))a.anchor=e;for(f=0;f<d.length;f++)a.anchor.attr(d[f],e.attr(d[f]));return a},reDraw:m,initialize:m,listeners:{control:function(a){return a.id},before:{Caption:function(a,b){c(a).text(b);return true},Link:function(a,
b){c(a).attr("href",b);return true}}}});e({name:"navbar-textblock-text",selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(a){c(a.el).addClass("navbar-text")},listeners:{control:function(a){return a.id},after:{Link:function(a,b){var d=c(a);if(b&&d.hasClass("navbar-text")){d.removeClass("navbar-text");gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",a)}}}}});e({name:"errorviewer",selector:".gx_ev div",initialize:function(a){var a=c(a.el),b=a.parent(".gx_ev"),d=b.css("position");
if(d==="fixed"||d==="absolute"){b[0].effect&&b[0].effect.end();a.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(c('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'))}}});e({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(a,b){a.el=c(b);return a},initialize:function(a){var b=a.el,a=b[0],d=c(window),e=parseInt(b.attr("rows"),
10),f=parseInt(b.attr("data-gx-text-maxlines"),10);b.css("overflow-x","hidden");var g=function(a,b,c){b=b+c;a.attr("rows",b);return b},b=function(){for(var a=d.scrollTop(),b=parseInt(c(this).attr("rows"),10),h=c(this);b>e&&this.scrollHeight>=this.clientHeight;)b=g(h,b,-1);for(;c(this).val()!==""&&b<f&&this.scrollHeight>this.clientHeight;)b=g(h,b,1);d.scrollTop(a)};gx.evt.attach(a,["input","keyup"],b.closure(a,[]));gx.evt.on_ready(a,b.closure(a,[]))}});var q=function(a){a=a.get(0);return gx.dom.getComputedStyle(a).getPropertyValue("--gx-image-scaling").trim()===
"on"},p=function(a){var b=a;if(q(a)){a.parent("a").length>0&&(b=a.parent("a"));b.parent("div[data-align-inner]").parent().parent().attr("data-align-image","")}};e({name:"image",selector:"img[data-gx-image]",setContext:function(a,b){a.el=c(b);return a},initialize:function(a){var a=a.el,b=a.get(0).currentSrc||a.attr("src");b&&q(a)&&a.css("background-image","url("+b+")");p(a)},listeners:{control:function(a){return a.id},after:{Bitmap:function(a,b){var d=c(a);b&&q(d)?d.css("background-image","url("+b+
")"):d.css("background-image","none")},Class:function(a){var b=c(a);a.src&&q(b)?b.css("background-image","url("+a.src+")"):b.css("background-image","none");p(b)}}}})})(gx.$);
gx.ui=function(c){return{grid:function(){this.gridContainer=null;this.firstTime=true;this.loadingCollection=this.autoRefreshing=false;this.properties=[];this.setContainerDelayed=function(c){this.gridContainer=c;this.DesignContainerName=this.ContainerName=gx.dom.id(c);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(c,g,a,b){this.clearFunctions();this.refreshDynProperties();
this.properties=[];for(var d=0;d<this.rows.length;d++){this.properties[d]=[];for(var f=this.rows[d],h=0;h<this.columns.length;h++){var s=this.columns[h],k=f.gxProps[s.index],m=s.gxControl;m.grid=this.ownerGrid;m.row=f;m.gridId=this.gxId;m.gridRow=f.gxId;a?m.value=k[0]:m.setProperties.apply(m,k);this.setRenderProperties(f.gxRenderProps[h],m);if(!m.enabled&&m.type<=gx.html.controls.types.checkBox)m.cssClass=gx.fn.prefixROClass(m.cssClass);this.properties[d][h]=gx.lang.clone(m);this.addC2V(s,this.properties[d][h])}}this.firstTime=
c;this.autoRefreshing=g?true:false;this.loadingCollection=a?true:false;if(this.show){this.setC2ShowFunction(function(a){a.show();b()});if(this.autoRefreshing){this.show();b()}}this.autoRefreshing=false};this.addC2V=function(c,g){this.addC2VFunction(function(a){if(c.gxAttName!==""){var b=a.ParentObject.getValidStruct(c.gxId);if(b)a.ParentObject[b.gxvar]=g.value;gx.fn.setHidden(g.id,g.value)}})};this.setRenderProperties=function(c,g){if(c)for(var a in c)g[a]=c[a]};this.selectRow=function(c){if(c=this.rows[c]){this.instanciateSelectionVars(c.gxId);
this.instanciateSelectedRow(c)}};this.getEventRow=function(){return!gx.lang.emptyObject(this.GridRow)?this.GridRow:"0001"};this.executeEvent=function(c,g){if(c<this.columns.length&&g<this.rows.length){var a=this.properties[g][c],b=gx.html.controls.eventJSCode(a.jsScrCode,a.eventName,a.jsDynCode,a.grid,a.row);if(b!==""){gx.lang.emptyObject(a.usrOnclick)||(b="if("+a.usrOnclick+") { "+b+" }");a=new Function(b);typeof a=="function"&&a()}else if(a.clickEvent){var b=this.parentGxObject,d=a.row.gxId;this.ownerGrid.instanciateRow(d);
b[a.clickEvent].call(b,d)}}};this.executeIsValid=function(c,g){if(c<this.columns.length&&g<this.rows.length){var a=this.parentGxObject,b=this.properties[g][c],d=b.vStruct||a.GXValidFnc[b.column.gxId],b=b.row.gxId;if(d&&d.isvalid){this.ownerGrid.instanciateRow(b);a[d.isvalid].call(a)}}};this.addEventHandler=function(c,g){this[c]=function(a){var b=this.isServerEvent(c);b&&a&&gx.fx.obs.addObserver("gx.onafterevent",this,a,{single:true});this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),
g);!b&&a&&a.call(this)}.closure(this)};var h={};this.requestSuggest=function(e,g,a){var b=c.Deferred();if(e<this.columns.length&&g<this.rows.length){var d=this.parentGxObject,g=this.properties[g][e],e=g.vStruct||d.GXValidFnc[g.column.gxId],g=g.row.gxId,f=h[g+"_"+e.id];if(!f&&e&&e.gxsgprm){this.ownerGrid.instanciateRow(g);f=new gx.fx.suggestProvider(d,e.gxsgprm[1],null,e.gxsgprm[0]);h[g+"_"+e.id]=f}if(f){gx.fx.updateSuggestParms(e.gxsgprm[2]);f.requestSuggestions([],function(){b.resolve(f.values)},
function(){b.reject()},a)}else b.reject()}else b.reject();return b.promise()};this.executeValidate=function(c,g){if(c<this.columns.length&&g<this.rows.length){var a=this.parentGxObject,b=this.properties[g][c],d=b.vStruct||a.GXValidFnc[b.column.gxId],b=b.row.gxId;if(d&&d.fnc){this.ownerGrid.instanciateRow(b);d.fnc.call(a)}}}}}}(gx.$);
gx.ui.controls=function(c){var h=function(){var c=["render","selectTabPageByIndex","hideTabPageByIndex","showTabPageByIndex","getTabPageIndexByControlName","getTabPageControlNameByIndex"];return{show:function(){for(var g=this.ActivePage,a=0;a<c.length;a++)this[c[a]]||console.error("Missing required method",c[a],this);if(this.IsPostBack)this.update&&this.update();else{this.beforeRender&&this.beforeRender();this.render();this.ActivePageControlName&&(g=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),
10));g||(g=1);this.selectTabPageByIndex(g);this.tabPageSelected(g,true,false);this.HistoryManagement&&HistoryManager.Initialize(this);this.afterRender&&this.afterRender()}this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(c,a,b){if(this.ActivePage!==c){this.ActivePage=c||1;this.ActivePageControlName=this.getTabPageControlNameByIndex(c)||"";this.HistoryManagement&&b!==false&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,true,null,
false);!a&&this.TabChanged&&this.TabChanged()}},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){var c;if(!gx.grid.drawAtServer){c=(c=document.location.hash.length>0?document.location.hash.substr(1):"")?this.getTabPageIndexByControlName(c):1;this.selectTabPageByIndex(c);this.tabPageSelected(c,false,false)}},SelectTab:function(c){this.selectTabPageByIndex(c);this.tabPageSelected(c,false,void 0)},
HideTab:function(c){this.hideTabPageByIndex(c)},ShowTab:function(c){this.showTabPageByIndex(c)}}}();return{datePicker:function(e){this.$input=c("#"+e.inputId);this.$trigger=c("#"+e.triggerId);this.showInLine=e.inline;this.inputType=e.inputType;this.format=e.format;this.datePartLength=e.datePartLength;this.timePartLength=e.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=e.afterChange;
this.opts=e;this.getInputType=function(){return this.timePartLength>0&&this.datePartLength===0?"time":this.datePartLength>0&&this.timePartLength===0?"date":"datetime-local"};this.getTimeStep=function(){return this.timePartLength>6?1:60};this.resolveValue=function(c,a){var b;gx.date.isNullDate(a)&&c!=="time"&&(a=new Date);if(c=="date"){a.setMinutes(a.getMinutes()-a.getTimezoneOffset());b=a.toISOString().slice(0,10)}else{a.setMinutes(a.getMinutes()-a.getTimezoneOffset());b=0;var d=19;if(c=="time"){b=
11;d=this.getTimeStep()==60?16:19}b=(new gx.date.gxdate(a)).Value.toISOString().slice(b,d)}return b};this.render=function(){if(this.nativeSupport){var e=this.$input,a=this.getInputType(),b=c("<input>");b.attr("type",a);(a==="time"||a==="datetime-local")&&b.attr("step",this.getTimeStep());b.css("position","absolute");b.css("top","0");b.css("left","0");b.css("opacity","0");b.attr("id",e.attr("id")+"-picker");this.dtPicker=b;e.parent().append(b);b.bind("touchstart touchend mousedown mouseup",function(){return e.prop("disabled")!==
true});var d=this,f=function(a){var a=a.val(),b=new gx.date.gxdate(a,"Y4MD"),a=a!==""?b.Value:gx.date.nullDate();d.afterChange&&d.afterChange(null,a,e[0],d.opts.vStruct,d.opts.gxO)};this.$trigger.on("click",function(){var c=gx.date.dateObject(e.val());if(!gx.date.isNullDate(c)){c=d.resolveValue(a,c);b.val(c);f(b)}b.trigger("click").trigger("focus")});gx.evt.attach(b[0],"change",function(){var a=c(this);f(a)})}else gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts.inputId,this.opts.inline,
this.opts.inputType!=="date",this.opts.weeksNumbers,this.opts.mondayFirst,this.opts.format],0)};this.installCalendar=function(e,a,b,d,f,h){var s=gx.dom.byId(e),k=c(s);if(gx.lang.emptyObject(s)||s.nodeName!="SELECT")if(a===0){a=e+"_dp_trigger";if((s=gx.dom.byId(a))&&k.css("display")!=="none"&&k.css("visibility")!=="hidden"&&k.css("display")==="none"||k.css("visibility")==="hidden"||!s)a=e;k=k.parent().closest(".dp_container")[0];Calendar.setup({inputField:e,parentNode:k,showsTime:b,weekNumbers:d,mondayFirst:f,
ifFormat:h,button:a,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:true,displayRight:false})}else{gx.lang.emptyObject(s)||k.css("display","none");Calendar.setup({inputField:e,showsTime:b,weekNumbers:d,mondayFirst:f,ifFormat:h,flat:e+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:true})}}},actionGroup:function(){return{init:function(){c("[data-gx-base-lib='none']").length>0&&gx.fx.obs.addObserver("gx.onclick",this,function(e){var e=e.event,g=e.target;if(c(g).is(".gx-navbar .dropdown>a")){e.preventDefault();
var e=g.getAttribute("aria-expanded"),a=function(b){var d=c(g).next(".gx-dropdown-menu"),b=b.event.target;if(!c(b).closest(d).length&&b!=g&&g.getAttribute("aria-expanded")==="true"){g.setAttribute("aria-expanded","false");gx.fx.obs.deleteObserver("gx.onclick",this,a)}};if(e==="false"){gx.fx.obs.addObserver("gx.onclick",this,a);g.setAttribute("aria-expanded","true")}else{gx.fx.obs.deleteObserver("gx.onclick",this,a);g.setAttribute("aria-expanded","false")}}})},dynamicItems:function(){return function(c){this.preProcessItems=
function(c,a){var b,d;b=0;for(d=c.length;b<d;b++){var e=(a?a+" ":"")+b.toString();if(c[b].Children)this.preProcessItems(c[b].Children,e);else{c[b].Children=[];c[b]._$Key=e}}};this.getItems=function(){return this.items};this.setItems=function(c){this.preProcessItems(c);this.items=c||[]};this.getItemPressed=function(){return this.itemPressed||{}};this.setItemPressed=function(c){this.itemPressed=c};this.assignItemPressed=function(c){var c=c.split(" "),a=this.getItems(),b,d;for(d=0;d<c.length;d++){var e=
parseInt(c[d],10);b=b?b.Children[e]:a[e]}this.setItemPressed(b)};this.getType=function(g){var a;return function(){a||(a=c(g.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type"));return a}}(this);this.renderMenu=function(g){var a="";this.IsPostBack?c('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():c(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+'"></li>').css("display","none").appendTo(gx.dom.form());if(g.length){a=
Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",{containerName:this.ContainerName,Children:g},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/EventName}}{{^EventName}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}</span>{{/EventName}}</span>{{/Children.length}}{{/Link}}</li>',
navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"></span></a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}</ul></li>'});c('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(a)}};this.renderToolbar=function(g){var a="";g.length&&
(a=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}',
{containerName:this.ContainerName,Children:g},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{#EventName}}<a href="#" data-event-name="{{EventName}}" data-key="{{_$Key}}">{{Caption}}</a>{{/EventName}}{{^EventName}}{{Caption}}{{/EventName}}</span>{{/Children.length}}{{/Link}}{{/Children}}'}));
c(this.getContainerControl()).attr("data-gx-dynitem-container","").html(a)};this.show=function(){if(this.getContainerControl()){var c=this.getType(),a=gx.lang.isArray(this.items)?this.items:[this.items],b=[];if(c=="menu"){this.renderMenu(a);b=document.querySelectorAll("[data-gx-dynitem-source='"+this.ContainerName+"'] a[data-event-name]")}else if(c=="toolbar"){this.renderToolbar(a);b=this.getContainerControl().querySelectorAll("a[data-event-name]")}for(c=0;c<b.length;c++)gx.evt.attach(b[c],"click",
this.fireEvent,this)}};this.destroy=function(){var g=this.getType();if(g=="menu"){c('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove();c('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()}else g=="toolbar"&&c(this.getContainerControl()).html("")};this.fireEvent=function(c){c.preventDefault();var c=c.currentTarget.dataset,a=this.ParentObject,b=a.IsMasterPage?c.eventName.toUpperCase()+"_MPAGE":"'"+c.eventName.toUpperCase()+"'";if(b=a.getClientEventName(b)){this.assignItemPressed(c.key);
this.execC2VFunctions();gx.evt.dispatcher.dispatch(a.getServerEventName(b),a,0,0,a.isServerEvent(b),void 0,void 0,true)}}}}()}}(),defineTabControl:function(c){gx.lang.apply(c.prototype,h);return c}}}(gx.$);
