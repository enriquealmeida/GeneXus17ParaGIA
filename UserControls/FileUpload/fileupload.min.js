/*
 * FileUpload GeneXus User Control 0.0.0.150891
 *
 * Copyright 2015, GeneXus
 */
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var g=0,a=Array.prototype.slice;b.cleanData=function(a){return function(d){var f,e,h;for(h=0;null!=(e=d[h]);h++)try{(f=b._data(e,"events"))&&f.remove&&b(e).triggerHandler("remove")}catch(g){}a(d)}}(b.cleanData);b.widget=function(a,d,f){var e,h,g,k,m={},n=a.split(".")[0];a=a.split(".")[1];e=n+"-"+a;f||(f=d,d=b.Widget);b.expr[":"][e.toLowerCase()]=function(a){return!!b.data(a,
e)};b[n]=b[n]||{};h=b[n][a];g=b[n][a]=function(a,c){if(!this._createWidget)return new g(a,c);arguments.length&&this._createWidget(a,c)};b.extend(g,h,{version:f.version,_proto:b.extend({},f),_childConstructors:[]});k=new d;k.options=b.widget.extend({},k.options);b.each(f,function(a,c){b.isFunction(c)?m[a]=function(){var b=function(){return d.prototype[a].apply(this,arguments)},f=function(c){return d.prototype[a].apply(this,c)};return function(){var a=this._super,d=this._superApply,e;this._super=b;
this._superApply=f;e=c.apply(this,arguments);this._super=a;this._superApply=d;return e}}():m[a]=c});g.prototype=b.widget.extend(k,{widgetEventPrefix:h?k.widgetEventPrefix||a:a},m,{constructor:g,namespace:n,widgetName:a,widgetFullName:e});h?(b.each(h._childConstructors,function(a,c){var d=c.prototype;b.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete h._childConstructors):d._childConstructors.push(g);b.widget.bridge(a,g);return g};b.widget.extend=function(c){for(var d=a.call(arguments,1),f=
0,e=d.length,h,g;f<e;f++)for(h in d[f])g=d[f][h],d[f].hasOwnProperty(h)&&void 0!==g&&(b.isPlainObject(g)?c[h]=b.isPlainObject(c[h])?b.widget.extend({},c[h],g):b.widget.extend({},g):c[h]=g);return c};b.widget.bridge=function(c,d){var f=d.prototype.widgetFullName||c;b.fn[c]=function(e){var h="string"===typeof e,g=a.call(arguments,1),k=this;e=!h&&g.length?b.widget.extend.apply(null,[e].concat(g)):e;h?this.each(function(){var a,d=b.data(this,f);if("instance"===e)return k=d,!1;if(!d)return b.error("cannot call methods on "+
c+" prior to initialization; attempted to call method '"+e+"'");if(!b.isFunction(d[e])||"_"===e.charAt(0))return b.error("no such method '"+e+"' for "+c+" widget instance");a=d[e].apply(d,g);if(a!==d&&void 0!==a)return k=a&&a.jquery?k.pushStack(a.get()):a,!1}):this.each(function(){var a=b.data(this,f);a?(a.option(e||{}),a._init&&a._init()):b.data(this,f,new d(e,this))});return k}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"\x3cdiv\x3e",
options:{disabled:!1,create:null},_createWidget:function(a,d){d=b(d||this.defaultElement||this)[0];this.element=b(d);this.uuid=g++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),a);this.bindings=b();this.hoverable=b();this.focusable=b();d!==this&&(b.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=b(d.style?d.ownerDocument:d.document||d),this.window=b(this.document[0].defaultView||
this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);
this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(a,d){var f=a,e,h,g;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof a)if(f={},e=a.split("."),a=e.shift(),e.length){h=f[a]=b.widget.extend({},this.options[a]);for(g=0;g<e.length-1;g++)h[e[g]]=h[e[g]]||{},h=h[e[g]];a=e.pop();if(1===arguments.length)return void 0===h[a]?null:h[a];h[a]=d}else{if(1===arguments.length)return void 0===
this.options[a]?null:this.options[a];f[a]=d}this._setOptions(f);return this},_setOptions:function(a){for(var d in a)this._setOption(d,a[d]);return this},_setOption:function(a,d){this.options[a]=d;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!d),d&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")));return this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_on:function(a,d,f){var e,h=this;"boolean"!==typeof a&&(f=d,d=a,a=!1);f?(d=e=b(d),this.bindings=this.bindings.add(d)):(f=d,d=this.element,e=this.widget());b.each(f,function(f,g){function m(){if(a||!0!==h.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof g?h[g]:g).apply(h,arguments)}"string"!==typeof g&&(m.guid=g.guid=g.guid||m.guid||b.guid++);var n=f.match(/^([\w:-]*)\s*(.*)$/),p=n[1]+h.eventNamespace;(n=n[2])?e.delegate(n,p,m):d.bind(p,m)})},_off:function(a,d){d=(d||
"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(d).undelegate(d)},_delay:function(a,d){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},d||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){b(a.currentTarget).addClass("ui-state-hover")},mouseleave:function(a){b(a.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,
{focusin:function(a){b(a.currentTarget).addClass("ui-state-focus")},focusout:function(a){b(a.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(a,d,f){var e,h=this.options[a];f=f||{};d=b.Event(d);d.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();d.target=this.element[0];if(a=d.originalEvent)for(e in a)e in d||(d[e]=a[e]);this.element.trigger(d,f);return!(b.isFunction(h)&&!1===h.apply(this.element[0],[d].concat(f))||d.isDefaultPrevented())}};b.each({show:"fadeIn",
hide:"fadeOut"},function(a,d){b.Widget.prototype["_"+a]=function(f,e,h){"string"===typeof e&&(e={effect:e});var g,k=e?!0===e||"number"===typeof e?d:e.effect||d:a;e=e||{};"number"===typeof e&&(e={duration:e});g=!b.isEmptyObject(e);e.complete=h;e.delay&&f.delay(e.delay);if(g&&b.effects&&b.effects.effect[k])f[a](e);else if(k!==a&&f[k])f[k](e.duration,e.easing,h);else f.queue(function(d){b(this)[a]();h&&h.call(f[0]);d()})}})});(function(b){var g=function(a,c){var d=/[^\w\-\.:]/.test(a)?new Function(g.arg+",tmpl","var _e\x3dtmpl.encode"+g.helper+",_s\x3d'"+a.replace(g.regexp,g.func)+"';return _s;"):g.cache[a]=g.cache[a]||g(g.load(a));return c?d(c,g):function(a){return d(a,g)}};g.cache={};g.load=function(a){return document.getElementById(a).innerHTML};g.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;g.func=function(a,c,d,b,e,h){if(c)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[c]||"\\"+
c;if(d)return"\x3d"===d?"'+_e("+b+")+'":"'+("+b+"\x3d\x3dnull?'':"+b+")+'";if(e)return"';";if(h)return"_s+\x3d'"};g.encReg=/[<>&"'\x00]/g;g.encMap={"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;",'"':"\x26quot;","'":"\x26#39;"};g.encode=function(a){return(null==a?"":""+a).replace(g.encReg,function(a){return g.encMap[a]||""})};g.arg="o";g.helper=",print\x3dfunction(s,e){_s+\x3de?(s\x3d\x3dnull?'':s):_e(s);},include\x3dfunction(s,d){_s+\x3dtmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return g}):
b.tmpl=g})(this);(function(b){var g=function(a,d,b){var e=document.createElement("img"),h,l;e.onerror=d;e.onload=function(){!l||b&&b.noRevoke||g.revokeObjectURL(l);d&&d(g.scale(e,b))};if(g.isInstanceOf("Blob",a)||g.isInstanceOf("File",a))h=l=g.createObjectURL(a),e._type=a.type;else if("string"===typeof a)h=a,b&&b.crossOrigin&&(e.crossOrigin=b.crossOrigin);else return!1;return h?(e.src=h,e):g.readFile(a,function(a){var c=a.target;c&&c.result?e.src=c.result:d&&d(a)})},a=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&
URL||window.webkitURL&&webkitURL;g.isInstanceOf=function(a,d){return Object.prototype.toString.call(d)==="[object "+a+"]"};g.transformCoordinates=function(){};g.getTransformedOptions=function(a,d){var b=d.aspectRatio,e,h,g;if(!b)return d;e={};for(h in d)d.hasOwnProperty(h)&&(e[h]=d[h]);e.crop=!0;h=a.naturalWidth||a.width;g=a.naturalHeight||a.height;h/g>b?(e.maxWidth=g*b,e.maxHeight=g):(e.maxWidth=h,e.maxHeight=h/b);return e};g.renderImageToCanvas=function(a,d,b,e,h,g,k,m,n,p){a.getContext("2d").drawImage(d,
b,e,h,g,k,m,n,p);return a};g.hasCanvasOption=function(a){return a.canvas||a.crop||a.aspectRatio};g.scale=function(a,d){d=d||{};var b=document.createElement("canvas"),e=a.getContext||g.hasCanvasOption(d)&&b.getContext,h=a.naturalWidth||a.width,l=a.naturalHeight||a.height,k=h,m=l,n,p,r,u,q,t,w,x,v;v=function(){var a=Math.max((r||k)/k,(u||m)/m);1<a&&(k*=a,m*=a)};var y=function(){var a=Math.min((n||k)/k,(p||m)/m);1>a&&(k*=a,m*=a)};e&&(d=g.getTransformedOptions(a,d),w=d.left||0,x=d.top||0,d.sourceWidth?
(q=d.sourceWidth,void 0!==d.right&&void 0===d.left&&(w=h-q-d.right)):q=h-w-(d.right||0),d.sourceHeight?(t=d.sourceHeight,void 0!==d.bottom&&void 0===d.top&&(x=l-t-d.bottom)):t=l-x-(d.bottom||0),k=q,m=t);n=d.maxWidth;p=d.maxHeight;r=d.minWidth;u=d.minHeight;if(e&&n&&p&&d.crop)k=n,m=p,v=q/t-n/p,0>v?(t=p*q/n,void 0===d.top&&void 0===d.bottom&&(x=(l-t)/2)):0<v&&(q=n*t/p,void 0===d.left&&void 0===d.right&&(w=(h-q)/2));else{if(d.contain||d.cover)r=n=n||r,u=p=p||u;d.cover?(y(),v()):(v(),y())}if(e)return b.width=
k,b.height=m,g.transformCoordinates(b,d),g.renderImageToCanvas(b,a,w,x,q,t,0,0,k,m);a.width=k;a.height=m;return a};g.createObjectURL=function(c){return a?a.createObjectURL(c):!1};g.revokeObjectURL=function(c){return a?a.revokeObjectURL(c):!1};g.readFile=function(a,d,b){if(window.FileReader){var e=new FileReader;e.onload=e.onerror=d;b=b||"readAsDataURL";if(e[b])return e[b](a),e}return!1};"function"===typeof define&&define.amd?define(function(){return g}):b.loadImage=g})(this);(function(b){"function"===typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)})(function(b){if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var g=b.renderImageToCanvas;b.detectSubsampling=function(a){var c;return 1048576<a.width*a.height?(c=document.createElement("canvas"),c.width=c.height=1,c=c.getContext("2d"),c.drawImage(a,-a.width+1,0),0===c.getImageData(0,0,1,1).data[3]):!1};b.detectVerticalSquash=function(a,c){var d=a.naturalHeight||
a.height,b=document.createElement("canvas"),e=b.getContext("2d"),h,g,k;c&&(d/=2);b.width=1;b.height=d;e.drawImage(a,0,0);b=e.getImageData(0,0,1,d).data;e=0;for(g=h=d;g>e;)k=b[4*(g-1)+3],0===k?h=g:e=g,g=h+e>>1;return g/d||1};b.renderImageToCanvas=function(a,c,d,f,e,h,l,k,m,n){if("image/jpeg"===c._type){var p=a.getContext("2d"),r=document.createElement("canvas"),u=r.getContext("2d"),q,t;r.width=1024;r.height=1024;p.save();if(q=b.detectSubsampling(c))d/=2,f/=2,e/=2,h/=2;t=b.detectVerticalSquash(c,q);
if(q||1!==t){f*=t;m=Math.ceil(1024*m/e);n=Math.ceil(1024*n/h/t);for(t=k=0;t<h;){for(q=l=0;q<e;)u.clearRect(0,0,1024,1024),u.drawImage(c,d,f,e,h,-q,-t,e,h),p.drawImage(r,0,0,1024,1024,l,k,m,n),q+=1024,l+=m;t+=1024;k+=n}p.restore();return a}}return g(a,c,d,f,e,h,l,k,m,n)}}});(function(b){"function"===typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)})(function(b){var g=b.hasCanvasOption,a=b.transformCoordinates,c=b.getTransformedOptions;b.hasCanvasOption=function(a){return g.call(b,a)||a.orientation};b.transformCoordinates=function(d,c){a.call(b,d,c);var e=d.getContext("2d"),h=d.width,g=d.height,k=c.orientation;if(k&&!(8<k))switch(4<k&&(d.width=g,d.height=h),k){case 2:e.translate(h,0);e.scale(-1,1);break;case 3:e.translate(h,g);e.rotate(Math.PI);
break;case 4:e.translate(0,g);e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI);e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI);e.translate(0,-g);break;case 7:e.rotate(.5*Math.PI);e.translate(h,-g);e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-h,0)}};b.getTransformedOptions=function(a,f){var e=c.call(b,a,f),h=e.orientation,g;if(!h||8<h||1===h)return e;h={};for(g in e)e.hasOwnProperty(g)&&(h[g]=e[g]);switch(e.orientation){case 2:h.left=e.right;h.right=e.left;break;case 3:h.left=e.right;
h.top=e.bottom;h.right=e.left;h.bottom=e.top;break;case 4:h.top=e.bottom;h.bottom=e.top;break;case 5:h.left=e.top;h.top=e.left;h.right=e.bottom;h.bottom=e.right;break;case 6:h.left=e.top;h.top=e.right;h.right=e.bottom;h.bottom=e.left;break;case 7:h.left=e.bottom;h.top=e.right;h.right=e.top;h.bottom=e.left;break;case 8:h.left=e.bottom,h.top=e.left,h.right=e.top,h.bottom=e.right}4<e.orientation&&(h.maxWidth=e.maxHeight,h.maxHeight=e.maxWidth,h.minWidth=e.minHeight,h.minHeight=e.minWidth,h.sourceWidth=
e.sourceHeight,h.sourceHeight=e.sourceWidth);return h}});(function(b){"function"===typeof define&&define.amd?define(["load-image"],b):b(window.loadImage)})(function(b){b.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice)&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)};b.metaDataParsers={jpeg:{65505:[]}};b.parseMetaData=function(g,a,c){c=c||{};var d=this,f=c.maxMetaDataSize||262144,e={};window.DataView&&g&&12<=g.size&&"image/jpeg"===g.type&&b.blobSlice&&b.readFile(b.blobSlice.call(g,
0,f),function(f){if(f.target.error)console.log(f.target.error);else{f=f.target.result;var g=new DataView(f),k=2,m=g.byteLength-4,n=k,p,r;if(65496===g.getUint16(0)){for(;k<m;)if(p=g.getUint16(k),65504<=p&&65519>=p||65534===p){r=g.getUint16(k+2)+2;if(k+r>g.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(n=b.metaDataParsers.jpeg[p])for(p=0;p<n.length;p+=1)n[p].call(d,g,k,r,e,c);n=k+=r}else break;!c.disableImageHead&&6<n&&(e.imageHead=f.slice?f.slice(0,n):(new Uint8Array(f)).subarray(0,
n))}else console.log("Invalid JPEG file: Missing JPEG marker.")}a(e)},"readAsArrayBuffer")||a(e)}});(function(b){"function"===typeof define&&define.amd?define(["load-image","load-image-meta"],b):b(window.loadImage)})(function(b){b.ExifMap=function(){return this};b.ExifMap.prototype.map={Orientation:274};b.ExifMap.prototype.get=function(b){return this[b]||this[this.map[b]]};b.getExifThumbnail=function(b,a,c){var d,f,e;if(!c||a+c>b.byteLength)console.log("Invalid Exif data: Invalid thumbnail data.");else{d=[];for(f=0;f<c;f+=1)e=b.getUint8(a+f),d.push((16>e?"0":"")+e.toString(16));return"data:image/jpeg,%"+
d.join("%")}};b.exifTagTypes={1:{getValue:function(b,a){return b.getUint8(a)},size:1},2:{getValue:function(b,a){return String.fromCharCode(b.getUint8(a))},size:1,ascii:!0},3:{getValue:function(b,a,c){return b.getUint16(a,c)},size:2},4:{getValue:function(b,a,c){return b.getUint32(a,c)},size:4},5:{getValue:function(b,a,c){return b.getUint32(a,c)/b.getUint32(a+4,c)},size:8},9:{getValue:function(b,a,c){return b.getInt32(a,c)},size:4},10:{getValue:function(b,a,c){return b.getInt32(a,c)/b.getInt32(a+4,
c)},size:8}};b.exifTagTypes[7]=b.exifTagTypes[1];b.getExifValue=function(g,a,c,d,f,e){d=b.exifTagTypes[d];var h,l;if(d)if(h=d.size*f,l=4<h?a+g.getUint32(c+8,e):c+8,l+h>g.byteLength)console.log("Invalid Exif data: Invalid data offset.");else{if(1===f)return d.getValue(g,l,e);a=[];for(c=0;c<f;c+=1)a[c]=d.getValue(g,l+c*d.size,e);if(d.ascii){g="";for(c=0;c<a.length;c+=1){f=a[c];if("\x00"===f)break;g+=f}return g}return a}else console.log("Invalid Exif data: Invalid tag type.")};b.parseExifTag=function(g,
a,c,d,f){var e=g.getUint16(c,d);f.exif[e]=b.getExifValue(g,a,c,g.getUint16(c+2,d),g.getUint32(c+4,d),d)};b.parseExifTags=function(b,a,c,d,f){var e,h,l;if(c+6>b.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else if(e=b.getUint16(c,d),h=c+2+12*e,h+4>b.byteLength)console.log("Invalid Exif data: Invalid directory size.");else{for(l=0;l<e;l+=1)this.parseExifTag(b,a,c+2+12*l,d,f);return b.getUint32(h,d)}};b.parseExifData=function(g,a,c,d,f){if(!f.disableExif){c=a+10;var e,h;if(1165519206===
g.getUint32(a+4))if(c+8>g.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0!==g.getUint16(a+8))console.log("Invalid Exif data: Missing byte alignment offset.");else{switch(g.getUint16(c)){case 18761:a=!0;break;case 19789:a=!1;break;default:console.log("Invalid Exif data: Invalid byte alignment marker.");return}42!==g.getUint16(c+2,a)?console.log("Invalid Exif data: Missing TIFF marker."):(e=g.getUint32(c+4,a),d.exif=new b.ExifMap,(e=b.parseExifTags(g,c,c+e,a,d))&&!f.disableExifThumbnail&&
(h={exif:{}},b.parseExifTags(g,c,c+e,a,h),h.exif[513]&&(d.exif.Thumbnail=b.getExifThumbnail(g,c+h.exif[513],h.exif[514]))),d.exif[34665]&&!f.disableExifSub&&b.parseExifTags(g,c,c+d.exif[34665],a,d),d.exif[34853]&&!f.disableExifGps&&b.parseExifTags(g,c,c+d.exif[34853],a,d))}}};b.metaDataParsers.jpeg[65505].push(b.parseExifData)});(function(b){"function"===typeof define&&define.amd?define(["load-image","load-image-exif"],b):b(window.loadImage)})(function(b){b.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",
273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",
37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",
37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",
41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",
4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",
30:"GPSDifferential",31:"GPSHPositioningError"};b.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",
10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",
15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",
77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",
5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},
Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};b.ExifMap.prototype.getText=function(b){var a=this.get(b);switch(b){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":case "Orientation":return this.stringValues[b][a];
case "ExifVersion":case "FlashpixVersion":return String.fromCharCode(a[0],a[1],a[2],a[3]);case "ComponentsConfiguration":return this.stringValues[b][a[0]]+this.stringValues[b][a[1]]+this.stringValues[b][a[2]]+this.stringValues[b][a[3]];case "GPSVersionID":return a[0]+"."+a[1]+"."+a[2]+"."+a[3]}return String(a)};(function(b){var a=b.tags;b=b.map;for(var c in a)a.hasOwnProperty(c)&&(b[a[c]]=c)})(b.ExifMap.prototype);b.ExifMap.prototype.getAll=function(){var b={},a,c;for(a in this)this.hasOwnProperty(a)&&
(c=this.tags[a])&&(b[c]=this.getText(c));return b}});(function(b){var g=b.HTMLCanvasElement&&b.HTMLCanvasElement.prototype,a;if(a=b.Blob)try{a=Boolean(new Blob)}catch(c){a=!1}var d=a;if(a=d&&b.Uint8Array)try{a=100===(new Blob([new Uint8Array(100)])).size}catch(f){a=!1}var e=a,h=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder,l=(d||h)&&b.atob&&b.ArrayBuffer&&b.Uint8Array&&function(a){var b,c,f,g;b=0<=a.split(",")[0].indexOf("base64")?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]);c=new ArrayBuffer(b.length);f=new Uint8Array(c);
for(g=0;g<b.length;g+=1)f[g]=b.charCodeAt(g);a=a.split(",")[0].split(":")[1].split(";")[0];if(d)return new Blob([e?f:c],{type:a});f=new h;f.append(c);return f.getBlob(a)};b.HTMLCanvasElement&&!g.toBlob&&(g.mozGetAsFile?g.toBlob=function(a,b,c){c&&g.toDataURL&&l?a(l(this.toDataURL(b,c))):a(this.mozGetAsFile("blob",b))}:g.toDataURL&&l&&(g.toBlob=function(a,b,c){a(l(this.toDataURL(b,c)))}));"function"===typeof define&&define.amd?define(function(){return l}):b.dataURLtoBlob=l})(window);(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){var g=0;b.ajaxTransport("iframe",function(a){if(a.async){var c=a.initialIframeSrc||"javascript:false;",d,f,e;return{send:function(h,l){d=b('\x3cform style\x3d"display:none;"\x3e\x3c/form\x3e');d.attr("accept-charset",a.formAcceptCharset);e=/\?/.test(a.url)?"\x26":"?";"DELETE"===a.type?(a.url=a.url+e+"_method\x3dDELETE",a.type="POST"):"PUT"===a.type?
(a.url=a.url+e+"_method\x3dPUT",a.type="POST"):"PATCH"===a.type&&(a.url=a.url+e+"_method\x3dPATCH",a.type="POST");g+=1;f=b('\x3ciframe src\x3d"'+c+'" name\x3d"iframe-transport-'+g+'"\x3e\x3c/iframe\x3e').bind("load",function(){var e,h=b.isArray(a.paramName)?a.paramName:[a.paramName];f.unbind("load").bind("load",function(){var a;try{if(a=f.contents(),!a.length||!a[0].firstChild)throw Error();}catch(e){a=void 0}l(200,"success",{iframe:a});b('\x3ciframe src\x3d"'+c+'"\x3e\x3c/iframe\x3e').appendTo(d);
window.setTimeout(function(){d.remove()},0)});d.prop("target",f.prop("name")).prop("action",a.url).prop("method",a.type);a.formData&&b.each(a.formData,function(a,c){b('\x3cinput type\x3d"hidden"/\x3e').prop("name",c.name).val(c.value).appendTo(d)});a.fileInput&&a.fileInput.length&&"POST"===a.type&&(e=a.fileInput.clone(),a.fileInput.after(function(a){return e[a]}),a.paramName&&a.fileInput.each(function(c){b(this).prop("name",h[c]||a.paramName)}),d.append(a.fileInput).prop("enctype","multipart/form-data").prop("encoding",
"multipart/form-data"),a.fileInput.removeAttr("form"));d.submit();e&&e.length&&a.fileInput.each(function(a,c){var d=b(e[a]);b(c).prop("name",d.prop("name")).attr("form",d.attr("form"));d.replaceWith(c)})});d.append(f).appendTo(document.body)},abort:function(){f&&f.unbind("load").prop("src",c);d&&d.remove()}}}});b.ajaxSetup({converters:{"iframe text":function(a){return a&&b(a[0].body).text()},"iframe json":function(a){return a&&b.parseJSON(b(a[0].body).text())},"iframe html":function(a){return a&&
b(a[0].body).html()},"iframe xml":function(a){return(a=a&&a[0])&&b.isXMLDoc(a)?a:b.parseXML(a.XMLDocument&&a.XMLDocument.xml||b(a.body).html())},"iframe script":function(a){return a&&b.globalEval(b(a[0].body).text())}}})});(function(b){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],b):"object"===typeof exports?b(require("jquery"),require("./vendor/jquery.ui.widget")):b(window.jQuery)})(function(b){function g(a){var c="dragover"===a;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var f=d.dataTransfer;f&&-1!==b.inArray("Files",f.types)&&!1!==this._trigger(a,b.Event(a,{delegatedEvent:d}))&&(d.preventDefault(),c&&(f.dropEffect="copy"))}}b.support.fileInput=!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||
b('\x3cinput type\x3d"file"\x3e').prop("disabled"));b.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);b.support.xhrFormDataFileUpload=!!window.FormData;b.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);b.widget("blueimp.fileupload",{options:{dropZone:b(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,
sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(a,c){a=this.messages[a]||a.toString();c&&b.each(c,function(b,c){a=a.replace("{"+b+"}",c)});return a},formData:function(a){return a.serializeArray()},add:function(a,
c){if(a.isDefaultPrevented())return!1;(c.autoUpload||!1!==c.autoUpload&&b(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:b.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=
this.loaded=0;this.getBitrate=function(a,b,d){var f=a-this.timestamp;if(!this.bitrate||!d||f>d)this.bitrate=1E3/f*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&(!a.multipart&&b.support.xhrFileUpload||b.support.xhrFormDataFileUpload)},_getFormData:function(a){var c;return"function"===b.type(a.formData)?a.formData(a.form):b.isArray(a.formData)?a.formData:"object"===b.type(a.formData)?(c=[],b.each(a.formData,function(a,
b){c.push({name:a,value:b})}),c):[]},_getTotal:function(a){var c=0;b.each(a,function(a,b){c+=b.size||1});return c},_initProgressObject:function(a){var c={loaded:0,total:0,bitrate:0};a._progress?b.extend(a._progress,c):a._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(a,c){if(a.lengthComputable){var d=Date.now?Date.now():(new Date).getTime(),f;c._time&&c.progressInterval&&
d-c._time<c.progressInterval&&a.loaded!==a.total||(c._time=d,f=Math.floor(a.loaded/a.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=f-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=f,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(d,f,c.bitrateInterval),this._trigger("progress",b.Event("progress",{delegatedEvent:a}),c),this._trigger("progressall",b.Event("progressall",
{delegatedEvent:a}),this._progress))}},_initProgressListener:function(a){var c=this,d=a.xhr?a.xhr():b.ajaxSettings.xhr();d.upload&&(b(d.upload).bind("progress",function(b){var d=b.originalEvent;b.lengthComputable=d.lengthComputable;b.loaded=d.loaded;b.total=d.total;c._onProgress(b,a)}),a.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(a){var c=this,d,f=a.files[0],e=a.multipart||!b.support.xhrFileUpload,h="array"===
b.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=b.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);e&&!a.blob&&this._isInstanceOf("File",f)||(a.headers["Content-Disposition"]='attachment; filename\x3d"'+encodeURI(f.name)+'"');e?b.support.xhrFormDataFileUpload&&(a.postMessage?(d=this._getFormData(a),a.blob?d.push({name:h,value:a.blob}):b.each(a.files,function(c,e){d.push({name:"array"===b.type(a.paramName)&&a.paramName[c]||h,value:e})})):(c._isInstanceOf("FormData",
a.formData)?d=a.formData:(d=new FormData,b.each(this._getFormData(a),function(a,b){d.append(b.name,b.value)})),a.blob?d.append(h,a.blob,f.name):b.each(a.files,function(e,f){(c._isInstanceOf("File",f)||c._isInstanceOf("Blob",f))&&d.append("array"===b.type(a.paramName)&&a.paramName[e]||h,f,f.uploadName||f.name)})),a.data=d):(a.contentType=f.type||"application/octet-stream",a.data=a.blob||f);a.blob=null},_initIframeSettings:function(a){var c=b("\x3ca\x3e\x3c/a\x3e").prop("href",a.url).prop("host");a.dataType=
"iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&c&&c!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var c=b(a.fileInput),d=a.paramName;d?b.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var a=
b(this),c=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)d.push(c),--a}),d.length||(d=[c.prop("name")||"files[]"]));return d},_initFormSettings:function(a){a.form&&a.form.length||(a.form=b(a.fileInput.prop("form")),a.form.length||(a.form=b(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===b.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==
a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=b.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,c,d){var f=b.Deferred(),e=f.promise();
c=c||this.options.context||e;!0===a?f.resolveWith(c,d):!1===a&&f.rejectWith(c,d);e.abort=f.promise;return this._enhancePromise(e)},_addConvenienceMethods:function(a,c){var d=this,f=function(a){return b.Deferred().resolveWith(d,a).promise()};c.process=function(a,h){if(a||h)c._processQueue=this._processQueue=(this._processQueue||f([this])).pipe(function(){return c.errorThrown?b.Deferred().rejectWith(d,[c]).promise():f(arguments)}).pipe(a,h);return this._processQueue||f([this])};c.submit=function(){"pending"!==
this.state()&&(c.jqXHR=this.jqXHR=!1!==d._trigger("submit",b.Event("submit",{delegatedEvent:a}),this)&&d._onSend(a,this));return this.jqXHR||d._getXHRPromise()};c.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(!1)};c.state=function(){if(this.jqXHR)return d._getDeferredState(this.jqXHR);if(this._processQueue)return d._getDeferredState(this._processQueue)};c.processing=function(){return!this.jqXHR&&this._processQueue&&
"pending"===d._getDeferredState(this._processQueue)};c.progress=function(){return this._progress};c.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,c){a.uploadedBytes=a.uploadedBytes||0;var d=this,f=a.files[0],e=f.size,h=a.uploadedBytes,g=a.maxChunkSize||e,k=this._blobSlice,m=b.Deferred(),n=m.promise(),p,r;if(!(this._isXHRUpload(a)&&k&&(h||g<e))||a.data)return!1;
if(c)return!0;if(h>=e)return f.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",f.error]);r=function(){var c=b.extend({},a),n=c._progress.loaded;c.blob=k.call(f,h,h+g,f.type);c.chunkSize=c.blob.size;c.contentRange="bytes "+h+"-"+(h+c.chunkSize-1)+"/"+e;d._initXHRData(c);d._initProgressListener(c);p=(!1!==d._trigger("chunksend",null,c)&&b.ajax(c)||d._getXHRPromise(!1,c.context)).done(function(f,g,k){h=d._getUploadedBytes(k)||h+c.chunkSize;n+c.chunkSize-c._progress.loaded&&
d._onProgress(b.Event("progress",{lengthComputable:!0,loaded:h-c.uploadedBytes,total:h-c.uploadedBytes}),c);a.uploadedBytes=c.uploadedBytes=h;c.result=f;c.textStatus=g;c.jqXHR=k;d._trigger("chunkdone",null,c);d._trigger("chunkalways",null,c);h<e?r():m.resolveWith(c.context,[f,g,k])}).fail(function(a,b,e){c.jqXHR=a;c.textStatus=b;c.errorThrown=e;d._trigger("chunkfail",null,c);d._trigger("chunkalways",null,c);m.rejectWith(c.context,[a,b,e])})};this._enhancePromise(n);n.abort=function(){return p.abort()};
r();return n},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,c,d,f){var e=f._progress.total,
h=f._response;f._progress.loaded<e&&this._onProgress(b.Event("progress",{lengthComputable:!0,loaded:e,total:e}),f);h.result=f.result=a;h.textStatus=f.textStatus=c;h.jqXHR=f.jqXHR=d;this._trigger("done",null,f)},_onFail:function(a,b,d,f){var e=f._response;f.recalculateProgress&&(this._progress.loaded-=f._progress.loaded,this._progress.total-=f._progress.total);e.jqXHR=f.jqXHR=a;e.textStatus=f.textStatus=b;e.errorThrown=f.errorThrown=d;this._trigger("fail",null,f)},_onAlways:function(a,b,d,f){this._trigger("always",
null,f)},_onSend:function(a,c){c.submit||this._addConvenienceMethods(a,c);var d=this,f,e,h,g,k=d._getAJAXSettings(c),m=function(){d._sending+=1;k._bitrateTimer=new d._BitrateTimer;return f=f||((e||!1===d._trigger("send",b.Event("send",{delegatedEvent:a}),k))&&d._getXHRPromise(!1,k.context,e)||d._chunkedUpload(k)||b.ajax(k)).done(function(a,b,c){d._onDone(a,b,c,k)}).fail(function(a,b,c){d._onFail(a,b,c,k)}).always(function(a,b,c){d._onAlways(a,b,c,k);--d._sending;--d._active;if(k.limitConcurrentUploads&&
k.limitConcurrentUploads>d._sending)for(a=d._slots.shift();a;){if("pending"===d._getDeferredState(a)){a.resolve();break}a=d._slots.shift()}0===d._active&&d._trigger("stop")})};this._beforeSend(a,k);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?(h=b.Deferred(),this._slots.push(h),g=h.pipe(m)):g=this._sequence=this._sequence.pipe(m,m),g.abort=function(){e=[void 0,"abort","abort"];
return f?f.abort():(h&&h.rejectWith(k.context,e),m())},this._enhancePromise(g)):m()},_onAdd:function(a,c){var d=this,f=!0,e=b.extend({},this.options,c),h=c.files,g=h.length,k=e.limitMultiFileUploads,m=e.limitMultiFileUploadSize,n=e.limitMultiFileUploadSizeOverhead,p=0,r=this._getParamName(e),u,q,t=0;if(!g)return!1;m&&void 0===h[0].size&&(m=void 0);if((e.singleFileUploads||k||m)&&this._isXHRUpload(e))if(e.singleFileUploads||m||!k)if(!e.singleFileUploads&&m)for(q=[],u=[],e=0;e<g;e+=1){if(p+=h[e].size+
n,e+1===g||p+h[e+1].size+n>m||k&&e+1-t>=k)q.push(h.slice(t,e+1)),p=r.slice(t,e+1),p.length||(p=r),u.push(p),t=e+1,p=0}else u=r;else for(q=[],u=[],e=0;e<g;e+=k)q.push(h.slice(e,e+k)),p=r.slice(e,e+k),p.length||(p=r),u.push(p);else q=[h],u=[r];c.originalFiles=h;b.each(q||h,function(e,h){var g=b.extend({},c);g.files=q?h:[h];g.paramName=u[e];d._initResponseObject(g);d._initProgressObject(g);d._addConvenienceMethods(a,g);return f=d._trigger("add",b.Event("add",{delegatedEvent:a}),g)});return f},_replaceFileInput:function(a){var c=
a.fileInput,d=c.clone(!0);a.fileInputClone=d;b("\x3cform\x3e\x3c/form\x3e").append(d)[0].reset();c.after(d).detach();b.cleanData(c.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,b){return b===c[0]?d[0]:b});c[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(a,c){var d=this,f=b.Deferred(),e=function(b){b&&!b.entry&&(b.entry=a);f.resolve([b])},h=function(b){d._handleFileTreeEntries(b,c+a.name+"/").done(function(a){f.resolve(a)}).fail(e)},g=function(){k.readEntries(function(a){a.length?
(m=m.concat(a),g()):h(m)},e)},k,m=[];c=c||"";a.isFile?a._file?(a._file.relativePath=c,f.resolve(a._file)):a.file(function(a){a.relativePath=c;f.resolve(a)},e):a.isDirectory?(k=a.createReader(),g()):f.resolve([]);return f.promise()},_handleFileTreeEntries:function(a,c){var d=this;return b.when.apply(b,b.map(a,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(a){a=a||{};var c=a.items;return c&&c.length&&(c[0].webkitGetAsEntry||
c[0].getAsEntry)?this._handleFileTreeEntries(b.map(c,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):b.Deferred().resolve(b.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=b(a);var c=a.prop("webkitEntries")||a.prop("entries");if(c&&c.length)return this._handleFileTreeEntries(c);c=b.makeArray(a.prop("files"));if(c.length)void 0===c[0].name&&c[0].fileName&&b.each(c,function(a,b){b.name=b.fileName;b.size=
b.fileSize});else{a=a.prop("value");if(!a)return b.Deferred().resolve([]).promise();c=[{name:a.replace(/^.*\\/,"")}]}return b.Deferred().resolve(c).promise()},_getFileInputFiles:function(a){return a instanceof b&&1!==a.length?b.when.apply(b,b.map(a,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var c=this,d={fileInput:b(a.target),form:b(a.target.form)};this._getFileInputFiles(d.fileInput).always(function(f){d.files=
f;c.options.replaceFileInput&&c._replaceFileInput(d);!1!==c._trigger("change",b.Event("change",{delegatedEvent:a}),d)&&c._onAdd(a,d)})},_onPaste:function(a){var c=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(b.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),!1!==this._trigger("paste",b.Event("paste",{delegatedEvent:a}),d)&&this._onAdd(a,d))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;
var c=this,d=a.dataTransfer,f={};d&&d.files&&d.files.length&&(a.preventDefault(),this._getDroppedFiles(d).always(function(d){f.files=d;!1!==c._trigger("drop",b.Event("drop",{delegatedEvent:a}),f)&&c._onAdd(a,f)}))},_onDragOver:g("dragover"),_onDragEnter:g("dragenter"),_onDragLeave:g("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,
{paste:this._onPaste}));b.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(a,c){var d=-1!==b.inArray(a,this._specialOptions);d&&this._destroyEventHandlers();this._super(a,c);d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=
this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type\x3d"file"]')?this.element:this.element.find('input[type\x3d"file"]'):a.fileInput instanceof b||(a.fileInput=b(a.fileInput));a.dropZone instanceof b||(a.dropZone=b(a.dropZone));a.pasteZone instanceof b||(a.pasteZone=b(a.pasteZone))},_getRegExp:function(a){a=a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,c){return"url"!==a&&"string"===b.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},
_initDataAttributes:function(){var a=this,c=this.options,d=this.element.data();b.each(this.element[0].attributes,function(b,e){var g=e.name.toLowerCase(),l;/^data-/.test(g)&&(g=g.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),l=d[g],a._isRegExpOption(g,l)&&(l=a._getRegExp(l)),c[g]=l)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);
this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var c=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(b){a.files=b;c._onAdd(null,a)}):(a.files=b.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&!a.files){var c=this,d=b.Deferred(),f=d.promise(),e,g;f.abort=function(){g=!0;if(e)return e.abort();d.reject(null,
"abort","abort");return f};this._getFileInputFiles(a.fileInput).always(function(b){g||(b.length?(a.files=b,e=c._onSend(null,a),e.then(function(a,b,c){d.resolve(a,b,c)},function(a,b,c){d.reject(a,b,c)})):d.reject())});return this._enhancePromise(f)}a.files=b.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});(function(b){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){var g=b.blueimp.fileupload.prototype.options.add;b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{processQueue:[],add:function(a,c){var d=b(this);c.process(function(){return d.fileupload("process",c)});g.call(this,a,c)}},processActions:{},_processFile:function(a,c){var d=this,f=b.Deferred().resolveWith(d,[a]).promise();
this._trigger("process",null,a);b.each(a.processQueue,function(a,g){var l=function(a){return c.errorThrown?b.Deferred().rejectWith(d,[c]).promise():d.processActions[g.action].call(d,a,g)};f=f.pipe(l,g.always&&l)});f.done(function(){d._trigger("processdone",null,a);d._trigger("processalways",null,a)}).fail(function(){d._trigger("processfail",null,a);d._trigger("processalways",null,a)});return f},_transformProcessQueue:function(a){var c=[];b.each(a.processQueue,function(){var d={},f=this.action,e=!0===
this.prefix?f:this.prefix;b.each(this,function(c,f){"string"===b.type(f)&&"@"===f.charAt(0)?d[c]=a[f.slice(1)||(e?e+c.charAt(0).toUpperCase()+c.slice(1):c)]:d[c]=f});c.push(d)});a.processQueue=c},processing:function(){return this._processing},process:function(a){var c=this,d=b.extend({},this.options,a);d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),b.each(a.files,function(f){var e=f?b.extend({},d):d,g=function(){return a.errorThrown?
b.Deferred().rejectWith(c,[a]).promise():c._processFile(e,a)};e.index=f;c._processing+=1;c._processingQueue=c._processingQueue.pipe(g,g).always(function(){--c._processing;0===c._processing&&c._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=b.Deferred().resolveWith(this).promise()}})});(function(b){"function"===typeof define&&define.amd?define("jquery load-image load-image-meta load-image-exif load-image-ios canvas-to-blob ./jquery.fileupload-process".split(" "),b):"object"===typeof exports?b(require("jquery"),require("load-image")):b(window.jQuery,window.loadImage)})(function(b,g){b.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},
{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",
minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1E7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,
previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(a,c){if(c.disabled)return a;var d=this,f=a.files[a.index],e=b.Deferred();return"number"===b.type(c.maxFileSize)&&f.size>c.maxFileSize||c.fileTypes&&!c.fileTypes.test(f.type)||!g(f,function(b){b.src&&(a.img=b);e.resolveWith(d,[a])},c)?a:e.promise()},resizeImage:function(a,c){if(c.disabled||!a.canvas&&!a.img)return a;c=b.extend({canvas:!0},c);var d=this,f=b.Deferred(),e=
c.canvas&&a.canvas||a.img,h=function(b){b&&(b.width!==e.width||b.height!==e.height||c.forceResize)&&(a[b.getContext?"canvas":"img"]=b);a.preview=b;f.resolveWith(d,[a])},l;if(a.exif){!0===c.orientation&&(c.orientation=a.exif.get("Orientation"));if(c.thumbnail&&(l=a.exif.get("Thumbnail")))return g(l,h,c),f.promise();a.orientation?delete c.orientation:a.orientation=c.orientation}return e?(h(g.scale(e,c)),f.promise()):a},saveImage:function(a,c){if(!a.canvas||c.disabled)return a;var d=this,f=a.files[a.index],
e=b.Deferred();if(a.canvas.toBlob)a.canvas.toBlob(function(b){b.name||(f.type===b.type?b.name=f.name:f.name&&(b.name=f.name.replace(/\.\w+$/,"."+b.type.substr(6))));f.type!==b.type&&delete a.imageHead;a.files[a.index]=b;e.resolveWith(d,[a])},c.type||f.type,c.quality);else return a;return e.promise()},loadImageMetaData:function(a,c){if(c.disabled)return a;var d=this,f=b.Deferred();g.parseMetaData(a.files[a.index],function(c){b.extend(a,c);f.resolveWith(d,[a])},c);return f.promise()},saveImageMetaData:function(a,
b){if(!(a.imageHead&&a.canvas&&a.canvas.toBlob)||b.disabled)return a;var d=a.files[a.index],f=new Blob([a.imageHead,this._blobSlice.call(d,20)],{type:d.type});f.name=d.name;a.files[a.index]=f;return a},setImage:function(a,b){a.preview&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.preview);return a},deleteImageReferences:function(a,b){b.disabled||(delete a.img,delete a.canvas,delete a.preview,delete a.imageHead);return a}}})});(function(b){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],b):"object"===typeof exports?b(require("jquery"),require("load-image")):b(window.jQuery,window.loadImage)})(function(b,g){b.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});b.widget("blueimp.fileupload",b.blueimp.fileupload,
{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(a,c){if(c.disabled)return a;var d=a.files[a.index],f;this._audioElement.canPlayType&&this._audioElement.canPlayType(d.type)&&("number"!==b.type(c.maxFileSize)||d.size<=c.maxFileSize)&&(!c.fileTypes||c.fileTypes.test(d.type))&&(d=g.createObjectURL(d))&&(f=this._audioElement.cloneNode(!1),f.src=d,f.controls=!0,a.audio=f);return a},setAudio:function(a,b){a.audio&&!b.disabled&&
(a.files[a.index][b.name||"preview"]=a.audio);return a}}})});(function(b){"function"===typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],b):"object"===typeof exports?b(require("jquery"),require("load-image")):b(window.jQuery,window.loadImage)})(function(b,g){b.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"});b.widget("blueimp.fileupload",b.blueimp.fileupload,
{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(a,c){if(c.disabled)return a;var d=a.files[a.index],f;this._videoElement.canPlayType&&this._videoElement.canPlayType(d.type)&&("number"!==b.type(c.maxFileSize)||d.size<=c.maxFileSize)&&(!c.fileTypes||c.fileTypes.test(d.type))&&(d=g.createObjectURL(d))&&(f=this._videoElement.cloneNode(!1),f.src=d,f.controls=!0,a.video=f);return a},setVideo:function(a,b){a.video&&!b.disabled&&
(a.files[a.index][b.name||"preview"]=a.video);return a}}})});(function(b){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){b.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{getNumberOfFiles:b.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",
acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(g,a){if(a.disabled)return g;var c=b.Deferred(),d=this.options,f=g.files[g.index],e;if(a.minFileSize||a.maxFileSize)e=f.size;"number"===b.type(a.maxNumberOfFiles)&&(d.getNumberOfFiles()||0)+g.files.length>a.maxNumberOfFiles?f.error=d.i18n("maxNumberOfFiles"):!a.acceptFileTypes||a.acceptFileTypes.test(f.type)||a.acceptFileTypes.test(f.name)?e>a.maxFileSize?f.error=
d.i18n("maxFileSize"):"number"===b.type(e)&&e<a.minFileSize?f.error=d.i18n("minFileSize"):delete f.error:f.error=d.i18n("acceptFileTypes");f.error||g.files.error?(g.files.error=!0,c.rejectWith(this,[g])):c.resolveWith(this,[g]);return c.promise()}}})});(function(b){"function"===typeof define&&define.amd?define("jquery tmpl ./jquery.fileupload-image ./jquery.fileupload-audio ./jquery.fileupload-video ./jquery.fileupload-validate".split(" "),b):"object"===typeof exports?b(require("jquery"),require("tmpl")):b(window.jQuery,window.tmpl)})(function(b,g){b.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");b.widget("blueimp.fileupload",b.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",
downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){return a.result&&b.isArray(a.result.files)?a.result.files:[]},add:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this),f=d.data("blueimp-fileupload")||d.data("fileupload"),e=f.options;c.context=f._renderUpload(c.files).data("data",c).addClass("processing");
e.filesContainer[e.prependFiles?"prepend":"append"](c.context);f._forceReflow(c.context);f._transition(c.context);c.process(function(){return d.fileupload("process",c)}).always(function(){c.context.each(function(a){b(this).find(".size").text(f._formatFileSize(c.files[a].size))}).removeClass("processing");f._renderPreviews(c)}).done(function(){c.context.find(".start").prop("disabled",!1);!1!==f._trigger("added",a,c)&&(e.autoUpload||c.autoUpload)&&!1!==c.autoUpload&&c.submit()}).fail(function(){c.files.error&&
c.context.each(function(a){(a=c.files[a].error)&&b(this).find(".error").text(a)})})},send:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload");c.context&&c.dataType&&"iframe"===c.dataType.substr(0,6)&&c.context.find(".progress").addClass(!b.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%");return d._trigger("sent",a,c)},done:function(a,c){if(a.isDefaultPrevented())return!1;var d=
b(this).data("blueimp-fileupload")||b(this).data("fileupload"),f=(c.getFilesFromResponse||d.options.getFilesFromResponse)(c),e,g;c.context?c.context.each(function(l){var k=f[l]||{error:"Empty file upload result"};g=d._addFinishedDeferreds();d._transition(b(this)).done(function(){var f=b(this);e=d._renderDownload([k]).replaceAll(f);d._forceReflow(e);d._transition(e).done(function(){c.context=b(this);d._trigger("completed",a,c);d._trigger("finished",a,c);g.resolve()})})}):(e=d._renderDownload(f)[d.options.prependFiles?
"prependTo":"appendTo"](d.options.filesContainer),d._forceReflow(e),g=d._addFinishedDeferreds(),d._transition(e).done(function(){c.context=b(this);d._trigger("completed",a,c);d._trigger("finished",a,c);g.resolve()}))},fail:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),f,e;c.context?c.context.each(function(g){if("abort"!==c.errorThrown){var l=c.files[g];l.error=l.error||c.errorThrown||c.i18n("unknownError");e=d._addFinishedDeferreds();
d._transition(b(this)).done(function(){var g=b(this);f=d._renderDownload([l]).replaceAll(g);d._forceReflow(f);d._transition(f).done(function(){c.context=b(this);d._trigger("failed",a,c);d._trigger("finished",a,c);e.resolve()})})}else e=d._addFinishedDeferreds(),d._transition(b(this)).done(function(){b(this).remove();d._trigger("failed",a,c);d._trigger("finished",a,c);e.resolve()})}):"abort"!==c.errorThrown?(c.context=d._renderUpload(c.files)[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer).data("data",
c),d._forceReflow(c.context),e=d._addFinishedDeferreds(),d._transition(c.context).done(function(){c.context=b(this);d._trigger("failed",a,c);d._trigger("finished",a,c);e.resolve()})):(d._trigger("failed",a,c),d._trigger("finished",a,c),d._addFinishedDeferreds().resolve())},progress:function(a,c){if(a.isDefaultPrevented())return!1;var d=Math.floor(c.loaded/c.total*100);c.context&&c.context.each(function(){b(this).find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")})},progressall:function(a,
c){if(a.isDefaultPrevented())return!1;var d=b(this),f=Math.floor(c.loaded/c.total*100),e=d.find(".fileupload-progress"),g=e.find(".progress-extended");g.length&&g.html((d.data("blueimp-fileupload")||d.data("fileupload"))._renderExtendedProgress(c));e.find(".progress").attr("aria-valuenow",f).children().first().css("width",f+"%")},start:function(a){if(a.isDefaultPrevented())return!1;var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload");c._resetFinishedDeferreds();c._transition(b(this).find(".fileupload-progress")).done(function(){c._trigger("started",
a)})},stop:function(a){if(a.isDefaultPrevented())return!1;var c=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),d=c._addFinishedDeferreds();b.when.apply(b,c._getFinishedDeferreds()).done(function(){c._trigger("stopped",a)});c._transition(b(this).find(".fileupload-progress")).done(function(){b(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");b(this).find(".progress-extended").html("\x26nbsp;");d.resolve()})},processstart:function(a){if(a.isDefaultPrevented())return!1;
b(this).addClass("fileupload-processing")},processstop:function(a){if(a.isDefaultPrevented())return!1;b(this).removeClass("fileupload-processing")},destroy:function(a,c){if(a.isDefaultPrevented())return!1;var d=b(this).data("blueimp-fileupload")||b(this).data("fileupload"),f=function(){d._transition(c.context).done(function(){b(this).remove();d._trigger("destroyed",a,c)})};c.url?(c.dataType=c.dataType||d.options.dataType,b.ajax(c).done(f).fail(function(){d._trigger("destroyfailed",a,c)})):f()}},_resetFinishedDeferreds:function(){this._finishedUploads=
[]},_addFinishedDeferreds:function(a){a||(a=b.Deferred());this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=b(this),c=a.prop("href"),d=a.prop("download");a.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",d,c].join(":"))}catch(b){}})},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+
" MB":(a/1E3).toFixed(2)+" KB"},_formatBitrate:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" Gbit/s":1E6<=a?(a/1E6).toFixed(2)+" Mbit/s":1E3<=a?(a/1E3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=new Date(1E3*a);a=Math.floor(a/86400);return(a?a+"d ":"")+("0"+b.getUTCHours()).slice(-2)+":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+
" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,c){if(!a)return b();var d=a({files:c,formatFileSize:this._formatFileSize,options:this.options});return d instanceof b?d:b(this.options.templatesContainer).html(d).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(c,d){b(d).append(a.files[c].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,
a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(a){a.preventDefault();a=b(a.currentTarget);var c=a.closest(".template-upload").data("data");a.prop("disabled",!0);c&&c.submit&&c.submit()},_cancelHandler:function(a){a.preventDefault();var c=b(a.currentTarget).closest(".template-upload,.template-download"),d=c.data("data")||{};d.context=d.context||c;d.abort?d.abort():(d.errorThrown=
"abort",this._trigger("fail",a,d))},_deleteHandler:function(a){a.preventDefault();var c=b(a.currentTarget);this._trigger("destroy",a,b.extend({context:c.closest(".template-download"),type:"DELETE"},c.data()))},_forceReflow:function(a){return b.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var c=b.Deferred();a.toggleClass("in");c.resolveWith(a);return c},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),c=this.options.filesContainer;this._on(a.find(".start"),
{click:function(a){a.preventDefault();c.find(".start").click()}});this._on(a.find(".cancel"),{click:function(a){a.preventDefault();c.find(".cancel").click()}});this._on(a.find(".delete"),{click:function(b){b.preventDefault();c.find(".toggle:checked").closest(".template-download").find(".delete").click();a.find(".toggle").prop("checked",!1)}});this._on(a.find(".toggle"),{change:function(a){c.find(".toggle").prop("checked",b(a.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),
"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",
!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));g&&(a.uploadTemplateId&&(a.uploadTemplate=g(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=g(a.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?
a.filesContainer=this.element.find(".files"):a.filesContainer instanceof b||(a.filesContainer=b(a.filesContainer))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();b.support.fileInput||this._disableFileInputButton()},enable:function(){var a=!1;this.options.disabled&&(a=!0);this._super();a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||
(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})});(function(b){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-ui"],b):"object"===typeof exports?b(require("jquery")):b(window.jQuery)})(function(b){b.widget("blueimp.fileupload",b.blueimp.fileupload,{_initSpecialOptions:function(){this._super();this.options.dropZone=this.element.find(".dropzone")},_defineDropZone:function(){var g=this.options.dropZone;b(document).bind("dragover",function(a){var b=window.dropZoneTimeout;b?clearTimeout(b):g.addClass("in");b=!1;a=a.target;
do{if(a===g[0]){b=!0;break}a=a.parentNode}while(a);b?g.addClass("hover"):g.removeClass("hover");window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null;g.removeClass("in hover")},100)})},_create:function(){this._super();var b=this.element,a=this,c=function(){var c=b.find(".files"),f=c.children().length,f=0<a.options.maxNumberOfFiles&&f>=a.options.maxNumberOfFiles,e=c.children(".template-upload").not(".processing").length,h=c.children(".template-upload.processing").length,l=c.children(".template-download").not(".processing").length,
c=c.children(".template-download").not(".processing").find(".toggle:checked").length,k=b.find(".fileupload-buttonbar");k.find(".start").prop("disabled",0===e);k.find(".cancel").prop("disabled",0===e&&0===h);k.find(".delete").prop("disabled",0===c);k.find(".toggle").prop("disabled",0===l);a.options.autoDisableAdd&&(f?(a._disableFileInputButton(),a.options.dropZone.hide()):(a._enableFileInputButton(),a.options.dropZone.show()))};b.bind("fileuploadfailed fileuploadadded fileuploaddestroyed fileuploadcompleted",
c);b.on("click",".toggle",c);b.bind("fileuploadcompleted",function(a,c){(b.data("blueimp-fileupload")||b.data("fileupload"))._renderPreviews(c)});c();this._defineDropZone()},_destroy:function(){b(document).unbind("dragover").undelegate("dragover")}})});gx.uc.FileUpload=function(b){var g=[],a=0,c=[],d=0,f,e=gx.lang.gxBoolean,h=function(a,b){b=b||"";switch(a){case "image":return/(\.|\/)(gif|jpe?g|png)$/i;case "audio":return/(\.|\/)(mp3|wav|ogg|3gp|aac|wma)$/i;case "video":return/(\.|\/)(avi|flv|wmv|mov|mp4)$/i;case "custom":if(b)return new RegExp("(\\.|\\/)("+b.replace(/,/g,"|")+")$","i")}};this.getFiles=function(){return b.map(g,function(a){if(!a.destroyed)return{FullName:a.name,Name:a.name.replace(new RegExp("."+a.extension+"$","i"),""),Extension:a.extension,
Size:a.size,File:a.path}})};this.getFailedFiles=function(){return b.map(c,function(a){if(!a.destroyed)return{FullName:a.name,Name:a.name.replace(new RegExp("."+a.extension+"$","i"),""),Extension:a.extension,Size:a.size,File:a.path}})};this.show=function(){gx.uc.FileUpload.initTemplates();if(!this.IsPostBack){var l=b(this.getContainerControl());l.attr("id");var k=this.AcceptedFileTypes,m=this.CustomFileTypes,n="",p="",r=h(k,m),u=this.Class||"",q=0;"image"===k||"audio"===k||"video"===k?n=' accept\x3d"'+
k+'/*"':m&&(n=' accept\x3d".'+m.split(",").join(",.")+'"');p=1===Number(this.MaxNumberOfFiles)?"":" multiple";display=!0===this.HideAdditionalButtons?"none":"initial";f=b(['\x3cdiv class\x3d"gx-fileupload ',u,'"\x3e\n\x3cdiv class\x3d"row fileupload-buttonbar"\x3e\n\x3cdiv class\x3d"col-lg-7"\x3e\n\x3cspan class\x3d"btn btn-success fileinput-button" title\x3d"',this.TooltipText,'" \x3e\n\x3ci class\x3d"glyphicon glyphicon-plus"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_addfiles"),
'\x3c/span\x3e\n\x3cinput type\x3d"file" name\x3d"files[]"',p,n,'\x3e\n\x3c/span\x3e\n\x3cbutton type\x3d"submit" class\x3d"btn btn-primary start" style\x3d"display:',display,'" \x3e\n\x3ci class\x3d"glyphicon glyphicon-upload"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_start"),'\x3c/span\x3e\n\x3c/button\x3e\n\x3cbutton type\x3d"reset" class\x3d"btn btn-warning cancel" style\x3d"display:',display,'"\x3e\n\x3ci class\x3d"glyphicon glyphicon-ban-circle"\x3e\x3c/i\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_cancel"),'\x3c/span\x3e\n\x3c/button\x3e\n\x3cspan class\x3d"fileupload-process"\x3e\x3c/span\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"col-lg-5 fileupload-progress fade"\x3e\n\x3cdiv class\x3d"progress progress-striped active" role\x3d"progressbar" aria-valuemin\x3d"0" aria-valuemax\x3d"100"\x3e\n\x3cdiv class\x3d"progress-bar progress-bar-success" style\x3d"width:0%;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"progress-extended"\x3e\x26nbsp;\x3c/div\x3e\n\x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"dropzone fade"\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_drophere"),'\x3c/span\x3e\n\x3c/div\x3e\n\x3ctable role\x3d"presentation" class\x3d"table table-striped"\x3e\x3ctbody class\x3d"files"\x3e\x3c/tbody\x3e\x3c/table\x3e\n\x3c/div\x3e'].join("\n"));l.append(f);f.fileupload({url:location.pathname.substring(0,location.pathname.lastIndexOf("/")+1)+this.UploadURL+"/gxobject",autoUpload:e(this.AutoUpload)});f.bind("fileuploadadded",function(){q++}.closure(this));f.bind("fileuploaddestroyed",function(a,b){var c=b.context.data("index");
g[c].destroyed=!0});f.bind("fileuploadcompleted",function(){a++;a===q&&this.UploadComplete&&(this.UploadComplete(),q=0)}.closure(this));f.bind("fileuploadfailed",function(a,e){d++;b.each(e.files,function(a,b){c.push(b)});this.UploadFailed&&this.UploadFailed()}.closure(this));l={disableImageResize:e(this.DisableImageResize),maxFileSize:this.MaxFileSize,getFilesFromResponse:function(b){for(var c,d=0;d<b.result.files.length;d++)c=b.result.files[d],c._index=a,g.push(c);return b.result.files},messages:{maxNumberOfFiles:gx.getMessage("GXM_fileupload_maxNumberOfFiles"),
acceptFileTypes:gx.getMessage("GXM_fileupload_acceptFileTypes"),maxFileSize:gx.getMessage("GXM_fileupload_maxFileSize")},showCancelDownloadButton:this.EnableUploadedFileCanceling,autoDisableAdd:this.AutoDisableAddingFiles};0<this.MaxNumberOfFiles&&(l.maxNumberOfFiles=Number(this.MaxNumberOfFiles));r&&(l.acceptFileTypes=r);f.fileupload("option",l)}};this.destroy=function(){f&&(f.fileupload("destroy"),b.cleanData(f))};this.Clear=function(){f.find("table tbody.files").empty();g=[];a=0;c=[];d=0};this.StartUpload=
function(){f.find(".start").click()}};
gx.uc.FileUpload.initTemplates=function(){gx.uc.FileUpload.templatesInitialized||(gx.uc.FileUpload.templatesInitialized=!0,gx.$(['\x3cscript id\x3d"template-upload" type\x3d"text/x-tmpl"\x3e\n{% for (var i\x3d0, file; file\x3do.files[i]; i++) { %}\n\x3ctr class\x3d"template-upload fade"\x3e\n\x3ctd\x3e\n\x3cspan class\x3d"preview"\x3e\x3c/span\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cp class\x3d"name"\x3e{%\x3dfile.name%}\x3c/p\x3e\n\x3cstrong class\x3d"error text-danger"\x3e\x3c/strong\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cp class\x3d"size"\x3e',gx.getMessage("GXM_fileupload_processing"),
'\x3c/p\x3e\n\x3cdiv class\x3d"progress progress-striped active" role\x3d"progressbar" aria-valuemin\x3d"0" aria-valuemax\x3d"100" aria-valuenow\x3d"0"\x3e\x3cdiv class\x3d"progress-bar progress-bar-success" style\x3d"width:0%;"\x3e\x3c/div\x3e\x3c/div\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n{% if (!i \x26\x26 !o.options.autoUpload) { %}\n\x3cbutton class\x3d"btn btn-primary start" disabled\x3e\n\x3ci class\x3d"glyphicon glyphicon-upload"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_startone"),
'\x3c/span\x3e\n\x3c/button\x3e\n{% } %}\n{% if (!i) { %}\n\x3cbutton class\x3d"btn btn-warning cancel"\x3e\n\x3ci class\x3d"glyphicon glyphicon-ban-circle"\x3e\x3c/i\x3e\n\x3cspan\x3e',gx.getMessage("GXM_fileupload_cancelone"),"\x3c/span\x3e\n\x3c/button\x3e\n{% } %}\n\x3c/td\x3e\n\x3c/tr\x3e\n{% } %}\n\x3c/script\x3e"].join("\n")).appendTo(document.body),gx.$(['\x3cscript id\x3d"template-download" type\x3d"text/x-tmpl"\x3e\n{% for (var i\x3d0, file; file\x3do.files[i]; i++) { %}\n\x3ctr class\x3d"template-download fade" data-index\x3d"{%\x3dfile._index%}"\x3e\n\x3ctd\x3e\n\x3cspan class\x3d"preview"\x3e\x3c/span\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cp class\x3d"name"\x3e\n\x3cspan {%\x3dfile.thumbnailUrl?\'data-gallery\':\'\'%}\x3e{%\x3dfile.name%}\x3c/span\x3e\n\x3c/p\x3e\n{% if (file.error) { %}\n\x3cdiv\x3e\x3cspan class\x3d"label label-danger"\x3e',
gx.getMessage("GXM_fileupload_error"),'\x3c/span\x3e\x3cstrong class\x3d"error text-danger"\x3e{%\x3dfile.error%}\x3c/strong\x3e\x3c/div\x3e\n{% } %}\n\x3c/td\x3e\n\x3ctd\x3e\n\x3cspan class\x3d"size"\x3e{%\x3do.formatFileSize(file.size)%}\x3c/span\x3e\n\x3c/td\x3e\n\x3ctd\x3e\n{% if (o.options.showCancelDownloadButton) { %}\n\x3cbutton class\x3d"btn btn-danger delete" data-type\x3d"{%\x3dfile.deleteType%}" data-url\x3d"{%\x3dfile.deleteUrl%}"{% if (file.deleteWithCredentials) { %} data-xhr-fields\x3d\'{"withCredentials":true}\'{% } %}\x3e\n\x3ci class\x3d"glyphicon glyphicon-trash"\x3e\x3c/i\x3e\n\x3cspan\x3e',
gx.getMessage("GXM_fileupload_cancelone"),"\x3c/span\x3e\n\x3c/button\x3e\n{% } %}\n\x3c/td\x3e\n\x3c/tr\x3e\n{% } %}\n\x3c/script\x3e"].join("\n")).appendTo(document.body))};gx.$(gx.uc.FileUpload.initTemplates);

//# sourceMappingURL=fileupload.min.map
