/*
 * Rating GeneXus User Control 0.0.0.151633
 *
 * Copyright 2016, GeneXus
 */
!function(d){"function"==typeof define&&define.amd?define(["jquery"],d):"object"==typeof module&&module.exports?module.exports=d(require("jquery")):d(window.jQuery)}(function(d){d.fn.ratingLocales={};var e,k,f,m,h,g,n;e=function(a,c){return null===a||void 0===a||0===a.length||c&&""===d.trim(a)};k=function(a,c){a.removeClass(c).addClass(c)};f=function(a,c,b){return(a=e(a.data(c))?a.attr(c):a.data(c))?a:b[c]};m=function(a){return(a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?
a[1].length:0)-(a[2]?+a[2]:0)):0};h=function(a,c){return parseFloat(a.toFixed(c))};g=function(a,c,b,l){c=l?c:c.split(" ").join(".rating ")+".rating";a.off(c).on(c,b)};n=function(a,c){this.$element=d(a);this.init(c)};n.prototype={constructor:n,_parseAttr:function(a,c){var b,l,d;l=this.$element;d=l.attr("type");if("range"===d||"number"===d){switch(l=f(l,a,c),a){case "min":d=0;break;case "max":d=5;break;default:d=.5}return b=e(l)?d:l,parseFloat(b)}return parseFloat(c[a])},setDefault:function(a,c){e(this[a])&&
(this[a]=c)},getPosition:function(a){return(e(a.pageX)?a.originalEvent.touches[0].pageX:a.pageX)-this.$rating.offset().left},listenClick:function(a,c){return a.stopPropagation(),a.preventDefault(),!0===a.handled?!1:(c(a),void(a.handled=!0))},starClick:function(a){var c,b=this;b.listenClick(a,function(a){return b.inactive?!1:(c=b.getPosition(a),b.setStars(c),b.$element.trigger("change").trigger("rating.change",[b.$element.val(),b.$caption.html()]),void(b.starClicked=!0))})},starMouseMove:function(a){var c,
b;!this.hoverEnabled||this.inactive||a&&a.isDefaultPrevented()||(this.starClicked=!1,c=this.getPosition(a),b=this.calculate(c),this.toggleHover(b),this.$element.trigger("rating.hover",[b.val,b.caption,"stars"]))},starMouseLeave:function(a){var c;!this.hoverEnabled||this.inactive||this.starClicked||a&&a.isDefaultPrevented()||(c=this.cache,this.toggleHover(c),this.$element.trigger("rating.hoverleave",["stars"]))},clearClick:function(a){var c=this;c.listenClick(a,function(){c.inactive||(c.clear(),c.clearClicked=
!0)})},clearMouseMove:function(a){var c,b,d,e;!this.hoverEnabled||this.inactive||!this.hoverOnClear||a&&a.isDefaultPrevented()||(this.clearClicked=!1,c='\x3cspan class\x3d"'+this.clearCaptionClass+'"\x3e'+this.clearCaption+"\x3c/span\x3e",b=this.clearValue,d=this.getWidthFromValue(b),e={caption:c,width:d,val:b},this.toggleHover(e),this.$element.trigger("rating.hover",[b,c,"clear"]))},clearMouseLeave:function(a){var c;!this.hoverEnabled||this.inactive||this.clearClicked||!this.hoverOnClear||a&&a.isDefaultPrevented()||
(c=this.cache,this.toggleHover(c),this.$element.trigger("rating.hoverleave",["clear"]))},resetForm:function(a){a&&a.isDefaultPrevented()||this.inactive||this.reset()},initTouch:function(a){this.setTouch(a,"touchend"===a.type)},listen:function(){var a=this.$element.closest("form"),c=this.$rating,b=this.$clear;g(c,"touchstart touchmove touchend",d.proxy(this.initTouch,this));g(c,"click touchstart",d.proxy(this.starClick,this));g(c,"mousemove",d.proxy(this.starMouseMove,this));g(c,"mouseleave",d.proxy(this.starMouseLeave,
this));g(b,"click touchstart",d.proxy(this.clearClick,this));g(b,"mousemove",d.proxy(this.clearMouseMove,this));g(b,"mouseleave",d.proxy(this.clearMouseLeave,this));a.length&&g(a,"reset",d.proxy(this.resetForm,this))},destroy:function(){var a=this.$element;e(this.$container)||this.$container.before(a).remove();d.removeData(a.get(0));a.off("rating").removeClass("hide")},create:function(a){var c=this.$element;a=a||this.options||{};this.destroy();c.rating(a)},setTouch:function(a,c){var b,d,q,p,h,f,g;
("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)&&!this.inactive&&(b=a.originalEvent,d=e(b.touches)?b.changedTouches:b.touches,q=this.getPosition(d[0]),c?(this.setStars(q),this.$element.trigger("change").trigger("rating.change",[this.$element.val(),this.$caption.html()]),this.starClicked=!0):(p=this.calculate(q),h=p.val<=this.clearValue?this.fetchCaption(this.clearValue):p.caption,f=this.getWidthFromValue(this.clearValue),g=p.val<=this.clearValue?this.rtl?
100-f+"%":f+"%":p.width,this.$caption.html(h),this.$stars.css("width",g)))},initSlider:function(a){e(this.$element.val())&&this.$element.val(0);this.initialValue=this.$element.val();this.setDefault("min",this._parseAttr("min",a));this.setDefault("max",this._parseAttr("max",a));this.setDefault("step",this._parseAttr("step",a));(isNaN(this.min)||e(this.min))&&(this.min=0);(isNaN(this.max)||e(this.max))&&(this.max=5);(isNaN(this.step)||e(this.step)||0===this.step)&&(this.step=.5);this.diff=this.max-
this.min},init:function(a){var c,b=this,l=b.$element;b.options=a;d.each(a,function(a,c){b[a]=c});b.starClicked=!1;b.clearClicked=!1;b.initSlider(a);b.checkDisabled();b.setDefault("rtl",l.attr("dir"));b.rtl&&l.attr("dir","rtl");b.setDefault("symbol",b.glyphicon?"":"★");b.setDefault("clearButtonBaseClass","clear-rating");b.setDefault("clearButtonActiveClass","clear-rating-active");b.setDefault("clearValue",b.min);k(l,"form-control hide");b.$clearElement=e(a.clearElement)?null:d(a.clearElement);b.$captionElement=
e(a.captionElement)?null:d(a.captionElement);void 0===b.$rating&&void 0===b.$container&&(b.$rating=d(document.createElement("div")).html('\x3cdiv class\x3d"rating-stars"\x3e\x3c/div\x3e'),b.$container=d(document.createElement("div")),b.$container.before(b.$rating).append(b.$rating),l.before(b.$container).appendTo(b.$rating));b.$stars=b.$rating.find(".rating-stars");b.generateRating();b.$clear=e(b.$clearElement)?b.$container.find("."+b.clearButtonBaseClass):b.$clearElement;b.$caption=e(b.$captionElement)?
b.$container.find(".caption"):b.$captionElement;b.setStars();b.listen();b.showClear&&b.$clear.attr({"class":b.getClearClass()});a=l.val();c=b.getWidthFromValue(a);b.cache={caption:b.$caption.html(),width:(b.rtl?100-c:c)+"%",val:a};l.removeClass("rating-loading")},checkDisabled:function(){this.disabled=f(this.$element,"disabled",this.options);this.readonly=f(this.$element,"readonly",this.options);this.inactive=this.disabled||this.readonly},getClearClass:function(){return this.clearButtonBaseClass+
" "+(this.inactive?"":this.clearButtonActiveClass)},generateRating:function(){var a=this.renderClear(),c=this.renderCaption(),b=this.rtl?"rating-container-rtl":"rating-container",d=this.getStars(),b=b+(this.glyphicon?(""===this.symbol?" rating-gly-star":" rating-gly")+this.ratingClass:e(this.ratingClass)?" rating-uni":" "+this.ratingClass);this.$rating.attr("class",b);this.$rating.attr("data-content",d);this.$stars.attr("data-content",d);b=this.rtl?"star-rating-rtl":"star-rating";this.$container.attr("class",
b+" rating-"+this.size);this.$container.removeClass("rating-active rating-disabled");this.inactive?this.$container.addClass("rating-disabled"):this.$container.addClass("rating-active");e(this.$caption)&&(this.rtl?this.$container.prepend(c):this.$container.append(c));e(this.$clear)&&(this.rtl?this.$container.append(a):this.$container.prepend(a));e(this.containerClass)||k(this.$container,this.containerClass)},getStars:function(){var a,c=this.stars,b="";for(a=1;c>=a;a++)b+=this.symbol;return b},renderClear:function(){var a;
return this.showClear?(a=this.getClearClass(),e(this.$clearElement)?'\x3cdiv class\x3d"'+a+'" title\x3d"'+this.clearButtonTitle+'"\x3e'+this.clearButton+"\x3c/div\x3e":(k(this.$clearElement,a),this.$clearElement.attr({title:this.clearButtonTitle}).html(this.clearButton),"")):""},renderCaption:function(){var a,c=this.$element.val();return this.showCaption?(a=this.fetchCaption(c),e(this.$captionElement)?'\x3cdiv class\x3d"caption"\x3e'+a+"\x3c/div\x3e":(k(this.$captionElement,"caption"),this.$captionElement.html(a),
"")):""},fetchCaption:function(a){var c,b,d,h,f;a=parseFloat(a);var g=this.starCaptions,k=this.starCaptionClasses;return h="function"==typeof k?k(a):k[a],d="function"==typeof g?g(a):g[a],b=e(d)?this.defaultCaption.replace(/\{rating}/g,a):d,c=e(h)?this.clearCaptionClass:h,f=a===this.clearValue?this.clearCaption:b,'\x3cspan class\x3d"'+c+'"\x3e'+f+"\x3c/span\x3e"},getWidthFromValue:function(a){var c=this.min,b=this.max;return c>=a||c===b?0:a>=b?100:100*(a-c)/(b-c)},getValueFromPosition:function(a){var c,
b,d=m(this.step),e=this.$rating.width();return b=this.diff*a/(e*this.step),b=this.rtl?Math.floor(b):Math.ceil(b),c=h(parseFloat(this.min+b*this.step),d),c=Math.max(Math.min(c,this.max),this.min),this.rtl?this.max-c:c},toggleHover:function(a){var c,b,d;this.hoverChangeCaption&&(d=a.val<=this.clearValue?this.fetchCaption(this.clearValue):a.caption,this.$caption.html(d));this.hoverChangeStars&&(c=this.getWidthFromValue(this.clearValue),b=a.val<=this.clearValue?this.rtl?100-c+"%":c+"%":a.width,this.$stars.css("width",
b))},calculate:function(a){var c=e(this.$element.val())?0:this.$element.val(),c=arguments.length?this.getValueFromPosition(a):c,b=this.fetchCaption(c),d=this.getWidthFromValue(c);return this.rtl&&(d=100-d),d+="%",{caption:b,width:d,val:c}},setStars:function(a){var c=arguments.length?this.calculate(a):this.calculate();this.$element.val(c.val);this.$stars.css("width",c.width);this.$caption.html(c.caption);this.cache=c},clear:function(){var a='\x3cspan class\x3d"'+this.clearCaptionClass+'"\x3e'+this.clearCaption+
"\x3c/span\x3e";this.$stars.removeClass("rated");this.inactive||this.$caption.html(a);this.$element.val(this.clearValue);this.setStars();this.$element.trigger("rating.clear")},reset:function(){this.$element.val(this.initialValue);this.setStars();this.$element.trigger("rating.reset")},update:function(a){arguments.length&&(this.$element.val(a),this.setStars())},refresh:function(a){arguments.length&&(this.$rating.off("rating"),void 0!==this.$clear&&this.$clear.off(),this.init(d.extend(!0,this.options,
a)),this.showClear?this.$clear.show():this.$clear.hide(),this.showCaption?this.$caption.show():this.$caption.hide(),this.$element.trigger("rating.refresh"))}};d.fn.rating=function(a){var c=Array.apply(null,arguments),b=[];switch(c.shift(),this.each(function(){var h,f=d(this),g=f.data("rating"),k="object"==typeof a&&a,m=k.language||f.data("language")||"en",r={};g||("en"===m||e(d.fn.ratingLocales[m])||(r=d.fn.ratingLocales[m]),h=d.extend(!0,{},d.fn.rating.defaults,d.fn.ratingLocales.en,r,k,f.data()),
g=new n(this,h),f.data("rating",g));"string"==typeof a&&b.push(g[a].apply(g,c))}),b.length){case 0:return this;case 1:return b[0];default:return b}};d.fn.rating.defaults={language:"en",stars:5,glyphicon:!0,symbol:null,ratingClass:"",disabled:!1,readonly:!1,rtl:!1,size:"md",showClear:!0,showCaption:!0,starCaptionClasses:{"0.5":"label label-danger",1:"label label-danger","1.5":"label label-warning",2:"label label-warning","2.5":"label label-info",3:"label label-info","3.5":"label label-primary",4:"label label-primary",
"4.5":"label label-success",5:"label label-success"},clearButton:'\x3ci class\x3d"glyphicon glyphicon-minus-sign"\x3e\x3c/i\x3e',clearButtonBaseClass:"clear-rating",clearButtonActiveClass:"clear-rating-active",clearCaptionClass:"label label-default",clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0};d.fn.ratingLocales.en={defaultCaption:"{rating} Stars",starCaptions:{"0.5":"Half Star",1:"One Star","1.5":"One \x26 Half Star",
2:"Two Stars","2.5":"Two \x26 Half Stars",3:"Three Stars","3.5":"Three \x26 Half Stars",4:"Four Stars","4.5":"Four \x26 Half Stars",5:"Five Stars"},clearButtonTitle:"Clear",clearCaption:"Not Rated"};d.fn.rating.Constructor=n;d(document).ready(function(){var a=d("input.rating");a.length&&a.removeClass("rating-loading").addClass("rating-loading").rating()})});function Rating(d){this.Value;this.Step;this.MaxValue;this.Visible;this.Enabled;var e,k,f,m;this.SetAttribute=function(d){this.SetValue(d)};this.GetAttribute=function(){return f.val()};this.SetValue=function(d){this.Value="string"===typeof d||d instanceof String?d.replace(",","."):d;f&&f.val(d)};this.show=function(){var h=" gx-star-rating "+(this.RatingClass||"");if(this.IsPostBack)f.rating("refresh",{readonly:!this.Enabled,step:this.Step,max:this.MaxValue,stars:this.MaxValue,ratingClass:h});else{e=
d(this.getContainerControl());k=e.attr("id")+"_rating";var g=Mustache.to_html("\x3cinput type\x3d'number' id\x3d'{{id}}' value\x3d'{{value}}'/\x3e",{id:k,value:this.Value});this.setHtml(g);h={min:0,max:this.MaxValue,stars:this.MaxValue,readonly:!this.Enabled,step:this.Step,showCaption:!1,showClear:!1,size:"sm",ratingClass:h};f=d("#"+k).rating(h);var n=this;if(this.ControlValueChanged)f.on("rating.change",function(a,c){n.ControlValueChanged()});m=f.closest(".form-group");m.length||(m=e)}m.toggle(this.Visible)}}
;

//# sourceMappingURL=rating.min.map
