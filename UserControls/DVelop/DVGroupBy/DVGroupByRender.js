function DVelop_DVGroupBy(){this.GridInternalName;this.ColumnIndex;this.TotalizerColumnIndexes;this.AllowCollapse;this.initialized=!1;this.show=function(){WWP_HasGridEmpowerer(this)?WWP_NotifyEmpower(this,"WWP.RowGroupsHelper"):(this.ProcessGroup(!0),this.initialized||(this.initialized=!0,gx.fx.obs.addObserver("gx.onafterevent",window,function(n){return function(){n.ProcessGroup(!0)}}(this)),gx.fx.obs.addObserver("grid.onafterrender",window,function(n){return function(){n.ProcessGroup(!0)}}(this)),gx.fx.obs.addObserver("gx.onload",window,function(n){return function(){n.ProcessGroup(!0)}}(this))))};this.ProcessGroup=function(n){var h,i,b,f,e,t,o,c,l,p,r,u,k,w,s,d;if(this.ColumnIndex!=-1&&this.GridInternalName!=null&&this.GridInternalName!=""&&(h=WWP_GetGrid(this).find(">table"),h.length==1&&h.data("groupProcessed")==null)){for(h.data("groupProcessed",""),i=JSON.parse("["+this.TotalizerColumnIndexes+"]"),b=this.ColumnIndex-1,i.sort(function(n,t){return n-t}),f=[0],t=1;t<i.length;t++)f.push(0);var a=0,v=h.find(">thead>tr:last-child()>th"),y=0,r=0;for(v.each(function(){var t=$(this).css("display")!="none";t||!n?(t&&a++,r<i.length&&i[r]>y&&f[r]++,r<i.length&&i[r]==y&&r++):r<i.length&&i[r]==y&&(f.length>r+1&&(f[r+1]+=f[r]),i.splice(r,1),f.splice(r,1));y++}),i.length==0&&(f=[a]),e=h.find(">tbody")[0],t=0;t<e.children.length;t++)if(t==0||e.children[t].children[this.ColumnIndex].innerText!=e.children[t-1].children[this.ColumnIndex].innerText){if($(e.children[t].children[b]).hasClass("WWPExpand")&&$(e.children[t]).addClass("Invisible"),o=document.createElement("tr"),$(o).addClass("DVGroupByRow"),this.AllowCollapse&&($(o).addClass("DVGroupByRowAllowCollapse"),$(e.children[t].children[b]).attr("expandBtn","")),$(e.children[t].children[this.ColumnIndex]).attr("groupTitle",""),n){if(c=this.getExpandButtonHtml(e.children[t]),o.innerHTML='<td class="DVGroupByCell" colspan="'+f[0]+'">'+this.getTitleCellHtml($(e.children[t]),c!=null&&f[0]==a?c:null)+"<\/td>",l=a-f[0],i.length>0)for(u=0;u<i.length;u++)u>0&&f[u]>0&&(o.innerHTML+='<td class="DVGroupByCell" colspan="'+f[u]+'" />',l-=f[u]),l--,o.innerHTML+='<td class="DVGroupByCell" >'+this.ProcessGroup_GetTotalizerValue(t,u,e,i)+"<\/td>",s=$(h.find(">thead>tr>th")[i[u]]).css("text-align"),s!=null&&s!=""&&$(o.children[o.children.length-1]).css({"text-align":s});l>0&&(o.innerHTML+='<td class="DVGroupByCell" colspan="'+l+'" >'+(c!=null?c:"")+"<\/td>");$(o).find("td>.DVGroupByBtn>img").css("display","")}else{for(p="",r=0,u=0;u<v.length;u++)k=r<i.length&&i[r]==u,w=$(v[u]).css("display")=="none",k?(s=$(v[u]).css("text-align"),s!=null&&s!=""?s='style="text-align:'+s+(w?";display:none":"")+'"':w&&(s='style="display:none"'),p+='<td class="DVGroupByCell" '+s+" totCol >"+this.ProcessGroup_GetTotalizerValue(t,r,e,i)+"<\/td>"):p+='<td class="DVGroupByCell" '+(w?'style="display:none"':"")+" />",k&&r++;o.innerHTML=p}if(this.AllowCollapse){d=this;$(o).on("click",function(n){var t=$(this).next(),i;t.hasClass("FGRowLine")&&(t=t.next(),t.hasClass("FGRowLine")&&(t=t.next()));i=t.find(">td[expandBtn]");i.find("span").length>0?i.find("span").click():(i.find("img").click(),n.preventDefault(),n.stopPropagation())})}e.insertBefore(o,e.children[t]);t++}}};this.getExpandButtonHtml=function(n){var r=null,t,i;return this.AllowCollapse&&(t=$(n).find(">td[expandBtn]"),i=t.find("a"),expandBtn=i.length==1?i[0]:t.find("img")[0].parentNode,expandBtn!=null&&(r='<div class="DVGroupByBtn">'+expandBtn.innerHTML+"<\/div>")),r};this.getTitleCellHtml=function(n,t){return(t!=null?"<table><tbody><tr><td>":"")+'<span class="DVGroupByTitle">'+n.find(">*[groupTitle]")[0].innerText+"<\/span>"+(t!=null?"<\/td><td>"+t+"<\/td><\/tr><\/tbody><\/table>":"")};this.mergeGroupRowCellsAndAddTitle=function(){var t,r,i,e,a,v,h,c,y,n,f,o,l;if(this.ColumnIndex!=-1&&this.GridInternalName!=null&&this.GridInternalName!=""&&(t=WWP_GetGrid(this).find(">table"),t.length==1&&t.data("groupProcessed")!="P")){for(t.data("groupProcessed","P"),r=t.find(">tbody>tr.DVGroupByRow:eq(0)")[0],i=t.find(">thead>tr:not(.FGHeaderRowH,.FGHeaderRowV,.GridGroupTitleRow)")[0],t.find(">tbody>tr.DVGroupByRow>td").removeAttr("colspan"),n=0;n<r.childNodes.length;n+=1)t.find(">tbody>tr.DVGroupByRow>td:nth-child("+(n+1)+")").css("display",$(i.childNodes[n]).css("display")!="none"?"":"none");for($(r).find(">[expandBtn],>[titleCell]").each(function(){this.innerHTML=""}).removeAttr("expandBtn").removeAttr("titleCell"),e=$(i).find(">.FixedColumnL:visible,>.FixedColumnR:visible").length>0,e&&($(i).closest(".gx-grid").parent().closest(".HasGridEmpowerer,.gx-grid").hasClass("GridFixedTitles")?(console.warn('WorkWithPlus Error: a grid cannot have "Grouped by", "Fixed Titles" and a "Fixed Column" at the same time.'),t.find(">thead>tr:last-child()>.FixedColumnL:visible,>thead>tr:last-child()>.FixedColumnR:visible").removeClass("FixedColumnL").removeClass("FixedColumnR"),e=!1):t.data("Empowered")==null&&(a=$(i).find(">th.FixedColumnL:visible").last().index(),v=$(i).find(">th.FixedColumnR:visible").first().index(),t.find(">thead>tr:last-child()>*:visible").each(function(){var n=$(this).index();a>0&&n<a?$(this).addClass("FixedColumnL"):v>0&&n>v&&$(this).addClass("FixedColumnR")}))),h=!1,c=!1,$(r).find(">:visible[totCol]").each(function(){$(i.childNodes[$(this).index()]).hasClass("FixedColumnL")?t.find(">tbody>tr.DVGroupByRow>td:nth-child("+($(this).index()+1)+")").each(function(){this.innerHTML=""}).removeAttr("totCol"):(h=!0,$(i.childNodes[$(this).index()]).is(":not(.FixedColumnL,.FixedColumnR)")&&(c=!0))}),h&&e&&!c&&t.data("groupNoNotFixedTot",""),y=!0,n=0;n<r.childNodes.length;n+=1)if($(r.childNodes[n]).css("display")!="none"){for(var s=1,u=0,p=e&&n<=$(i).find(">th.FixedColumnL:visible").last().index();n+u<r.childNodes.length-1&&(!h||$(r.childNodes[n+u+1]).css("display")=="none"||y&&(!e&&!$(r.childNodes[n+u+1]).is("[totCol]")||p&&$(i.childNodes[n+u+1]).is(".FixedColumnL")));)$(r.childNodes[n+u+1]).css("display")!="none"&&s++,t.find(">tbody>tr.DVGroupByRow>td:nth-child("+(n+u+2)+")").css("display","none"),u++;s==1&&c&&$(i.childNodes[n]).hasClass("FixedColumnL")&&!$(i.childNodes[n+u+1]).hasClass("FixedColumnL")&&s++;s>1&&t.find(">tbody>tr.DVGroupByRow>td:nth-child("+(n+1)+")").attr("colspan",s);n+=u;y=!1}f=null;l=this;t.find(">tbody>tr.DVGroupByRow").each(function(){var t,n,i;$(this).find(">[expandBtn],>[titleCell]").each(function(){this.innerHTML=""}).removeAttr("expandBtn").removeAttr("titleCell");f==null&&(t=$(this).find(">:visible"),f=t.first().index(),o=t.last().index());n=$(this).next();n.hasClass("FGRowLine")&&(n=n.next(),n.hasClass("FGRowLine")&&(n=n.next()));i=l.getExpandButtonHtml(n[0]);this.childNodes[f].innerHTML=l.getTitleCellHtml(n,f==o?i:null);$(this.childNodes[f]).attr("titleCell","");f!=o&&l.AllowCollapse&&!$(this.childNodes[o]).is("[totCol]")&&($(this.childNodes[o]).attr("expandBtn",""),this.childNodes[o].innerHTML=i)})}};this.ProcessGroup_GetTotalizerValue=function(n,t,i,r){var u=r[t]+1;return($(i.children[n].children[u]).find("span").attr("id")+"").indexOf("_GROUPTOTALIZER")==-1&&i.children[n].children.length>u+1&&(($(i.children[n].children[u+1]).find("span").attr("id")+"").indexOf("_GROUPTOTALIZER")!=-1?u++:i.children[n].children.length>u+2&&($(i.children[n].children[u+2]).find("span").attr("id")+"").indexOf("_GROUPTOTALIZER")!=-1&&(u+=2)),'<span class="DVGroubByTotalizer">'+i.children[n].children[u].innerText+"<\/span>"}};$(window).one('load',function(){WWP_VV([['DVGroupBy','14.2001']]);});