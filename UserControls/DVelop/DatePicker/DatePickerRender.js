function WWP_DatePicker_UC(){this.show=function(){defaultWWPDateRangeSettings.minYear=this.MinYear;defaultWWPDateRangeSettings.maxYear=this.MaxYear;defaultWWPDateRangeSettings.style=this.Style;defaultWWPDateRangeSettings.optsLoaded=!0}}function WWPDateTimePicker_updateOption(n,t,i,r){i!=null&&(n[t]=r?moment(i):i,n.settingsBeforeMerge!=null&&(n.settingsBeforeMerge[t]=n[t]),n.flatDisplay&&((n.minDate&&n.startDate.isBefore(n.minDate)||n.maxDate&&n.endDate.isAfter(n.maxDate))&&n.clickCancel(),n.updateView()))}window.Calendar||(Calendar={});Calendar.setup=function(n){var t="#"+n.inputField,u=n.showsTime,l=n.weekNumbers,a=n.mondayFirst,i=n.ifFormat,r=n.button,f=r==null?n.flat:null,v=r!=null||n.onSelect!=null?n.onSelect:n.flatCallback,d=n.align,y=n.singleClick,p=n.displayRight,o=mapGXDateFormatToDatePickerFormat(i,u),k,e,c;defaultWWPDateRangeSettings.dateFormat||n.inputField!="vPICKERDUMMYVARIABLE_MPAGE"||(defaultWWPDateRangeSettings.dateFormat=o,defaultWWPDateRangeSettings.mondayFirst=a);var w={DatePicker:{Show:!u||i.indexOf("/")>=0,ShowDropdowns:!0,ShowWeekNumbers:l,SingleDatePicker:!0},TimePicker:{Show:u,Hour24:i.indexOf("%p")<0,ShowSeconds:i.indexOf("%S")>0,Increment:1},Locale:{Format:o},Advanced:{AutoApply:y,OpenLocation:p?"right":null},parentEl:f!=null?$(t).parent():null,flatDisplay:f!=null},s=$(t).val(),b=new gx.date.gxdate(s),h=gx.date.isNullDate(b);if(h&&$(t).val(""),k=new WWP_DateRangePicker(t,w,WWP_DatePicker_UC_on_Changed.closure({field:$(t),vStruct:gx.O.getValidStructFld(n.inputField),onSelect:v})),h&&$(t).val(s),e=function(n){var u=$(t).val(),r=new gx.date.gxdate(u),i=$(t).data("daterangepicker");!r||gx.date.isNullDate(r)?($(n.attachedCtrl).val(""),i.setStartDate(new Date),i.setEndDate(new Date),i.isNullVal=!0):(i.isNullVal=!1,i.setStartDate(r.Value),i.setEndDate(r.Value))},r!=null)$("#"+r).on("click",function(){e(this);var n=$(t);gx.O.getValidStructFld($(t).attr("id"))==null&&n.focus().blur();n.trigger("click")});else f!=null&&(c=$(t).data("daterangepicker"),c.flatDisplay=!0,$(t).trigger("click"));$(t).on("focusin",function(){e(this)})};var WWP_DatePicker_UC_on_Changed=function(n){var u,f;this.startDate=n;var t=$(this.field),i=this.vStruct,e=t[0],r=this.onSelect;r&&r(null,n||gx.date.nullDate(),e,i,gx.O);u=t.data("daterangepicker");this.startDate?u.updateElement(!0):i?(f=gx.date.nulldate_toc(i.len,i.dec),t.val(f)):(t.val(""),console.log("WWP_DatePicker_UC: Ctrl on screen not found:"+this.field))};$(window).one('load',function(){WWP_VV([['WWP.DatePicker','14.3000']]);});