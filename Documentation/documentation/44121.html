<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Chatbots using Whatsapp: How to set up Twilio</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?44121,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Chatbots using Whatsapp: How to set up Twilio</h1>
<!--Chatbots using Whatsapp: How to set up Twilio--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>Here you can learn how to setup <a href='http://www.twilio.com/'>Twilio</a> in order to use Whatsapp as a messaging platform for the <a href="37102.html">Chatbot generator</a>.</p>

<p>Twilio Sandbox for WhatsApp allows you to <strong>prototype</strong> with WhatsApp immediately, without waiting for your Twilio number to be approved for WhatsApp.</p>

<p><strong>Summary</strong></p>
<ul><li><a class="HashLink" href="#Creating+the+account">Creating the account</a></li><li><a class="HashLink" href="#Joining+the+sandbox">Joining the sandbox</a></li><li><a class="HashLink" href="#Configuring+inbound+message+webhooks">Configuring inbound message webhooks</a></li><li><a class="HashLink" href="#Configuration+Settings">Configuration Settings</a></li></ul></ul>

<h3><a id="Creating+the+account" class="HashLink" href="#Creating+the+account">Creating the account</a></h3>

<p>First, create a new account in <a href='https://www.twilio.com/try-twilio'>Twilio</a>.</p>

<p><img src="./images/44124.png" id="44124" class="WikiImage"/></p>

<p>You'll be asked to verify your email:</p>

<p><img src="./images/44134.png" id="44134" class="WikiImage"/></p>

<p>Then, you'll be asked to verify your phone number:</p>

<p><img src="./images/44135.png" id="44135" class="WikiImage"/></p>

<h3><a id="Joining+the+sandbox" class="HashLink" href="#Joining+the+sandbox">Joining the sandbox</a></h3>

<p>You'll have to go through some steps:</p>

<p><img src="./images/44206.png" id="44206" class="WikiImage"/></p>

<p><img src="./images/44207.png" id="44207" class="WikiImage"/></p>

<p>Here you can skip to dashboard:</p>

<p><img src="./images/44208.png" id="44208" class="WikiImage"/></p>

<p>Then go through  <strong>&quot;All Product &amp; Services&quot;</strong> and select <strong>&quot;Programmable Messaging&quot;. </strong>In a new window that appears, you have to select <strong>&quot;WhatsApp&quot; </strong>and<strong> </strong>it asks you if you want to activate the Sandbox.</p>

<p>To activate the sandbox, a page like this one appears:</p>

<p><img src="./images/44209.png" id="44209" class="WikiImage"/></p>

<p>Select a number from the available sandbox numbers:</p>

<p><img alt="WA_Sandbox.png" src="https://s3.amazonaws.com/com.twilio.prod.twilio-docs/images/WA_Sandbox.width-800.png" /></p>

<p>There's a <a href='https://www.twilio.com/console/sms/whatsapp/learn'>learn tutorial</a> which you can follow easily.</p>

<p>The sandbox is pre-provisioned with a Twilio phone number.<br />
Send “join &lt;<em>your sandbox keyword</em>&gt;” to your Sandbox number in WhatsApp to join your Sandbox.</p>

<p><img src="./images/46515.png" id="46515" class="WikiImage"/></p>

<p>After joining, you will receive a message from the sandbox:</p>

<p><img src="./images/44125.png" id="44125" class="WikiImage"/></p>

<p>See <a href='https://www.twilio.com/docs/sms/whatsapp/api#joining-a-sandbox'>here</a> for more details.</p>

<h3><a id="Configuring+inbound+message+webhooks" class="HashLink" href="#Configuring+inbound+message+webhooks">Configuring inbound message webhooks</a></h3>

<p>When customers send you a WhatsApp message, Twilio sends a web hook to your application.</p>

<p>On the <a href='https://www.twilio.com/console/sms/whatsapp/sandbox'>sandbox page</a> you have to configure the URL that Twilio sends a web hook to for inbound messages.</p>

<p>The Chatbot generator creates a webhook (see <a href="44346.html">Howto: Chatbots using WhatsApp</a>), under the instance's module. </p>

<p>After building it, configure the URL as follows:</p>

<p><strong>http://&lt;server&gt;/&lt;baseURL&gt;/&lt;InstanceModule&gt;.</strong><b>WhatsappWebhook</b><strong>.aspx (.NET) or http://&lt;server&gt;/&lt;baseURL&gt;/&lt;InstanceModule&gt;.</strong><b>WhatsappWebhook</b><strong> (Java)</strong></p>

<p>This has to be configured going through &quot;Programmable Messaging -&gt; Settings -&gt; Whatsapp sandbox settings&quot;. Note that the machine where the webhook is hosted, has to be visible from Internet:</p>

<p><img src="./images/46516.png" id="46516" class="WikiImage"/></p>

<h3><a id="Configuration+Settings" class="HashLink" href="#Configuration+Settings">Configuration Settings</a></h3>

<p>In the <a href='https://www.twilio.com/console'>console page</a>, you have the Account SID and an Authorization Token. These credentials are needed to the interaction with Twilio</p>

<p>Account SID - Used to identify yourself in API requests<br />
Auth Token  - Used to authenticate REST API requests</p>

<p><img src="./images/46518.png" id="46518" class="WikiImage"/></p>

<div style="background-color: rgb(221,255,221);border-left: 6.0px solid rgb(76,175,80);">The Auth Token is the information needed when you send messages through Twilio. This is the information to be configured in the <a href="44346.html">WebHook</a>. </div>

<p><strong>Note:</strong></p>

<p>If you have joined your Sandbox &gt; 24 hours ago, you will need to send a fresh inbound message to your WhatsApp number in order to then send yourself a media message. Otherwise, you'll get the &quot;<a href='https://www.twilio.com/docs/api/errors/63016'>ERROR - 63016</a><br />
Failed to send freeform message because you are outside the allowed window. Please use a Template.&quot;</p>

<p> </p>

<p></p>

<p></p>

<p></p>
<br />
</td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="38520.html">Toc:Chatbots in GeneXus</a></TD><TD><a href="44346.html">Howto: Chatbots using WhatsApp</a></TD></TR><TR><TD><a href="46271.html">Howto: Integrate a new WhatsApp partner into a GeneXus Chatbot</a></TD><TD><a href="46592.html">Multi-experience with GeneXus 17</a></TD></TR><TR><TD><a href="45164.html">WhatsApp Partner property</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 05/28/21 07:30 PM</em></font></td></TR></table></font>