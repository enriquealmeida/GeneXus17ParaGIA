<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Database Mocking (GeneXus 17 Upgrade 9 or prior)</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?50393,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Database Mocking (GeneXus 17 Upgrade 9 or prior)</h1>
<!--Database Mocking (GeneXus 17 Upgrade 9 or prior)--><div class="TableWikiBody" id="tblwikibody"><h3><a id="Introduction" class="HashLink" href="#Introduction">Introduction</a></h3>

<p>To have proper data in place can be very hard when testing applications. Not only you need different data sets to test different scenarios and equivalent classes, but also providing combinations that can be fundamental to catch bugs before they going to the production environment.<br />
Additionally, GeneXus applications are commonly data-intensive apps, which means that your tests will not only need a combination of data input but some data configured in your database to let tests run properly.</p>

<h3><a id="What+is+Database+Mocking%3F" class="HashLink" href="#What+is+Database+Mocking%3F">What is Database Mocking?</a></h3>

<p>Database Mocking is a technique that allows you to set the desired database state (for different tables) in your tests to let specific data-sets ready for future test execution. Using this technique, you can focus on getting the test data-sets ready once (in a real database), and then use it on different test phases regarding the environments by using mocking. In other words, Database Mocking is a simulation of a database with few records.  </p>

<h3><a id="How+does+it+work%3F" class="HashLink" href="#How+does+it+work%3F">How does it work?</a></h3>

<p>Mocking works by recording data (SQLs / results) used for a test by listening for all <strong>queries</strong> and responses during <strong>the recording stage</strong>. That information is stored (as <strong>mocking data</strong>) and will be used in all future executions of the test in different environments. During the recording, the queries are stored in order (order is relevant) so it is expected that the test will run the queries in the same order that was recorded. Consequently, if over time the tests navigation changes or queries are different, mocking data will need to be recorded again.</p>

<p>In case that during test execution, the tests need some data that was not recorded during the recording stage, that query will use real database data sources to get the answer.</p>

<h3><a id="How+is+it+used%3F" class="HashLink" href="#How+is+it+used%3F">How is it used?</a></h3>

<p>To start the <strong>recording stage </strong>click on the &quot;Tests Explorer&quot; panel located in the right-side menu and right-click over a Unit Test to select the option &quot;Record Mocking Data&quot;.</p>

<p><img src="./images/42828.png" id="42828" class="WikiImage"/></p>

<p>Warning: This will run the test case you've selected using your current data-sources / databases. Finally, once the test ends, <strong>mocking data</strong> will be stored in a file associated with the test using the name of it. Thus, after having associated mocking data on a test, every time it runs it will use that previously recorded data without using the database.  </p>

<h3><a id="Take+into+consideration%3A" class="HashLink" href="#Take+into+consideration%3A">Take into consideration<strong>:</strong></a></h3>

<ol>
	<li>Mocking is available for .Net, .Net Core, and Java environments.</li>
	<li>Current <strong>mocking data</strong> of a test is saved in a .json file in the web folder of your environment. For example, if you record data for the test &quot;myTest&quot;, you will find a &quot;myTest_mockingData.json&quot; file over &lt;directoryKB&gt;/&lt;dirEnvironment&gt;/web, containing recorded data that will be used in future executions. Therefore, to stop using mocking data for a test you need to delete the file.</li>
	<li>When the test name is changed, the mocking filename should also be changed to match it.</li>
</ol>

<h3><a id="Availability" class="HashLink" href="#Availability">Availability</a></h3>

<p>This feature is available for .NET since <a href="https://wiki.genexus.com/commwiki/wiki?35351,," target="_blank">GeneXus 16</a>, for Java since <a href="https://wiki.genexus.com/commwiki/wiki?41525,," target="_blank">GeneXus 16 upgrade 2</a> and for <b id="docs-internal-guid-6f7b4594-7fff-c2fc-b193-63aa8794234b">.</b>NetCore since <a href="https://wiki.genexus.com/commwiki/wiki?44913,," target="_blank">GeneXus 16 upgrade 8</a>.</p>

<p style="text-align: justify;"></p>

<p style="text-align: justify;"></p>

<p style="text-align: justify;"></p>

<p></p>
<br />
</div>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 04/04/22 12:36 PM</em></font></td></TR></table></font>