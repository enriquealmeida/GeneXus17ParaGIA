<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Load Event in Smart Devices - example</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?24296,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Load Event in Smart Devices - example</h1>
<!--Load Event in Smart Devices - example--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>
	In order to enable Real Estate agents to record all the real estate properties they handle, we have created the Property Transaction and applied the <a href="15974.html">Work With for Smart Devices object</a> pattern to it.</p>
<p>
	Now we have to load a variable on the grid depending on whether the <strong>property</strong> has had more than a certain number of visits, so as to catalogue it as one of the most visited. In addition, if the <strong>property</strong> was listed in the last couple of days, we want to display an image indicating that it's new.</p>
<p>
	<img src="./images/24255.jpg" id="24255" class="WikiImage"/></p>
<p>
	To do so, in the PropertyAppointment transaction that records when a prospective buyer visits a property:</p>
<p>
	<img src="./images/24256.jpg" id="24256" class="WikiImage"/></p>
<p>
	We create a procedure called IsHighlyVisited that runs through the appointments associated with the property being loaded in the grid, counts them and if the total exceeds the set number, it returns True.</p>
<p>
	<img src="./images/24257.jpg" id="24257" class="WikiImage"/></p>
<p>
	As we can see, we have defined a variable and inserted it into the form, as we would do with any other web or work panel. In addition, we enter an image called Image1 to indicate whether the property is new.</p>
<p>
	We should remember that the Load event is executed on the Server as many times as records are to be loaded in the grid (because it has attributes, so there is a base table: Property, in this case). Because of this, we have all the attributes of the extended table to be used within the Load event without a For Each command (for instance, PropertyListingDate).</p>
<p>
	<img src="./images/24258.jpg" id="24258" class="WikiImage"/></p>
<p>
	In an SD application event we're invoking a procedure (IsHighlyVisited). Do we need to have this procedure exposed as a Rest web service? The answer is no, because this procedure is not invoked from an <a href="17042.html">event in the client</a> (SD); instead, it is invoked from an event in the server (Load). We would only expose it as a Rest web service if we needed to have it consumed directly from a <strong>client event</strong> in the SD.</p>
<p>
	<strong>Note</strong> that we could have done without the procedure, writing its source code instead (that is, the For Each command that scans the PropertyAppointments table, counts the related PropertyId appointments, determines if it's greater than the number considered, for instance,15):</p>
<p>
	<img src="./images/24297.jpg" id="24297" class="WikiImage"/></p>
<p>
	Note: the For Each command is considered as nested in the implicit one. </p>
<p>
	 </p>
<p>
	<br />
	</p>
<br />   <br />    <br /> <br /><br /></td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="8188.html">Load event</a></TD><TD><a href="24234.html">Server-side Events in Native Mobile Applications</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:19 PM</em></font></td></TR></table></font>