<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Monitoring Azure Functions</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?49260,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Monitoring Azure Functions</h1>
<!--HowTo: Monitoring Azure Functions--><div class="TableWikiBody" id="tblwikibody"><p><a href='https://docs.microsoft.com/en-us/azure/azure-monitor/overview'>Azure Monitor</a> is the native monitoring solution for Microsoft Azure aimed at helping users maximize the availability and performance of the applications. Azure Monitor provides users with full observability into their cloud and on-premises environments, collecting and analyzing data from a variety of sources before storing the information to be later processed (similar to Amazon CloudWatch).</p>

<p><a href='https://docs.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview'>Application Insights</a> is a feature of Azure Monitor, used to monitor your live applications. It will automatically detect performance anomalies, and includes analytics tools to help you diagnose issues.</p>

<p><strong>Summary</strong></p>

<p><ul><li><a class="HashLink" href="#Using+Application+Insigths">Using Application Insigths</a></li><ul><li><a class="HashLink" href="#Check+the+logs+generated+by+the+GeneXus+application">Check the logs generated by the GeneXus application</a></li><li><a class="HashLink" href="#Using+Application+Insights+and+Azure+Monitor+in+API+Management+APis">Using Application Insights and Azure Monitor in API Management APis</a></li><li><a class="HashLink" href="#See+also">See also</a></li></ul></ul></ul></p>

<h2><a id="Using+Application+Insigths" class="HashLink" href="#Using+Application+Insigths">Using Application Insigths</a></h2>

<p>You can create an Application Insights instance when you <a href="https://wiki.genexus.com/commwiki/wiki?47419,," target="_blank">create your function app</a>. In this case, the instrumentation key required for the integration is already set as an application setting named APPINSIGHTS_INSTRUMENTATIONKEY. If your function app doesn't have the instrumentation key set, you need to <a href='https://docs.microsoft.com/en-us/azure/azure-functions/configure-monitoring?tabs=v2#enable-application-insights-integration'>enable Application Insights integration</a>.</p>

<p>One example of use of Application Insights is if you see an error in the monitor, you can use Application Insights to get the complete stack and detail of the error.</p>

<p><img src="./images/49261.png" id="49261" class="WikiImage"/></p>

<p>Moreover, you can get detailed information if you go through the option &quot;All available telemetry 5 minutes before and after this event&quot;</p>

<p><img src="./images/49741.png" id="49741" class="WikiImage"/></p>

<p><img src="./images/49742.png" id="49742" class="WikiImage"/></p>

<h3><a id="Check+the+logs+generated+by+the+GeneXus+application" class="HashLink" href="#Check+the+logs+generated+by+the+GeneXus+application">Check the logs generated by the GeneXus application</a></h3>

<p>With Application Insights integration enabled, telemetry data is sent to your connected Application Insights instance. This data includes logs generated by GeneXus.</p>

<p>Go through Diagnostic Settings in the Azure portal, and add a Diagnostic setting.</p>

<p><img src="./images/49744.png" id="49744" class="WikiImage"/></p>

<p>Select Categories &quot;FuntionAppLogs&quot; and Destination details &quot;Send to log analytics workspace&quot;.</p>

<p><img src="./images/49745.png" id="49745" class="WikiImage"/></p>

<p><strong>Important note:</strong> In GeneXus, you have to configure the <a href="39568.html">Log output property</a> to &quot;Console Appender&quot; value.</p>

<p>Then you can check the logs going through the Log Analytics workspace you selected, &quot;Logs&quot; option at the left hand side menu, and runnning the query over the FunctionAppLogs table.</p>

<p><img src="./images/49746.png" id="49746" class="WikiImage"/></p>

<p>For detailed information on this, see <a href='https://docs.microsoft.com/en-us/azure/azure-functions/functions-monitor-log-analytics?tabs=csharp'>Monitoring Azure Functions with Azure monitor logs</a>.</p>

<h3><a id="Using+Application+Insights+and+Azure+Monitor+in+API+Management+APis" class="HashLink" href="#Using+Application+Insights+and+Azure+Monitor+in+API+Management+APis">Using Application Insights and Azure Monitor in API Management APis</a></h3>

<p>Note that you can also active Application Insights for API Management</p>

<p><img src="./images/49752.png" id="49752" class="WikiImage"/></p>

<p> </p>

<p><img src="./images/49750.png" id="49750" class="WikiImage"/></p>

<p> </p>

<h3><a id="See+also" class="HashLink" href="#See+also">See also</a></h3>

<p><a href="https://wiki.genexus.com/commwiki/wiki?47434,," target="_blank">HowTo: Troubleshoot Azure functions</a></p>

<p></p>
</div><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="32092.html">Toc:Application Deployment tool</a></TD><TD><a href="47430.html">Azure Functions</a></TD><TD><a href="47729.html">How to: create a GeneXus procedure to be deployed as an Azure Function</a></TD></TR><TR></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 12/10/21 02:55 PM</em></font></td></TR></table></font>