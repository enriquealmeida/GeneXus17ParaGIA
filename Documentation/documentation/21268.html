<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Get all users which have a given set of roles</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?21268,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Get all users which have a given set of roles</h1>
<!--HowTo: Get all users which have a given set of roles--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>Given a set of <a href="17569.html">GAM Roles</a>, you can get all the users which have those roles, by using GetUsersOrderBy method of GAMRepository object which corresponds to the <a href="16535.html">GAM API</a>.</p>

<p>The GetUsersOrderBy method receives a parameter based on GAMUserFilter data type where you can specify the collection of roles (or just one role) which will be used to filter the GAM users returned.</p>

<p><img src="./images/45840.PNG" id="45840" class="WikiImage"/></p>

<h3><a id="Example+of+use" class="HashLink" href="#Example+of+use">Example of use</a></h3>

<p>Define a variable &amp;GAMUserFilter based on GAMUserFilter data type.</p>

<p>Add the roles to the Roles property of GAMUserFilter variable.</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;GAMUserFilter.Roles.Add(&amp;ID)//&amp;ID is GAMKeyNumLong data type, and corresponds to the Id of the Role.
&amp;GAMUserFilter.Roles.Add(&amp;ID2)
&amp;GAMUserFilter.SearchRolesInherited = TRUE // If you want to filter users who have this role inherited from another role.

For &amp;GAMUser in GAMRepository.GetUsersOrderBy(&amp;GAMUserFilter, GAMUserListOrder.UserName_Asc, &amp;Errors) 
//&amp;Erros is collection of GAMError
  &amp;UserNAme = &amp;GAMuser.Name
endfor</pre>

<p>Note that you can also filter the users by just one role using the following code:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;GAMUserFilter.RoleId = &amp;FilRol
&amp;Users= GAMRepository.GetUsersOrderBy(&amp;GAMUserFilter, GAMUserListOrder.None, &amp;Errors)  </pre>

<p>Or get the users which have no roles:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;GAMUserFilter.WithoutRoles = true 
&amp;Users= GAMRepository.GetUsersOrderBy(&amp;GAMUserFilter, GAMUserListOrder.None, &amp;Errors)  </pre>

<p>Additionally, you can combine the search filters and get</p>

<ul>
	<li>Users with a role, and users with no roles.</li>
	<li>Users with a collection of roles and users with no roles.</li>
</ul>

<p>Take a look at the GAMExampleWWUsers <a href="15935.html">GAM Web Backoffice</a> object, which shows an example of how to use this API.</p>

<h3><a id="See+also" class="HashLink" href="#See+also">See also</a></h3>

<p><a href="20595.html">Get GAM User Roles</a></p>

<p></p>

<p></p>

<p><br />
</p>

<p><br />
</p>
<br />
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="20595.html">Get GAM User Roles</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:18 PM</em></font></td></TR></table></font>