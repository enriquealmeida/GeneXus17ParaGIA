<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>GetSTSAuthorizationAccessToken method of GAMRepository Object</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?43218,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">GetSTSAuthorizationAccessToken method of GAMRepository Object</h1>
<!--GetSTSAuthorizationAccessToken method of GAMRepository Object--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>The GAMRepository object of <a href="19888.html">GeneXus Access Manager</a> Library has the <em>GetSTSAuthorizationAccessToken</em> method that is used to get a Security Token Service (STS) authorization token.<br />
For more information about this scenario, read <a href="43202.html">Security Token Service Client Authorization</a>.</p>

<p>Consider the example where a client application (AppA) requests access to another application (AppB) - for example, to execute a service of this application.</p>

<p>This method executes internally, the RequestTokenService service explained <a href="43202.html">here</a>.</p>

<h3><a id="Syntax" class="HashLink" href="#Syntax">Syntax</a></h3>

<p>&amp;GAMSTSAuthorizationToken = GAMRepository.GetSTSAuthorizationAccessToken(in: &amp;Client_id, in: &amp;scope, out: &amp;GAMErrors)</p>

<p>where</p>

<ul>
	<li>&amp;GAMSTSAuthorizationToken is GAMSTSAuthorizationToken external object data type.<br />
	<br />
	<img src="./images/43220.png" id="43220" class="WikiImage"/></li>
	<li>&amp;Client_id is the ClientID of the <a href="15910.html">GAM Application</a> which requests a Token to make a call to a resource afterwards (&quot;AppA&quot;). It's a GUID.</li>
	<li>&amp;scope is a string of the form: &lt;ApplicationName&gt;.Permission; if more than one, they should be separated by the '+' sign. ApplicationName is the application where the resource to be called is defined (&quot;AppB&quot;).<br />
	E.g: AppB.Prm1+AppB.Prm2...+AppB.PrmN.</li>
	<li>&amp;GAMErrors is a collection of GAMError.</li>
</ul>

<h3><a id="Example" class="HashLink" href="#Example">Example</a></h3>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
   &amp;GAMSTSAuthorizationToken = GAMRepository.GetSTSAuthorizationAccessToken(&amp;client_id, &amp;scope, &amp;Errors)
    If &amp;Errors.Count = 0
        &amp;access_token = &amp;GAMSTSAuthorizationToken.access_token
        &amp;GAMSTSAuthorizationToken_Expires_in = &amp;GAMSTSAuthorizationToken.expires_in.ToString()
        &amp;GAMSTSAuthorizationToken_Scope = &amp;GAMSTSAuthorizationToken.scope
        &amp;GAMSTSAuthorizationToken_token_type = &amp;GAMSTSAuthorizationToken.token_type
    Else
        msg(format(!&quot;%1 (%2)&quot;,&amp;Errors.Item(1).Message,&amp;Errors.Item(1).code))
    Endif</pre>

<p>Notes</p>

<ul>
	<li>The Scope property of &amp;GAMSTSAuthorizationToken returned is the same as the one passed in parameter. </li>
	<li>Expires_in is 0 unless you create a <a href="18521.html">Security Policy</a> in the STS server, with an <a href="18577.html">Oauth token expire (minutes)</a> value different than zero. This security policy should be assigned to the user defined for the AppA STS configuration in the STS server.<br />
	<br />
	Security Policy configuration:<br />
	<img src="./images/43224.png" id="43224" class="WikiImage"/><br />
	<br />
	User configuration:<br />
	<img src="./images/43225.png" id="43225" class="WikiImage"/></li>
</ul>

<h3><a id="Availability" class="HashLink" href="#Availability">Availability</a></h3>

<p>Since <a href="https://wiki.genexus.com/commwiki/wiki?42755,," target="_blank">GeneXus 16 upgrade 4</a></p>

<h3><a id="See+also" class="HashLink" href="#See+also">See also</a></h3>

<ul>
	<li><a href="43206.html">HowTo: Configure GAM to use Security Token Service</a></li>
</ul>

<p></p>

<p></p>

<p></p>

<p></p>
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="43221.html">GetAgentServiceHeader method of GAM object</a></TD><TD><a href="43206.html">HowTo: Configure GAM to use Security Token Service</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:18 PM</em></font></td></TR></table></font>