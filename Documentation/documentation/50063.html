<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>GAM - Database version 4.0.6</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?50063,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">GAM - Database version 4.0.6</h1>
<!--GAM - Database version 4.0.6--><div class="TableWikiBody" id="tblwikibody"><p>In opening a <a href="1836.html">Knowledge Base</a> from <a href="49616.html">GeneXus 17 Upgrade 8</a> or higher, if you use an older version of GeneXus, it will automatically import the new version of GAM (4.0.6).</p>

<p>A Build performed from the <a href="5272.html">IDE</a> will automatically execute a reorganization of the Database, and a metadata migration, immediately after that.</p>

<p>While in the Development Environment the update is performed automatically and transparently, the Database update in the Production Environment requires, the developer to execute it.</p>

<p>The steps for performing the update in the Production environment are:</p>

<ol>
	<li>Reorganize the Database. To this end, the SQL script content is distributed in the GeneXus installation in the following path: <span style="font-family: courier new;">&lt;GX_installation_path&gt;\Library\GAM\Platforms\&lt;environment&gt;\ReorganizationScript405To406.txt</span>

	<div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>: The execution of the reorganization process must be incremental. When migrating from a version prior to 4.0.5, you must execute each reorganization in order, starting by the one that follows your version.</div>
	</li>
	<li>To complete the upgrade, migrate the metadata using the <a href="18608.html">GAM - Deploy Tool</a> (GDT) through the command line.<br />
	To run this migration, write permissions are required in the directory of execution. This applies only to <a href='https://www.genexus.com/es/developers/websac?data=49792;;'>migration of the <span style="font-family: courier new;">connection.gam</span> file</a>.<br />
	It varies depending on the environment where the invocation of the GDT is located. The <span style="font-family: courier new;">connection.gam</span> file is generated in the directory that runs the GDT:<br />
	<br />
	<strong>.NET Framework:</strong> In the directory <span style="font-family: courier new;">&lt;KB&gt;\&lt;NetFramework_env&gt;\web\bin </span>the exe is distributed.<br />
	<span style="font-family: courier new;">agamdeploytool.exe -upgradegam -admin_name gamadmin -admin_pass gamadmin123</span><br />
	<br />
	<strong>JAVA:</strong> In the directory <span style="font-family: courier new;">&lt;TOMCAT_DIR&gt;\webapp\&lt;App_Name&gt;\WEB-INF\classes\&lt;path_to_package&gt; </span>the class is distributed.<br />
	<br />
	Before running the GDT, copy the connection file from <span style="font-family: courier new;">&lt;TOMCAT_DIR&gt;\webapps\&lt;APP&gt;\WEB-INF\connection.gam</span> to <span style="font-family: courier new;">&lt;TOMCAT_DIR&gt;\webapps\&lt;APP&gt;\WEB-INF\classes\&lt;Path_to_package&gt;</span> (for example, <span style="font-family: courier new;">C:\Program Files\Apache Software Foundation\Tomcat 8.5\webapps\AppJavaSQL\WEB-INF\classes\com\test</span>).<br />
	<br />
	Then, run the GDT:<br />
	<span style="font-family: courier new;">java -cp &quot;&lt;TOMCAT_DIR&gt;\webapp\&lt;App_Name&gt;\WEB-INF\classes\lib\*&quot; genexus.security.api.agamdeploytool -upgradegam -admin_name gamadmin -admin_pass gamadmin123</span><br />
	<br />
	<strong>.NET:</strong> In the directory<span style="font-family: courier new;"> &lt;KB&gt;\&lt;NET_env&gt;\web\bin </span>the library is distributed.<br />
	<span style="font-family: courier new;">dotnet agamdeploytool.dll -upgradegam -admin_name gamadmin -admin_pass gamadmin123</span><br />
	 </li>
	<li>If the GDT runs successfully, then the closing lines must be:<br />
	<span style="font-family: courier new;">Connecting to GAM database ...<br />
	Data migration from 4.0.5 to 4.0.6<br />
	&gt;&gt;&gt; Success</span><br />
	 </li>
	<li>To move the new file to production:
	<ul>
		<li>If the application is deployed in a container, you can set an environment variable. Open the <span style="font-family: courier new;">connection.gam</span> file generated by the tool, obtain the value of the &quot;<span style="font-family: courier new;">&lt;key&gt;</span>&quot; tag, and configure it as instructed in the document: <a href='https://www.genexus.com/es/developers/websac?data=49841;;'>support setting key for GAM connection data through environment variable</a>.</li>
		<li>Otherwise, copy the newly generated <span style="font-family: courier new;">connection.gam</span> file to the corresponding location according to the environment:<br />
		<br />
		<strong>.NET Framework</strong>:<br />
		The file is generated in the directory <span style="font-family: courier new;">&lt;KB&gt;\&lt;NetFramework_env&gt;\web\bin</span>. Copy it to the directory <span style="font-family: courier new;">&lt;KB&gt;\&lt;NetFramweork_env&gt;\web</span>.<br />
		Note that there is a backup of the old <span style="font-family: courier new;">connection.gam</span> file called <span style="font-family: courier new;">connection-bkp.gam</span>.<br />
		<br />
		<strong>JAVA</strong>:<br />
		Copy the connection file generated in <span style="font-family: courier new;">&lt;TOMCAT_DIR&gt;\webapps\&lt;APP&gt;\WEB-INF\classes\&lt;Path_to_package&gt;\connection.gam</span> to <span style="font-family: courier new;">&lt;TOMCAT_DIR&gt;\webapps\&lt;APP&gt;\WEB-INF</span>.<br />
		<br />
		<strong>.NET</strong>:<br />
		Similar to .NET Framework but in the .NET environment, <span style="font-family: courier new;">&lt;NET_env&gt;</span>.</li>
	</ul>
	</li>
</ol>

<p> </p>

<h3><a id="Compatibility" class="HashLink" href="#Compatibility">Compatibility</a></h3>

<p>The GAM Database is fully backward compatible. This means that you may continue using KBs with a GeneXus version prior to v17u8 pointing at a new Database.</p>

<p></p>

<p></p>
</div><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="49616.html">GeneXus 17 Upgrade 8</a></TD><TD><a href="24746.html">Toc:GeneXus Access Manager (GAM)</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 06/03/22 02:11 PM</em></font></td></TR></table></font>