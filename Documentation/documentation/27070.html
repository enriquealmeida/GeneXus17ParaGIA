<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Using Beacons</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?27070,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Using Beacons</h1>
<!--HowTo: Using Beacons--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><h3><a id="How+to+start+monitoring+some+specific+beacon+region%3F" class="HashLink" href="#How+to+start+monitoring+some+specific+beacon+region%3F">How to start  monitoring some specific beacon region?</a></h3>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.AddBeaconProximityAlert(proximityAlert)</pre>

<p>Where<br />
<span style="line-height: 1.6em;">proximityAlert is a <a href="27040.html">BeaconProximityAlert SDT</a>. The <a href="27054.html">AddBeaconProximityAlert method</a> receives this SDT and add the alert or replace if a region with the same identifier is found.</span></p>

<p>This can also be done with a collection of <a href="27040.html">BeaconProximityAlert SDT</a> and the <a href="27055.html">AddBeaconProximityAlerts method</a>.</p>

<hr />
<h3><a id="I%27m+inside+a+Beacon+region+now+what%3F" class="HashLink" href="#I%27m+inside+a+Beacon+region+now+what%3F">I'm inside a Beacon region now what?</a></h3>

<p>After you know you are in a Beacon region you can give your users further information (navigation, etc) by determinating the distance between a device and a Beacon.<br />
For example when people enter to a conference you can give a Welcome information by using the previous API of proximity of a Beacon region, but after this welcome information you know people is in, so you can guide them to navigate the conference by start ranging all the beacons that are inside the conference in different rooms.</p>

<p>In order to start ranging you need to call </p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.StartRangingBeaconRegion(BeaconRegion)</pre>

<p>Where<br />
<span style="line-height: 1.6em;">BeaconRegion is a <a href="https://wiki.genexus.com/commwiki/wiki?27041,," target="_blank">BeaconRegion SDT</a> and the <a href="27059.html">StartRangingBeaconRegion method</a></span><span style="line-height: 1.6em;"> starts the delivery of notifications for beacons in the specified region.</span></p>

<hr />
<h3><a id="How+to+know+when+entering+or+exiting+to+a+BeaconRegion%3F" class="HashLink" href="#How+to+know+when+entering+or+exiting+to+a+BeaconRegion%3F">How to know when entering or exiting to a BeaconRegion?</a></h3>

<p>There are some events on the <a href="27025.html">Beacons external object</a> that you can listen to do this.</p>

<p><a href="27067.html">EnterBeaconRegion</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event Beacons.EnterBeaconRegion(BeaconRegion)</pre>

<p>Invoked when the user enters a monitered beacon region</p>

<p><a href="27068.html">ExitBeaconRegion</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event Beacons.ExitBeaconRegion(BeaconRegion)</pre>

<p>Invoked when the user exits a monitored beacon region</p>

<p><a href="27069.html">ChangeBeaconsInRange</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event Beacons.ChangeBeaconsInRange(BeaconRegion, Beacons)</pre>

<p>Invoked when a new set of beacons' states are available in the specified region.</p>

<p>The first two events are fired for proximityAlerts being added previously, the third one, is called periodicaly with beacons states updates for regions started ranging previously.</p>

<hr />
<h3><a id="Let+your+device+be+a+Beacon" class="HashLink" href="#Let+your+device+be+a+Beacon">Let your device be a Beacon</a></h3>

<p>As explained in <a href="https://wiki.genexus.com/commwiki/wiki?27071,," target="_blank">What is a Beacon?</a> any device with at least Bluetooth 4.0 is potencially a Beacon.</p>

<p>GeneXus provides a method in Beacons to allow your device (if allowed) became ranging as a Beacon.</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.StartAsBeacon(BeaconInfo)</pre>

<p>BeaconInfo is based on the <a href="27039.html">BeaconInfo Data Type</a> and contains the beacon information to advertise.</p>

<p>In order to stop advertising the current device as a beacon use</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.StopAsBeacon()</pre>

<hr />
<h3><a id="Additional+Functions" class="HashLink" href="#Additional+Functions">Additional Functions</a></h3>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.GetBeaconProximityAlerts()</pre>

<p>Retrieve a collection for the beacon regions that are currently being monitored. <a href="27056.html">See more</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.RemoveBeaconProximityAlert(proximityAlertRegionId)</pre>

<p>Remove the region being monitored by identifier. <a href="27057.html">See more</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.<span style="font-family: sans-serif , Arial , Verdana , &quot;Trebuchet MS&quot;;line-height: 1.6em;">ClearBeaconProximityAlerts()</span></pre>

<p>Removes all the beacon regions being monitored. <a href="27058.html">See more</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.<span style="font-family: sans-serif , Arial , Verdana , &quot;Trebuchet MS&quot;;line-height: 1.6em;">GetBeaconRegionState(regionId)
</span></pre>

<p>Retrieve the cached state of the specified beacon region. <a href="27065.html">See more</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.<span style="font-family: sans-serif , Arial , Verdana , &quot;Trebuchet MS&quot;;line-height: 1.6em;">StopRagingBeaconRegion(regionId)</span></pre>

<p>Stops the delivery of notifications for the specified beacon region. <a href="27061.html">See more</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.<span style="font-family: sans-serif , Arial , Verdana , &quot;Trebuchet MS&quot;;line-height: 1.6em;">GetRangedBeaconRegions()
</span></pre>

<p>Retrieve a collection for the beacon regions thar are currently providing ranging. <a href="27060.html">See more</a></p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Beacons.<span style="font-family: sans-serif , Arial , Verdana , &quot;Trebuchet MS&quot;;line-height: 1.6em;">GetBeaconsInRange(regionId)
</span></pre>

<p>Retrieve a collection for the beacons (sorted by proximity) currently in range for the given region. Empty regionId means all regions. <a href="27062.html">See more</a></p>

<hr />
<h3><a id="See+also" class="HashLink" href="#See+also">See also</a></h3>

<p><a href="27025.html">Beacons external object</a></p>

<p><br />
</p>
<br /><br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="27025.html">Beacons external object</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:19 PM</em></font></td></TR></table></font>