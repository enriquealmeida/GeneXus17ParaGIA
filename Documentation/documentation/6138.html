<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>External Object: Stored Procedure</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?6138,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">External Object: Stored Procedure</h1>
<!--External Object: Stored Procedure--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>A Stored Procedure (SP) of <a href="5669.html">External object</a> (EO) type stores all the information (name, parameters, etc.) about how to access a set of stored procedures located in a DBMS.</p>

<p>In this type of EO several methods with their corresponding parameters can be defined. Each method maps to a Stored Procedure defined in the DBMS.</p>

<p><img src="./images/6139.png" id="6139" class="WikiImage"/></p>

<h3><a id="Properties" class="HashLink" href="#Properties">Properties</a></h3>

<h4><a id="External+Object" class="HashLink" href="#External+Object">External Object</a></h4>

<p><img src="./images/6140.PNG" id="6140" class="WikiImage"/></p>

<table style="border-right-style: none;border-bottom-style: none;border-left-style: none;border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;"><strong>Name</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Name of the stored procedure object.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Description</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Description of the stored procedure object.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Type</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Type of EO: Stored Procedure.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Data Store</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Data Store that points to the DBMS where the stored procedures are defined.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Folder</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">The folder where the EO is located.</td>
		</tr>
	</tbody>
</table>

<h3><a id="Methods" class="HashLink" href="#Methods">Methods</a></h3>

<p><img src="./images/6141.png" id="6141" class="WikiImage"/></p>

<table style="border-right-style: none;border-bottom-style: none;border-left-style: none;border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;"><strong>Internal Name</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Internal name to be given to the method in the KB.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Description</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Description of the method.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Type</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Type of data returned by the method, if applicable.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>External Name</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Name of the SP as defined in the DBMS.</td>
		</tr>
	</tbody>
</table>

<h3><a id="Parameters" class="HashLink" href="#Parameters">Parameters</a></h3>

<p><img src="./images/6142.png" id="6142" class="WikiImage"/></p>

<table style="border-right-style: none;border-bottom-style: none;border-left-style: none;border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;"><strong>Access Type</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">It indicates whether the parameter is: INOUT, IN only or OUT only.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Internal Name</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Internal name to be given to the parameter.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Description</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">Description of the parameter.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>Type</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">The data type of the parameter.</td>
		</tr>
		<tr>
			<td style="border-top-width: 1.0px;border-right-width: 1.0px;border-bottom-width: 1.0px;border-left-width: 1.0px;border-right-style: dotted;border-bottom-style: dotted;border-left-style: dotted;vertical-align: top;padding-top: 4.0px;padding-right: 4.0px;padding-bottom: 4.0px;padding-left: 4.0px;"><strong>External Name</strong></td>
			<td style="border-width: 1.0px;border-style: dotted;vertical-align: top;padding: 4.0px;">External name of the parameter as defined in the SP.</td>
		</tr>
	</tbody>
</table>

<h3><a id="Usage" class="HashLink" href="#Usage">Usage</a></h3>

<p>Suppose we’ve created an SP of EO type called MySQL_SP and we’ve defined a MySQL_SP variable called &amp;mysps.</p>

<p>Then, in our code we can do the following:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event 'Count'
    &amp;mysps.get_count_universidad(&amp;count)
    msg(&amp;count.ToString())
EndEvent</pre>

<p>count_universidad is the internal name given to the stored procedure sp_count_universidad; in the parameter, it loads the entry number of the University table of my DB.</p>

<p><strong>Notes</strong></p>

<ul>
	<li>In order to generate all the necessary code to call the stored procedure, GeneXus will map the method's Internal Name with its External Name, and the parameters' Internal Name with their corresponding External Name, taking into account the parameter type and their Access Types. Therefor external names must be correctly defined; otherwise, errors such as &quot;PLS-00306: wrong number or types of arguments in call to ' ...' &quot; may appear.</li>
	<li>If the Stored Procedure modifies the database, like an insert, update or delete, you have to explicitly use a commit command. For example:</li>
</ul>

<pre class="Code" style="line-height: 20.8px;margin-left: 40.0px;">
Event 'Stored'
    &amp;mysps.insertData()
    commit
EndEvent</pre>

<h3><a id="Deployment" class="HashLink" href="#Deployment">Deployment</a></h3>

<p>When the application is deployed, take into account that if the SP(s) are running in an iSeries DB2, the gx400dcl.exe (.net) or crtjdbccalls.class (java) files must be executed to declare them. See <a href='http://www2.gxtechnical.com/portal/hgxppredirect.aspx?15,26,0,,,26620'>SAC #26620</a> for more details.</p>

<h3><a id="Compatibility" class="HashLink" href="#Compatibility">Compatibility</a></h3>

<p>It is possible to call Stored Procedures as it was done in previous versions; that is:<br />
<br />
call('sp_count_universidad',&amp;count)<br />
<br />
In addition, declaring the list of Stored Procedures used in the property List of external stored procedures at the Data Store level is also possible.<br />
This calling method is deprecated, and a warning like this will appear: spc0145, 'Calling stored procedure ''%1'' in data store ''%2'' via the call keyword is deprecated.'</p>

<h3><a id="Restrictions" class="HashLink" href="#Restrictions">Restrictions</a></h3>

<p>There are some complex data types that are not supported. For example:</p>

<ul>
	<li><a href="6905.html">Basic data types</a> with the collection property set to &quot;YES&quot;.</li>
	<li><a href="6560.html">Extended data types</a> and <a href="10021.html">Structured Data Types</a>.</li>
	<li>Vector and Matrix.</li>
</ul>

<p>When the Stored Procedure returns a Recordset data type, GeneXus doesn't provide a compatible data type to map it.</p>

<p>Null value as an argument for a stored procedure method is not supported.</p>

<p>Stored Functions (Oracle) are not supported; use Stored Procedures with InOut or Out parameters.</p>

<p></p>
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="5669.html">Category:External object</a></TD><TD><a href="6433.html">Specification Codes from spc0100 to spc0149</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:17 PM</em></font></td></TR></table></font>