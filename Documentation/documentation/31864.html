<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>OpenAPI import tool</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?31864,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">OpenAPI import tool</h1>
<!--OpenAPI import tool--><div class="TableWikiBody" id="tblwikibody"><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>: From <a href="48684.html">GeneXus 17 Upgrade 6</a> onwards, GeneXus supports both version 2 and version 3 of the OpenAPI specification. The OpenAPI importer automatically detects whether the spec refers to version 2 or 3.</div>

<p>The main purpose of the OpenAPI import tool is to inspect the <a href='http://swagger.io/specification/'>Open </a><a href='http://swagger.io/specification/'>Api</a><a href='http://swagger.io/specification/'> RESTful API Documentation</a> (formerly known as Swagger RESTful API Documentation Specification) of any <a href='https://en.wikipedia.org/wiki/Representational_state_transfer'>RESTful web service</a> that may or may not be generated by GeneXus.</p>

<p>With the information obtained using the OpenAPI Import tool, implementing a consumer is much more plain sailing because it consolidates in the <a href="2428.html">KB</a> some objects (<a href="6293.html">Procedures</a>, <a href="https://wiki.genexus.com/commwiki/wiki?1878,," target="_blank">SDTs</a>, and <a href="7239.html">Domains</a>) that are necessary to consume the RESTful service. After that, it's easy to follow the tutorial <a href="30704.html">HowTo: Inserting data using a BC exposed as Rest service</a>.</p>

<p>The advantage of using the OpenAPI import tool is to avoid the effort of <a href="https://wiki.genexus.com/commwiki/wiki?30785,," target="_blank">Getting information from the Swagger UI docs</a>, such as operations, HTTP verb needed to consume the web service, input and output parameters (the HTTP body structure for invoking the service and responses).</p>

<p>Note that the OpenAPI documentation of <a href="28213.html">Rest web services in GeneXus</a> is obtained through the <a href="31859.html">Generate OpenAPI interface property</a>.</p>

<p>The tool is accessible through the <em>Tools &gt; Application Integration &gt; OpenAPI import</em> menu option.</p>

<p><img src="./images/37611.png" id="37611" class="WikiImage"/></p>

<h3><a id="OpenAPI+import+tool+dialog" class="HashLink" href="#OpenAPI+import+tool+dialog">OpenAPI import tool dialog</a></h3>

<p><strong>File Path / URL: </strong> Enter the URL or file path of the RESTful service documentation in Swagger format.</p>

<p>Swagger Format:</p>

<p>The files describing the RESTful API in accordance with the Swagger specification are represented as JSON objects and conform to JSON standards. YAML, being a superset of JSON, can be used as well to represent a Swagger specification file.</p>

<p>For <a href="28213.html">Rest web services in GeneXus</a> you can obtain the Swagger file if you activate the <a href="31859.html">Generate OpenAPI interface property</a>.</p>

<p><strong>Module / Folder:</strong> Where the automatically generated objects will be located.</p>

<p><img src="./images/50178.PNG" id="50178" class="WikiImage"/></p>

<p>Note: It's strongly recommended to choose a module where the objects automatically created from the YAML file will be located in order to maintain KB modularization and avoid undesired object modifications. <br />
For example, if a structure named &quot;Customers&quot; is included in the YAML file, a &quot;Customers&quot; SDT will be created when this YAML is imported. If an SDT named &quot;Customers&quot; already exists in the KB, it will be modified (replaced by the structure included in the YAML file). If the imported objects are created in a module (e.g. CRM), the SDT will be created as &quot;CRM.Customers&quot; and will not replace the existing one.</p>

<h3><a id="Results+of+using+the+OpenAPI+import+tool" class="HashLink" href="#Results+of+using+the+OpenAPI+import+tool">Results of using the OpenAPI import tool</a></h3>

<p>The tool consolidates in the KB some objects (procedures, SDTs, domains) necessary to consume the RESTful service.</p>

<p>Below is a summary of the objects consolidated in the KB:</p>

<div style="overflow-x:auto"><table border="1" cellpadding="1" cellspacing="1" style="width: 500.0px;">
	<tbody>
		<tr>
			<td><strong>Object</strong></td>
			<td><strong>Folder / Module</strong></td>
			<td><strong>Purpose</strong></td>
		</tr>
		<tr>
			<td>ApiResponse SDT</td>
			<td>OpenAPICommon</td>
			<td>Defines the HTTP response structure</td>
		</tr>
		<tr>
			<td>CallApi procedure</td>
			<td>OpenAPICommonP</td>
			<td>Parameterized procedure that, given the service URL and the call parameters, executes the HTTP verb and returns the HTTP result.</td>
		</tr>
		<tr>
			<td>VarCharToJsonFormat, <br />
			DateTimeToJsonFormat, <br />
			DateToJsonFormat, <br />
			NumericToJsonFormat</td>
			<td>OpenAPICommon</td>
			<td>Auxiliary procedures</td>
		</tr>
		<tr>
			<td>AuthREADME (*)</td>
			<td>OpenAPICommon</td>
			<td>Procedure showing information obtained from imported specifications about OAuth 2.0 and/or OpenID Connect flows.</td>
		</tr>
		<tr>
			<td>ProcessServer (*)</td>
			<td>OpenAPICommon</td>
			<td>As server templating is allowed in OpenAPI 3.0, this procedure addresses the replacement of the values given by the user when calling a procedure under the &quot;API&quot; folder (through the &amp;ServerUrlTemplatingVar parameter) in the baseURL.</td>
		</tr>
		<tr>
			<td>ApiBaseUrl</td>
			<td>&lt;MyModule&gt;\Client</td>
			<td>
			<p>Returns the BaseURL that will be used for calling the RESTful services. It should be changed in most cases.</p>

			<p>When OpenAPI 3.0 specification is imported, this procedure shows all the servers present in the specification, leaving only one uncommented (the first one). </p>
			</td>
		</tr>
		<tr>
			<td>Client procedure of the RESTful service</td>
			<td>&lt;MyModule&gt;\Api</td>
			<td>
			<p>A procedure to invoke the service. The name of this procedure is selected upon the <em>operationId*</em> in the documentation file (Swagger) of the service.</p>

			<p><em>*operationId</em>: Unique string used to identify the operation. The ID is unique among all operations described in the API. </p>
			</td>
		</tr>
		<tr>
			<td><a href="https://wiki.genexus.com/commwiki/wiki?1878,," target="_blank">SDTs</a> needed for defining the input and output parameters of the service.</td>
			<td>&lt;MyModule&gt;\Model</td>
			<td>Input and output parameters of the service.</td>
		</tr>
	</tbody>
</table></div>

<p>(*) Generated when importing version 3 only.</p>

<h2><a id="Example" class="HashLink" href="#Example">Example</a></h2>

<p>This example shows the import of <a href='https://petstore3.swagger.io/api/v3/openapi.json'>PetStore specification</a>.</p>

<div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>: This is an OpenAPI 3.0 specification import example. To see an example in version 2, refer to the previous version.</div>

<h3><a id="KB+Explorer+structure+example" class="HashLink" href="#KB+Explorer+structure+example">KB Explorer structure example</a></h3>

<p>The following is the <a href="3210.html">KB Explorer</a> structure after importing the YAML file associated with the procedure of the example.</p>

<p><img src="./images/49285.PNG" id="49285" class="WikiImage"/></p>

<p>After inspecting the Swagger document of <em>PetStore</em> using the OpenAPI Import tool in the consumer KB, it automatically generates a procedure called <em>CreateUsersWithListInput </em>under the PetStoreModule\Api path. &quot;PetStoreModule&quot; is a module in this example, which has been set to import the objects generated by the tool.</p>

<p>Below is the part of the Swagger document corresponding to the service being inspected. Note the operationId value that determines the name of the procedure to consume the RESTful service.</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
<samp>/user/createWithList:
    post:
      tags:
        - user
      summary: Creates list of users with given input array
      description: Creates list of users with given input array
      operationId: createUsersWithListInput
      requestBody:
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/components/schemas/User'
      responses:
        '200':
          description: Successful operation
          content:
            application/xml:
              schema:
                $ref: '#/components/schemas/User'
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        default:
          description: successful operation</samp></pre>

<p>The User is an SDT automatically generated by the tool for both RequestBody and Response (in this case, it matches the type, but this is not always the case).</p>

<p>The parameter information is also obtained from the Swagger file.</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
<samp>components:
  schemas:
    ...
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 10
        username:
          type: string
          example: theUser
        firstName:
          type: string
          example: John
        lastName:
          type: string
          example: James
        email:
          type: string
          example: john@email.com
        password:
          type: string
          example: '12345'
        phone:
          type: string
          example: '12345'
        userStatus:
          type: integer
          description: User Status
          format: int32
          example: 1
      xml:
        name: user</samp>

</pre>

<p>The following <a href="6862.html">Parm rule</a> is generated in the <em>CreateUsersWithListInput</em> consumer object that is a stub for calling the service.</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
parm(in:&amp;ServerUrlTemplatingVar,  in:&amp;body, out:&amp;UserOUT, out:&amp;HttpMessage, out:&amp;IsSuccess);
</pre>

<p>The <em>&amp;ServerUrlTemplatingVar</em> parameter is present in all consumer procedures. This is a variable of &quot;Properties&quot; type, which is responsible for assigning values in the template variables at the baseURL. As an example, suppose you have the following baseURL:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
{scheme}://{host}:8082/APIObjectPlayground.NETCoreEnvironment/rest</pre>

<p><em>&amp;ServerUrlTemplatingVar</em> can be set as follows:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;ServerUrlTemplatingVar.Set(&quot;scheme&quot;,&quot;https&quot;)

&amp;ServerUrlTemplatingVar.Set(&quot;host&quot;,&quot;example&quot;)</pre>

<p>As a result, the baseURL remains as:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
https://example:8082/APIObjectPlayground.NETCoreEnvironment/rest
</pre>

<p>To simplify the assignment of values for this templating, domains may be generated containing enums with possible value ranges to assign. These domains are named, for example, &quot;TemplateServer_{key_name}.&quot; Continuing with the previous case, if a domain had been generated for the &quot;scheme&quot; key, its name would have been &quot;TemplateServer_scheme.&quot; This is done if and only if the specification has indicated the enum.</p>

<p>So, in order to call the service, you need to call the <em>CreateUsersWithListInput</em> consumer object by passing it the corresponding parameters and then processing the results.</p>

<h3><a id="Sample+consumer+code" class="HashLink" href="#Sample+consumer+code">Sample consumer code</a></h3>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
PetStoreModule<samp>.</samp><em>CreateUsersWithListInput</em><samp>(</samp>&amp;ServerUrlTemplatingVar<samp>,&amp;</samp>User<samp>,&amp;</samp>UserOUT<samp>,&amp;</samp>HttpMessage<samp>,&amp;</samp>IsSuccess<samp>)
if &amp;IsSuccess
    msg(&quot;Success!!&quot;)
else
    msg(&quot;There was an error! &quot;)    
endif
msg(&quot;API return: &quot; + &amp;UserOUT.ToJson())
msg(&quot;HTTP Message &quot; + &amp;HttpMessage.Id + &quot; &quot; + &amp;HttpMessage.Description)</samp></pre>

<p>This is rather easier than defining the input and output parameters manually and executing the HTTP verbs using HTTP client data type. This task is done by the OpenAPI Import tool, which generates the code for you.</p>

<p><br />
</p>
<br />
<br />
</div><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="28216.html">Data Providers as Rest web services in GeneXus</a></TD><TD><a href="30776.html">Documenting RestFul services</a></TD></TR><TR><TD><a href="48684.html">GeneXus 17 Upgrade 6</a></TD><TD><a href="40315.html">GeneXusAI Overview</a></TD></TR><TR><TD><a href="15314.html">HowTo: Consuming a Procedure exposed as a Rest service</a></TD><TD><a href="30737.html">HowTo: Consuming a Rest Data Provider</a></TD><TD><a href="30702.html">HowTo: Deleting data from a BC exposed as a Rest service</a></TD><TD><a href="30701.html">HowTo: Updating data using a BC exposed as a Rest service</a></TD></TR><TR><TD><a href="49248.html">OpenAPI import tool (GeneXus 17 upgrade 5 or prior)</a></TD><TD><a href="50177.html">OpenAPI import tool (GeneXus 17 Upgrade 8 or prior)</a></TD><TD><a href="21467.html">Procedures as Rest web services in GeneXus</a></TD></TR><TR><TD><a href="15316.html">Procedures as REST: Sending blob data as input to the procedure</a></TD><TD><a href="28213.html">Toc:Rest web services in GeneXus</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 03/02/22 03:18 PM</em></font></td></TR></table></font>