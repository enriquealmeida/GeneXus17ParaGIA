<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Alipay API</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?37152,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Alipay API</h1>
<!--Alipay API--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>Alipay API for GeneXus consists of an External Object and a group of Procedures, SDTs and Domains which can be used to interact with the Alipay <a href="33545.html">Extension Library</a> to integrate payment capabilities when using Alipay in the generated applications; for Android and iOS.</p>

<h2><a id="Versions" class="HashLink" href="#Versions">Versions</a></h2>

<p>Version 1.0 (Dec 11, 2017) - <a href="https://wiki.genexus.com/commwiki/wiki?37153,," target="_blank">Download</a>.</p>

<h2><a id="Structure" class="HashLink" href="#Structure">Structure</a></h2>

<p><img src="./images/37170.png" id="37170" class="WikiImage"/></p>

<h2><a id="External+Object" class="HashLink" href="#External+Object">External Object</a></h2>

<h3><a id="AlipayProvider" class="HashLink" href="#AlipayProvider"><strong>AlipayProvider</strong></a></h3>

<p><br />
<em>Method</em></p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Name</strong></td>
			<td>Pay</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Description     </strong></td>
			<td>Used to perform the payment transaction with Alipay</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Parameters  </strong></td>
			<td><i>PaymentInformation</i>: SDT(PaymentInformation)</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Returns</strong></td>
			<td>None</td>
		</tr>
	</tbody>
</table>

<p><br />
<em>Properties</em></p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Name</strong></td>
			<td style="background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td>ErrorCode</td>
			<td>ErrorCode with the result of Pay method</td>
		</tr>
		<tr>
			<td>ErrorDescription<em>     </em></td>
			<td>ErrorDescription with the result of Pay method</td>
		</tr>
	</tbody>
</table>

<p><br />
<em>Event</em> </p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Name</strong></td>
			<td>OnPaymentFinished</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Description</strong></td>
			<td>Triggered when the payment transaction in Alipay is completed</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Parameters     </strong></td>
			<td><i>PaymentResult</i>: SDT(PaymentResult)</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Returns</strong></td>
			<td>None</td>
		</tr>
	</tbody>
</table>

<p> </p>

<h2><a id="Domains" class="HashLink" href="#Domains">Domains</a></h2>

<h3><a id="Environment+%28CommonPay%29" class="HashLink" href="#Environment+%28CommonPay%29"><strong>Environment (CommonPay)</strong></a></h3>

<p>The environment where the payment transaction will be executed.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Value</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td><em>Production   </em></td>
			<td>Production environment, transactions are real.</td>
		</tr>
		<tr>
			<td><em>Sandbox  </em></td>
			<td>Test environment. Only available for Android applications</td>
		</tr>
	</tbody>
</table>

<h3><a id="TradeStatus+%28Alipay%29" class="HashLink" href="#TradeStatus+%28Alipay%29"><strong>TradeStatus (Alipay)</strong></a></h3>

<p>Transaction status received in the payment notification service.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Value</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td><em>Closed</em></td>
			<td>TRADE_CLOSED</td>
		</tr>
		<tr>
			<td><em>Finished  </em></td>
			<td>TRADE_FINISHED</td>
		</tr>
		<tr>
			<td><em>Success</em></td>
			<td>TRADE_SUCCESS</td>
		</tr>
		<tr>
			<td><em>WaitBuyerPaid   </em></td>
			<td>WAIT_BUYER_PAID</td>
		</tr>
	</tbody>
</table>

<h3><a id="FundChannel+%28Alipay%29" class="HashLink" href="#FundChannel+%28Alipay%29"><strong>FundChannel (Alipay)</strong></a></h3>

<p>Fund channel used in the transaction, received in the payment notification service.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Value</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td><em>AlipayAccount</em></td>
			<td>ALIPAYACCOUNT</td>
		</tr>
		<tr>
			<td><em>BusinessCard  </em></td>
			<td>MCARD</td>
		</tr>
		<tr>
			<td><em>Coupon</em></td>
			<td>COUPON</td>
		</tr>
		<tr>
			<td><em>Discount</em></td>
			<td>DISCOUNT</td>
		</tr>
		<tr>
			<td><em>FinanceAccount</em></td>
			<td>FINANCEACCOUNT</td>
		</tr>
		<tr>
			<td><em>MerchantCoupon</em></td>
			<td>MCOUPON</td>
		</tr>
		<tr>
			<td><em>MerchantDiscount   </em></td>
			<td>MDISCOUNT</td>
		</tr>
		<tr>
			<td><em>PCredit</em></td>
			<td>PCREDIT</td>
		</tr>
		<tr>
			<td><em>PrepaidCard</em></td>
			<td>PCARD</td>
		</tr>
		<tr>
			<td><em>Point</em></td>
			<td>POINT</td>
		</tr>
	</tbody>
</table>

<h3><a id="VoucherType+%28Alipay%29" class="HashLink" href="#VoucherType+%28Alipay%29"><strong>VoucherType (Alipay)</strong></a></h3>

<p>Voucher type used in the transaction received in the payment notification service.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Value</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td><em>Discount   </em></td>
			<td>ALIPAY_DISCOUNT_VOUCHER</td>
		</tr>
		<tr>
			<td><em>Fix  </em></td>
			<td>ALIPAY_FIX_VOUCHER</td>
		</tr>
		<tr>
			<td><em>Item</em></td>
			<td>ALIPAY_ITEM_VOUCHER</td>
		</tr>
	</tbody>
</table>

<p> </p>

<h2><a id="Structured+data+types" class="HashLink" href="#Structured+data+types">Structured data types</a></h2>

<h3><a id="Configuration+%28CommonPay%29" class="HashLink" href="#Configuration+%28CommonPay%29"><strong>Configuration (CommonPay)</strong></a></h3>

<p>Used to set all the configuration needed to perform the payment transactions.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td colspan="3" style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Field</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Domain</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td colspan="3">AppId</td>
			<td>VarChar(40)</td>
			<td>Application ID obtained when the application was <a href="https://wiki.genexus.com/commwiki/wiki?37154,," target="_blank">registered</a> in the Alipay developer's site.</td>
		</tr>
		<tr>
			<td colspan="3">Environment</td>
			<td>Environment</td>
			<td>Environment where the payment transaction will be executed</td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">CertificateFilename</td>
			<td style="vertical-align: top;">VarChar(200)   </td>
			<td>Name of the PFX file used to sign the payment information. Check <a href="https://wiki.genexus.com/commwiki/wiki?37155,," target="_blank">this document for more detail</a>.</td>
		</tr>
		<tr>
			<td colspan="3">CertificatePassword   </td>
			<td>VarChar(40)</td>
			<td>Password of the PFX file used to sign the payment information.</td>
		</tr>
		<tr>
			<td colspan="3">CallbackURL</td>
			<td>URL</td>
			<td>URL of the payment notification service.</td>
		</tr>
		<tr>
			<td colspan="3">Timeout</td>
			<td>Numeric(4.0)</td>
			<td>Timeout in minutes for the payment transaction</td>
		</tr>
		<tr>
			<td colspan="3">MerchantId</td>
			<td>VarChar(40)</td>
			<td><em>Not used for Alipay</em></td>
		</tr>
		<tr>
			<td colspan="3">MerchantKey</td>
			<td>VarChar(80)</td>
			<td><em>Not used for Alipay</em></td>
		</tr>
		<tr>
			<td colspan="3">AdditionalConfig</td>
			<td><em>&lt;Collection&gt;</em></td>
			<td>Additional information for the application configuration</td>
		</tr>
		<tr>
			<td> </td>
			<td colspan="2">Name</td>
			<td>VarChar(40)</td>
			<td>Name of the additional information</td>
		</tr>
		<tr>
			<td> </td>
			<td colspan="2">Value</td>
			<td>VarChar(200)</td>
			<td>Value of the additional information</td>
		</tr>
	</tbody>
</table>

<h3><a id="PaymentResult+%28CommonPay%29" class="HashLink" href="#PaymentResult+%28CommonPay%29"><strong>PaymentResult (CommonPay)</strong></a></h3>

<p>Information sent to the <em>OnPaymentFinished</em> event of the AlipayProvider ExternalObject</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td colspan="3" style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Field</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Domain</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td colspan="3">ErrorCode</td>
			<td>Numeric(4.0)</td>
			<td>Error code for the payment transaction result</td>
		</tr>
		<tr>
			<td colspan="3">ErrorDescription   </td>
			<td>VarChar(200)</td>
			<td>Error description for the payment transaction result</td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">OrderNumber</td>
			<td style="vertical-align: top;">VarChar(40)</td>
			<td>Order number of the payment transaction finished. Can be used for payment processing in the application</td>
		</tr>
		<tr>
			<td colspan="3">AdditionalInfo</td>
			<td>LongVarChar(2M)   </td>
			<td>Additional information returned from the payment transaction</td>
		</tr>
	</tbody>
</table>

<h3><a id="PaymentApplicationData+%28Alipay%29" class="HashLink" href="#PaymentApplicationData+%28Alipay%29"><strong>PaymentApplicationData (Alipay)</strong></a></h3>

<p>Used to set the payment data by the user (product descriptions, amount) and input of the <em>GetPaymentInformation</em> procedure.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td colspan="3" style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Field</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Domain</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td colspan="3">ProductCode</td>
			<td>Character(20)</td>
			<td>Description of the product or products involved in the payment</td>
		</tr>
		<tr>
			<td colspan="3">TotalAmount</td>
			<td>Amount</td>
			<td>Amount of the payment transaction</td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">Subject</td>
			<td style="vertical-align: top;">Character(256)   </td>
			<td>Subject to describe the transaction</td>
		</tr>
		<tr>
			<td colspan="3">Body</td>
			<td>Character(400)</td>
			<td>Details of the payment transaction</td>
		</tr>
		<tr>
			<td colspan="3">TimeoutExpress   </td>
			<td>Character(20)</td>
			<td><em>Not set by the user.</em> Timeout for the payment transaction</td>
		</tr>
		<tr>
			<td colspan="3">NotifyURL</td>
			<td>URL</td>
			<td><em>Not set by the user.</em> URL of the notification service</td>
		</tr>
		<tr>
			<td colspan="3">OrderNumber</td>
			<td>Character(64)</td>
			<td><em>Not set by the user.</em> Order number for the payment transaction</td>
		</tr>
	</tbody>
</table>

<h3><a id="PaymentInfoParameters+%28Alipay%29" class="HashLink" href="#PaymentInfoParameters+%28Alipay%29"><strong>PaymentInfoParameters (Alipay)</strong></a></h3>

<p>The structure used by the <em>GetPaymentInformation</em> procedure. It is managed automatically by the API, and there is no need for the developer to handle it while coding the integration.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td colspan="3" style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Field</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Domain</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">AppId</td>
			<td style="vertical-align: top;">Character(20)</td>
			<td>Application ID obtained when the application was <a href="https://wiki.genexus.com/commwiki/wiki?37154,," target="_blank">registered</a> in the Alipay developer's site.</td>
		</tr>
		<tr>
			<td colspan="3">PaymentData</td>
			<td>PaymentApplicationData   </td>
			<td>Payment data provided by the user</td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">Charset</td>
			<td style="vertical-align: top;">Character(20)</td>
			<td><em>Fixed value : utf-8</em></td>
		</tr>
		<tr>
			<td colspan="3">Method</td>
			<td>URL</td>
			<td><em>Fixed value : alipay.trade.app.pay</em></td>
		</tr>
		<tr>
			<td colspan="3">SignType</td>
			<td>SignType</td>
			<td><em>Fixed value : RSA2</em></td>
		</tr>
		<tr>
			<td colspan="3">Timestamp</td>
			<td>DateTime</td>
			<td>Timestamp of the payment transaction.</td>
		</tr>
		<tr>
			<td colspan="3">Version</td>
			<td>Character(20)</td>
			<td><em>Fixed value : 1.0</em></td>
		</tr>
		<tr>
			<td colspan="3">CertificatePath</td>
			<td>Character(500)</td>
			<td>Name of the PFX file used to sign the payment information<br />
			Make sure to use a FullPath to reference your PFX file</td>
		</tr>
		<tr>
			<td colspan="3">CertificatePassword   </td>
			<td>Character(20)</td>
			<td>Password of the PFX file used to sign the payment information</td>
		</tr>
	</tbody>
</table>

<h3><a id="PaymentInformation+%28Alipay%29" class="HashLink" href="#PaymentInformation+%28Alipay%29"><strong>PaymentInformation (Alipay)</strong></a></h3>

<p>Information returned by the <em>GetPaymentInformation</em> procedure to be sent to Alipay to perform the payment.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td colspan="3" style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Field</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Domain</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description</strong></td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">ErrorCode</td>
			<td style="vertical-align: top;">Numeric(10.0)</td>
			<td>Error code returned by the <em>GetPaymentInformation</em> procedure</td>
		</tr>
		<tr>
			<td colspan="3">ErrorDescription   </td>
			<td>Character(200)</td>
			<td>Error description returned by the <em>GetPaymentInformation</em> procedure</td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">Parameters</td>
			<td style="vertical-align: top;">LongVarChar(2M)   </td>
			<td>Payment information parameters to be sent to Alipay</td>
		</tr>
		<tr>
			<td colspan="3">Environment</td>
			<td>Environment</td>
			<td>Environment where the payment transaction will be executed</td>
		</tr>
		<tr>
			<td colspan="3">OrderNumber</td>
			<td>VarChar(40)</td>
			<td>Order number for the payment transaction</td>
		</tr>
	</tbody>
</table>

<h3><a id="PaymentNotificationInfo+%28Alipay%29" class="HashLink" href="#PaymentNotificationInfo+%28Alipay%29"><strong>PaymentNotificationInfo (Alipay)</strong></a></h3>

<p>Information sent by Alipay to the asynchronous payment notification service. This information can be used by the developer in the <em>CallbackHandler</em> procedure.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td colspan="3" style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Field</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Domain</strong></td>
			<td style="border-bottom: 1.0px solid black;background-color: rgb(221,221,221);"><strong>Description   </strong></td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">NotifyTime</td>
			<td style="vertical-align: top;">DateTime</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">NotifyType</td>
			<td>Character(64)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3" style="vertical-align: top;">NotifyId</td>
			<td style="vertical-align: top;">Character(128)   </td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">AppId</td>
			<td>Character(32)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">Charset</td>
			<td>Character(10)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">Version</td>
			<td>Character(3)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">SignType</td>
			<td>Character(10)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">Sign</td>
			<td>Character(256)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">AlipayTradeNumber</td>
			<td>Character(64)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">OutTradeNumber</td>
			<td>Character(64)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">MerchantId</td>
			<td>Character(64)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">BuyerId</td>
			<td>Character(16)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">BuyerLogonId</td>
			<td>Character(100)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">SellerId</td>
			<td>Character(30)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">SellerEmail</td>
			<td>Email</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">TradeStatus</td>
			<td>TradeStatus</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">TotalAmount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">ReceiptAmount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">InvoiceAmount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">BuyerPayAmount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">PointAmount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">RefundFee</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">Subject</td>
			<td>Character(256)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">Body</td>
			<td>Character(400)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">CreationDateTime</td>
			<td>DateTime</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">PaymentDateTime</td>
			<td>DateTime</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">RefundDateTime</td>
			<td>DateTime</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">CloseDateTime</td>
			<td>DateTime</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">FundBillList</td>
			<td><em>&lt;Collection&gt;</em></td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     Amount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     FundChannel</td>
			<td>FundChannel</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">PassBackParameters</td>
			<td>Character(512)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">VoucherDetailList</td>
			<td><em>&lt;Collection&gt;</em></td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     Name</td>
			<td>Character(64)</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     Type</td>
			<td>VoucherType</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     Amount</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     MerchantContribute   </td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     OtherContribute</td>
			<td>Amount</td>
			<td> </td>
		</tr>
		<tr>
			<td colspan="3">     Memo</td>
			<td>Character(256)</td>
			<td> </td>
		</tr>
	</tbody>
</table>

<h2><br />
Procedures</h2>

<h3><a id="LoadConfig+%28CommonPay%29" class="HashLink" href="#LoadConfig+%28CommonPay%29"><strong>LoadConfig (CommonPay)</strong></a></h3>

<p>Loads the configuration needed to perform the payment with Alipay. By default, it reads the information from the Alipay_Config.xml file.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Parameters     </strong></td>
			<td><i>PaymentProvider</i>: Alipay</td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Returns</strong></td>
			<td><i>Configuration</i>:SDT(Configuration)   </td>
		</tr>
	</tbody>
</table>

<h3><a id="GetPaymentInformation+%28Alipay%29" class="HashLink" href="#GetPaymentInformation+%28Alipay%29"><strong>GetPaymentInformation (Alipay)</strong></a></h3>

<p>Processes the payment data given by the user and returns all the required information (signed) ready to be sent to Alipay.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Parameters     </strong></td>
			<td><i>PaymentApplicationData</i>: SDT(PaymentApplicationData)   </td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Returns</strong></td>
			<td><i>PaymentInformation</i>: SDT(PaymentInformation)</td>
		</tr>
	</tbody>
</table>

<h3><a id="OnAboutToPay+%28Alipay%29" class="HashLink" href="#OnAboutToPay+%28Alipay%29"><strong>OnAboutToPay (Alipay)</strong></a></h3>

<p>Used to process the payment data just before it is sent to Alipay. One common use is to store the payment information (especially the OrderNumber) in the application database tables.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Parameters     </strong></td>
			<td><i>PaymentApplicationData</i>: SDT(PaymentApplicationData)   </td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Returns</strong></td>
			<td>-</td>
		</tr>
	</tbody>
</table>

<h3><a id="CallbackService+%28Alipay%29" class="HashLink" href="#CallbackService+%28Alipay%29"><strong>CallbackService (Alipay)</strong></a></h3>

<p>HTTP Procedure. Asynchronous payment notification service that Alipay servers call after the payment process finishes. It does not return data; it turns the HTTP information into an SDT (PaymentNotificationInfo) and calls CallbackHandler procedure.</p>

<h3><a id="CallbackHandler+%28Alipay%29" class="HashLink" href="#CallbackHandler+%28Alipay%29"><strong>CallbackHandler (Alipay)</strong></a></h3>

<p>Used to process the data sent by Alipay servers when calling the asynchronous payment notification service.</p>

<table border="1" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Parameters     </strong></td>
			<td><i>PaymentNotificationInfo</i>: SDT(PaymentNotificationInfo)   </td>
		</tr>
		<tr>
			<td style="background-color: rgb(221,221,221);"><strong>Returns</strong></td>
			<td>-</td>
		</tr>
	</tbody>
</table>

<h4><a id="" class="HashLink" href="#"></a></h4>
<br />
</td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="37146.html">HowTo: Pay using Alipay in GeneXus applications</a></TD><TD><a href="46593.html">Integration and Evolution with GeneXus 17</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 10/18/20 06:47 PM</em></font></td></TR></table></font>