<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Deep Linking on Smart Devices</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?36163,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Deep Linking on Smart Devices</h1>
<!--HowTo: Deep Linking on Smart Devices--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>A <em>Deep Link</em> consists in a URI under our domain that links certain content on the web (e.g., a store product) which can be handled by a native mobile application for processing that information. This means that the end user can open a web link with a mobile application instead of the web client application in the browser.</p>

<p><img src="./images/36681.png" id="36681" class="WikiImage"/></p>

<p>This article describes the mechanisms provided by GeneXus for adding deep linking on your Smart Device application. </p>

<h2><a id="Preliminary+settings" class="HashLink" href="#Preliminary+settings">Preliminary settings</a></h2>

<h3><a id="Client-side+settings" class="HashLink" href="#Client-side+settings">Client-side settings</a></h3>

<p>In the <a href="17817.html">Smart Devices Main object</a> the developer must set the <a href="36161.html">Deep Link Base URL property</a> to indicate which Base URLs should be handled by the application when the device triggers them.</p>

<h3><a id="Server-side+settings+for+Android+applications" class="HashLink" href="#Server-side+settings+for+Android+applications">Server-side settings for Android applications</a></h3>

<p>The server-side setting for Android applications is optional. If server-side has not been set, the Android OS is responsible for displaying the options that allow the end user to open the requested URI (if there is more than one option). If the developer sets the server-side option by copying the following generated JSON file to the server root (<a href='https://developers.google.com/digital-asset-links/tools/generator'>Statement test</a> might be useful for checking grant permissions), every URI that can be handled will be opened instantly by the application.</p>

<div style="border-left: 2.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><em>&lt;model&gt;/&lt;environment&gt;/mobile/Android/&lt;main_object_name&gt;/assetlinks.json</em></div>

<h3><a id="Server-side+settings+for+iOS+applications" class="HashLink" href="#Server-side+settings+for+iOS+applications">Server-side settings for iOS applications</a></h3>

<p>The server-side setting for iOS applications is mandatory. To manage deep linking on iOS devices, you must include a special file in the <strong>server root</strong> for ensuring the authority of the domain (<a href='https://branch.io/resources/aasa-validator/'>brench aasa-validator</a> might be helpful for testing server settings). This file is automatically generated by GeneXus in the following directory.</p>

<div style="border-left: 2.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><em>&lt;model&gt;/&lt;environment&gt;/mobile/iOS/&lt;main_object_name&gt;/apple-app-site-association/&lt;domain&gt;</em></div>

<p>The &lt;domain&gt; varies depending on <a href="36161.html">Deep Link Base URL property</a> values. The developer <strong>must copy this file manually to the server root</strong> and ensure that the server accepts empty file extension request as json (see the table below). After server resetting, the file then should be accessed via HTTP, without redirects, at <em>https://&lt;host&gt;/apple-app-site-association</em>.</p>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;width: 50.0%;"><strong>.NET environment (&lt;webapp&gt;/web.config)</strong></td>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;width: 50.0%;"><strong>JAVA environment (&lt;tomcat_dir&gt;/conf/web.xml)</strong></td>
		</tr>
		<tr>
			<td style="vertical-align: top;">
			<pre>
<code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
  &lt;system.webServer&gt;
    &lt;staticContent&gt;
      &lt;mimeMap fileExtension=&quot;.&quot; mimeType=&quot;application/json&quot; /&gt;
    &lt;/staticContent&gt;
  &lt;/system.webServer&gt;
&lt;/configuration&gt;</code></pre>

			<p>Or, another alternative, after adding the &quot;.json&quot; extension to the apple-app-site-association file:</p>

			<pre class="prettyprint lang-genexus" style="max-width: 100%">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
    &lt;rewrite&gt;
       &lt;rules&gt;
         &lt;rule name=&quot;apple_json_file&quot;&gt;
            &lt;match url=&quot;^apple-app-site-association&quot; /&gt;
            &lt;action type=&quot;Rewrite&quot; url=&quot;apple-app-site-association.json&quot; /&gt;
         &lt;/rule&gt;
       &lt;/rules&gt;
    &lt;/rewrite&gt;
    &lt;/system.webServer&gt; 
&lt;/configuration&gt;</pre>

			<p><strong>Tip</strong>: You can attach a <span style="font-family: courier new;">web.config</span> <a href="5852.html">File object</a> in your KB with this content, and copy it to the /web directory (action triggered before deploying it). This action will merge the generated <span style="font-family: courier new;">web.config</span> file with your custom one, simplifying the deep linking association process.</p>
			</td>
			<td style="vertical-align: top;">
			<pre class="prettyprint lang-genexus" style="max-width: 100%">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;
  version=&quot;3.1&gt;
    &lt;mime-mapping&gt;
        &lt;extension&gt;.&lt;/extension&gt;
        &lt;mime-type&gt;application/json&lt;/mime-type&gt;
    &lt;/mime-mapping&gt;
&lt;/webapp&gt;</pre>

			<p>Or, another alternative for simplifying the process (available as of GeneXus 15 Upgrade 10):</p>

			<pre class="prettyprint lang-genexus" style="max-width: 100%">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;
  version=&quot;3.1&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;CustomFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;
            com.genexus.filters.CustomFilter
        &lt;/filter-class&gt;                
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;CustomFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;
             /apple-app-site-association
        &lt;/url-pattern&gt;
        &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;
    &lt;/filter-mapping&gt;
&lt;/webapp&gt;
</pre>
			</td>
		</tr>
	</tbody>
</table>

<p>To generate the file, the <a href="30100.html">Development Team ID property</a> must be set; otherwise, the following warning will be displayed while building.<br />
<span style="font-size: small;"><span style="color: rgb(0,0,255);"><span style="font-family: courier new;">warning: The property Development Team ID of &lt;main_app_name&gt; is required for apple-app-site-association generation.</span></span></span></p>

<h2><a id="Handling+methodology" class="HashLink" href="#Handling+methodology">Handling methodology</a></h2>

<p>There are two mechanisms for handling deep links in the application. When none of them can handle the URI request, the end user will be able to see the content in a web browser.<br />
<strong>Note</strong>: In this section, ''interactive object&quot; refers to <a href="24829.html">SD Panel</a>, <a href="16321.html">Menu</a>, and WorkWithDevices <a href="15985.html">Detail Node</a> and <a href="15984.html">List Node</a>, .</p>

<h3><a id="1.+Automatic" class="HashLink" href="#1.+Automatic">1. Automatic</a></h3>

<p>There is a set of interactive objects in the Knowledge Base responsible for displaying content for the resources requested in the URI. For example, suppose that we have a WorkWithDevices object applied to the Products transaction. The Detail node of this object will be associated with the URI <em>http://www.mystore.com/viewproduct.aspx?1</em>. To achieve this, the developer must set the <a href="36162.html">Deep Link Name property</a> on the Detail node with 'viewproduct.aspx' value (name of the requested resource). As we already know, the Detail node will have a parm rule for indicating the ProductId to be displayed. This parm will be automatically caught from the URI's query (in the example, ProductId will be 1).</p>

<h3><a id="2.+Manual" class="HashLink" href="#2.+Manual">2. Manual</a></h3>

<p>The <a href="36160.html">DeepLink external object</a> allows the developer to define an event for handling, parsing and redirecting the caught URIs to their corresponding interactive object. The event code and its behavior are the responsibility of the developer.</p>

<h2><a id="Input+parameters" class="HashLink" href="#Input+parameters">Input parameters</a></h2>

<p>Deep link parameters (input parameters of handler panel) can be managed in two ways.</p>

<h3><a id="1.+Positioned" class="HashLink" href="#1.+Positioned">1. Positioned</a></h3>

<p>Parameter values are sorted in the same order as they appear in the parm rule and are separated by commas (&quot;,&quot;).<br />
For example,</p>

<div style="border-left: 2.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><em>http://www.mystore.com/categorysearch.aspx?17,grey+beanie</em></div>

<h3><a id="2.+Nominated" class="HashLink" href="#2.+Nominated">2. Nominated</a></h3>

<p>Parameters can be displayed unsorted in the URI, but they have to be named (as a key=value pair, where the <em>key </em>is the parameter name) and separated by an ampersand (&amp;).<br />
For example,</p>

<div style="border-left: 2.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><em>http://www.mystore.com/categorysearch.aspx?SearchedText=grey+beanie,CateogyId=17</em></div>

<h2><a id="Usage+example" class="HashLink" href="#Usage+example">Usage example</a></h2>

<p>Suppose that we have a simple e-commerce website already designed and we want to develop the mobile application. We start by creating the sibling Smart Device objects from Web objects as follows:<br />
<img src="./images/36262.png" id="36262" class="WikiImage"/><br />
In this case, we have three data views for Web and Smart Devices:</p>

<p>• <em>MyStore object </em>(main panel).<br />
• <em>CategorySearch object</em> (for a custom search engine).<br />
• <em>WorkWith object </em>(to list and detail our products).</p>

<p>People now share content using its URL on the web (e.g., by email, messaging systems, social networks, etc.). For this reason, when the mobile application is installed on the end user's device, they should be able to view this content from the native application instead of opening it in the browser. To achieve this, we have to map which interactive Smart Device object will display the content displayed on each interactive Web object. From our design, these objects have the same name on different packages.</p>

<p>The first step is to set, in the MyStore object for the Smart Device, the following property for handling deep links:</p>

<ul>
	<li><a href="36161.html">Deep Link Base URL property</a> = http://www.mystore.com/</li>
</ul>

<p>Next, we have to set which panel will handle each resource. </p>

<ul>
	<li>MyStore<br />
	<a href="36162.html">Deep Link Name property</a> = web.mystore.aspx<br />
	 </li>
	<li>CategorySearch<br />
	<a href="36162.html">Deep Link Name property</a> = web.categorysearch.aspx<br />
	 </li>
	<li>WorkWithDevicesProduct.Detail<br />
	<a href="36162.html">Deep Link Name property</a> = viewproduct.aspx</li>
</ul>

<p>As we mentioned before, with these settings we are managing automatic deep linking. If for some reason we have to manage them manually, refer to <a href="36160.html">DeepLin.Handle event</a> example.</p>

<p>Finally, the behavior achieved is as follows:<br />
<img src="./images/36268.png" id="36268" class="WikiImage"/></p>

<h2><a id="Notes" class="HashLink" href="#Notes">Notes</a></h2>

<ul>
	<li>Special URI parameters must be encoded as follows:<br />
	- <a href='https://tools.ietf.org/html/rfc3986#section-2'>Percent-encoding</a> for strings (e.g. &quot;%20&quot; or &quot;+&quot; for blank space). This article can be useful: <a href='https://www.w3schools.com/tags/ref_urlencode.asp'>W3C - ASCII Encoding Reference</a>.<br />
	- <a href='https://www.w3.org/TR/NOTE-datetime'>ISO-8601</a> for date, time and date-time (e.g. &quot;20170821&quot; for 08-21-2017). The <a href="4372.html">Date Constants</a> article may be helpful for generating this constant from GeneXus.</li>
	<li>Android allows the end user to display the content in the browser if the server-side option is not set; otherwise, it will always be displayed in the app.</li>
	<li>iOS only allows the end user to display content on the application because the server-side setting is required. However, when the app is opened, on the top right corner there will be an option for redirecting to the browser.</li>
</ul>

<h2><a id="FAQ+%26+Troubleshooting" class="HashLink" href="#FAQ+%26+Troubleshooting">FAQ &amp; Troubleshooting</a></h2>

<ul>
	<li><strong>Can I use both manual and automatic alternatives?</strong><br />
	Yes. First, the application calls the <a href="36160.html">Handle event</a>; if this action cannot meet the request (because &amp;IsHandled is still False), it will try to solve it automatically. If the request cannot be solved in this way either, the content will be displayed in the default browser of the device.<br />
	 </li>
	<li><strong>Can I use a different URI scheme other than HTTP?</strong><br />
	Yes, by using the manual alternative and parsing the URI adequately.<br />
	 </li>
	<li><strong>Can I develop my mobile application and integrate it with an existing web application?</strong><br />
	Yes, by setting the <a href="36161.html">Deep Link Base URL property</a> correctly.</li>
</ul>

<h2><a id="Scope" class="HashLink" href="#Scope">Scope</a></h2>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td><b>Platforms  </b></td>
			<td>Smart Devices (iOS, Android)</td>
		</tr>
	</tbody>
</table>

<h2><a id="Availability" class="HashLink" href="#Availability">Availability</a></h2>

<p>The deep linking feature is available as of <a href="https://wiki.genexus.com/commwiki/wiki?35908,," target="_blank">GeneXus 15 Upgrade 6</a>.</p>

<h2><a id="See+also" class="HashLink" href="#See+also">See also</a></h2>

<ul>
	<li><a href='https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html'>Apple - Support Universal Links</a></li>
	<li><a href='https://developer.android.com/training/app-links/index.html'>Android - Handling Android App Links</a></li>
	<li><a href='http://guscarr69.blogspot.com/2017/08/quiero-abrir-los-links-con-aplicaciones.html'>Blog post: 'Quiero abrir los links con aplicaciones' (Spanish)</a></li>
</ul>

<p><br />
</p>
<br />
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="36161.html">Deep Link Base URL property</a></TD><TD><a href="36162.html">Deep Link Name property</a></TD><TD><a href="36160.html">DeepLink external object</a></TD></TR><TR><TD><a href="32656.html">Deferred Deep Linking by Facebook</a></TD></TR><TR><TD><a href="23734.html">Interop external object</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:18 PM</em></font></td></TR></table></font>