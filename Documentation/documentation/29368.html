<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>App Transport Security property group</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?29368,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">App Transport Security property group</h1>
<!--App Transport Security property group--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>This group of properties is available for Main Smart Device objects and is located under the App Transport Security properties group.</p>

<p>Allows insecure communication with particular servers.</p>

<h2><a id="Introduction" class="HashLink" href="#Introduction"><strong>Introduction</strong></a></h2>

<p><br />
As from iOS 9, all network connections must be secure unless stated otherwise. The feature is known as App Transport Security, and is described by Apple documentation:</p>

<blockquote>
<p>App Transport Security is a feature that improves the security of connections between an app and web services. The feature consists of default connection requirements that conform to best practices for secure connections. Apps can override this default behavior and turn off transport security.</p>
</blockquote>

<p>In the case of Android, this is fulfilled from Android 9 version. <a href='https://android-developers.googleblog.com/2018/04/protecting-users-with-tls-by-default-in.html?m=1'>Official notes:</a></p>

<blockquote>
<p>Android is committed to keeping users, their devices, and their data safe. One of the ways that we keep data safe is by protecting all data that enters or leaves an Android device with Transport Layer Security (TLS) in transit. As we announced in our Android P developer preview, we're further improving these protections by preventing apps that target Android P from allowing unencrypted connections by default.</p>
</blockquote>

<p>These properties give the developer the ability to override the default OS settings.</p>

<h2><a id="Properties" class="HashLink" href="#Properties"><strong>Properties</strong></a></h2>

<h3><a id="Allows+Arbitrary+Loads+property" class="HashLink" href="#Allows+Arbitrary+Loads+property">Allows Arbitrary Loads property</a></h3>

<h4><a id="Values" class="HashLink" href="#Values">Values</a></h4>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="width: 60.0px;"><em>False</em></td>
			<td><span style="line-height: 20.8px;">Each non-secure connection must be declared in the Exception Domains property</span></td>
		</tr>
		<tr>
			<td><em>True</em></td>
			<td><span style="line-height: 20.8px;">Turns off the SSL checks for the application, except for the exception domains (see property below)</span></td>
		</tr>
	</tbody>
</table>

<h4><a id="The+default+value+is+False." class="HashLink" href="#The+default+value+is+False.">The default value is <em>False</em>.</a></h4>

<p>Setting this property to <em>True</em> may be easier to configure, but disabling this security feature is not recommended.</p>

<p><strong>Note: </strong>When working with the Android generator, this property allows the HTTP cleartext communication.</p>

<p> </p>

<h3><a id="Allows+Arbitrary+Loads+In+Media+property" class="HashLink" href="#Allows+Arbitrary+Loads+In+Media+property">Allows Arbitrary Loads In Media property</a></h3>

<p>It's analogous to <em>Allow Arbitrary Loads property</em> but restricted to media content.</p>

<h3><a id="+" class="HashLink" href="#+"> </a></h3>

<h3><a id="Allows+Arbitrary+Loads+In+Web+Content+property" class="HashLink" href="#Allows+Arbitrary+Loads+In+Web+Content+property">Allows Arbitrary Loads In Web Content property</a></h3>

<p>It's analogous to <em>Allow Arbitrary Loads property</em> but restricted to web content.</p>

<p> </p>

<h3><a id="Allows+Local+Networking+property" class="HashLink" href="#Allows+Local+Networking+property">Allows Local Networking property</a></h3>

<p>It's analogous to <em>Allow Arbitrary Loads property</em> but restricted to load local resources.</p>

<p> </p>

<h3><a id="Exception+Domains+property" class="HashLink" href="#Exception+Domains+property">Exception Domains property</a></h3>

<p>It is a list of domains that do not conform to the requirements.</p>

<p>For each exception domain, a set of properties must be configured.</p>

<p><img src="./images/29370.png" id="29370" class="WikiImage"/></p>

<h4><a id="+" class="HashLink" href="#+"> </a></h4>

<h4><a id="Domain+Name" class="HashLink" href="#Domain+Name">Domain Name</a></h4>

<p>The name of the domain.</p>

<p>Example: www.testdomain.com</p>

<h4><a id="+" class="HashLink" href="#+"> </a></h4>

<h4><a id="Include+Subdomains" class="HashLink" href="#Include+Subdomains">Include Subdomains</a></h4>

<p>Boolean value for applying the overrides to all subdomains of the top-level domain.</p>

<p>Example: if the Domain Name is &quot;testdomain.com&quot; then &quot;www.testdomain.com&quot; and &quot;sample.testdomain.com&quot; will both use these settings.</p>

<p><em>False </em><span style="background-color: rgb(245,246,245);">is</span><span style="background-color: rgb(245,246,245);"> the default value.</span></p>

<h4><a id="+" class="HashLink" href="#+"> </a></h4>

<h4><a id="Third+Party" class="HashLink" href="#Third+Party">Third Party</a></h4>

<p>If the domain is not controlled by the developer, it must be set to <em>True</em>. For example, for domains external to the application.</p>

<p><em style="background-color: rgb(245,246,245);">False </em><span style="background-color: rgb(245,246,245);">is</span><span style="background-color: rgb(245,246,245);"> the default value.</span></p>

<h4><a id="+" class="HashLink" href="#+"> </a></h4>

<h4><a id="Minimum+TLS+Version" class="HashLink" href="#Minimum+TLS+Version">Minimum TLS Version</a></h4>

<p>Specifies the minimum TLS version for the connections.</p>

<p>The default value is <em>1.2</em>.</p>

<h4><a id="+" class="HashLink" href="#+"> </a></h4>

<h4><a id="Requires+Forward+Secrecy" class="HashLink" href="#Requires+Forward+Secrecy">Requires Forward Secrecy</a></h4>

<p>Set to <em>False</em> if the connection does not allow <em>forward secrecy</em>.</p>

<p><em>True</em><em style="background-color: rgb(245,246,245);"> </em><span style="background-color: rgb(245,246,245);">is</span><span style="background-color: rgb(245,246,245);"> the default value</span></p>

<h4><a id="+" class="HashLink" href="#+"> </a></h4>

<h4><a id="Allow+Insecure+HTTP+Loads" class="HashLink" href="#Allow+Insecure+HTTP+Loads">Allow Insecure HTTP Loads</a></h4>

<p>Boolean value for overriding the requirement that all connections use HTTPS. Use this key to access domains with no certificate, or with an error for a self-signed, expired, or hostname-mismatch certificate.</p>

<p><em style="background-color: rgb(245,246,245);">False </em><span style="background-color: rgb(245,246,245);">is</span><span style="background-color: rgb(245,246,245);"> the default value</span>.</p>

<h3><a id="+" class="HashLink" href="#+"> </a></h3>

<h4><a id="Requires+Certificate+Transparency" class="HashLink" href="#Requires+Certificate+Transparency">Requires Certificate Transparency</a></h4>

<p>A Boolean value to indicate if <a href='https://www.certificate-transparency.org/'>Certificate Transparency</a> is required.</p>

<p><em style="background-color: rgb(245,246,245);">False </em><span style="background-color: rgb(245,246,245);">is</span><span style="background-color: rgb(245,246,245);"> the default value</span>.</p>

<p> </p>

<h3><a id="Note" class="HashLink" href="#Note">Note</a></h3>

<ul>
	<li>In some cases, GeneXus automatically adds the corresponding exceptions to the app's configuration (i.e. Google Analytics, Facebook, etc).</li>
</ul>

<h2><a id="+" class="HashLink" href="#+"> </a></h2>

<h2><a id="Troubleshooting" class="HashLink" href="#Troubleshooting"><strong>Troubleshooting</strong></a></h2>

<p>If these properties are not configured correctly, the application will not work as expected. To be more specific, some network connections may return<sup>(1)</sup> something similar to the following:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
    &quot;requestFail&quot;: {
        &quot;url&quot;: &quot;https://www.your.domain.com/some/url&quot;,
        &quot;error&quot;: {
            &quot;domain&quot;: &quot;NSURLErrorDomain&quot;,
            &quot;localizedDescription&quot;: &quot;An SSL error has occurred and a secure connection to the server cannot be made.&quot;,
            &quot;code&quot;: -1200
        }
    }
</pre>

<p>This means that the network domain <em>www.your.domain.com</em> does not support the configuration required by iOS 9.</p>

<p>You can use the <em>nscurl</em> utility in your OS X installation to check the domain. From a Terminal window:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
/usr/bin/nscurl --ats-diagnostics https://www.your.domain.com</pre>

<p>This tool runs a series of checks and will output the settings you need for the domain.</p>

<p>For example, if the output looks as shown below (only a part of it is shown here):</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
---
TLSv1.1 with PFS disabled and insecure HTTP allowed
2015-10-22 15:10:34.979 nscurl[50131:341576] CFNetwork SSLHandshake failed (-9801)
2015-10-22 15:10:35.038 nscurl[50131:341576] CFNetwork SSLHandshake failed (-9801)
2015-10-22 15:10:35.053 nscurl[50131:341576] CFNetwork SSLHandshake failed (-9801)
2015-10-22 15:10:35.054 nscurl[50131:341576] NSURLSession/NSURLConnection HTTP load failed (kCFStreamErrorDomainSSL, -9801)
Result : FAIL
---
TLSv1.0 with PFS disabled and insecure HTTP allowed
Result : PASS
---</pre>

<p>In GeneXus, you'll have to set <em>TLS</em> to <em>1.0</em> and <em>Requires Forward Secrecy</em> to <em>False</em>.</p>

<hr />
<p><sup>(1)</sup> When executed in Debug mode from Xcode, the text is shown in the Console.</p>

<p><strong>Note</strong>: nscurl requires Mac OS 10.11 (El Capitan) (<em>Ref. <a href='http://stackoverflow.com/questions/32723623/how-do-i-install-nscurl-on-mac-os-x-10-10-yosemite'>http://stackoverflow.com/questions/32723623/how-do-i-install-nscurl-on-mac-os-x-10-10-yosemite</a></em>)</p>

<h2 style="line-height: 20.8px;"><a id="Availability" class="HashLink" href="#Availability"><strong>Availability</strong></a></h2 style="line-height: 20.8px;">

<p>Available since <a href="https://wiki.genexus.com/commwiki/wiki?29164,," target="_blank">GeneXus X Evolution 3 Upgrade 5</a> for iOS.</p>

<p style="line-height: 20.8px;">Available since <a href="https://wiki.genexus.com/commwiki/wiki?42129,," target="_blank">GeneXus 16 upgrade 3</a> for Android. <br />
<span style="line-height: 1.6em;"></span></p>
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="15041.html">Deploy to cloud property</a></TD><TD><a href="20366.html">Dynamic Services URL property</a></TD></TR><TR><TD><a href="17817.html">Native Mobile Main object properties</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:16 PM</em></font></td></TR></table></font>