<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Chatbot Generator resources update</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?39998,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Chatbot Generator resources update</h1>
<!--Chatbot Generator resources update--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>A <a href="22414.html">Module</a> called CommonChatbots is created in the <a href="1836.html">Knowledge Base</a>, containing all the <a href="37102.html">Chatbot generator</a> pattern resources.</p>

<p>In the <strong>Build </strong>process, and in the <strong>Generate bot</strong> action, it is checked whether those resources have any change in comparison with the version of the resources that you have in the KB, and depending on the <a href="40218.html">Keep Resources Updated property</a>, they are updated or not.</p>

<p>When the resources need to be updated in the KB, if the property <a href="40218.html">Keep Resources Updated property</a> = prompt, the following dialog is shown:</p>

<p><img src="./images/40071.png" id="40071" class="WikiImage"/></p>

<p>The Chatbot generator resources to be updated are all the objects under the <strong>CommonChatbots</strong> module.</p>

<h3><a id="Data" class="HashLink" href="#Data">Data</a></h3>

<p><strong>GXChatMessage</strong>: Table used to store messages and their metadata.</p>

<ul>
	<li>GXChatMessageId -&gt; Message Identifier (GUID)</li>
	<li>GXChatUserId -&gt; FK of the GXChatUser table (GUID)</li>
	<li>GXChatMessageMessage -&gt; The message (The text you see in the chat)</li>
	<li>GXChatMessageType -&gt; Message type (if it is a response or is from the user including its format)</li>
	<li>GXChatMessageImage -&gt; If you send an Image, it is saved there.</li>
	<li>GXChatMessageDate -&gt; DateTime of the message </li>
	<li>GXChatMessageMeta -&gt; Stores the metadata of the message (The JSON sent by the provider)</li>
	<li>GXChatMessageRepeat -&gt; Auxiliary for SD (see again)</li>
	<li>GXChatUserDevice -&gt; FK of the GXChatUser table</li>
	<li>GXChatMessageInstance -&gt; Instance of the conversational flow to which the message belongs</li>
</ul>

<p><strong>GXChatUser</strong>: Table in which users and their devices are stored.</p>

<ul>
	<li>GXChatUserId -&gt; User identification (GUID)</li>
	<li>GXChatUserDevice -&gt; User device identification</li>
</ul>

<p><strong>GetUserId </strong>procedure: The procedure called GetUserId, which is consulted in runtime to obtain the user's ID, by default returns the same ID (as an example). However, you can modify it to customize the way the ID is obtained (modify the procedure or save it as another and change the call, whichever is better for you). In this way, you can manage the users and their IDs as you wish, only modifying that entry point.</p>

<h3><a id="Themes" class="HashLink" href="#Themes">Themes</a></h3>

<p>The Carmine and CarmineSD Themes include the classes used to style the UI of the chatbot. These are default classes prefixed by &quot;CF&quot; which give a predefined style to the chatbot.</p>

<h3><a id="UI+objects" class="HashLink" href="#UI+objects">UI objects</a></h3>

<ul>
	<li>PanelChatWeb -&gt; called by the &lt;InstanceName&gt;WebUI generated object.</li>
	<li>PanelChat -&gt; called by the &lt;InstanceName&gt;UI generated object. The PanelChat panel has the <a href="20911.html">Connectivity Support property</a> set to Online.</li>
</ul>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  Up to Genexus 17 upgrade 0: </p>

<ul>
	<li>PanelChatSD -&gt; called by the &lt;InstanceName&gt;SDUI generated object. The PanelChatSD panel has the <a href="20911.html">Connectivity Support property</a> set to Offline.</div>
</li>
</ul>

<h3><a id="Context" class="HashLink" href="#Context">Context</a></h3>

<p>GetContext and SetContext procedures have the logic to get and update the Chatbot Context from the GXChatMessage table. See <a href="41364.html">HowTo: Manage the Context of the conversation through the Chatbot API</a> for more information.</p>

<p> </p>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  These objects can be modified as desired because they aren't updated mandatorily every time the pattern is generated (as opposed to the generated objects of the Chatbot generator pattern). They are updated considering the Keep Resources Updated property.<br />
The selection to update the resources is done in the Build process, and in the Generate bot action.</div>
</p>

<p> </p>

<p></p>

<p></p>
<br />
<br />
</td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="37102.html">Chatbot generator</a></TD></TR><TR><TD><a href="38520.html">Toc:Chatbots in GeneXus</a></TD><TD><a href="41364.html">HowTo: Manage the Context of the conversation through the Chatbot API</a></TD></TR><TR><TD><a href="40218.html">Keep Resources Updated property</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 05/28/21 01:06 PM</em></font></td></TR></table></font>