<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Digitally Signing a Document</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?15556,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Digitally Signing a Document</h1>
<!--HowTo: Digitally Signing a Document--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p style="text-align: justify;">Digitally sign documents allows verifying that a document has not been altered and that it was signed using a reliable certificate.</p>

<p style="text-align: justify;"><div style="background-color: rgb(255,235,205);border-left: 6.0px solid rgb(245,166,35);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><strong>Deprecated</strong>: Since  <a href="https://wiki.genexus.com/commwiki/wiki?42755,," target="_blank">GeneXus 16 upgrade 4</a> (*). Replaced by  An API to integrate with your Digital signature module.</div>

<p></p>
</p>

<p style="text-align: justify;">(*) What has been deprecated is not the complete functionality. What has been deprecated is the module that signs locally (an Applet) due to today's browser restrictions.<br />
More information at <a href='https://www.genexus.com/developers/websac?,,,45270'>SAC 45270</a> and <a href='https://www.genexus.com/developers/websac?,,,45590'>SAC 45590</a>.</p>

<p style="text-align: justify;"> </p>

<hr />
<p style="text-align: justify;">To use this feature, you need PKI (Public Key Infrastructure) knowledge.</p>

<p style="text-align: justify;">The following algorithms are used to obtain a digital signature:</p>

<p style="text-align: justify;">- SHA-1 for document dispersion<br />
- RSA for dispersion encryption</p>

<h3 style="text-align: justify;"><a id="Previous+steps" class="HashLink" href="#Previous+steps">Previous steps</a></h3 style="text-align: justify;">

<p style="text-align: justify;">Previous settings are required before being able to use this feature in a GXflow application. These settings depend on each platform, as explained below:</p>

<h4 style="text-align: justify;"><a id=".NET+Settings" class="HashLink" href="#.NET+Settings">.NET Settings</a></h4 style="text-align: justify;">

<ul>
	<li style="text-align: justify;">The application must run on .NET Framework 2.0.</li>
	<li style="text-align: justify;">Client PC browsers must use Java 1.4.2 or higher plug-in to execute .NET applets.</li>
	<li style="text-align: justify;">Certificates from reliable certifying authorities, either intermediate or advanced, must be installed in the corresponding certificate repositories of the Windows Server where the application is located. Additionally, to have certificate revocation control, you need to install the corresponding revocation lists (CRLs).</li>
</ul>

<h4 style="text-align: justify;"><a id="Java+Settings" class="HashLink" href="#Java+Settings">Java Settings</a></h4 style="text-align: justify;">

<ul>
	<li style="text-align: justify;">Client PC browsers must use Java 1.4.2 or higher plug-in to execute Java applets.</li>
	<li style="text-align: justify;">To use RSA keys of more than 2048 bits, you must install Java Unrestricted Policy Files. These files are specific for each version of the virtual machine and can be obtained from Sun's site.</li>
	<li style="text-align: justify;">Certificates from reliable certifying authorities, either intermediate or advanced, as well as revocation lists must reside in the disc, in a directory accessible by the application. A directory must exist for this purpose with the following subdirectories:
	<ul>
		<li><strong>inter_ca_certs</strong>: certificates from intermediate reliable certifying authorities</li>
		<li><strong>root_ca_certs</strong>: certificates form advanced reliable certifying authorities</li>
		<li><strong>crls</strong>: revocation lists (CRLs).</li>
	</ul>
	</li>
</ul>

<p style="margin-left: 40.0px;text-align: justify;">Certificates and revocation lists stored in these directories must be in DER format.</p>

<h3 style="text-align: justify;"><a id="GeneXus+IDE+Settings" class="HashLink" href="#GeneXus+IDE+Settings">GeneXus IDE Settings</a></h3 style="text-align: justify;">

<p style="text-align: justify;">In GeneXus IDE, when creating or modifying a document in Preferences -Workflow-Documents option, you can select whether or not a document requires a digital signature. To do so, set the property <strong>Digital Signature Required</strong> <em>true</em>.</p>

<p style="text-align: justify;"><span style="text-align: center;"><img src="./images/15557.JPG" id="15557" class="WikiImage"/></span></p>

<h3 style="text-align: justify;"><a id="GXflow+Client+Settings" class="HashLink" href="#GXflow+Client+Settings">GXflow Client Settings</a></h3 style="text-align: justify;">

<p style="text-align: justify;">In GXflow client Server preferences, enable the document's digital signature feature through the <a href="https://wiki.genexus.com/commwiki/wiki?10118,," target="_blank">Settings - Advanced - Document management – Enable Digital Signature</a> preference.</p>

<p style="text-align: justify;">In Java besides, you must setup the Certificates Directory Preference in <a href="https://wiki.genexus.com/commwiki/wiki?10118,," target="_blank">Settings – Advanced – Document Management – Certificates Directory</a> and specify the certificate directories mentioned above.</p>

<h3 style="text-align: justify;"><a id="Signing+Documents+in+GXflow+Client" class="HashLink" href="#Signing+Documents+in+GXflow+Client">Signing Documents in GXflow Client</a></h3 style="text-align: justify;">

<p style="text-align: justify;">When a user checks in a document that requires a digital signature, the document upload form will include a java applet for this purpose.</p>

<p style="text-align: justify;">This applet is digitally signed by Artech and the browser will ask for user permission to activate it the first time it is used in the client.</p>

<p style="text-align: justify;"><span style="text-align: center;"><img src="./images/15558.JPG" id="15558" class="WikiImage"/></span></p>

<p style="text-align: justify;">Once this applet is activated, a Sign button will be added to the upload form.</p>

<p style="text-align: justify;">To sign a document, follow these steps:</p>

<ul>
	<li style="text-align: justify;">Select the document to be uploaded and click the Sign button.</li>
</ul>

<p style="margin-left: 40.0px;text-align: justify;"><img src="./images/15559.JPG" id="15559" class="WikiImage"/></p>

<ul>
	<li style="text-align: justify;">In the dialog box that is displayed, choose the certificate containing the private key to sign the document. Specifically, the dialog asks for the disc path to this certificate, which must be in PKCS#12 format (.pfx files), and the password to extract the private key of this file.</li>
	<li style="text-align: justify;">Click Sign. If the information is correct, the document will be signed and the button to upload the document to the server will be enabled.</li>
</ul>

<p style="margin-left: 40.0px;text-align: justify;"><img src="./images/15560.JPG" id="15560" class="WikiImage"/></p>

<p style="text-align: justify;">In the server, the digital signature will be verified to confirm that the document has not been altered during transmission. In addition, the certificate used to sign the document will be verified to confirm that it hasn't expired. Its reliability is also checked to confirm that it was issued by a reliable certifying entity. If this verification is successful, the document will be accepted by the GXflow document repository.</p>

<h3 style="text-align: justify;"><a id="Viewing+Signed+Document+Data" class="HashLink" href="#Viewing+Signed+Document+Data">Viewing Signed Document Data</a></h3 style="text-align: justify;">

<p style="text-align: justify;">In all GXflow client applications that display documents (My Documents, Work With Documents, etc.), a column for signed documents is included in the document grid.<br />
Then clic <em>Digital Signature </em>(see<em> More Actions </em>button) to see the details of the signature and the certificate used to sign the document.</p>

<p style="text-align: justify;"><span style="text-align: center;"><img src="./images/15561.JPG" id="15561" class="WikiImage"/></span></p>

<p style="text-align: justify;"><span style="text-align: center;"><img src="./images/15562.JPG" id="15562" class="WikiImage"/></span></p>

<p style="text-align: justify;"><span style="text-align: center;"><img src="./images/15563.JPG" id="15563" class="WikiImage"/></span></p>

<h3 style="text-align: justify;"><a id="Managing+User+Certificates" class="HashLink" href="#Managing+User+Certificates">Managing User Certificates</a></h3 style="text-align: justify;">

<p style="text-align: justify;">Certificates used by a user to sign documents are kept in the server, associated to the user. These certificates are shown in the users' ABM, in each user's data.<br />
Note that certificates do not contain private keys; they only contain personal information of the certificate owner and his/her public key.</p>

<p style="text-align: justify;">By default, when a user signs a document, the used certificate is automatically added after verifying that it is reliable and it doesn't belong to the user certificates group yet.<br />
To manually manage user certificates, you need to set the <a href="https://wiki.genexus.com/commwiki/wiki?10118,," target="_blank">Settings – Advanced – Document management – Automatic User Certificate Insertion</a> server preference to <em>No</em>.</p>

<p style="text-align: justify;">Thus, only an administrator user will be able to add to or remove certificates from application users (through the users ABM dialog of the management console). Users will not be able to sign documents using a certificate that is not associated to their user accounts, regardless of whether or not they are valid and reliable certificates.</p>

<p style="text-align: justify;"></p>

<p style="text-align: justify;"></p>

<p><br />
<br />
<br />
</p>

<p><br />
</p>

<p><br />
</p>
</td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="43435.html">Toc:GeneXus BPM Suite</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 02/25/21 02:00 PM</em></font></td></TR></table></font>