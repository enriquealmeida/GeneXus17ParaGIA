<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Runtime external object</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?33076,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Runtime external object</h1>
<!--Runtime external object--><div class="TableWikiBody" id="tblwikibody"><p>The GeneXus.Common.Runtime external object allows you to get or set specific runtime properties, with different purposes.</p>

<h2><a id="Properties" class="HashLink" href="#Properties">Properties</a></h2>

<h3><a id="Environment+property" class="HashLink" href="#Environment+property">Environment property</a></h3>

<p>It allows you to differentiate, at runtime, when the application executes some action on the client-side or on the server-side. Its purpose is to allow you to make decisions programmatically to be consistent with the business logic of the system (e.g. determine the insert timestamp of a new record, which can differ between the client or the server during the synchronization).</p>

<p>It is based on the RuntimeEnvironment domain (described below) that provides the environment information in which the called action was executed.</p>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="width: 800.0px;">
	<tbody>
		<tr>
			<td style="width: 300.0px;border-bottom: 1.0px solid black;"> </td>
			<td style="text-align: center;width: 150.0px;border-bottom: 1.0px solid black;"><strong><a href="14981.html">Online Native Mobile applications architecture</a></strong></td>
			<td style="text-align: center;width: 150.0px;border-bottom: 1.0px solid black;"><strong><a href="22221.html">Offline Native Mobile applications architecture</a></strong></td>
			<td style="text-align: center;width: 150.0px;border-bottom: 1.0px solid black;"><strong>Web</strong></td>
		</tr>
		<tr>
			<td><strong><a href="8043.html">Start event</a></strong></td>
			<td style="text-align: center;background-color: rgb(255,255,255);">Server</td>
			<td style="text-align: center;background-color: rgb(255,255,255);">Device</td>
			<td style="text-align: center;background-color: rgb(255,255,255);">Server</td>
		</tr>
		<tr>
			<td style=""><strong><a href="https://wiki.genexus.com/commwiki/wiki?8195,," target="_blank">Refresh event</a></strong></td>
			<td style="text-align: center;">Server</td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">Server</td>
		</tr>
		<tr>
			<td><strong><a href="8188.html">Load event</a></strong></td>
			<td style="text-align: center;background-color: rgb(255,255,255);">Server</td>
			<td style="text-align: center;background-color: rgb(255,255,255);">Device</td>
			<td style="text-align: center;background-color: rgb(255,255,255);">Server</td>
		</tr>
		<tr>
			<td style=""><strong><a href="6293.html">Procedure object</a></strong></td>
			<td style="text-align: center;">Server</td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">Server</td>
		</tr>
		<tr>
			<td><strong><a href="23813.html">Business Component rules</a></strong></td>
			<td style="text-align: center;">Server</td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">Server</td>
		</tr>
		<tr>
			<td style=""><strong><a href="24044.html">ClientStart event</a> &amp; <a href="25668.html">Navigation Start events</a> </strong></td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">N/A</td>
		</tr>
		<tr>
			<td><strong><a href="8044.html">User defined event</a></strong></td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">Device</td>
			<td style="text-align: center;">Browser</td>
		</tr>
	</tbody>
</table></div>

<h4><a id="RuntimeEnvironment+domain" class="HashLink" href="#RuntimeEnvironment+domain">RuntimeEnvironment domain</a></h4>

<p>It is an enumerated domain describing possible runtime environments.</p>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><strong>Server</strong></td>
			<td>Server-side</td>
		</tr>
		<tr>
			<td><strong>Device</strong></td>
			<td>Client-side on the Native Mobile or Angular environment.</td>
		</tr>
		<tr>
			<td><strong>Browser</strong></td>
			<td>Client-side on Web environment.</td>
		</tr>
	</tbody>
</table></div>

<h3><a id="ExitCode+Property" class="HashLink" href="#ExitCode+Property">ExitCode Property</a></h3>

<p>This property allows setting the exit code (also known as errorlevel) of a process when it terminates, specifically, the one of a procedure with <a href="7947.html">Call protocol property</a> set to 'Command Line'. It is typically used to control the flow of batch programs.</p>

<p>The default value is 0.<br />
The exit code of a process that terminates abnormally (with an exception) is 1.</p>

<p><strong>Note:</strong> The exit code set by the terminated program can be read using the '%ERRORLEVEL%' variable in a Windows batch file and the '$?' in Linux shell.</p>

<h2><a id="Methods" class="HashLink" href="#Methods">Methods</a></h2>

<p>The runtime external object allows you to read the generic environment variables you have defined. To achieve this, you can use the following methods:</p>

<h4 class="Code" style="margin-left: 40.0px;"><a id="GetEnvironmentVariable" class="HashLink" href="#GetEnvironmentVariable"><strong>GetEnvironmentVariable</strong></a></h4 class="Code" style="margin-left: 40.0px;">

<p class="Code" style="margin-left: 40.0px;">Returns the value of the environment variable. If it does not exist, returns EMPTY.</p>

<p style="margin-left: 80.0px;"><strong>Return value </strong>Value:Character</p>

<p style="margin-left: 80.0px;"><strong>Parameters </strong>VariableName:Character</p>

<h4 class="Code" style="margin-left: 40.0px;"><a id="HasEnvironmentVariable" class="HashLink" href="#HasEnvironmentVariable"><strong>HasEnvironmentVariable</strong></a></h4 class="Code" style="margin-left: 40.0px;">

<p class="Code" style="margin-left: 40.0px;">Returns True if, and only if,  the environment variable exists (&lt;&gt; NULL).</p>

<p style="margin-left: 80.0px;"><strong>Return value  </strong>Boolean</p>

<p style="margin-left: 80.0px;"><strong>Parameters </strong>VariableName:Character</p>

<h4 class="Code" style="margin-left: 40.0px;"><a id="GetEnviromentVariables" class="HashLink" href="#GetEnviromentVariables"><strong>GetEnviromentVariables</strong></a></h4 class="Code" style="margin-left: 40.0px;">

<p class="Code" style="margin-left: 40.0px;">Returns all environment variables defined.</p>

<p class="Code" style="margin-left: 80.0px;"><strong>Return value </strong><a href="31606.html">Properties Data Type</a></p>

<p class="Code" style="margin-left: 80.0px;"><strong>Parameters </strong>None</p>

<ul>
</ul>

<h2><a id="Samples" class="HashLink" href="#Samples">Samples</a></h2>

<p>This section provides some simple use cases where the Runtime external object might be useful.</p>

<ol>
	<li><strong>Environment Property - Gap during synchronization</strong><br />
	In an offline Native Mobile application, when a new record is inserted in the database, this record will adopt the device timestamp (the real one), but after the synchronization, the server will persist another. This problem can be avoided if you take control when the record is physically inserted.<br />
	<br />
	Suppose you have the following transaction:
	<pre class="prettyprint lang-genexus" style="max-width: 100%">
Task
{
   TaskId*      : Numeric(4.0)
   TaskAbstract : Character(200) 
   <strong>TaskCreated  : DateTime</strong>
}
Rules
   noaccept(TaskCreated);
   <strong>TaskCreated = now() if insert;</strong>
</pre>
	If the application is offline, which will be the TaskCreated timestamp value? The moment when the record is inserted on the offline database or when is inserted in the server database? For avoiding this problem, you can include TaskSynced attribute (DateTime base too), and differentiate both cases as follows:

	<pre class="prettyprint lang-genexus" style="max-width: 100%">
Task
{
   TaskId*      : Numeric(4.0)
   TaskAbstract : Character(200) 
   <strong>TaskCreated  : DateTime
</strong>   <strong>TaskSynced   : DateTime</strong>
}
Rules
   noaccept(TaskCreated);
   noaccept(TaskSynced);
   <strong>TaskCreated = now() if insert and Runtime.Environment = RuntimeEnvironment.Device;
</strong>   <strong>TaskSynced  = now() if insert and Runtime.Environment &lt;&gt; RuntimeEnvironment.Device;</strong>
</pre>
	</li>
	<li><strong>Environment property - Offline notifications</strong><br />
	When a Native Mobile application works in an offline architecture, the process for sending notifications must be controlled in order to be sent by the server (not the device). This problem can be avoided analogously to the use-case (1) by restricting the execution to only when it's from the server (RuntimeEnvironment.Server).</li>
	<li><strong>ExitCode property - Setting Errorlevel </strong><br />
	The following procedure returns exit codes (and writes to the console) as follows<br />
	If data could be saved successfully: The procedure sets exit code 0 and writes to the console "Data has been saved successfully"<br />
	If data could not be saved: The procedure sets exit code 2 and writes to the console "Data could not be saved"<br />
	If a not handled exception occurs (eg. the 'Client BC' has a division by zero): The procedure sets exit code 1 and writes to the console the details of the exception
	<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;Client.Id = 1
&amp;Client.Name = "John"
&amp;Client.Save()
If &amp;Client.Fail()
    rollback
    msg("Data could not be saved",status)
    GeneXus.Common.Runtime.Exitcode = 2
else
    commit
    msg("Data has been saved successfully",status)
endif</pre>
	</li>
	<li>To get an environment variable, you can use HasEnvironmentVariable and GetEnvironmentVariable as follows:
	<pre class="prettyprint lang-genexus" style="max-width: 100%">
if(Runtime.HasEnvironmentVariable('VAR_NAME'))
     &amp;VarName = Runtime.GetEnvironmentVariable("VAR_NAME")
endif</pre>
	</li>
	<li>If you want to get all the environment variables, you should do something like the following:
	<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;AllEnvironmentVars = Runtime.GetEnviromentVariables()//&amp;AllEnvironmentVars is of Properties data type
for (&amp;EnvionmentVariable in &amp;AllEnvironmentVars)
    msg(Format(!"%1:%2", &amp;EvironmentVariable.Key, &amp;EvironmentVariable.Value))
endfor</pre>
	</li>
</ol>

<h2><a id="Scope" class="HashLink" href="#Scope">Scope</a></h2>

<p><b>Generators: </b><a href="12258.html">Java</a>, <a href="38604.html">.NET</a>, <a href="14453.html">Android</a>, <a href="14917.html">Apple</a></p>

<h2><a id="See+Also" class="HashLink" href="#See+Also">See Also</a></h2>

<p><a href="8238.html">Error_Handler Command</a><br />
<a href="https://wiki.genexus.com/commwiki/wiki?21740,," target="_blank">Exception Handling in Genexus</a></p>

<p><br />
<br />
</p>
</div><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="44808.html">Exception_Handler Rule</a></TD></TR><TR><TD><a href="31268.html">GeneXus Core module</a></TD><TD><a href="51032.html">Runtime external object (GeneXus 17 Upgrade 10 or prior)</a></TD></TR><TR><TD><a href="15288.html">Category:Smart Devices API</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 06/14/22 05:51 PM</em></font></td></TR></table></font>