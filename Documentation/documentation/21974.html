<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>GAM Deploy Tool: Import Data</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?21974,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">GAM Deploy Tool: Import Data</h1>
<!--GAM Deploy Tool: Import Data--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>One of the purposes of <a href="18608.html">GAM Deploy Tool</a> is to allow administrators of <a href="18617.html">GAM Manager Repository</a> to <a href="18872.html">export data</a> from an existing <a href="17568.html">GAM Repository</a> and import data into another Repository, of the same <a href="14960.html">GAM</a> data store, or another one.</p>

<p>If the GAM database does not exist, the import process creates the database structure before importing the data.</p>

<p>The following sections explain the Import deploy process of GAM Deploy Tool.</p>

<h3><a id="How+to+import+data+to+a+new+or+existing+Repository" class="HashLink" href="#How+to+import+data+to+a+new+or+existing+Repository">How to import data to a new or existing Repository</a></h3>

<p>1. Execute <a href="18608.html">GAM Deploy Tool</a>.</p>

<p>2. The first screen asks for the location of the package which is going to be imported (generated by the Export option of the tool).</p>

<p>3. Afterwards, you have to enter the DBMS connection settings.<br />
There you need to enter the connection settings of the GAM data store where the package is going to be imported. The GAM database you specify can exist or not.</p>

<p>If it exists, you are asked to enter the credentials of <a href="18617.html">GAM Manager Repository</a> administrator. Afterwards you can create a new repository or update an existing one.</p>

<p><img src="./images/20931.png" id="20931" class="WikiImage"/></p>

<p>If it does not exist, a new GAM database structure will be created and its metadata initialized (<a href="18617.html">GAM Manager Repository</a> is created). Afterwards, a new repository is going to be created with the data in the package.</p>

<p>In sum, you can:</p>

<ul>
	<li>Create a new repository (with new settings) or</li>
	<li>Update an existing repository</li>
</ul>

<p>4. When a new repository is going to be created, you are asked to enter the settings of the repository which is going to be created:</p>

<p><img src="./images/20932.png" id="20932" class="WikiImage"/></p>

<p>You need to specify:</p>

<ul>
	<li>Name of the Repository</li>
	<li><a href="https://wiki.genexus.com/commwiki/wiki?18678,," target="_blank">Repository Namespace</a></li>
	<li>Description</li>
	<li>Administrator Role: here specify the role of the package which is going to be associated to the administrator user which is going to be created. This role by definition needs to have the is_gam_administrator permission.</li>
	<li>Connection user name / Connection user password : specify a user which is going to be created as a new connection user.</li>
	<li>Administrator user name / Administrator user password : specify a user which is going to be created as an administrator user.<br />
	<br />
	Note that a new adminstrator user is going to be created, as well as a new connection user. The connection.gam file is updated with the new <a href="16150.html">GAM Repository Connection</a>. The connection.gam file is generated in the folder where the GAM Deploy Tool is being executed.</li>
</ul>

<p>5. The import can be full or custom (the latter option asks the user to specify further information later).</p>

<p><img src="./images/18880.png" id="18880" class="WikiImage"/></p>

<p>6. Nowadays you can select to import Roles, and Applications.</p>

<p><img src="./images/20975.png" id="20975" class="WikiImage"/></p>

<p><img src="./images/20976.png" id="20976" class="WikiImage"/></p>

<ul>
	<li>If you are creating a new repository the settings of the repository which have been exported are not copied to the new repository. Otherwise, if the import is done in an existing repository, all the settings of the original repository (where the export was done) are copied to the repository where you are doing the import except for RepName, RepDsc, RepNamespace, RepUpg, RepVer, RepId, RepGUID columns.<br />
	 </li>
	<li>In case of selecting to import Roles, all the Roles in the package are imported in the database.<br />
	If a role being imported does not exist in the repository, it is created, taking into account the hierarchy of the roles in the original repository (where the export was done).<br />
	If a role being imported already exists in the repository, it is updated.<br />
	<br />
	If you select Roles and not Applications, the Roles are imported without any relation to Permissions.<br />
	 </li>
	<li>If the role has permissions associated to it in the package, the only way to import the role and its permissions is to select the application where the permissions are defined. In this scenario, when imported, the permissions will be associated to the corresponding application and the roles will be imported with their relation to the permissions.<br />
	<br />
	When you select to import Applications and Roles, all the permissions in those applications are imported, no matter if they belong to any of the roles in the package or not.<br />
	 </li>
	<li>If you select to import applications, the permissions of the selected applications are created in the repository if they do not exist, taking into account the hierarchy of the permissions in the original repository.<br />
	If the permissions already exist, they are updated in the repository.<br />
	 </li>
	<li>When exporting Roles (and Users also), the Security Policies related to them are also exported (the default Security Policy of Roles and Users). So, in case of importing Roles (Users), the Security Policies of the Roles (Users) are inserted if they do not exist in the database.<br />
	If they already exist they are updated only if you are doing a Full Import.<br />
	In case of Custom import where you can only import Roles and Applications, the Security Policies related to Roles (Users) are not updated if they already exist in GAM database.<br />
	 </li>
	<li>Permissions and roles are identified by a GUID, not by their name. If you import roles or permissions which exist in the repository with the same name, but different GUID, they will be considered as different entities. If you always perform the export from the same database, this will not happen surely. A scenario where this can happen is such that you create manually a role or permission in production database, and afterwards create it in development database. When doing the export from development, the role or permission will have a different GUID than the GUID it has in production database, so they are considered to be different although the have the same name.<br />
	Note: You can get the error &quot;Repository, Application, Name already exists (BC: 1)(42)&quot; if you try to update permissions that have the same name and different GUID, because the permissions name has a unique key defined. See <a href="https://wiki.genexus.com/commwiki/wiki?36383,," target="_blank">How to Solve GAM deploy tool error: Repository, Application, Name already exists</a><br />
	 </li>
	<li>When importing data, registers of the database are never deleted. To take it as an example, if a role being imported is associated to fewer permissions than the role in the database where you are doing the import, the relation of the role to the permissions in the database is not deleted. The relation to new permissions is added.<br />
	<br />
	Another example is that, if a role is son of a role X in the database where you are performing the import, and in the package the same role is son of role Y, after the import the role will have both parents, X and Y. The same happens to the permissions hierarchy.<br />
	 </li>
	<li>The <a href="16150.html">GAM Repository Connections</a> of the package are inserted in the repository where the import is done, but their name is changed. The new name is &lt;original name&gt; + Repository Id.</li>
</ul>

<h3><a id="Note" class="HashLink" href="#Note">Note</a></h3>

<p>A possible scenario is that you migrate data from a GAM database version X to a GAM database version Y, where X &gt; Y. The conversion of GAM database structure is done automatically by the GAM deploy tool. It executes the corresponding reorganization and copies the data. At present the data is only updated.</p>

<h3><a id="See+also" class="HashLink" href="#See+also">See also</a></h3>

<p><a href="https://wiki.genexus.com/commwiki/wiki?22017,," target="_blank">Import Users - GAM Deploy Tool</a><br />
<a href="18610.html">GAM Deploy Tool : Creating connection.gam file</a></p>

<p><br />
<span style="line-height: 1.6em;"></span><br />
<span style="line-height: 1.6em;"></span><br />
<span style="line-height: 1.6em;"></span></p>

<p><br />
</p>
<br />
<br /></td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="18608.html">GAM Deploy Tool</a></TD><TD><a href="18872.html">GAM Deploy Tool: Export Data</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:18 PM</em></font></td></TR></table></font>