<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Secure REST API using GAM</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?50055,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Secure REST API using GAM</h1>
<!--Secure REST API using GAM--><div class="TableWikiBody" id="tblwikibody"><p>This article describes how the <a href="24746.html">GAM</a> module can allow you to set appropriate security for your REST API service.</p>

<p>First, in the main GeneXus Menu select: <strong>Tools &gt; GeneXus Access Manager &gt; Enable Integrated Security</strong>. A new window is opened. Click on the Yes button to enable GAM.</p>

<p>Next, go to your <a href="46151.html">API object</a> (for example, APICustomers, created in <a href="50051.html">this article</a>) and set a value for its <a href="15214.html">Integrated Security Level property</a>. In this example, you have a restricted API object, so it is not enough to authenticate the application. In addition, the user who tries to use the service must have the necessary permissions to be able to do so. Thus, set the Integrated Security Level property to Authorization, and modify the <a href="https://wiki.genexus.com/commwiki/wiki?17571,," target="_blank">Permission Prefix property</a> to easily identify the permission when assigning it to a user. In this example, the suffix "123" was added to the "APICustomers" permission name. </p>

<p><img src="./images/50274.jpg" id="50274" class="WikiImage"/></p>

<p>Select <a href="5691.html">Rebuild All</a> and accept to create GAM tables.</p>

<p>Execute the GAM web back end and configure a new user, giving it permissions over the "apicustomers123_Services_Execute" permission name.</p>

<p>Read these articles to learn <a href="https://wiki.genexus.com/commwiki/wiki?19913,," target="_blank">how to create a Registration with GAM</a> and to give <a href="15912.html">GAM - Permissions</a>.</p>

<p>Identify Client_Id from the application and copy its value in memory. It will be useful in the next steps. </p>

<p>Next, try to execute some method again using Postman or any other software tool.</p>

<p>Since security is now activated in the service, you will get this as a response: <br />
 </p>

<pre class="Code" style="margin-left: 80.0px;">
{ 
      "error":{
           "code":"0",
           "message": "This service needs an Authorization Header"
      }
}</pre>

<p> </p>

<p>Follow the instructions on <a href="15918.html">HowTo: Develop Secure REST Web Services in GeneXus</a> to obtain the <a href="45320.html">Access_token</a> using the Client_Id of the application, the user and password of the registered user and the following header.</p>

<p> </p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
<span style="">Content-Type</span>

application/x-www-form-urlencoded</pre>

<p class="Code"> </p>

<p class="Code">This token is the key to getting access to all services. All you need to do is set an Authorization header using the value returned by the <a href="45320.html">Access_token</a>.<span id="cke_bm_189E" style="display: none;"> </span></p>

<p>Using the Authorization method, and managing permissions through the GAM backend, the new registered user will be able to execute all the services provided by the <a href="46151.html">API object</a>.</p>

<p>Below can see all the steps being run:</p>

<p><img src="./images/50035.gif" id="50035" class="WikiImage"/></p>

<p><br />
</p>
</div><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="49754.html">Toc:First Steps with API Objects</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 06/09/22 12:53 PM</em></font></td></TR></table></font>