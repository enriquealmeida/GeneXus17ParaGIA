<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Where clause</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?8578,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Where clause</h1>
<!--Where clause--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>Indicates a list of conditions that must be matched by the data in order to be processed within the level —<a href="24744.html">For Each command</a> or <a href="25082.html">Data provider Group statement</a>—. The conditions are boolean expressions, simples or very complex nested ones.</p>

<p><span style="line-height: 1.6em;">It is possible to specify more than one Where clause. In this case, the conditions are evaluated as if they were separated by an </span><strong style="line-height: 1.6em;">'and'</strong><span style="line-height: 1.6em;"> operator.  </span></p>

<h3><a id="Syntax" class="HashLink" href="#Syntax">Syntax</a></h3>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td>{<strong>where   </strong></td>
			<td>{<em>&lt;condition&gt;</em> [<strong>when</strong> <em>&lt;constraint&gt;</em>]}  |  </td>
		</tr>
		<tr>
			<td> </td>
			<td>{ [<strong>not</strong>]<em>&lt;attribute&gt;</em> <strong>in</strong> <em>&lt;DataSelectorName&gt;</em>( [<em>&lt;parameterList&gt;</em>]) }}...</td>
		</tr>
	</tbody>
</table>

<p> </p>

<p>Where:</p>

<p><i>&lt;condition&gt;</i></p>

<p style="margin-left: 40.0px;">specifies any valid logical expression to condition the data retrieval. It can be a compound condition, using 'and', 'or' and 'not' logical operators.</p>

<p style="margin-left: 40.0px;">Those attributes appearing in the boolean condition may be either from the for each <a href="6347.html">Base Table</a> or from its <a href="6029.html">Extended Table</a>. In some cases, attributes that do not belong to the extended table can be included. See <a href="2015.html">Filters As Hint</a> for more details.</p>

<p style="margin-left: 40.0px;">The occurrence of n where clauses is equivalent to the occurrence of only one where clause, with the boolean conjunction of the conditions.</p>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td>
			<p style="margin-left: 40.0px;"><em>&lt;condition&gt;</em> ::= </p>
			</td>
			<td>[<strong>not</strong>] <em>&lt;condition&gt;</em> [ {<strong>or</strong> | <strong>and</strong>} <em>&lt;condition&gt;</em>]</td>
		</tr>
		<tr>
			<td> </td>
			<td>[<strong>(</strong>] <em>&lt;condition&gt;</em> [<strong>)</strong>]</td>
		</tr>
		<tr>
			<td> </td>
			<td><em>&lt;relationalExpr&gt;</em></td>
		</tr>
		<tr>
			<td> </td>
			<td><em>&lt;stringExpr&gt; </em><strong>like </strong><em>&lt;stringExpr&gt;</em></td>
		</tr>
		<tr>
			<td> </td>
			<td><em>&lt;booleanFunctionExpr&gt;</em></td>
		</tr>
	</tbody>
</table>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td>
			<p style="margin-left: 40.0px;"><em>&lt;relationalExpr&gt;</em> ::= </p>
			</td>
			<td><em>&lt;expr&gt; </em>[ {<strong>&gt;</strong> | <strong>&gt;=</strong> | <strong>=</strong> | <strong>&lt;</strong> | <strong>&lt;=</strong>} <em>&lt;expr&gt; </em>]</td>
		</tr>
		<tr>
			<td> </td>
			<td colspan="2" rowspan="1">
			<p style="margin-left: 40.0px;"><em>&lt;expr&gt;</em> is an expression. If used for comparison, its datatype has to allow comparison (i.e. numeric, character, etc.). It can also be an aggregate formula (inline) (i. e: count, sum, min, max, average).</p>
			</td>
		</tr>
	</tbody>
</table>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td>
			<p style="margin-left: 40.0px;"><em>&lt;booleanFunctionExpr&gt;</em> ::= </p>
			</td>
			<td><strong>True</strong> | <strong>False</strong> | <em>&lt;bool_attribute&gt;</em> | <em>&lt;bool_variable&gt;</em> | <em>&lt;bool_function&gt;</em><strong>(</strong> <em>&lt;expr&gt;</em> <strong>) </strong>| <em>&lt;bool_proc&gt;</em>}<strong>(</strong> [<em>&lt;parametersList&gt;</em>] <strong>)</strong></td>
		</tr>
		<tr>
			<td> </td>
			<td>
			<p style="margin-left: 40.0px;"><em>&lt;bool_attribute&gt;</em>, <em>&lt;bool_variable&gt;</em> are attribute/variable of a Boolean datatype, respectively. </p>

			<p style="margin-left: 40.0px;"><em>&lt;bool_fuction&gt;</em> is a function returning a boolean result (True or False). &lt;expr&gt; is an expresion of the datatype required by <em>&lt;bool_function&gt;</em>. </p>

			<p style="margin-left: 40.0px;"><em>&lt;bool_proc&gt;</em> is a user-defined Procedure that returns a boolean value. </p>
			</td>
		</tr>
	</tbody>
</table>

<p></p>

<p><em>&lt;constraint&gt;</em></p>

<p style="margin-left: 40.0px;">is a <em>&lt;condition&gt;</em> that specifies when the where clause will apply. In client/server platforms, the <a href="8629.html">When clause</a> of each where clause is first evaluated, and if its condition is met, the filter specified by the where clause will be applied. See more about <a href="8629.html">When clause</a>.</p>

<p>[<strong>not</strong>]<em>&lt;attribute&gt;</em> <strong>in</strong> <em>&lt;DataSelectorName&gt;</em>( [<em>&lt;parameterList&gt;</em>])</p>

<p style="margin-left: 40.0px;">The <a href="5271.html">Data Selector object</a> determines a query itself. This means that a SELECT sentence will be generated for the Data selector definition, which will be a different and independent SELECT from the level one—<a href="24744.html">For Each command</a> or <a href="25082.html">Data provider Group statement</a>—. Thus, it will return a collection of values corresponding to the same definition as the <em>&lt;attribute&gt;</em>. This &lt;attribute&gt; must belong to the extended table of the Data Selector base table. <span style="line-height: 1.6em;">See more: <a href="5312.html">Data Selectors in For Each command</a>.</span></p>

<h3><a id="Conditions+as+properties" class="HashLink" href="#Conditions+as+properties">Conditions as properties</a></h3>

<p>The same concept but with a slightly different syntax (for example, without the 'where' keyword) applies to <a href="5271.html">Data Selectors</a>, as well as 'Conditions' section of <a href="6916.html">Web panels</a>, <a href="24829.html">Panel object</a> and <a href="15974.html">Work With for Smart Devices object</a>, as well as grid 'Conditions' property.  </p>

<h3><a id="Optimization" class="HashLink" href="#Optimization">Optimization</a></h3>

<p><em>&lt;Condition&gt;</em> in the where clause constraints the dataset that is obtained. However, more than that is meant here. There is a great difference between a full scan table access and an index-optimized random access. If applying some rules of logic, GeneXus determines that the order clause (or the primary key order) is compatible with the where condition(s), it optimizes the access to the table using indices and not doing a full table scan. This is obviously the desired behavior whenever possible.</p>

<p>The conditions that can be optimized are the ones that use the operators: '&gt;', '&gt;=', '=', '&lt;' and '&lt;='.</p>

<p>If the Where condition is optimized, it will appear as &quot;Navigation Filter&quot; in the Navigation report. Otherwise, it will appear as &quot;Constraint&quot;.</p>

<p>Be sure that the conditions used in the where clause respect type definitions. If this is not the case, an error message indicating a type mismatch will be displayed.</p>

<p>See more about <a href="12566.html">Conditional Orders and Filters</a>. </p>

<h3><a id="Examples" class="HashLink" href="#Examples">Examples</a></h3>

<p>1. Suppose you need to print the customer names for those customers who were born in a certain country and after a certain date. </p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
For Each Customer
Where CountryId = &amp;CountryId
Where CustomerBirthDate.year() &gt;= &amp;youngDate
    print youngCustomer //printblock with: CustomerName
EndFor</pre>

<p>Note the code is valid only as of <a href="https://wiki.genexus.com/commwiki/wiki?20247,," target="_blank">GeneXus X Evolution 3</a> because you have included the <a href="25418.html">Base Transaction clause</a> in order to specify the base table. Remember this is not mandatory, and you could not include it. In such a case, the code will be valid for previous GeneXus versions. </p>

<p><span style="line-height: 1.6em;">CountryId, CustomerBirthDate, and CustomerName belongs to CUSTOMER extended table. Note you have not specified an </span><a href="6075.html">order</a><span style="line-height: 1.6em;">. This will affect the performance as you can see in </span><a href="12566.html">Conditional Orders and Filters</a>. </p>

<p>2. Now suppose &amp;CountryId is set by the end-user, by means of a web panel, for instance. As the user can let the variable empty, you need the filter will not be applied in that case:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
for each Customer
where CountryId = &amp;CountryId <strong>when not &amp;CountryId.lsEmpty()</strong>
where CustomerBirthDate.year() &gt;= &amp;youngDate
    print youngCustomer // printblock with: CustomerName
endfor</pre>

<p>3. If you need in several objects to filter the young customers of a certain country, probably you would have created a Data selector in order to define that query:</p>

<p><img src="./images/25525.jpg" id="25525" class="WikiImage"/></p>

<p>Thus, the previous for each would be:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
for each Customer
<strong>where CustomerId in YoungCustomer( &amp;CountryId, &amp;youngDate )</strong>
   print youngCustomer // printblock with: CustomerName
endfor</pre>

<p>4. Finally, you need to print the countries for which you have more than one hundred customers:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
for each Country
<strong>where Count( CustomerName ) &gt; 100</strong>
   print countryInfo //printblock with: CountryName
endfor</pre>

<p>Note the For each base table is now COUNTRY.</p>

<h3><a id="Scope" class="HashLink" href="#Scope">Scope</a></h3>

<p><strong>Commands:</strong> <a href="24744.html">For Each command</a>, <a href="8596.html">Xfor Each command</a>, <a href="8601.html">Xfor First command</a>, <a href="25082.html">Data provider Group statement</a></p>

<h3><a id="See+Also" class="HashLink" href="#See+Also">See Also</a></h3>

<p><a href="12566.html">Conditional Orders and Filters</a></p>

<p></p>

<p></p>

<p></p>

<p></p>

<p><br />
</p>
<br />
<br />
</td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="25082.html">Data provider Group statement</a></TD></TR><TR><TD><a href="24744.html">For Each command</a></TD><TD><a href="22331.html">Toc:GeneXus - Table of contents</a></TD><TD><a href="6426.html">Inline Formulas within a contextual table</a></TD></TR><TR><TD><a href="5100.html">Order Clause Specification</a></TD><TD><a href="8629.html">When clause</a></TD><TD><a href="8596.html">Xfor Each command</a></TD></TR><TR><TD><a href="8601.html">Xfor First command</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 06/09/21 05:47 PM</em></font></td></TR></table></font>