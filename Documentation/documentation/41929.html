<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>CardScanner External Object</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?41929,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">CardScanner External Object</h1>
<!--CardScanner External Object--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><img src="./images/42024.png" id="42024" class="WikiImage"/></td>
			<td><img src="./images/42025.png" id="42025" class="WikiImage"/></td>
		</tr>
	</tbody>
</table>

<p> </p>

<p>Enables the easy extraction of information from a credit card.</p>

<p>Takes a cropped photo of the credit card and automatically captures the card number. This is possible only in the case of engraved figures. For the case of printed numbers, the manual entry of the credit card numbers will be required. The information obtained is stored in the CardInformation SDT. </p>

<h2><a id="Properties" class="HashLink" href="#Properties"><strong>Properties</strong></a></h2>

<h3><a id="IsAvailable+" class="HashLink" href="#IsAvailable+"><strong>IsAvailable </strong></a></h3>

<p>Enables us to know if the External Object may be used on the device. Returns True if it's possible. Otherwise, it returns False.</p>

<h3><a id="CollectCardholderName" class="HashLink" href="#CollectCardholderName"><strong>CollectCardholderName</strong></a></h3>

<p>When the value of this property is set up as True, the external object will request the user of the application to enter the Cardholder Name of the credit card.</p>

<h3><a id="CollectCVV" class="HashLink" href="#CollectCVV"><strong>CollectCVV</strong></a></h3>

<p>When the property value is set as True, the external object will request the user of the application to enter the Card Verification Value of the credit card. </p>

<h3><a id="CollectExpiry" class="HashLink" href="#CollectExpiry"><strong>CollectExpiry</strong></a></h3>

<p>When the property value is set as True, the external object will request the user of the application to enter the credit card's expiry date. </p>

<h3><a id="CollectPostalCode" class="HashLink" href="#CollectPostalCode"><strong>CollectPostalCode</strong></a></h3>

<p>When the value of this property is set as True, the external object will request the user of the application to enter the postal code associated with the card.</p>

<h3><a id="DetectionMode" class="HashLink" href="#DetectionMode"><strong>DetectionMode</strong></a></h3>

<p>Allows changes between the various scan modes for the credit card using the CardDetectionMode domain.</p>

<h3><a id="DisableManualEntry" class="HashLink" href="#DisableManualEntry"><strong>DisableManualEntry</strong></a></h3>

<p>When the value of this property is set as True, the option for the user to enter the card number manually is disabled.</p>

<h3><a id="RestrictPostalCodeNumeric" class="HashLink" href="#RestrictPostalCodeNumeric"><strong>RestrictPostalCodeNumeric</strong></a></h3>

<p>When the value of this property is set as True, only numbers are allowed as entry for the postal code value.</p>

<h3><a id="ScanExpiry" class="HashLink" href="#ScanExpiry"><strong>ScanExpiry</strong></a></h3>

<p>When the value of this property is set as True, there is an attempt to read the card's expiry date. This is possible only when the date has been engraved. It does not work for cases with printed expiry dates. By default, the value of this property is set as True.</p>

<h3><a id="ScanInstructionsText" class="HashLink" href="#ScanInstructionsText"><strong>ScanInstructionsText</strong></a></h3>

<p>Allows customizing the instructions shown on screen.</p>

<h3><a id="SuppressScanConfirmation" class="HashLink" href="#SuppressScanConfirmation"><strong>SuppressScanConfirmation</strong></a></h3>

<p>When the value of this property is set as True, the confirmation is eliminated following the card's scan. The EXO's behavior will enable the capture of the credit card and it will end the action. When this property is set as False, following the card's scan, it will enable the user to enter additional data manually. The default value of this property is True.   </p>

<h2><a id="Methods" class="HashLink" href="#Methods"><strong>Methods</strong></a></h2>

<h3><a id="ScanCard" class="HashLink" href="#ScanCard"><strong>ScanCard</strong></a></h3>

<h2><a id="Domains" class="HashLink" href="#Domains"><strong>Domains</strong></a></h2>

<h3><a id="CardDetectionMode" class="HashLink" href="#CardDetectionMode"><strong>CardDetectionMode</strong></a></h3>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><strong>Image&amp;Number</strong></td>
			<td>Allows taking a photo of the credit card and capturing its number automatically (as long as figures are engraved, but not printed). Default value of property DetectionMode.</td>
		</tr>
		<tr>
			<td><strong>Image Only</strong></td>
			<td>Only takes a photo of credit card and then requests the manual entry of card number.</td>
		</tr>
		<tr>
			<td><strong>Automatic</strong></td>
			<td>By default, it has the same behavior as if it had value Image&amp;Number, though in case it becomes impossible to capture card numbers, it will photograph the card after a period of time and then it will request the manual entry of numbers. In GeneXus v16 Upgrade 2, this option is supported only by the iOS generator.</td>
		</tr>
	</tbody>
</table>

<h2><a id="Structure+Data+Type" class="HashLink" href="#Structure+Data+Type"><strong>Structure Data Type</strong></a></h2>

<h3><a id="Card+Information" class="HashLink" href="#Card+Information"><strong>Card Information</strong></a></h3>

<p><strong>CardNumber: </strong>Varchar(40)</p>

<p>Stores number of the card scanned.</p>

<p><strong>RedactedCardNumber: </strong>Varchar(40)</p>

<p>This will be the field for storage in cases where the number is entered manually.</p>

<p><strong>ExpiryMonth:</strong> Numeric(2.0)</p>

<p>Stores the month of expiry.</p>

<p><strong>ExpiryYear:</strong> Numeric(2.0)</p>

<p>Stores the year of expiry.</p>

<p><strong>CVV: </strong>Varchar(40)</p>

<p>Stores the Card Verification Value.</p>

<p><strong>PostalCode: </strong>Varchar(40)</p>

<p>Stores the postal code value.</p>

<p><strong>CardHolderName: </strong>Varchar(200)</p>

<p>Stores the name of the credit card holder.</p>

<p><strong>CardImage:</strong> Image</p>

<p>Stores the photo of the credit card scanned.</p>

<p><strong>CardType: </strong>CreditCardType</p>

<p>Stores the payment company for the credit card (Visa, Mastercard, etc.)</p>

<p><strong>CardLogo: </strong>Image</p>

<p>Stores the logo of the payment company for the credit card.</p>

<h2><a id="Example" class="HashLink" href="#Example"><strong>Example</strong></a></h2>

<p>The example below shows a possible implementation for this External Object. The idea behind it is to act as an example for readers. </p>

<p>You will create a Panel for Smart Devices where you will place variables like the following. </p>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><img src="./images/42034.png" id="42034" class="WikiImage"/></td>
		</tr>
	</tbody>
</table>

<p>Due to panel customization reasons, it was decided that Card Information SDT will not be used directly, so that there is more control over the view of the panel.</p>

<p>The properties of the EXO are now set up in the following manner:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event ClientStart 
    Composite
        CardScanner.CollectCardholderName        = True
        CardScanner.CollectCVV                   = True
        CardScanner.CollectExpiry                = True
        CardScanner.CollectPostalCode            = True
        CardScanner.SuppressScanConfirmation     = False
    EndComposite
Endevent</pre>

<p>We will now include the following code in the event of the Scan Creditcard button:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event 'ScanCreditcard'
     Composite
        If CardScanner.IsAvailable
            &amp;CardInformation    = CardScanner.ScanCard()
        Else
            msg(&quot;Scan isn't available&quot;, nowait)
        EndIf
    
        &amp;CVV                = &amp;CardInformation.CVV
        &amp;Name               = &amp;CardInformation.CardHolderName
        &amp;Month              = &amp;CardInformation.ExpiryMonth
        &amp;Year               = &amp;CardInformation.ExpiryYear
        &amp;CardNumber         = &amp;CardInformation.CardNumber
        &amp;PostalCode         = &amp;CardInformation.PostalCode
        
    EndComposite
Endevent</pre>

<p>When the event is triggered, we will view a screen so that (these images are provided for illustrative purposes only): </p>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><img src="./images/42035.png" id="42035" class="WikiImage"/></td>
		</tr>
	</tbody>
</table>

<p> </p>

<p>In this screen, the user of the application has the option of capturing an image of the credit card or the alternative of entering data manually by tapping on the Keyboard button.</p>

<p>Once the credit card data has been scanned, a view like the following will be shown on screen (in our example, it would show the credit card number and the expiry date):</p>

<p> </p>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><img src="./images/42036.png" id="42036" class="WikiImage"/></td>
		</tr>
	</tbody>
</table>

<p> </p>

<p> </p>

<h2><a id="Scope" class="HashLink" href="#Scope"><strong>Scope</strong></a></h2>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><strong>Platforms</strong></td>
			<td>SmartDevices(Android, iOS)</td>
		</tr>
	</tbody>
</table>
 

<p></p>

<p></p>

<p></p>
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:16 PM</em></font></td></TR></table></font>