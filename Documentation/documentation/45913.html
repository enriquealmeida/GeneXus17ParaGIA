<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Configuration.ExternalStorage External Object</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?45913,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Configuration.ExternalStorage External Object</h1>
<!--Configuration.ExternalStorage External Object--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>With this functionality, you can change at runtime the Storage Provider set in the <a href="31121.html">Storage Provider property</a>, change its settings, or connect to other Storage Providers configured in cloudservices.config.</p>

<p>An external object called GeneXus.Common.Configuration.ExternalStorage that is part of the <a href="31268.html">GeneXus Core module</a> exposes all the methods needed for this functionality.</p>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="vertical-align: top;"><img src="./images/45929.png" id="45929" class="WikiImage"/></td>
			<td style="vertical-align: top;"><img src="./images/45916.png" id="45916" class="WikiImage"/></td>
		</tr>
	</tbody>
</table>

<h3><a id="Methods" class="HashLink" href="#Methods">Methods</a></h3>

<h4><a id="Create+method" class="HashLink" href="#Create+method"><strong>Create method</strong></a></h4>

<p>Returns an instance of the Storage Provider that is being used in the programs as configured in the <a href="31121.html">Storage Provider property</a> configured in the environment.</p>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="vertical-align: top;"><strong>Return value</strong></td>
			<td style="vertical-align: top;">Boolean</td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><strong>Parameters</strong></td>
			<td style="vertical-align: top;">ProviderType:StorageProviderType,<br />
			Properties:<a href="31606.html">Properties Data Type</a>,<br />
			OutStorageProvider:StorageProvider,<br />
			OutMessages:Messages</td>
		</tr>
	</tbody>
</table>

<p><div style="background-color: rgb(255,255,204);border-left: 6.0px solid rgb(255,255,0);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><strong>Warning</strong>:  Temporary Restriction: The &amp;Properties input must include authentication credentials for your provider.</div>
</p>

<h4><br />
<strong>Connect method</strong></h4>

<p>Given a ProfileName defined in CloudServices.config, returns an instance of the corresponding Storage Provider.</p>

<table border="0" cellpadding="1" cellspacing="1">
	<tbody>
		<tr>
			<td style="vertical-align: top;"><strong>Return value</strong></td>
			<td style="vertical-align: top;">Boolean</td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><strong>Parameters</strong></td>
			<td style="vertical-align: top;">ProfileName:Character,<br />
			Properties:<a href="31606.html">Properties Data Type</a>,<br />
			OutStorageProvider:StorageProvider,<br />
			OutMessages:Messages</td>
		</tr>
	</tbody>
</table>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  Temporary Restriction: The only supported value for ProfileName is 'Default'.</div>
</p>

<h3><a id="Domains" class="HashLink" href="#Domains">Domains</a></h3>

<h4><a id="StorageProvider+domain" class="HashLink" href="#StorageProvider+domain"><strong>StorageProvider domain</strong></a></h4>

<p>Enumerated domain with the Storage Provider Types available in <a href="31121.html">Storage Provider property</a>:</p>

<table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td><strong>Amazon_S3</strong></td>
			<td> </td>
		</tr>
		<tr>
			<td><strong>Box</strong></td>
			<td>Not supported</td>
		</tr>
		<tr>
			<td><strong>Google_CloudStorage </strong></td>
			<td> </td>
		</tr>
		<tr>
			<td><strong>IBM_Bluemix</strong></td>
			<td>Not supported</td>
		</tr>
		<tr>
			<td><strong>IBM_ObjectStorage</strong></td>
			<td> </td>
		</tr>
		<tr>
			<td><strong>Microsoft_Azure</strong></td>
			<td> </td>
		</tr>
		<tr>
			<td><strong>OpenStack</strong></td>
			<td>Not supported</td>
		</tr>
	</tbody>
</table>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  Supported values depend on the existence of the corresponding implementation in <a href="31121.html">Storage Provider property</a> for the generator or installation that is being used.</div>
</p>

<h3><a id="Examples" class="HashLink" href="#Examples">Examples</a></h3>

<p>In these samples:</p>

<ul>
	<li>&amp;Properties is of <a href="31606.html">Properties Data Type</a></li>
	<li>&amp;StorageProvider, &amp;fromStorageProvider, &amp;toStorageProvider are of <a href="32087.html">Storage Provider API</a> data type</li>
	<li>&amp;ExternalStorage, &amp;fromExternalStorage, &amp;toExternalStorage are of GeneXus.Common.Configuration.ExternalStorage data type</li>
	<li>&amp;Messages is of GeneXus.Common.Messages data type.</li>
</ul>

<p><strong>Use case 1</strong>: Just change a property (i.e.: the Bucket name)</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;Properties = new()
&amp;Properties.set(!&quot;BUCKET_NAME&quot;, !&quot;my-bucket&quot;)
if &amp;ExternalStorage.Connect(!&quot;Default&quot;, &amp;Properties, &amp;StorageProvider, &amp;Messages)
     //{{ use &amp;StorageProvider }}
endIf</pre>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  &quot;Default&quot; makes reference to the one defined in the <a href="31121.html">Storage Provider property</a> at design time.</div>
</p>

<p><strong>Use case 2</strong>: Completely configure a provider at runtime</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;Properties = new()
&amp;Properties.set(!&quot;STORAGE_PROVIDER_ACCESSKEYID&quot;, !&quot;{access-key-id_by-S3}&quot;)
&amp;Properties.set(!&quot;STORAGE_PROVIDER_SECRETACCESSKEY&quot;, !&quot;{secret-access-key_by-S3}&quot;)
&amp;Properties.set(!&quot;STORAGE_ENDPOINT&quot;, !&quot;{endpoint_by-S3}&quot;)
if &amp;ExternalStorage.Create(StorageProviderType.Amazon_S3, &amp;Properties, &amp;StorageProvider, &amp;Messages)
     //{{ use &amp;StorageProvider }}
endIf</pre>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  This case is useful for multitenant scenarios, where for each tenant you need to use another storage environment.</div>
</p>

<p><strong>Caso 3</strong>: Copy objects (files) from one Bucket or storage environment to another</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
&amp;AWSProperties.clear()
&amp;AzureProperties.clear()
if &amp;ExternalStorage.Create(StorageProviderType.Amazon_S3, &amp;AWSProperties, &amp;OutStorageProvider, &amp;OutMessages)
    //{{ &amp;OutStorageProvider points to Amazon, now you can download the files from there }}
    if &amp;ExternalStorage.Create(StorageProviderType.Microsoft_Azure, &amp;AzureProperties, &amp;OutStorageProvider, &amp;OutMessages)    
        //{{ &amp;OutStorageProvider now points to Azure, and you can upload the previously downloaded files to Azure }}
    endIf 
endIf</pre>

<p><div style="background-color: rgb(255,255,204);border-left: 6.0px solid rgb(255,255,0);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><strong>Warning</strong>:  Only one instance of StorageProvider Data type can be used in a program. That is why the same variable &amp;OutStorageProvider has been used in case 3.</div>
</p>

<h3><a id="Scope" class="HashLink" href="#Scope">Scope</a></h3>

<p>Cases 1 and 2 are supported in .NET, .NET Core, and Java generators.</p>

<p>Case 3 is, as of GeneXus 16 Upgrade 10, only supported in .NET and .NET Core generators.</p>

<p><h3><a id="Availability" class="HashLink" href="#Availability">Availability</a></h3>

<p> This feature is available since  <a href="https://wiki.genexus.com/commwiki/wiki?45624,," target="_blank">GeneXus 16 upgrade 10</a>.</p>

<p></p>
</p>

<h3><a id="See+Also" class="HashLink" href="#See+Also">See Also</a></h3>

<ul>
	<li><a href="32087.html">Storage Provider API</a></li>
</ul>

<p></p>
<br />
</td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="46595.html">Flexibility and Quality with Genexus 17</a></TD><TD><a href="32087.html">Storage Provider API</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 02/10/21 12:57 PM</em></font></td></TR></table></font>