<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Versioning Your Native Mobile Application</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?17223,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Versioning Your Native Mobile Application</h1>
<!--HowTo: Versioning Your Native Mobile Application--><div class="TableWikiBody" id="tblwikibody"><p>Application versioning is a critical component of its maintenance. End users always need specific information about the application version that is installed on their devices and which upgrade version is available for installation.</p>

<p>Also, the application may need to query the system for your application's version, to determine compatibility and identify dependencies. For example, the publishing service may need to check the application version to determine compatibility and establish upgrade/downgrade relationships. The native mobile apps generated by GeneXus are installed on the devices, so when you are about to launch a new version of your app you take the risk that your older version quits working or starts failing because some changes have been made on the server side of your application.</p>

<h2><a id="A+little+background" class="HashLink" href="#A+little+background">A little background</a></h2>

<p>The core of every GeneXus Native Mobile application is the <a href="14981.html">Flexible Client</a>. This means that the app can detect whether the server has a newer or updated version of the metadata and then begin to operate using that version.</p>

<p>Flexible Clients bring many advantages:</p>

<ul>
	<li>You can update some parts of your app without the need to wait for the entire approval stages of the app stores.</li>
	<li>Users of older clients are advised that an update is needed and automatically start to update the client version.</li>
</ul>

<p>However, this does not cover every scenario. For example, when newer versions introduce some changes in binary code, such as a new User Control, the Flexible Client is not going to be able to update itself to the newer version. In this case, a &quot;<em>Not Supported Client scheme</em>&quot; situation is going to be applied. To sum up, if the metadata version needs to be updated (a <em>minor change</em> occurs), as a developer you want your app to automatically start updating. On the other hand, if there is a scenario of &quot;<em>Not Supported client scheme</em>&quot; (a <em>major change</em> occurs), the best option is that the application redirects the user to the store to download the most recent version.</p>

<p>This document explains how versioning is used in GeneXus for Native Mobile by developing a simple example.</p>

<h2><a id="Main+components" class="HashLink" href="#Main+components">Main components</a></h2>

<p>There are three properties per platform in the <a href="17817.html">Native Mobile Main object</a> level involved in the versioning process.</p>

<ul>
	<li><strong>Version code</strong><br />
	A string value composed of two numbers X and Y separated by a '.' (period) that represents the application version, relative to others. The X indicates a major upgrade and Y a minor upgrade. For example, a value of &quot;2.4&quot; means that the application was upgraded twice in a major way and four times in a minor way relative to the major version.<br />
	 </li>
	<li><strong>Version name </strong><br />
	A string value that represents the release version of the application as it is shown to the end user. For simplicity, it should have the same value as the above property followed by a period and a build number (e.g. &quot;2.4.126&quot;).<br />
	 </li>
	<li><strong>Where the application must be updated</strong><br />
	A URL where the application can be downloaded (usually, a store) in case that the end user needs a major upgrade.</li>
</ul>

<p>Let's see the behavior on each platform.</p>

<h3>Android-specific<br />
 </h3>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="width: 220.0px;vertical-align: top;"><strong>Android Version Code property</strong></td>
			<td style="vertical-align: top;">Every time the developer publishes a newer version of the application (the *.apk file), an upgrade of this value is required by <a href="15948.html">Google Play Store</a> (or another store). Otherwise, it will display an error message like this:<br />
			<img src="./images/34416.png" id="34416" class="WikiImage"/><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><strong>Android Version Name property</strong></td>
			<td style="vertical-align: top;">The version which is displayed in the app details of the store.<br />
			<img src="./images/34417.png" id="34417" class="WikiImage"/><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><strong>Update URL property</strong> <sup>(1)</sup></td>
			<td style="vertical-align: top;">Refer to <a href="37262.html">this document</a>.</td>
		</tr>
	</tbody>
</table></div>

<h3>Apple-specific<br />
 </h3>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style="width: 220.0px;vertical-align: top;"><strong>Apple Version Code property</strong></td>
			<td style="vertical-align: top;">It has the same meaning as Android's version of this property after following the process of how to upgrade the application on the <a href="18958.html">Apple App Store</a>.<br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><strong>Apple Version Name property  </strong></td>
			<td style="vertical-align: top;">It applies the same concept as Android's version of this property but only on the Apple App Store.<br />
			<img src="./images/34426.png" id="34426" class="WikiImage"/><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: top;"><b>App Store URL</b></td>
			<td style="vertical-align: top;">The URL of the iTunes website where the application is hosted. It takes the following aspect:<br />
			    <em> https://itunes.apple.com/app/id&lt;your_apple_app_identifier&gt; </em> (e.g. <a href='https://itunes.apple.com/app/id887880596'>https://itunes.apple.com/app/id887880596</a>)<br />
			Where the Apple App ID is provided once the application is published (it can be queried on <a href='https://itunesconnect.apple.com'>iTunes Connect</a>).<br />
			<img src="./images/34427.png" id="34427" class="WikiImage"/><br />
			For advanced users, it can also be a custom URL pointing to a <em>manifest.plist</em> file as follows.<br />
			    <em> itms-services://?action=download-manifest&amp;url=&lt;url_to_the_manifest.plist_file&gt;</em><br />
			The <em>&lt;url_to_the_manifest.plist_file&gt;</em> must be escaped (e.g. the URL <em>http://www.my-domain.com/path/to/manifest.plist</em> should be written as<em> https%3A%2F%2Fwww.my-domain.com%2Fpath%2Fto%2Fmanifest.plist</em>)</td>
		</tr>
	</tbody>
</table></div>

<h2><a id="Behavior+when+versioning" class="HashLink" href="#Behavior+when+versioning">Behavior when versioning</a></h2>

<h3><a id="Minor+change+case" class="HashLink" href="#Minor+change+case">Minor change case</a></h3>

<p>For minor changes or changes that the app can update itself, you can change the number after the '.' (period) as follows. This action will make the app in the device automatically update the metadata information.</p>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style=""> </td>
			<td style="border-bottom: 1.0px solid black;text-align: center;"><strong>Current version</strong></td>
			<td> </td>
			<td style="border-bottom: 1.0px solid black;text-align: center;"><strong>Newer version</strong></td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Android  case  </strong><br />
			 </td>
			<td><img src="./images/34430.png" id="34430" class="WikiImage"/><br />
			 </td>
			<td><img src="./images/23846.jpg" id="23846" class="WikiImage"/><br />
			 </td>
			<td><img src="./images/34431.png" id="34431" class="WikiImage"/><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Apple case</strong></td>
			<td><img src="./images/34432.png" id="34432" class="WikiImage"/></td>
			<td><img src="./images/23846.jpg" id="23846" class="WikiImage"/></td>
			<td><img src="./images/34433.png" id="34433" class="WikiImage"/></td>
		</tr>
	</tbody>
</table></div>

<p><br />
Result</p>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style=""> </td>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;text-align: center;"><b>Detect new version </b></td>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;text-align: center;"><strong>Update finished</strong></td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Android   case  </strong><br />
			 </td>
			<td style="vertical-align: top;"><br />
			 </td>
			<td style="vertical-align: top;"><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Apple case</strong></td>
			<td style="vertical-align: top;"><img src="./images/35946.png" id="35946" class="WikiImage"/></td>
			<td style="vertical-align: top;"><img src="./images/35947.png" id="35947" class="WikiImage"/></td>
		</tr>
	</tbody>
</table></div>

<h4><a id="Messages" class="HashLink" href="#Messages">Messages</a></h4>

<p>The messages that inform the end-user that the application is being updated and that it has been updated when it finishes are customizable, by configuring the following messages in the Language objects in the KB:</p>

<ul>
	<li>GXM_UpdatingApplication</li>
	<li>GXM_ApplicationUpdated</li>
</ul>

<p>It is also possible, as from <a href="47936.html">GeneXus 17 upgrade 4</a>, to turn them off completely. To do that, set the value &quot;(none)&quot; (without the quotes) to these two messages.</p>

<h3><a id="Major+change+case" class="HashLink" href="#Major+change+case">Major change case</a></h3>

<p>For major changes where the app must be upgraded by downloading it from the store, you can change the number before the '.' (period) as follows. This action will force the end user to redirect to the store by its URL and download the newer version of the app.</p>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style=""> </td>
			<td style="border-bottom: 1.0px solid black;text-align: center;"><strong>Current version</strong></td>
			<td> </td>
			<td style="border-bottom: 1.0px solid black;text-align: center;"><strong>Newer version</strong></td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Android  case  </strong><br />
			 </td>
			<td><img src="./images/34431.png" id="34431" class="WikiImage"/><br />
			 </td>
			<td><img src="./images/23846.jpg" id="23846" class="WikiImage"/><br />
			 </td>
			<td><img src="./images/34434.png" id="34434" class="WikiImage"/><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Apple case</strong></td>
			<td><img src="./images/34433.png" id="34433" class="WikiImage"/></td>
			<td><img src="./images/23846.jpg" id="23846" class="WikiImage"/></td>
			<td><img src="./images/34435.png" id="34435" class="WikiImage"/></td>
		</tr>
	</tbody>
</table></div>

<p><br />
Result</p>

<div style="overflow-x:auto"><table border="0" cellpadding="1" cellspacing="1" style="border-collapse: collapse;">
	<tbody>
		<tr>
			<td style=""> </td>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;text-align: center;"><b>Detect new version </b></td>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;text-align: center;"><strong>Redirect to the store </strong></td>
			<td style="border-bottom: 1.0px solid black;vertical-align: top;text-align: center;"><strong>Start updating </strong></td>
		</tr>
		<tr>
			<td style="vertical-align: middle;">
			<p><strong>Android  case  </strong><br />
			 </p>
			</td>
			<td style="vertical-align: top;"><img src="./images/34436.png" id="34436" class="WikiImage"/><br />
			 </td>
			<td style="vertical-align: top;"><img src="./images/34437.png" id="34437" class="WikiImage"/><br />
			 </td>
			<td style="vertical-align: top;"><img src="./images/34438.png" id="34438" class="WikiImage"/><br />
			 </td>
		</tr>
		<tr>
			<td style="vertical-align: middle;"><strong>Apple case</strong></td>
			<td style="vertical-align: top;"><img src="./images/35410.png" id="35410" class="WikiImage"/></td>
			<td style="vertical-align: top;"><img src="./images/35948.png" id="35948" class="WikiImage"/></td>
			<td style="vertical-align: top;"> </td>
		</tr>
	</tbody>
</table></div>

<h2><a id="What+does+the+device+perform+to+verify+if+it+has+to+update+the+application%3F" class="HashLink" href="#What+does+the+device+perform+to+verify+if+it+has+to+update+the+application%3F">What does the device perform to verify if it has to update the application?</a></h2>

<p>The device verifies in the server a file called:</p>

<ul>
	<li><strong>In Android:</strong> &lt;main&gt; .android.json</li>
	<li><strong>In Apple:</strong> &lt;main&gt; .ios.json</li>
</ul>

<p>that contains the version: {&quot;minor&quot;: &quot;0&quot;, &quot;major&quot;: &quot;1&quot;, &quot;uri&quot;: &quot;&quot;}</p>

<p>The device checks the version of its json against the version of the json that is in the server and if they are different, the application is updated.</p>

<p>Take into account that if the deployment was performed with the Deployment Tool, you have to set the <a href="46540.html">App Update property</a> so that the metadata remains in the package.</p>

<h2><a id="Notes" class="HashLink" href="#Notes">Notes</a></h2>

<p style="margin-left: 40.0px;">(1) Replacement of <strong>Android Google Play URL</strong> <strong>property </strong>that enhanced the possibility of including other URL stores instead of just Google Play.</p>

<h2><a id="See+also" class="HashLink" href="#See+also">See also</a></h2>

<ul>
	<li><a href="14981.html">Online Native Mobile applications architecture</a></li>
	<li><a href="19531.html">Native Mobile Versioning Details</a></li>
	<li><a href="46540.html">App Update property</a></li>
</ul>

<p>    </p>
</div><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="37261.html">Android Version Name property</a></TD><TD><a href="46540.html">App Update property</a></TD><TD><a href="39496.html">Apple Version Code property</a></TD></TR><TR><TD><a href="31271.html">ClientInformation external object</a></TD><TD><a href="46541.html">Enable KBN property</a></TD></TR><TR><TD><a href="18958.html">HowTo: Publishing an application to the Apple App Store</a></TD><TD><a href="17817.html">Native Mobile Main object properties</a></TD></TR><TR><TD><a href="19531.html">Native Mobile Versioning Details</a></TD><TD><a href="37262.html">Update URL property</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 11/30/21 01:37 AM</em></font></td></TR></table></font>