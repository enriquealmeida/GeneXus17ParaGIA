<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>QueryViewer control</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?9075,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">QueryViewer control</h1>
<!--Category:QueryViewer control--><div class="TableWikiBody" id="tblwikibody"><p>QueryViewer is a <a href="5273.html">user control</a> that must be included in a <a href="6916.html">Web Panel</a> or <a href="24829.html">Panel</a> for mobile applications, in order to allow viewing the data obtained as a result of executing a <a href="9026.html">Query object</a> or a <a href="5270.html">Data Provider object</a>. The possible viewing options are:</p>

<ol>
	<li><strong><a href="31810.html">Card</a>: </strong>is a static representation of the query value which can show the trending of it.</li>
	<li><strong>Chart: </strong>several kinds of charts can be selected like <a href="29936.html">Timeline chart</a>, <a href="30369.html">Circular Charts</a>, <a href="https://wiki.genexus.com/commwiki/wiki?30374,," target="_blank">Polar Charts</a> and more.</li>
	<li><strong>Map:</strong> is a map of the world, a continent or a country for queries containing a geographic axis (available since GeneXus 17 upgrade 4).</li>
	<li><strong>Pivot Table:</strong> is a table that allows swapping columns of place and grouping information.</li>
	<li><strong>Table:</strong> is a static table, with fixed rows and columns.</li>
</ol>

<p><strong>Important note</strong>: the support for mobile applications is available since <a href="46066.html">GeneXus 17</a></p>

<h3><a id="Main+features%3A" class="HashLink" href="#Main+features%3A">Main features:</a></h3>

<ul>
	<li style="text-align: left;">Compatible with all browsers, including  smartphones</li>
	<li style="text-align: left;">Allows exporting data to PDF, HTML, XML, and XLSX formats (only valid for Table and Pivot Table options).</li>
	<li style="text-align: left;">Intuitive handling of Pivot Tables by using drag &amp; drop</li>
	<li style="text-align: left;">Programmatically configurable as well</li>
</ul>

<p style="text-align: left;"><strong>Note:</strong> attributes can be hidden in the Table and Pivot Table just by right-clicking upon the right corner of the attribute. In the Pivot Table case, remember that if all the Data attributes are hidden, the Quantity field will appear without having the possibility to hide it.</p>

<h3><a id="How+to+work+with+this+control%3F" class="HashLink" href="#How+to+work+with+this+control%3F">How to work with this control?</a></h3>

<p>The following steps show how to work with this control for a web application, for mobile applications, works in the same way.</p>

<p style="margin-left: 40.0px;">1) Drag the QueryViewer control from the Toolbox onto the Web form.</p>

<p style="margin-left: 80.0px;"><img src="./images/32921.png" id="32921" class="WikiImage"/></p>

<p style="margin-left: 40.0px;"><span style="line-height: 1.6em;">2) Set in the </span><a href="19664.html">QueryViewer Object property</a><span style="line-height: 1.6em;"> which </span><a href="9026.html">Query object</a>  <span style="line-height: 1.6em;">or <a href="5270.html">Data Provider object</a> will generate the displayed data.</span></p>

<p style="margin-left: 80.0px;"><img src="./images/32922.png" id="32922" class="WikiImage"/></p>

<p style="margin-left: 40.0px;">3) Set the <strong>Type</strong> property, below the <strong>Output</strong> group. This allows you to select one of the four ways in which the output can be displayed:</p>

<p style="margin-left: 80.0px;"><img src="./images/32923.png" id="32923" class="WikiImage"/></p>

<p style="margin-left: 40.0px;">In the case of selecting the Chart option, you can choose a specific type of chart by setting the <strong>Chart Type </strong>property:</p>

<p style="margin-left: 80.0px;"><img src="./images/32924.png" id="32924" class="WikiImage"/></p>

<h3><a id="Usage+example" class="HashLink" href="#Usage+example">Usage example</a></h3>

<p>Suppose you set the following QueryViewer properties:</p>

<ul>
	<li>Type = Chart</li>
	<li>Chart Type =  Stacked column 3D</li>
</ul>

<p>This is enough for executing the object that contents the QueryViewer control to see the result at runtime.</p>

<p>In addition to that, you may set another QueryViewer properties. For example, the following properties related to a column chart:</p>

<ul>
	<li>XAxis Title = Country</li>
	<li>YAxis Title = Attractions</li>
</ul>

<p>As a result, the following query is displayed in runtime:</p>

<p style="margin-left: 40.0px;"><img src="./images/31136.png" id="31136" class="WikiImage"/></p>

<p><strong>Note:</strong> Upon the first time that a QueryViewer control is dragged to a web form in a Knowledge Base, GeneXus will include the QueryViewer folder containing the <a href="10021.html">Structured Data Type</a> necessary for using the control, as well as a set of new <a href="7221.html">GeneXus Domains</a>. Also, a set of variables is automatically created in the object Variables section, and a sample source is added in the Object Events section. Such code is intended to guide you in using and setting the control at runtime.</p>

<h3><a id="Scenarios" class="HashLink" href="#Scenarios">Scenarios</a></h3>

<p>Now see a series of scenarios you could find when using the QueryViewer control.</p>

<ul>
	<li>Dynamic filter to obtain new views of a query</li>
</ul>

<p style="margin-left: 40.0px;">New views of a single query are possible by changing the value shown of one participant in the query (<a href="19788.html">Query Element</a>). This is done by passing parameters between the QueryViewer control and the query.</p>

<ul>
	<li>Customizing a QueryViewer control at runtime</li>
</ul>

<p style="margin-left: 40.0px;">Through the associated variable in the Axes property, it is possible to change programmatically some of the properties that have effects on the control’s view.</p>

<ul>
	<li>Changing queries at runtime</li>
</ul>

<p style="margin-left: 40.0px;">It is possible to change the query associated with the control by replacing it with a different one, by altering the control’s Object property, as in the following example:</p>

<pre class="Code" style="margin-left: 80.0px;">
<span style="font-size: medium;">Event Start
  Attractions.Object = AttractionsByCountry(&lt;Parameter1&gt;, &lt;Parameter2&gt;, ...)
EndEvent</span>
</pre>

<p style="margin-left: 40.0px;">In this example, <em>Attractions</em> is the QueryViewer control’s name, Object is the control’s property that stores the name of the <a href="9026.html">Query object</a> that performs the query, and <em>AttractionsByCountry</em> is the name of that Query object. The same applies if the associated object is a <a href="5270.html">Data Provider object</a>.</p>

<ul>
	<li>Changing aggregation by code</li>
</ul>

<p style="margin-left: 40.0px;">If a <a href="5270.html">Data Provider object</a> is associated with the Quer Viewer, aggregation can be changed by code using the QueryViewerElements.Element Aggregation field.</p>

<p style="margin-left: 40.0px;">The default aggregation is Sum.</p>

<h3><a id="Control+properties" class="HashLink" href="#Control+properties">Control properties</a></h3>

<p>Please refer to <a href="32920.html">QueryViewer control properties</a>.</p>

<h3><a id="Control+events" class="HashLink" href="#Control+events">Control events</a></h3>

<div style="overflow-x:auto"><table align="center" border="1" cellpadding="1" cellspacing="1" style="width: 850.0px;">
	<tbody>
		<tr>
			<td style="text-align: center;width: 220.0px;vertical-align: middle;"><a href="https://wiki.genexus.com/commwiki/wiki?19546,," target="_blank">DragAndDrop Event</a></td>
			<td style="vertical-align: middle;">Allows programming actions when an action drag and drop is found.</td>
		</tr>
		<tr>
			<td style="text-align: center;width: 220.0px;vertical-align: middle;"><a href="https://wiki.genexus.com/commwiki/wiki?19563,," target="_blank">ItemExpand Event</a></td>
			<td style="vertical-align: middle;">Allows programming actions when the user expands a Query Element that contains nested data.</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><a href="19552.html">ItemCollapse Event</a></td>
			<td style="vertical-align: middle;">Allows programming actions when the user collapses a Query Element with nested data.</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><a href="19646.html">FilterChanged Event</a></td>
			<td style="vertical-align: middle;">It is executed every time that values are removed from or added to the list of possible values for an attribute, whether it’s located in the rows, columns or pages area.</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><a href="19570.html">ItemClick Event</a></td>
			<td style="vertical-align: middle;">It is executed upon clicking on a query element.</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><a href="19567.html">ItemDoubleClick Event</a></td>
			<td style="vertical-align: middle;">It is executed upon double-clicking on a query element. (This event is not supported in case you are executing the control in a mobile device)</td>
		</tr>
	</tbody>
</table></div>

<h3><a id="Methods" class="HashLink" href="#Methods">Methods</a></h3>

<div style="overflow-x:auto"><table align="center" border="1" cellpadding="1" cellspacing="1" style="line-height: 20.8px;width: 850.0px;">
	<tbody>
		<tr>
			<td style="text-align: center;width: 220.0px;vertical-align: middle;"><span style="line-height: 20.8px;">GetMetadata()</span></td>
			<td>Returns a QueryViewerElements type object which contains the list of attributes (properties included). (More information about <a href="19577.html">Elements Property</a>)</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><span style="line-height: 20.8px;">GetData() </span></td>
			<td>Returns an XML on a string variable containing all the data for the attributes loaded in the Pivot Table.</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><span style="line-height: 20.8px;">GetFilteredData()</span></td>
			<td>Returns an XML on a string variable containing the data which is being visualized at the moment (the difference with the GetData() method it's seen on the Pivot Table, data can be different because of filters application).</td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><span style="line-height: 20.8px;">NotifyMetadata()</span></td>
			<td><span style="line-height: 20.8px;">Makes a list of attributes (properties included). This method doesn't return an object as a result but generates a </span><span style="line-height: 20.8px;">QueryViewerElements type </span><span style="line-height: 20.8px;">variable that can be captured later by a TrackContext event</span><span style="color: rgb(34,34,34);font-family: arial , sans-serif;font-size: 12.8px;line-height: normal;">.</span></td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><span style="line-height: 20.8px;">NotifyData()</span></td>
			<td>Load all the <span style="line-height: 20.8px;">data referenced by the attributes loaded in the Pivot Table. This method doesn't return an object as a result but generates a variable that can be captured later</span><span style="line-height: 20.8px;"> by a TrackContext event</span><span style="line-height: 20.8px;">.</span></td>
		</tr>
		<tr>
			<td style="text-align: center;vertical-align: middle;"><span style="line-height: 20.8px;">NotifyFilteredData()</span></td>
			<td>Load <span style="line-height: 20.8px;">the data which is being visualized at the moment with filters application (can be different from the data loaded by the method NotifyData()). This method doesn't return an object as a result but generates a variable that can be captured later</span><span style="line-height: 20.8px;"> by a TrackContext event</span><span style="line-height: 20.8px;">.</span></td>
		</tr>
	</tbody>
</table></div>

<h3><a id="Using+methods" class="HashLink" href="#Using+methods">Using methods</a></h3>

<p>As an example of usage, see how to save/restore metadata to/from the Database. To do so, you define the following events at the Web Panel where the QueryViewer is embedded:</p>

<p>Saving the metadata:</p>

<pre class="Code" style="margin-left: 40.0px;">
Event 'NotifyMetadata'<span style="font-size: medium;">
  QueryViewer.NotifyMetadata()   
Endevent</span>

Event TrackContext(&amp;Metadata)
  SaveMetadata(&amp;Metadata) 
EndEvent
</pre>

<p>Restoring the metadata:</p>

<pre class="Code" style="margin-left: 40.0px;">
<span style="font-size: medium;">Event Refresh
  &amp;Axes = RestoreMetadata()
EndEvent</span></pre>

<p><span style="font-size: small;">Notes: </span></p>

<ul>
	<li><span style="font-size: small;">The procedures <em>SaveMetadata</em> and </span><span style="font-size: small;"><em>RestoretMetadata</em> have to be implemented.</span></li>
	<li><span style="font-size: small;"><em>&amp;Metadata</em> variable has to be defined based on <em>QueryViewerElements</em> SDT</span></li>
	<li><a href="19619.html">Remember Layout property</a><span style="font-size: small;"> of the QueryViewer control has to be the value <em>False</em>.</span></li>
</ul>

<h3><a id="See+Also" class="HashLink" href="#See+Also">See Also</a></h3>

<p><a href="40015.html">QueryViewer control compatibility</a></p>

<p> </p>
</div><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Pages</b></TD></TR><TR><TD><a href="48277.html">Background color property for QueryViewer maps</a></TD><TD><a href="41078.html">Background opacity property</a></TD><TD><a href="41061.html">Color 1 property</a></TD></TR><TR><TD><a href="41070.html">Color 10 property</a></TD><TD><a href="41062.html">Color 2 property</a></TD><TD><a href="41063.html">Color 3 property</a></TD></TR><TR><TD><a href="41064.html">Color 4 property</a></TD><TD><a href="41065.html">Color 5 property</a></TD><TD><a href="41066.html">Color 6 property</a></TD></TR><TR><TD><a href="41067.html">Color 7 property</a></TD><TD><a href="41068.html">Color 8 property</a></TD><TD><a href="41069.html">Color 9 property</a></TD></TR><TR><TD><a href="48138.html">Continent property in QueryViewer</a></TD><TD><a href="48137.html">Country property in QueryViewer</a></TD><TD><a href="41072.html">Font family property</a></TD></TR><TR><TD><a href="41073.html">Font size property</a></TD><TD><a href="41074.html">Font style property</a></TD><TD><a href="41076.html">Font variant property</a></TD></TR><TR><TD><a href="48278.html">gx-qv-map-background-opacity property</a></TD><TD><a href="40026.html">HowTo customize the QueryViewer control</a></TD><TD><a href="48161.html">Map Type property in QueryViewer</a></TD></TR><TR><TD><a href="41071.html">Opacity property</a></TD><TD><a href="41075.html">Query Viewer: Font weight property</a></TD><TD><a href="40015.html">QueryViewer control compatibility</a></TD></TR><TR><TD><a href="42812.html">Raise ItemClick event property</a></TD><TD><a href="48162.html">Region property in QueryViewer</a></TD><TD><a href="36751.html">Selecting between a Query Object or Data Provider when using the QueryViewer User Control</a></TD></TR><TR><TD><a href="41079.html">Show rows per page property</a></TD><TD><a href="41077.html">Text decoration property</a></TD><TD><a href="41080.html">Title background color property</a></TD></TR><TR><TD><a href="48280.html">Title font family property for QueryViewer maps</a></TD><TD><a href="48279.html">Title font property for QueryViewer maps</a></TD><TD><a href="48281.html">Title font size property for QueryViewer maps</a></TD></TR><TR><TD><a href="48282.html">Title font style property for QueryViewer maps</a></TD><TD><a href="48283.html">Title font weight property for QueryViewer maps</a></TD><TD><a href="41060.html">Value class property</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 06/20/22 07:02 PM</em></font></td></TR></table></font>