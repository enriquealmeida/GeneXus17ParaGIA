<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Data Selectors in Aggregations</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?5432,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Data Selectors in Aggregations</h1>
<!--Data Selectors in Aggregations--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>It is possible to use <a href="5271.html">Data Selector object</a>s in <a href="5868.html">Aggregate Formulas</a>.</p>

<h3><a id="Syntax" class="HashLink" href="#Syntax">Syntax</a></h3>

<p>Data Selectors can be referenced in Aggregate formulas, with the USING clause according to the following grammar:</p>

<p>&lt;<i>AggFormulaName</i>&gt; '(' &lt;<i>Expression</i>&gt; ',' [&lt;<i>AggregationCondition</i>&gt;] ',' [&lt;DefaultValue&gt;] ')'</p>

<p>Where:</p>

<p>&lt;<i>AggFormulaName</i>&gt; could be [Find | Max | Min | Sum |Count | Average]</p>

<p>&lt;<i>Expression</i>&gt; is an expression to be finded, maximized, minimized, summed or averaged. It can be an attribute (stored or formula), or an expression that involves attributes, variables and constants.</p>

<p><i>AggregationCondition </i>is [&lt;Condition&gt;] <strong>['USING' &lt;DataSelector&gt; '(' &lt;Parameters...&gt; ')'] </strong></p>

<h3><a id="Notes" class="HashLink" href="#Notes">Notes</a></h3>

<ul>
	<li>For Count formulas, the first parameter can't be an expression. On the other hand, it must be an attribute.</li>
	<li>For Sum and Count formulas, the result of evaluating the Expression must be a numeric value.</li>
	<li>If using the DataSelector clase, it is not supported to use Procedures, otherwise the scp0026 will be detailed and the formula cannot be solved.</li>
	<li>User variables can only be used in inline formulas.</li>
</ul>

<p>For example, suppose that you have &quot;Customer&quot; and &quot;Country&quot; <a href="1908.html">Transactions</a>, where each customer has a country. To count the number of active customers per country you only have to write the following:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
For Each <em>CountryId
</em>   <em>&amp;NumberActiveCustomers</em> = Count(<em>CustomerName</em>, <strong>USING ActiveCustomers()</strong>)
EndFor</pre>

<p>The &quot;ActiveCustomers&quot; Data Selector definition is as follows:</p>

<p><img src="./images/6215.JPG" id="6215" class="WikiImage"/></p>

<p>Something important to know is that the <em>CustomerName</em> attribute -the first parameter in the count formula- is not taken into account by GeneXus to determine the <a href="https://wiki.genexus.com/commwiki/wiki?20195,," target="_blank">For Each</a> <a href="6347.html">Base Table</a>. The <em>CustomerName</em> attribute belongs to the Formula definition.</p>

<p>The For Each base table is COUNTRY (because <em>CountryId</em> is the only attribute mentioned in the For Each command outside the formula definition).</p>

<p>The table navigated by the Formula (in which the calculation is made) is CUSTOMER (because the attributes mentioned in the formula and in the Data Selector definitions belong to the CUSTOMER table).</p>

<p>Finally, the two tables that are navigated, COUNTRY and CUSTOMER, have a common attribute: <em>CountryId. </em>So, for each navigated country (by the For Each command), the Aggregate Formula defined inside the For Each (inline) considers only the <strong>active</strong> customers <strong>that belong to the country being navigated in the For Each query, at the moment of triggering the formula</strong>.</p>

<h3><a id="See+also" class="HashLink" href="#See+also">See also</a></h3>

<p><a href="5386.html">Data Selectors in Grids</a><br />
<a href="6501.html">Data Selectors in Data Providers</a><br />
<a href="5312.html">Data Selectors in For Each command</a><br />
<a href="https://wiki.genexus.com/commwiki/wiki?5775,," target="_blank">Data Selectors in Web Panels</a><br />
<a href="15984.html">Work With for Smart Devices List Node</a><br />
<a href="https://wiki.genexus.com/commwiki/wiki?16337,," target="_blank">Entry Panels as Filters for a List in Smart Devices</a></p>

<h3><a id="Videos" class="HashLink" href="#Videos">Videos</a></h3>

<p><img src="./images/20668.png" id="20668" class="WikiImage"/> <a href='https://training.genexus.com/en/learning/courses/genexus/genexus-16-course-analyst/data-selectors-v16?p=5414'>Data Selectors</a></p>

<p></p>
<br /></td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="5271.html">Category:Data Selector object</a></TD><TD><a href="5361.html">Data Selector property</a></TD><TD><a href="6501.html">Data Selectors in Data Providers</a></TD></TR><TR><TD><a href="5312.html">Data Selectors in For Each command</a></TD><TD><a href="5386.html">Data Selectors in Grids</a></TD><TD><a href="5882.html">Examples of Using Formulas</a></TD><TD><a href="22331.html">Toc:GeneXus - Table of contents</a></TD></TR><TR><TD><a href="6432.html">Specification Codes from spc0050 to spc0099</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:17 PM</em></font></td></TR></table></font>