<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>HowTo: Use the Image Map Control</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?17823,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">HowTo: Use the Image Map Control</h1>
<!--HowTo: Use the Image Map Control--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>The Image Map control lets you display a background image with regions identified by its coordinates {x, y} and a size. Each defined region can have an image to display on the coordinates defined for it with the indicated size. Each region corresponds to one item of the list (grid). When a region is selected, the default action associated with it will be run.</p>

<p>This control applies to the <a href="24817.html">Grid control</a>.</p>

<p>Suppose you are interested in representing the parts of a car:</p>

<p><img src="./images/23148.png" id="23148" class="WikiImage"/></p>

<p>Let's start by defining the following transaction with the Work With pattern applied.</p>

<p><img src="./images/17824.png" id="17824" class="WikiImage"/></p>

<p>Before continuing with this example, you may need to understand how this control works.</p>

<p>As already mentioned, this control lets you display a background image with regions identified by its coordinates. The coordinates start ({o,o} coordinate) in the upper left corner of the background image; the X-axis is horizontal to the background image and extends to the right; the Y-axis is vertical to the background image and extends downward.</p>

<p>So, when you create a new <a href="1908.html">Transaction object</a> you need to define at least the following four attributes, as shown in the image:</p>

<ul>
	<li>X coordinate: This will represent the x coordinate of the region where it will have its left upper corner. In the Transaction of the example, this attribute is <strong>TRNImageMapX</strong> and its type must be Numeric.</li>
	<li>Y coordinate: This will represent the y coordinate of the region where it will have its left upper corner. In the Transaction of the example, this attribute is <strong>TRNImageMapY</strong> and its type must be Numeric.</li>
	<li>Size: This will represent the size of the region; for example, if you define coordinates {0,0} and a size of 100, the region will be represented by the square defined by the points {0,0} and {100,100}. In the Transaction of the example, this attribute is <strong>TRNImageMapSize</strong> and its type must be Numeric.</li>
	<li>Image: This will be used to display an Image as a layout background on the region defined by the x and y coordinates and of the size defined. In the Transaction of the example, this attribute is <strong>TRNImageMapImage</strong> and its type must be Image.</li>
</ul>

<p>Note: The attribute <strong>TRNImageMapInfo</strong> is not necessary; it will be used in this example to show information about the region when it's selected.</p>

<p>Once the Work With pattern has been applied, you need to enable the Image Map control on the grid. To do so, open the List section, select the grid and set the <a href="9550.html">Control Type property</a> to Image Map.</p>

<p><img src="./images/46526.png" id="46526" class="WikiImage"/></p>

<p>This will enable some other properties, as seen in the previous image:</p>

<p>Image Map properties:</p>

<table border="0" cellpadding="0" cellspacing="0">
	<tbody>
		<tr>
			<td>
			<p><strong>Image</strong></p>
			</td>
			<td>
			<p>Used for selecting the background image.</p>
			</td>
		</tr>
		<tr>
			<td>
			<p><strong>Horizontal Coordinate Attribute</strong></p>
			</td>
			<td>
			<p>This is the attribute that represents the x coordinate for the upper left corner of each region.</p>
			</td>
		</tr>
		<tr>
			<td>
			<p><strong>Vertical Coordinate Attribute</strong></p>
			</td>
			<td>
			<p>This is the attribute that represents the y coordinate for the upper left corner of each region.</p>
			</td>
		</tr>
		<tr>
			<td>
			<p><strong>Size Attribute</strong></p>
			</td>
			<td>
			<p>This is the attribute that represents the size of each region.</p>
			</td>
		</tr>
	</tbody>
</table>

<p>Image Map methods (**):</p>

<p><em>Grid1</em>.<strong>SetBackGroundImage</strong>(<em>Image</em>)<br />
Where <em>Grid1 </em>is the control name of the Image Map grid, and <em>Image</em> is a variable or attribute of <a href="15204.html">Image data type</a></p>

<p>Continuing with the example, set the properties as follows:</p>

<table border="0" cellpadding="0" cellspacing="0">
	<tbody>
		<tr>
			<td>
			<p><strong>Image</strong></p>
			</td>
			<td>
			<p>carOutline*</p>
			</td>
		</tr>
		<tr>
			<td>
			<p><strong>Horizontal Coordinate Attribute</strong></p>
			</td>
			<td>
			<p>TRNImageMapX</p>
			</td>
		</tr>
		<tr>
			<td>
			<p><strong>Vertical Coordinate Attribute</strong></p>
			</td>
			<td>
			<p>TRNImageMapY</p>
			</td>
		</tr>
		<tr>
			<td>
			<p><strong>Size Attribute</strong></p>
			</td>
			<td>
			<p>TRNImageMapSize</p>
			</td>
		</tr>
	</tbody>
</table>

<p>* This image must be in our KB.</p>

<p>Then, insert in the Grid's table, the image attribute that will be displayed as the background for each region.</p>

<p>The result must be as shown below:</p>

<p><img src="./images/46527.png" id="46527" class="WikiImage"/></p>

<p>Now you are done, so press F5.</p>

<p><img src="./images/17828.jpg" id="17828" class="WikiImage"/></p>

<p>Select one of the regions by tapping on the image that represents it, and see what happens.</p>

<p><img src="./images/17829.jpg" id="17829" class="WikiImage"/></p>

<p>As you may have noticed, when you select a region the default action will be run. In this case, the General section is shown.</p>

<p>In the example, three new car parts were created (records in a Transaction) and in the General section, all the attributes were deleted from the layout except for TRNImageMapInfo, because that's the only attribute wanted to be displayed.</p>

<h4><a id="Final+notes" class="HashLink" href="#Final+notes">Final notes</a></h4>

<p>The coordinates are relative to the size of the background image. For example, if you have an image of 800x600 and coordinates {500, 200} for a region, and a resolution of 1024x768, the image of that region will be shown at {500*1024/800, 200*768/600} = {640, 256}.</p>

<p>Images bigger than the device's resolution won't be displayed. For example, if you have a device with a resolution of 1024x768 and an image of 2048x1536, it won't be displayed.</p>

<p>Since <a href="https://wiki.genexus.com/commwiki/wiki?25073,," target="_blank">GeneXus X Evolution 3</a>, to make it easier to position the items inside the image, when executing in the iPhone Simulator, if you tap anywhere on the image the coordinates of the tapped point are logged to the Xcode console.</p>

<h3><a id="Other+Methods" class="HashLink" href="#Other+Methods">Other Methods</a></h3>

<h4><a id="LongTap" class="HashLink" href="#LongTap">LongTap</a></h4>

<p>Triggered when the user perfomes a long-tap gesture on the image map.</p>

<p>Parameters:</p>

<ul>
	<li>&amp;hCoord, &amp;vCoord: the horizontal and vertical coordinates of the long-tapped point. Coordinates are relative to the image's dimensions.</li>
</ul>

<p>Example:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
Event Grid1.LongTap(&amp;hCoord, &amp;vCoord)
    composite
        SavePoint(&amp;hCoord, &amp;vCoord)
    endcomposite
EndEvent
</pre>

<h3><a id="Restrictions" class="HashLink" href="#Restrictions">Restrictions</a></h3>

<p>In Android, the zoom feature only works on devices with Android version 2.2 and later.</p>

<h3><a id="Videos" class="HashLink" href="#Videos">Videos</a></h3>

<p><img src="./images/20668.png" id="20668" class="WikiImage"/> <a href='https://training.genexus.com/en/learning/courses/genexus-for-mobile/mobile-applications-with-genexus-course-v16/controls-sd-maps-rating-sd-smart-grids-switch?p=3649'>Controls: Maps, Rating, Switch</a></p>

<p></p>
</td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="9550.html">Control Type property</a></TD><TD><a href="20402.html">Category:Control Types</a></TD></TR><TR><TD><a href="40177.html">DetectFaces procedure</a></TD><TD><a href="40178.html">DetectObjects procedure</a></TD></TR><TR><TD><a href="42199.html">Height Attribute property</a></TD><TD><a href="42200.html">Height Field Specifier property</a></TD><TD><a href="42487.html">Horizontal Coordinate Attribute property</a></TD></TR><TR><TD><a href="42488.html">Horizontal Coordinate Field Specifier property</a></TD><TD><a href="24799.html">Toc:Native Mobile Applications Development</a></TD><TD><a href="40180.html">OCR procedure</a></TD></TR><TR><TD><a href="42201.html">Rotation Attribute property</a></TD><TD><a href="42202.html">Rotation Field Specifier property</a></TD><TD><a href="40853.html">Sample: GeneXusAI proof of concept</a></TD><TD><a href="42483.html">Size Field Specifier property</a></TD></TR><TR><TD><a href="42482.html">SizeAttribute property</a></TD></TR><TR><TD><a href="42485.html">Vertical Coordinate Attribute property</a></TD><TD><a href="42486.html">Vertical Coordinate Field Specifier property</a></TD><TD><a href="42197.html">Width Attribute property</a></TD><TD><a href="42198.html">Width Field Specifier property</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 10/29/20 01:43 PM</em></font></td></TR></table></font>