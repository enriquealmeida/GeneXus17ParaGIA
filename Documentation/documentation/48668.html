<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Manually configuring Tomcat (GeneXus 17 Upgrade 4)</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?48668,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Manually configuring Tomcat (GeneXus 17 Upgrade 4)</h1>
<!--Manually configuring Tomcat (GeneXus 17 Upgrade 4)--><div class="TableWikiBody" id="tblwikibody"><p>In a Java web <a href="2428.html">KB</a>, GeneXus configures the web application properties such as &quot;Servlet Directory&quot; or &quot;Static content directory seen from client.&quot; To do so, GeneXus determines the latest version of Tomcat installed (by searching in the Windows Registry) and uses those values.</p>

<p>Installing only one Tomcat in the machine, and installing it with the setup from the Apache Tomcat page to avoid manually configuring the Tomcat is recommended.</p>

<p>If you want to use a different location, for example, a previous version of Tomcat or a Tomcat that was installed with a third-party installer, that does not write the data in the Windows registry (like XAMPP), and some files have to be manually copied.</p>

<p>The image below shows the application structure in Tomcat when trying to use manual configuration.</p>

<p><img src="./images/16725.png" id="16725" class="WikiImage"/></p>

<p>Now, let’s see the files that need to be added to the MyAppJavaEnvironment application.</p>

<h3><a id="In+GeneXus+X+Evolution+1" class="HashLink" href="#In+GeneXus+X+Evolution+1">In GeneXus X Evolution 1</a></h3>

<ol>
	<li>In the MyAppJavaEnvironment folder, create a folder called META-INF and add the context.xml file saved in the web folder of the model.</li>
	<li>In the folder MyAppJavaEnvironment, copy the files GXDIB32.DLL, printingappletsigned.jar, and rbuildj.dll that are saved in the web folder of the model.</li>
	<li>In the folder WEB-INF, copy the file web6.xml when using Tomcat 6 or web7.xml when using Tomcat 7; next, rename it to web.xml.</li>
	<li>Create a folder called lib in MyAppJavaEnvironment/WEB-INF and add the files gxclassR.jar, iText.jar, iTextAsian.jar, lucene-core-2.2.0.jar, lucene-highlighter-2.2.0.jar, lucene-spellchecker-2.2.0.jar, poi.jar, Tidy.jar, tm-extractors-0.4.jar, and the database driver. All files can be found in the web folder of the model, except for the file gxclassR.jar. Instead, the file gxclassR.zip is displayed and its extension has to be changed to jar.</li>
	<li>From GeneXus, in the classpath you need to change the reference to servlet-api.jar and add the corresponding one.</li>
</ol>

<h3><a id="In+GeneXus+X+Evolution+2" class="HashLink" href="#In+GeneXus+X+Evolution+2">In GeneXus X Evolution 2</a></h3>

<ol>
	<li>In the MyAppJavaEnvironment folder, create a folder called “META-INF” and add the context.xml file saved in the web folder of the model.</li>
	<li>In the folder MyAppJavaEnvironment, copy the files GXDIB32.DLL, printingappletsigned.jar, and rbuildj.dll that are saved in the web folder of the model.</li>
	<li>In the folder WEB-INF, copy the file web6.xml when using Tomcat 6 or web7.xml when using Tomcat 7; next, rename it to web.xml.</li>
	<li>Create a folder called “lib” in MyAppJavaEnvironment/WEB-INF and add the files gxclassR.jar, iText.jar, iTextAsian.jar, lucene-core-2.2.0.jar, lucene-highlighter-2.2.0.jar, lucene-spellchecker-2.2.0.jar, poi.jar, Tidy.jar, tm-extractors-0.4.jar, agxpgetlicinfo.jar, asm-3.1.jar, jersey-core-1.4.jar, jersey-json-1.4.jar, jersey-server-1.4.jar, and the database driver. All files can be found in the web folder of the model, except for the file gxclassR.jar. Instead, the file gxclassR.zip is displayed and its extension has to be changed to jar.</li>
	<li>Create a folder called &quot;gxmetadata&quot; in MyAppJavaEnvironment, copy the files gx_entity_list.json and gxversion.json that are saved in the folder web/gxmetadata of the model, and create another folder called &quot;images&quot; in gxmetadata.</li>
	<li>Create a folder called &quot;Metadata&quot; in MyAppJavaEnvironment, and inside it copy the folder &quot;TableAccess&quot; that is saved in the folder web/Metadata of the model.</li>
	<li>When using Tomcat 7, copy to its lib folder the file GXScanner.jar that is saved in the web folder of the model. GXScanner is for prototyping only and makes webapp reloads faster. It is referenced in the context.xml of the META-INF directory and is not required in production.</li>
</ol>

<h3><a id="In+GeneXus+X+Evolution+3" class="HashLink" href="#In+GeneXus+X+Evolution+3">In GeneXus X Evolution 3</a></h3>

<ol>
	<li>Below the MyAppJavaEnvironment folder, create a folder called “META-INF” and add the context.xml file saved in the web folder of the model.</li>
	<li>In the folder MyAppJavaEnvironment, copy the files GXDIB32.DLL, printingappletsigned.jar, and rbuildj.dll that are saved in the web folder of the model.</li>
	<li>In the WEB-INF folder, copy the file web.xml generated in the web environment.</li>
	<li>Create a folder called “lib” in MyAppJavaEnvironment/WEB-INF and add the files commons-fileupload-1.3.1.jar, gxclassR.jar, iText.jar, iTextAsian.jar, lucene-core-2.2.0.jar, lucene-highlighter-2.2.0.jar, lucene-spellchecker-2.2.0.jar, poi.jar, Tidy.jar, tm-extractors-0.4.jar, asm-3.1.jar, jersey-core-1.4.jar, jersey-json-1.4.jar, jersey-server-1.4.jar, xercesImpl.jar and xml-apis-1.4.01, and the database driver. All files can be found in the web folder of the model, except for the file gxclassR.jar. Instead, the file gxclassR.zip is displayed and its extension has to be changed to jar.</li>
	<li>Create a folder called &quot;gxmetadata&quot; in MyAppJavaEnvironment, copy the files gx_entity_list.json and gxversion.json that are saved in the folder web/gxmetadata of the model, and create another folder called &quot;images&quot; in gxmetadata.</li>
	<li>Create a folder called &quot;Metadata&quot; in MyAppJavaEnvironment, and inside it copy the &quot;TableAccess&quot; folder that is saved in the folder web/Metadata of the model (in any transaction).</li>
	<li>When using Tomcat 7, copy to its lib folder the file GXScanner.jar that is saved in the web folder of the model. GXScanner is for prototyping only and makes webapp reloads faster. It is referenced in the context.xml of the META-INF directory and is not required in production.</li>
</ol>

<p>After completing these steps, the application should work correctly.</p>

<h3><a id="In+GeneXus+15+Upgrade+12+or+higher" class="HashLink" href="#In+GeneXus+15+Upgrade+12+or+higher">In GeneXus 15 Upgrade 12 or higher</a></h3>

<p>Use the <a href="39474.html">Build Events</a> feature; more specifically, define a Post-build event. In this event call via command line a batch program that creates the required structure in Tomcat, with the required files to execute the webapp and taking into account the properties you set in GeneXus.</p>

<p>To do so, you can use the createwebapplication.bat file that is distributed with GeneXus. You'll find it under &lt;GeneXus Installation directory&gt;\gxjava. (eg.: C:\Program Files (x86)\GeneXus\GeneXus16U3\gxjava\createwebapplication.bat).</p>

<p>In addition, you can configure the option 'Run the post-build event' to 'On successful build', so that the .bat is only executed if the build finishes successfully.</p>

<p>The .bat expects the following parameters:</p>

<ol>
	<li>Path of Tomcat's installation</li>
	<li>Name of the webapp</li>
	<li>Tomcat version</li>
	<li>If debug is enabled (true or false) to replace gxclassr by gxclassd (This is meaningless for GeneXus 16 Upgrade 4 or higher. ref.: <a href="https://wiki.genexus.com/commwiki/wiki?42969,," target="_blank">Java standard classes moved to GitHub - Benefits and Compatibility aspects</a>)</li>
	<li><a href="27172.html">Use Native Soap support in Java</a> (true or false)</li>
	<li>TransferSDApi (true or false) if you have Smart Devices Objects</li>
	<li>LayoutMetadataDirectory to indicate where the files of <a href="24473.html">Customizable Layout property</a> should be copied. If there are no dynamic reports, the value should be “LayoutMetadata” (default value). Ref <a href="18909.html">End-user customizable reports</a></li>
	<li>Java version (6, 7, 8, 9 , 10, 11, 12, etc.)</li>
	<li>useModulesInJDK (true or false). If JDK version is &gt; 8, then it must be 'true'</li>
</ol>

<h4><a id="Sample" class="HashLink" href="#Sample">Sample</a></h4>

<p>Suppose you have the following installation:</p>

<ul>
	<li>Servlet directory = e:\Tomcat\webapps\testapp\WEB-INF\classes</li>
	<li>Static content directory seen from client = e:\Tomcat\webapps\testapp\static</li>
	<li>Tomcat 9, Java 8</li>
</ul>

<p>Then the command to add to the Post-Build Events would be:</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
E:\GeneXus\GeneXus16U3\gxjava\createwebapplication.bat &quot;e:\Tomcat&quot; &quot;testapp&quot; &quot;9.0&quot; &quot;false&quot; &quot;false&quot; &quot;false&quot; &quot;LayoutMetadata&quot; &quot;8&quot; &quot;false&quot;</pre>

<p>With this, every time you select Build, GeneXus will execute this bat and copy the files to the corresponding folders.</p>

<p>Note: While copying, you may get errors you can ignore.</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
eg.:
error: File not found - GXCF_*.config
error: File not found - *.rpt
%0d</pre>

<h3><a id="See+Also" class="HashLink" href="#See+Also">See Also</a></h3>

<ul>
	<li><a href='https://www.genexus.com/developers/websac?es,,,45866'>https://www.genexus.com/developers/websac?es,,,45866</a> for improvements as of <a href="https://wiki.genexus.com/commwiki/wiki?43978,," target="_blank">GeneXus 16 upgrade 6</a></li>
	<li><a href='https://www.genexus.com/developers/websac?es,,,31319'>https://www.genexus.com/developers/websac?es,,,31319</a> for more details </li>
</ul>

<p></p>

<p></p>

<p></p>
<br />   <br /></div><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="21382.html">Manually configuring Tomcat</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 08/10/21 07:34 PM</em></font></td></TR></table></font>