<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Query Object Usage Example</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?33991,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Query Object Usage Example</h1>
<!--Query Object Usage Example--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>The objective of this document is to provide a detailed list of steps required to use the <a href="9026.html">Query object</a> and <a href="9075.html">QueryViewer control</a>.</p>

<p>This example is based on the reality of a Travel Agency and includes concepts such as Countries, Cities, Attractions, Tickets, Airports and more.</p>

<p>Many scenarios can be solved by using a <a href="9026.html">Query object</a>, so let's focus on solving the following problem: knowing the number of attractions in France and Brazil.</p>

<p><strong>Note:</strong> It is assumed that you have read the <a href="9026.html">Query object</a> and <a href="9075.html">QueryViewer control</a> documents, and that you're familiar with basic concepts such as the query object structure.</p>

<p>Experience more QueryViewer functionalities with the <a href="https://wiki.genexus.com/commwiki/wiki?36747,," target="_blank">TestWebQueryViewer</a> KB sample.</p>

<h3><a id="Step-by-step+guide" class="HashLink" href="#Step-by-step+guide">Step-by-step guide</a></h3>

<h4><a id="1%29+Object+creation" class="HashLink" href="#1%29+Object+creation">1) Object creation</a></h4>

<p>Create a <a href="9026.html">Query object</a> called <em>AttractionsByCountry</em>.</p>

<p><img src="./images/32623.png" id="32623" class="WikiImage"/></p>

<h4><a id="2%29+Object+definition" class="HashLink" href="#2%29+Object+definition">2) Object definition</a></h4>

<p>To define the query's result, add attributes in the <em>Attributes</em> node under the <em>Structure</em> tab.</p>

<p>These attributes can be added in two ways: drag them from the <em>Work With Attributes</em> window to the query:</p>

<p><img src="./images/34013.png" id="34013" class="WikiImage"/></p>

<p>Or, write the attribute names inline.</p>

<p><img src="./images/34014.png" id="34014" class="WikiImage"/></p>

<p>Note that a suggested mechanism is available to make this task easier.</p>

<p>Use one method to include the following attributes in the query: <em>AttractionName </em>and <em>CountryName</em>.</p>

<h4><a id="3%29+Descriptions" class="HashLink" href="#3%29+Descriptions">3) Descriptions</a></h4>

<p>Once the attributes are under the <em>Attributes</em> node, check each <i>Description</i> column and set the descriptions: <em>Attractions</em> for <em>AttractionName</em> and <em>Countries</em> for <em>CountryName</em>.</p>

<p>Remember that descriptions are shown when the query is executed in the <em>Preview</em> tab or at runtime.</p>

<h4><a id="4%29+Aggregations" class="HashLink" href="#4%29+Aggregations">4) Aggregations</a></h4>

<p>To find out the number of attractions in each city, the <em>AttractionName</em> attribute must be defined as an aggregated formula.</p>

<p>Again, there are two ways to perform this action: right-clicking on the attribute and selecting the desired aggregation or typing the formula inline.</p>

<p>Note that the suggested mechanism, mentioned in the previous steps, also takes into account aggregation functions when suggesting elements to add to the query.</p>

<p>Using one method, include the <em>Count</em> aggregation to <em>AttractionName</em> attribute.</p>

<p><img src="./images/34015.png" id="34015" class="WikiImage"/></p>

<p>The result must be as follows:</p>

<p><img src="./images/34016.png" id="34016" class="WikiImage"/></p>

<h4><a id="5%29+Preview" class="HashLink" href="#5%29+Preview">5) Preview</a></h4>

<p>Sometimes, an early result of the query is very useful to find out if the desired result is displayed.</p>

<p>To do so, select the <em>Preview</em> tab and set the following property values:</p>

<ul>
	<li>Output Type = Chart</li>
	<li>Chart Type = Pie 3D</li>
</ul>

<p><img src="./images/34017.png" id="34017" class="WikiImage"/></p>

<h4><a id="6%29+Filters" class="HashLink" href="#6%29+Filters">6) Filters</a></h4>

<p>Suppose that we want to see only the values related to France and Brazil in the query result.</p>

<p>To achieve this, define the filter <em>CountryName</em> in [France, Brazil] under the <em>Filters</em> node.</p>

<p>The filter can be written inline or can be set using the right-click options available in each level. The new query structure will look as shown below:</p>

<p><img src="./images/34018.png" id="34018" class="WikiImage"/></p>

<p>Return to the <i>Preview</i> section, and after a recalculation of the SQL statement needed, the new query result will be displayed.</p>

<h4><a id="7%29+QueryViewer" class="HashLink" href="#7%29+QueryViewer">7) QueryViewer</a></h4>

<p>So far, we have defined the query to execute. Now, we need to include it in the application to be visible for the users.</p>

<p>For a Query object to be run at runtime, it needs a special control called <a href="9075.html">QueryViewer control</a>. This control needs to be dragged to a Web Panel object.</p>

<p>So, create a Web Panel object called <em>AttractionsQuantityByCountry.</em></p>

<p><img src="./images/34019.png" id="34019" class="WikiImage"/></p>

<p>And drag the QueryViewer control from the toolbar.</p>

<p><img src="./images/34020.png" id="34020" class="WikiImage"/></p>

<p>Next, we need to set the control properties, so configure the <i>Object</i> property with the value <em>AttractionsByCountry</em>.</p>

<p><img src="./images/34021.png" id="34021" class="WikiImage"/></p>

<h4><a id="8%29+Execution" class="HashLink" href="#8%29+Execution">8) Execution</a></h4>

<p>The final step is to display the query at runtime. To do so, run the application (F5) and open the Web Panel. At runtime, it will look as shown in the figure below:</p>

<p><img src="./images/34022.png" id="34022" class="WikiImage"/></p>

<p><br />
<br />
<br />
</p>
<br /></td></tr></tbody></table><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="25314.html">Toc:Reporting in GeneXus</a></TD></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 07/31/20 01:20 PM</em></font></td></TR></table></font>