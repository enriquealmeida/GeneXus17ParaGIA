<!DOCTYPE html>
<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="./images/WikiTheme2.css"/>
<link rel="stylesheet" type="text/css" href="./images/bootstrap.min.css"/>
<title>Chatbot generator</title>
</head>
<body bgcolor="#FFFFFF" style="display: block;margin: 8px;"><span id="W0004BODY" class="WikiBody"><table border=0 width=100%><tr><td><div align="right"><FONT face=Verdana size=2><a href =https://wiki.genexus.com/commwiki/wiki?37102,, target=_"blank">Newest Version</a></FONT></div></td></tr></table><h1 class="WikiName">Chatbot generator</h1>
<!--Chatbot generator--><table class="TableWikiBody" id="tblwikibody"><tbody><tr><td><p>The purpose of the Chatbot generator is to automatically build and deploy a chatbot to any of the supported Chatbot providers.</p>

<p>A Pattern called <a href="https://wiki.genexus.com/commwiki/wiki?38532,," target="_blank">Conversational Flows</a> exists under the Patterns node of the Preferences view in GeneXus.</p>

<p><ul><li><a class="HashLink" href="#%281%29+What+do+you+have+to+do+to+create+a+chatbot%3F"><span style="color: rgb(2,136,209);">(1) What do you have to do to create a chatbot?</span></a></li><li><a class="HashLink" href="#%282%29+What+is+generated+by+the+pattern%3F"><span style="color: rgb(2,136,209);">(2) What is generated by the pattern?</span></a></li><ul><li><a class="HashLink" href="#%282.1%29+Generated+objects+of+the+Pattern"><span style="color: rgb(2,136,209);">(2.1) Generated objects of the Pattern</span></a></li><li><a class="HashLink" href="#%282.2%29+Resources+of+the+Pattern"><span style="color: rgb(2,136,209);">(2.2) Resources of the Pattern</span></a></li></ul></li><li><a class="HashLink" href="#%283%29+External+Module+used+by+the+Pattern"><span style="color: rgb(2,136,209);">(3) External Module used by the Pattern</span></a></li><li><a class="HashLink" href="#%284%29+How+to+generate+your+bot"><span style="color: rgb(2,136,209);">(4) How to generate your bot</span></a></li><li><a class="HashLink" href="#%285%29+Connecting+to+the+Chatbot+Provider"><span style="color: rgb(2,136,209);">(5) Connecting to the Chatbot Provider</span></a></li><li><a class="HashLink" href="#%286%29+Requirements"><span style="color: rgb(2,136,209);">(6) Requirements</span></a></li></ul></ul></p>

<h3><a id="%281%29+What+do+you+have+to+do+to+create+a+chatbot%3F" class="HashLink" href="#%281%29+What+do+you+have+to+do+to+create+a+chatbot%3F"><span style="color: rgb(2,136,209);">(1) What do you have to do to create a chatbot?</span></a></h3>

<p>You have to define a <a href="37113.html">Conversational Flows object</a> to create your chatbot, and configure the least necessary settings: <a href="38931.html">NLP Provider property</a> and the Provider credentials depending on the AI provider you're using. See <a href="https://wiki.genexus.com/commwiki/wiki?37096,," target="_blank">Configuring GeneXus for using the Chatbot Generator</a>.</p>

<p><img src="./images/39232.png" id="39232" class="WikiImage"/></p>

<p>Then, define the <a href="38531.html">Flow of a Conversational instance</a> which set up the conversation.<br />
You can create as many instances as needed by your application. </p>

<h3><a id="%282%29+What+is+generated+by+the+pattern%3F" class="HashLink" href="#%282%29+What+is+generated+by+the+pattern%3F"><span style="color: rgb(2,136,209);">(2) What is generated by the pattern?</span></a></h3>

<p>To create a chatbot, you just need to design the model and the pattern will generate automatically all the objects needed to solve the conversation between the user and the <a href='http://en.wikipedia.org/wiki/Artificial_intelligence'>AI</a> provider. </p>

<p>The purpose of the objects generated by the chatbot generator pattern is to digest the messages received from the user and build the query to be sent to the <a href='https://en.wikipedia.org/wiki/Artificial_intelligence'>AI</a> provider. Then, the response is handled through a handler and the result is shown to the user. The result can be a text message or a GeneXus object with a graphical interface. See <a href="https://wiki.genexus.com/commwiki/wiki?38522,," target="_blank">Chatbots architecture</a>.</p>

<p>More specifically, when you select the <a href="40241.html">Force Chatbot Generation menu option</a> for the first time, a <a href="22414.html">module</a> is automatically created (you will have a module for each <a href="37113.html">Conversational Flows object</a> in the KB).<br />
This module contains the definition of all the objects automatically generated by the Chatbot generator.</p>

<p><img src="./images/39234.png" id="39234" class="WikiImage"/></p>

<p>In the <strong>Build </strong>process, the objects are generated if it is needed so (if the chatbot instance has changed so it's needed to generate new objects). All the objects of the instance are generated in that case.</p>

<h4><a id="%282.1%29+Generated+objects+of+the+Pattern" class="HashLink" href="#%282.1%29+Generated+objects+of+the+Pattern"><span style="color: rgb(2,136,209);">(2.1) Generated objects of the Pattern</span></a></h4>

<p><strong>Callers of the UI objects:</strong></p>

<p>In particular, the &lt;InstanceName&gt;WebUI object is a <a href="5770.html">Main</a> <a href="6916.html">Web Panel object</a> which calls the &quot;PanelChatWeb&quot; object. <br />
Similarly, the &lt;InstanceName&gt;SDUI object, calls the &quot;PanelChatSD&quot; object for the corresponding instance.</p>

<p><div style="background-color: rgb(242,242,242);border-left: 6.0px solid rgb(128,128,128);margin-bottom: 15.0px;padding: 4.0px 12.0px;"><b>Note</b>:  The way to call the PanelChatWeb or PanelChatSD is as follows.</div>
</p>

<pre class="prettyprint lang-genexus" style="max-width: 100%">
CommonChatbots.PanelChatWeb(!&quot;CitizenService&quot;) // The parameter is the instance name.</pre>

<p><strong>Handler object:</strong> The handler is the service that is responsible for &quot;routing&quot; the user's query to the procedure that was generated to comply with the intent to which it corresponds. The Handler is executed after the query is sent to the provider so that it has the necessary data to know where to redirect. It's a generated object.</p>

<p><img src="./images/39237.png" id="39237" class="WikiImage"/></p>

<p><strong>xxBot objects:</strong> These are the procedures to which the Handler &quot;routes&quot;. They take the name of the Conversational Object of the bot, plus &quot;bot&quot;. They are generated based on the defined flows. They know how to interpret the context to decide when they have to execute the conversational object associated with their flow (with the appropriate parameters).</p>

<p><strong>xxComponent &amp; xxComponentSD: </strong>These are the automatically generated components for flows that have a component type response (for Web and SD).</p>

<h4><a id="%282.2%29+Resources+of+the+Pattern" class="HashLink" href="#%282.2%29+Resources+of+the+Pattern"><span style="color: rgb(2,136,209);">(2.2) Resources of the Pattern</span></a></h4>

<p>Another module, called CommonChatbots is created which contains all the <a href="39998.html">pattern resources</a>. <br />
The resources are updated depending on what you configured in the <a href="40218.html">Keep Resources Updated property</a>. </p>

<p>In the <strong>Build </strong>process (only if the Conversational Flows instance has any change necessary to generate), and in the <strong>Generate Chatbot</strong> action, it is checked whether the resources have any change in comparison with the version of the resources that you have in the KB, and depending on the Keep Resources updated property, they are updated or not. </p>

<p>In sum, the pattern generates some objects, which are included in the module of the instance, and there are other objects (resources) that are in the &quot;CommonChatbots&quot; module. The last can be modified as you desire, as they are updated only if you configure the pattern settings to do so (<a href="40218.html">Keep Resources Updated property</a>).</p>

<h3><a id="%283%29+External+Module+used+by+the+Pattern" class="HashLink" href="#%283%29+External+Module+used+by+the+Pattern"><span style="color: rgb(2,136,209);">(3) External Module used by the Pattern</span></a></h3>

<p>The pattern uses an external <a href="22414.html">Module</a> where the services which interact with the AI API are defined. It contains the necessary services to communicate with the different providers.</p>

<p>The Chatbot module is automatically installed in the KB, when you create a <a href="37113.html">Conversational Flows object</a>. You can check if it's installed (and updated) going through the menu &quot;Knowledge Manager &gt; Manage Module References&quot;. It is automatically updated in the Build process and through the <strong>Generate Chatbot</strong> action when it's necessary to do it (when it isn't updated in the KB).</p>

<p><img src="./images/42977.PNG" id="42977" class="WikiImage"/></p>

<p>The module contents are those procedures and SDT's exposed to be used by the GeneXus user (e.g.:<a href="https://wiki.genexus.com/commwiki/wiki?39302,," target="_blank">SendEntityValues</a>) procedure.<br />
<br />
On the AI provider side, the pattern generates the Intents, Entities, and the Dialog to set up the conversation. See <a href="https://wiki.genexus.com/commwiki/wiki?38532,," target="_blank">Conversational Flows pattern settings</a> for more information.</p>

<h3><a id="%284%29+How+to+generate+your+bot" class="HashLink" href="#%284%29+How+to+generate+your+bot"><span style="color: rgb(2,136,209);">(4) How to generate your bot</span></a></h3>

<p><strong>Saving the instance:</strong></p>

<p>When you save the instance, the dialog is synchronized to the Provider to update the conversational model.</p>

<p>The Chatbot generator generates a JSON file located under the model's directory: &lt;KB_Directory&gt;\Model\bot\. This JSON file is POST to the Provider, to create or update the Workspace. This is done when you save the instance, or when you execute the <a href="40243.html">Synchronize Chatbot menu option</a>.</p>

<p><img alt="enlightened" height="23" src="https://wiki.genexus.com/commwiki/static/CKEditor/ckeditor/plugins/smiley/images/lightbulb.png" title="enlightened" width="23" /> There are many changes of the instance that do not require a Build. For example, if you only add a <a href="39067.html">Trigger Messages</a> for example, it's enough to save the instance!</p>

<p><strong>Building:</strong></p>

<p>In the Build process, the pattern instance is refreshed (the objects are generated), if it's needed so.</p>

<p><strong>Generate Chatbot action:</strong></p>

<p>See <a href="40241.html">Force Chatbot Generation menu option</a>.</p>

<h3><a id="%285%29+Connecting+to+the+Chatbot+Provider" class="HashLink" href="#%285%29+Connecting+to+the+Chatbot+Provider"><span style="color: rgb(2,136,209);">(5) Connecting to the Chatbot Provider</span></a></h3>

<p>The connection to the Chatbot Provider is done using the credentials given (this depends on the Provider).</p>

<p>An XML file called GXCF_Chatbots.config (it was called GXCF_&lt;InstanceName&gt;Chatbot.config prior to GeneXus 16 upgrade 7) is generated under the web directory, which contains the credentials to connect to the AI service at runtime. This file is generated when the instance is saved (or when you execute the <a href="40243.html">Synchronize Chatbot menu option</a>). It is also generated if it doesn't exist under the web directory when you build the application. In this case, Genexus doesn't connect to the AI Provider to check the credentials configured at the instance.</p>

<p>Note: The following warning is displayed when the Chatbot provider's configuration is empty.<br />
Using Watson:<br />
<em>Warning: The user and password for the Watson conversation service are empty. The workspace is not going to be uploaded to Watson conversation.</em></p>

<p>Using DialogFlow:<br />
<em>Client Id for &lt;InstanceName&gt; Conversational Flows Instance is Empty.<br />
Client Secret for &lt;InstanceName&gt; Conversational Flows Instance is Empty.</em></p>

<h3><a id="%286%29+Requirements" class="HashLink" href="#%286%29+Requirements"><span style="color: rgb(2,136,209);">(6) Requirements</span></a></h3>

<p>In the case of Web Chatbots, check the <a href="27740.html">Web Notifications and Progress UC requirements</a> because Web notifications are used. The client does not wait for the server for a response, asynchronous calls are executed for a better user experience.</p>

<p></p>

<p></p>

<p></p>

<p></p>
<br />
<br />
</td></tr></tbody></table><script src="./images/run_prettify.js?lang=genexus"></script><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><TD><b>Backlinks</b></TD></TR><TR><TD><a href="46255.html">KB:Chatbot : handover to a human agent</a></TD></TR><TR><TD><a href="39998.html">Chatbot Generator resources update</a></TD><TD><a href="40098.html">Chatbot generator Try Live</a></TD></TR><TR><TD><a href="44072.html">Chatbots Channels API</a></TD><TD><a href="45899.html">Chatbots using WhatsApp: How to set up Botmaker</a></TD><TD><a href="44121.html">Chatbots using Whatsapp: How to set up Twilio</a></TD></TR><TR></TR><TR><TD><a href="39749.html">Configuring Google Dialogflow for the Chatbot Generator</a></TD><TD><a href="37113.html">Category:Conversational Flows object</a></TD><TD><a href="47955.html">Disambiguations</a></TD></TR><TR><TD><a href="40241.html">Force Chatbot Generation menu option</a></TD><TD><a href="46477.html">Generate On Save property</a></TD></TR><TR><TD><a href="40680.html">Generate UI property</a></TD><TD><a href="47442.html">Generate UI property (GeneXus 17)</a></TD><TD><a href="40211.html">Generate Web UI property</a></TD><TD><a href="39880.html">Generated Component property</a></TD></TR><TR><TD><a href="39884.html">Generated Web Component property</a></TD></TR><TR><TD><a href="41314.html">HowTo: Manage training examples using the Chatbot Generator API</a></TD><TD><a href="40912.html">HowTo: Send a message to the chatbot from a menu</a></TD></TR><TR><TD><a href="42971.html">HowTo: Send and receive a message from the Provider</a></TD><TD><a href="40218.html">Keep Resources Updated property</a></TD></TR><TR></TR></table>
</span></body>
</html><hr /><table id="Pages" class="Table" cellpadding="1" cellspacing="2" style=" width: 100%;" ><TR><td align="left"><font face="Verdana" size="1"><em>Source: <a href="https://wiki.genexus.com" target=_blank>wiki.genexus.com</a></em></font></td><td align="right"><font face="Verdana" size="1"><em>Last modification: 05/23/21 10:42 PM</em></font></td></TR></table></font>